var warp=(()=>{var k6=Object.create;var Us=Object.defineProperty;var L6=Object.getOwnPropertyDescriptor;var D6=Object.getOwnPropertyNames;var U6=Object.getPrototypeOf,q6=Object.prototype.hasOwnProperty;var j6=(r,e,t)=>e in r?Us(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var V=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),$6=(r,e)=>{for(var t in e)Us(r,t,{get:e[t],enumerable:!0})},Up=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of D6(e))!q6.call(r,i)&&i!==t&&Us(r,i,{get:()=>e[i],enumerable:!(n=L6(e,i))||n.enumerable});return r};var ct=(r,e,t)=>(t=r!=null?k6(U6(r)):{},Up(e||!r||!r.__esModule?Us(t,"default",{value:r,enumerable:!0}):t,r)),W6=r=>Up(Us({},"__esModule",{value:!0}),r);var qs=(r,e,t)=>(j6(r,typeof e!="symbol"?e+"":e,t),t);var $p=V(jp=>{"use strict";jp.supports=function(...e){let t=e.reduce((n,i)=>Object.assign(n,i),{});return Object.assign(t,{snapshots:t.snapshots||!1,permanence:t.permanence||!1,seek:t.seek||!1,clear:t.clear||!1,getMany:t.getMany||!1,keyIterator:t.keyIterator||!1,valueIterator:t.valueIterator||!1,iteratorNextv:t.iteratorNextv||!1,iteratorAll:t.iteratorAll||!1,status:t.status||!1,createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,deferredOpen:t.deferredOpen||!1,promises:t.promises||!1,streams:t.streams||!1,encodings:Object.assign({},t.encodings),events:Object.assign({},t.events),additionalMethods:Object.assign({},t.additionalMethods)})}});var or=V((dT,Wp)=>{"use strict";Wp.exports=class extends Error{constructor(e,t){super(e||""),typeof t=="object"&&t!==null&&(t.code&&(this.code=String(t.code)),t.expected&&(this.expected=!0),t.transient&&(this.transient=!0),t.cause&&(this.cause=t.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var Tf=V(Ff=>{"use strict";Ff.byteLength=K6;Ff.toByteArray=G6;Ff.fromByteArray=X6;var Lr=[],sr=[],H6=typeof Uint8Array<"u"?Uint8Array:Array,Xu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ai=0,Hp=Xu.length;Ai<Hp;++Ai)Lr[Ai]=Xu[Ai],sr[Xu.charCodeAt(Ai)]=Ai;var Ai,Hp;sr["-".charCodeAt(0)]=62;sr["_".charCodeAt(0)]=63;function Kp(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function K6(r){var e=Kp(r),t=e[0],n=e[1];return(t+n)*3/4-n}function z6(r,e,t){return(e+t)*3/4-t}function G6(r){var e,t=Kp(r),n=t[0],i=t[1],o=new H6(z6(r,n,i)),s=0,f=i>0?n-4:n,h;for(h=0;h<f;h+=4)e=sr[r.charCodeAt(h)]<<18|sr[r.charCodeAt(h+1)]<<12|sr[r.charCodeAt(h+2)]<<6|sr[r.charCodeAt(h+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=sr[r.charCodeAt(h)]<<2|sr[r.charCodeAt(h+1)]>>4,o[s++]=e&255),i===1&&(e=sr[r.charCodeAt(h)]<<10|sr[r.charCodeAt(h+1)]<<4|sr[r.charCodeAt(h+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function V6(r){return Lr[r>>18&63]+Lr[r>>12&63]+Lr[r>>6&63]+Lr[r&63]}function J6(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(V6(n));return i.join("")}function X6(r){for(var e,t=r.length,n=t%3,i=[],o=16383,s=0,f=t-n;s<f;s+=o)i.push(J6(r,s,s+o>f?f:s+o));return n===1?(e=r[t-1],i.push(Lr[e>>2]+Lr[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(Lr[e>>10]+Lr[e>>4&63]+Lr[e<<2&63]+"=")),i.join("")}});var zp=V(Yu=>{Yu.read=function(r,e,t,n,i){var o,s,f=i*8-n-1,h=(1<<f)-1,g=h>>1,_=-7,T=t?i-1:0,I=t?-1:1,x=r[e+T];for(T+=I,o=x&(1<<-_)-1,x>>=-_,_+=f;_>0;o=o*256+r[e+T],T+=I,_-=8);for(s=o&(1<<-_)-1,o>>=-_,_+=n;_>0;s=s*256+r[e+T],T+=I,_-=8);if(o===0)o=1-g;else{if(o===h)return s?NaN:(x?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-g}return(x?-1:1)*s*Math.pow(2,o-n)};Yu.write=function(r,e,t,n,i,o){var s,f,h,g=o*8-i-1,_=(1<<g)-1,T=_>>1,I=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=n?0:o-1,C=n?1:-1,j=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(f=isNaN(e)?1:0,s=_):(s=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-s))<1&&(s--,h*=2),s+T>=1?e+=I/h:e+=I*Math.pow(2,1-T),e*h>=2&&(s++,h/=2),s+T>=_?(f=0,s=_):s+T>=1?(f=(e*h-1)*Math.pow(2,i),s=s+T):(f=e*Math.pow(2,T-1)*Math.pow(2,i),s=0));i>=8;r[t+x]=f&255,x+=C,f/=256,i-=8);for(s=s<<i|f,g+=i;g>0;r[t+x]=s&255,x+=C,s/=256,g-=8);r[t+x-C]|=j*128}});var Cn=V(Mo=>{"use strict";var Qu=Tf(),Fo=zp(),Gp=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Mo.Buffer=oe;Mo.SlowBuffer=r3;Mo.INSPECT_MAX_BYTES=50;var Mf=2147483647;Mo.kMaxLength=Mf;oe.TYPED_ARRAY_SUPPORT=Y6();!oe.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Y6(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(oe.prototype,"parent",{enumerable:!0,get:function(){if(!!oe.isBuffer(this))return this.buffer}});Object.defineProperty(oe.prototype,"offset",{enumerable:!0,get:function(){if(!!oe.isBuffer(this))return this.byteOffset}});function nn(r){if(r>Mf)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,oe.prototype),e}function oe(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return rl(r)}return Yp(r,e,t)}oe.poolSize=8192;function Yp(r,e,t){if(typeof r=="string")return Z6(r,e);if(ArrayBuffer.isView(r))return e3(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(Dr(r,ArrayBuffer)||r&&Dr(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Dr(r,SharedArrayBuffer)||r&&Dr(r.buffer,SharedArrayBuffer)))return el(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return oe.from(n,e,t);let i=t3(r);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return oe.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}oe.from=function(r,e,t){return Yp(r,e,t)};Object.setPrototypeOf(oe.prototype,Uint8Array.prototype);Object.setPrototypeOf(oe,Uint8Array);function Qp(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function Q6(r,e,t){return Qp(r),r<=0?nn(r):e!==void 0?typeof t=="string"?nn(r).fill(e,t):nn(r).fill(e):nn(r)}oe.alloc=function(r,e,t){return Q6(r,e,t)};function rl(r){return Qp(r),nn(r<0?0:nl(r)|0)}oe.allocUnsafe=function(r){return rl(r)};oe.allocUnsafeSlow=function(r){return rl(r)};function Z6(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!oe.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=Zp(r,e)|0,n=nn(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function Zu(r){let e=r.length<0?0:nl(r.length)|0,t=nn(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function e3(r){if(Dr(r,Uint8Array)){let e=new Uint8Array(r);return el(e.buffer,e.byteOffset,e.byteLength)}return Zu(r)}function el(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,oe.prototype),n}function t3(r){if(oe.isBuffer(r)){let e=nl(r.length)|0,t=nn(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||ol(r.length)?nn(0):Zu(r);if(r.type==="Buffer"&&Array.isArray(r.data))return Zu(r.data)}function nl(r){if(r>=Mf)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Mf.toString(16)+" bytes");return r|0}function r3(r){return+r!=r&&(r=0),oe.alloc(+r)}oe.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==oe.prototype};oe.compare=function(e,t){if(Dr(e,Uint8Array)&&(e=oe.from(e,e.offset,e.byteLength)),Dr(t,Uint8Array)&&(t=oe.from(t,t.offset,t.byteLength)),!oe.isBuffer(e)||!oe.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};oe.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};oe.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return oe.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let i=oe.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let s=e[n];if(Dr(s,Uint8Array))o+s.length>i.length?(oe.isBuffer(s)||(s=oe.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(oe.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function Zp(r,e){if(oe.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||Dr(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return tl(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return fg(r).length;default:if(i)return n?-1:tl(r).length;e=(""+e).toLowerCase(),i=!0}}oe.byteLength=Zp;function n3(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return d3(this,e,t);case"utf8":case"utf-8":return tg(this,e,t);case"ascii":return l3(this,e,t);case"latin1":case"binary":return h3(this,e,t);case"base64":return c3(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p3(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}oe.prototype._isBuffer=!0;function Fi(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}oe.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)Fi(this,t,t+1);return this};oe.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)Fi(this,t,t+3),Fi(this,t+1,t+2);return this};oe.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)Fi(this,t,t+7),Fi(this,t+1,t+6),Fi(this,t+2,t+5),Fi(this,t+3,t+4);return this};oe.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?tg(this,0,e):n3.apply(this,arguments)};oe.prototype.toLocaleString=oe.prototype.toString;oe.prototype.equals=function(e){if(!oe.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:oe.compare(this,e)===0};oe.prototype.inspect=function(){let e="",t=Mo.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};Gp&&(oe.prototype[Gp]=oe.prototype.inspect);oe.prototype.compare=function(e,t,n,i,o){if(Dr(e,Uint8Array)&&(e=oe.from(e,e.offset,e.byteLength)),!oe.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,f=n-t,h=Math.min(s,f),g=this.slice(i,o),_=e.slice(t,n);for(let T=0;T<h;++T)if(g[T]!==_[T]){s=g[T],f=_[T];break}return s<f?-1:f<s?1:0};function eg(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,ol(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=oe.from(e,n)),oe.isBuffer(e))return e.length===0?-1:Vp(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):Vp(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function Vp(r,e,t,n,i){let o=1,s=r.length,f=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,s/=2,f/=2,t/=2}function h(_,T){return o===1?_[T]:_.readUInt16BE(T*o)}let g;if(i){let _=-1;for(g=t;g<s;g++)if(h(r,g)===h(e,_===-1?0:g-_)){if(_===-1&&(_=g),g-_+1===f)return _*o}else _!==-1&&(g-=g-_),_=-1}else for(t+f>s&&(t=s-f),g=t;g>=0;g--){let _=!0;for(let T=0;T<f;T++)if(h(r,g+T)!==h(e,T)){_=!1;break}if(_)return g}return-1}oe.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};oe.prototype.indexOf=function(e,t,n){return eg(this,e,t,n,!0)};oe.prototype.lastIndexOf=function(e,t,n){return eg(this,e,t,n,!1)};function i3(r,e,t,n){t=Number(t)||0;let i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let f=parseInt(e.substr(s*2,2),16);if(ol(f))return s;r[t+s]=f}return s}function o3(r,e,t,n){return If(tl(e,r.length-t),r,t,n)}function s3(r,e,t,n){return If(b3(e),r,t,n)}function a3(r,e,t,n){return If(fg(e),r,t,n)}function f3(r,e,t,n){return If(v3(e,r.length-t),r,t,n)}oe.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return i3(this,e,t,n);case"utf8":case"utf-8":return o3(this,e,t,n);case"ascii":case"latin1":case"binary":return s3(this,e,t,n);case"base64":return a3(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f3(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};oe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function c3(r,e,t){return e===0&&t===r.length?Qu.fromByteArray(r):Qu.fromByteArray(r.slice(e,t))}function tg(r,e,t){t=Math.min(r.length,t);let n=[],i=e;for(;i<t;){let o=r[i],s=null,f=o>239?4:o>223?3:o>191?2:1;if(i+f<=t){let h,g,_,T;switch(f){case 1:o<128&&(s=o);break;case 2:h=r[i+1],(h&192)===128&&(T=(o&31)<<6|h&63,T>127&&(s=T));break;case 3:h=r[i+1],g=r[i+2],(h&192)===128&&(g&192)===128&&(T=(o&15)<<12|(h&63)<<6|g&63,T>2047&&(T<55296||T>57343)&&(s=T));break;case 4:h=r[i+1],g=r[i+2],_=r[i+3],(h&192)===128&&(g&192)===128&&(_&192)===128&&(T=(o&15)<<18|(h&63)<<12|(g&63)<<6|_&63,T>65535&&T<1114112&&(s=T))}}s===null?(s=65533,f=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=f}return u3(n)}var Jp=4096;function u3(r){let e=r.length;if(e<=Jp)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=Jp));return t}function l3(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function h3(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function d3(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let i="";for(let o=e;o<t;++o)i+=w3[r[o]];return i}function p3(r,e,t){let n=r.slice(e,t),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}oe.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,oe.prototype),i};function mt(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}oe.prototype.readUintLE=oe.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||mt(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return i};oe.prototype.readUintBE=oe.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||mt(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i};oe.prototype.readUint8=oe.prototype.readUInt8=function(e,t){return e=e>>>0,t||mt(e,1,this.length),this[e]};oe.prototype.readUint16LE=oe.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||mt(e,2,this.length),this[e]|this[e+1]<<8};oe.prototype.readUint16BE=oe.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||mt(e,2,this.length),this[e]<<8|this[e+1]};oe.prototype.readUint32LE=oe.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||mt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};oe.prototype.readUint32BE=oe.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||mt(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};oe.prototype.readBigUInt64LE=In(function(e){e=e>>>0,To(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Ws(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});oe.prototype.readBigUInt64BE=In(function(e){e=e>>>0,To(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Ws(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});oe.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||mt(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};oe.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||mt(e,t,this.length);let i=t,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s};oe.prototype.readInt8=function(e,t){return e=e>>>0,t||mt(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};oe.prototype.readInt16LE=function(e,t){e=e>>>0,t||mt(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};oe.prototype.readInt16BE=function(e,t){e=e>>>0,t||mt(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};oe.prototype.readInt32LE=function(e,t){return e=e>>>0,t||mt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};oe.prototype.readInt32BE=function(e,t){return e=e>>>0,t||mt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};oe.prototype.readBigInt64LE=In(function(e){e=e>>>0,To(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Ws(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});oe.prototype.readBigInt64BE=In(function(e){e=e>>>0,To(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Ws(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});oe.prototype.readFloatLE=function(e,t){return e=e>>>0,t||mt(e,4,this.length),Fo.read(this,e,!0,23,4)};oe.prototype.readFloatBE=function(e,t){return e=e>>>0,t||mt(e,4,this.length),Fo.read(this,e,!1,23,4)};oe.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||mt(e,8,this.length),Fo.read(this,e,!0,52,8)};oe.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||mt(e,8,this.length),Fo.read(this,e,!1,52,8)};function Dt(r,e,t,n,i,o){if(!oe.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}oe.prototype.writeUintLE=oe.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let f=Math.pow(2,8*n)-1;Dt(this,e,t,n,f,0)}let o=1,s=0;for(this[t]=e&255;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n};oe.prototype.writeUintBE=oe.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let f=Math.pow(2,8*n)-1;Dt(this,e,t,n,f,0)}let o=n-1,s=1;for(this[t+o]=e&255;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n};oe.prototype.writeUint8=oe.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||Dt(this,e,t,1,255,0),this[t]=e&255,t+1};oe.prototype.writeUint16LE=oe.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Dt(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};oe.prototype.writeUint16BE=oe.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Dt(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};oe.prototype.writeUint32LE=oe.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Dt(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};oe.prototype.writeUint32BE=oe.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Dt(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function rg(r,e,t,n,i){ag(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,t}function ng(r,e,t,n,i){ag(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t+7]=o,o=o>>8,r[t+6]=o,o=o>>8,r[t+5]=o,o=o>>8,r[t+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=s,s=s>>8,r[t+2]=s,s=s>>8,r[t+1]=s,s=s>>8,r[t]=s,t+8}oe.prototype.writeBigUInt64LE=In(function(e,t=0){return rg(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});oe.prototype.writeBigUInt64BE=In(function(e,t=0){return ng(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});oe.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let h=Math.pow(2,8*n-1);Dt(this,e,t,n,h-1,-h)}let o=0,s=1,f=0;for(this[t]=e&255;++o<n&&(s*=256);)e<0&&f===0&&this[t+o-1]!==0&&(f=1),this[t+o]=(e/s>>0)-f&255;return t+n};oe.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let h=Math.pow(2,8*n-1);Dt(this,e,t,n,h-1,-h)}let o=n-1,s=1,f=0;for(this[t+o]=e&255;--o>=0&&(s*=256);)e<0&&f===0&&this[t+o+1]!==0&&(f=1),this[t+o]=(e/s>>0)-f&255;return t+n};oe.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||Dt(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};oe.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Dt(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};oe.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Dt(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};oe.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Dt(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};oe.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Dt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};oe.prototype.writeBigInt64LE=In(function(e,t=0){return rg(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});oe.prototype.writeBigInt64BE=In(function(e,t=0){return ng(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ig(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function og(r,e,t,n,i){return e=+e,t=t>>>0,i||ig(r,e,t,4,34028234663852886e22,-34028234663852886e22),Fo.write(r,e,t,n,23,4),t+4}oe.prototype.writeFloatLE=function(e,t,n){return og(this,e,t,!0,n)};oe.prototype.writeFloatBE=function(e,t,n){return og(this,e,t,!1,n)};function sg(r,e,t,n,i){return e=+e,t=t>>>0,i||ig(r,e,t,8,17976931348623157e292,-17976931348623157e292),Fo.write(r,e,t,n,52,8),t+8}oe.prototype.writeDoubleLE=function(e,t,n){return sg(this,e,t,!0,n)};oe.prototype.writeDoubleBE=function(e,t,n){return sg(this,e,t,!1,n)};oe.prototype.copy=function(e,t,n,i){if(!oe.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o};oe.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!oe.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{let s=oe.isBuffer(e)?e:oe.from(e,i),f=s.length;if(f===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%f]}return this};var Ao={};function il(r,e,t){Ao[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}il("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);il("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);il("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=Xp(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=Xp(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function Xp(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function g3(r,e,t){To(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&Ws(e,r.length-(t+1))}function ag(r,e,t,n,i,o){if(r>t||r<e){let s=typeof e=="bigint"?"n":"",f;throw o>3?e===0||e===BigInt(0)?f=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:f=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:f=`>= ${e}${s} and <= ${t}${s}`,new Ao.ERR_OUT_OF_RANGE("value",f,r)}g3(n,i,o)}function To(r,e){if(typeof r!="number")throw new Ao.ERR_INVALID_ARG_TYPE(e,"number",r)}function Ws(r,e,t){throw Math.floor(r)!==r?(To(r,t),new Ao.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new Ao.ERR_BUFFER_OUT_OF_BOUNDS:new Ao.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var y3=/[^+/0-9A-Za-z-_]/g;function m3(r){if(r=r.split("=")[0],r=r.trim().replace(y3,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function tl(r,e){e=e||1/0;let t,n=r.length,i=null,o=[];for(let s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function b3(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function v3(r,e){let t,n,i,o=[];for(let s=0;s<r.length&&!((e-=2)<0);++s)t=r.charCodeAt(s),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function fg(r){return Qu.toByteArray(m3(r))}function If(r,e,t,n){let i;for(i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function Dr(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function ol(r){return r!==r}var w3=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)e[n+i]=r[t]+r[i]}return e}();function In(r){return typeof BigInt>"u"?x3:r}function x3(){throw new Error("BigInt not supported")}});var al=V((bT,cg)=>{"use strict";var sl=null;cg.exports=function(){return sl===null&&(sl={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),sl}});var ul=V(ug=>{"use strict";var fl=or(),_3=new Set(["buffer","view","utf8"]),cl=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!_3.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new fl(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new fl(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new fl(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};ug.Encoding=cl});var pl=V(Cf=>{"use strict";var{Buffer:hl}=Cn()||{},{Encoding:dl}=ul(),S3=al(),Hs=class extends dl{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new Ks({encode:this.encode,decode:e=>this.decode(hl.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},Ks=class extends dl{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new Hs({encode:e=>{let t=this.encode(e);return hl.from(t.buffer,t.byteOffset,t.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},ll=class extends dl{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new Hs({encode:e=>hl.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:t}=S3();return new Ks({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(t.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};Cf.BufferFormat=Hs;Cf.ViewFormat=Ks;Cf.UTF8Format=ll});var pg=V(Ti=>{"use strict";var{Buffer:Ct}=Cn()||{Buffer:{isBuffer:()=>!1}},{textEncoder:hg,textDecoder:lg}=al()(),{BufferFormat:zs,ViewFormat:gl,UTF8Format:dg}=pl(),Bf=r=>r;Ti.utf8=new dg({encode:function(r){return Ct.isBuffer(r)?r.toString("utf8"):ArrayBuffer.isView(r)?lg.decode(r):String(r)},decode:Bf,name:"utf8",createViewTranscoder(){return new gl({encode:function(r){return ArrayBuffer.isView(r)?r:hg.encode(r)},decode:function(r){return lg.decode(r)},name:`${this.name}+view`})},createBufferTranscoder(){return new zs({encode:function(r){return Ct.isBuffer(r)?r:ArrayBuffer.isView(r)?Ct.from(r.buffer,r.byteOffset,r.byteLength):Ct.from(String(r),"utf8")},decode:function(r){return r.toString("utf8")},name:`${this.name}+buffer`})}});Ti.json=new dg({encode:JSON.stringify,decode:JSON.parse,name:"json"});Ti.buffer=new zs({encode:function(r){return Ct.isBuffer(r)?r:ArrayBuffer.isView(r)?Ct.from(r.buffer,r.byteOffset,r.byteLength):Ct.from(String(r),"utf8")},decode:Bf,name:"buffer",createViewTranscoder(){return new gl({encode:function(r){return ArrayBuffer.isView(r)?r:Ct.from(String(r),"utf8")},decode:function(r){return Ct.from(r.buffer,r.byteOffset,r.byteLength)},name:`${this.name}+view`})}});Ti.view=new gl({encode:function(r){return ArrayBuffer.isView(r)?r:hg.encode(r)},decode:Bf,name:"view",createBufferTranscoder(){return new zs({encode:function(r){return Ct.isBuffer(r)?r:ArrayBuffer.isView(r)?Ct.from(r.buffer,r.byteOffset,r.byteLength):Ct.from(String(r),"utf8")},decode:Bf,name:`${this.name}+buffer`})}});Ti.hex=new zs({encode:function(r){return Ct.isBuffer(r)?r:Ct.from(String(r),"hex")},decode:function(r){return r.toString("hex")},name:"hex"});Ti.base64=new zs({encode:function(r){return Ct.isBuffer(r)?r:Ct.from(String(r),"base64")},decode:function(r){return r.toString("base64")},name:"base64"})});var mg=V(yg=>{"use strict";var gg=or(),Rf=pg(),{Encoding:E3}=ul(),{BufferFormat:A3,ViewFormat:F3,UTF8Format:T3}=pl(),Gs=Symbol("formats"),Of=Symbol("encodings"),M3=new Set(["buffer","view","utf8"]),yl=class{constructor(e){if(Array.isArray(e)){if(!e.every(t=>M3.has(t)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[Of]=new Map,this[Gs]=new Set(e);for(let t in Rf)try{this.encoding(t)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[Of].values()))}encoding(e){let t=this[Of].get(e);if(t===void 0){if(typeof e=="string"&&e!==""){if(t=O3[e],!t)throw new gg(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");t=I3(e)}let{name:n,format:i}=t;if(!this[Gs].has(i))if(this[Gs].has("view"))t=t.createViewTranscoder();else if(this[Gs].has("buffer"))t=t.createBufferTranscoder();else if(this[Gs].has("utf8"))t=t.createUTF8Transcoder();else throw new gg(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let o of[e,n,t.name,t.commonName])this[Of].set(o,t)}return t}};yg.Transcoder=yl;function I3(r){if(r instanceof E3)return r;let e="type"in r&&typeof r.type=="string"?r.type:void 0,t=r.name||e||`anonymous-${R3++}`;switch(C3(r)){case"view":return new F3({...r,name:t});case"utf8":return new T3({...r,name:t});case"buffer":return new A3({...r,name:t});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function C3(r){return"format"in r&&r.format!==void 0?r.format:"buffer"in r&&typeof r.buffer=="boolean"?r.buffer?"buffer":"utf8":"code"in r&&Number.isInteger(r.code)?"view":"buffer"}var B3={binary:Rf.buffer,"utf-8":Rf.utf8},O3={...Rf,...B3},R3=0});var Mg=V((ST,ml)=>{"use strict";var Io=typeof Reflect=="object"?Reflect:null,bg=Io&&typeof Io.apply=="function"?Io.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},Pf;Io&&typeof Io.ownKeys=="function"?Pf=Io.ownKeys:Object.getOwnPropertySymbols?Pf=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Pf=function(e){return Object.getOwnPropertyNames(e)};function P3(r){console&&console.warn&&console.warn(r)}var wg=Number.isNaN||function(e){return e!==e};function Ye(){Ye.init.call(this)}ml.exports=Ye;ml.exports.once=D3;Ye.EventEmitter=Ye;Ye.prototype._events=void 0;Ye.prototype._eventsCount=0;Ye.prototype._maxListeners=void 0;var vg=10;function Nf(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(Ye,"defaultMaxListeners",{enumerable:!0,get:function(){return vg},set:function(r){if(typeof r!="number"||r<0||wg(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");vg=r}});Ye.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ye.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||wg(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function xg(r){return r._maxListeners===void 0?Ye.defaultMaxListeners:r._maxListeners}Ye.prototype.getMaxListeners=function(){return xg(this)};Ye.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var f=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw f.context=s,f}var h=o[e];if(h===void 0)return!1;if(typeof h=="function")bg(h,this,t);else for(var g=h.length,_=Fg(h,g),n=0;n<g;++n)bg(_[n],this,t);return!0};function _g(r,e,t,n){var i,o,s;if(Nf(t),o=r._events,o===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),s=o[e]),s===void 0)s=o[e]=t,++r._eventsCount;else if(typeof s=="function"?s=o[e]=n?[t,s]:[s,t]:n?s.unshift(t):s.push(t),i=xg(r),i>0&&s.length>i&&!s.warned){s.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=r,f.type=e,f.count=s.length,P3(f)}return r}Ye.prototype.addListener=function(e,t){return _g(this,e,t,!1)};Ye.prototype.on=Ye.prototype.addListener;Ye.prototype.prependListener=function(e,t){return _g(this,e,t,!0)};function N3(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Sg(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=N3.bind(n);return i.listener=t,n.wrapFn=i,i}Ye.prototype.once=function(e,t){return Nf(t),this.on(e,Sg(this,e,t)),this};Ye.prototype.prependOnceListener=function(e,t){return Nf(t),this.prependListener(e,Sg(this,e,t)),this};Ye.prototype.removeListener=function(e,t){var n,i,o,s,f;if(Nf(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){f=n[s].listener,o=s;break}if(o<0)return this;o===0?n.shift():k3(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,f||t)}return this};Ye.prototype.off=Ye.prototype.removeListener;Ye.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function Eg(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?L3(i):Fg(i,i.length)}Ye.prototype.listeners=function(e){return Eg(this,e,!0)};Ye.prototype.rawListeners=function(e){return Eg(this,e,!1)};Ye.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):Ag.call(r,e)};Ye.prototype.listenerCount=Ag;function Ag(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Ye.prototype.eventNames=function(){return this._eventsCount>0?Pf(this._events):[]};function Fg(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function k3(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function L3(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function D3(r,e){return new Promise(function(t,n){function i(s){r.removeListener(e,o),n(s)}function o(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}Tg(r,e,o,{once:!0}),e!=="error"&&U3(r,i,{once:!0})})}function U3(r,e,t){typeof r.on=="function"&&Tg(r,"error",e,t)}function Tg(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(o){n.once&&r.removeEventListener(e,i),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}});var Cg=V((ET,Ig)=>{Ig.exports=typeof queueMicrotask=="function"?queueMicrotask:r=>Promise.resolve().then(r)});var Vs=V(bl=>{"use strict";var Bg=Cg();bl.fromCallback=function(r,e){if(r===void 0){var t=new Promise(function(n,i){r=function(o,s){o?i(o):n(s)}});r[e!==void 0?e:"promise"]=t}else if(typeof r!="function")throw new TypeError("Callback must be a function");return r};bl.fromPromise=function(r,e){if(e===void 0)return r;r.then(function(t){Bg(()=>e(null,t))}).catch(function(t){Bg(()=>e(t))})}});var kf=V(vl=>{"use strict";vl.getCallback=function(r,e){return typeof r=="function"?r:e};vl.getOptions=function(r,e){return typeof r=="object"&&r!==null?r:e!==void 0?e:{}}});var kn=V(qf=>{"use strict";var{fromCallback:wl}=Vs(),zt=or(),{getOptions:xl,getCallback:Og}=kf(),Mi=Symbol("promise"),Co=Symbol("callback"),Ur=Symbol("working"),Ii=Symbol("handleOne"),on=Symbol("handleMany"),_l=Symbol("autoClose"),Pn=Symbol("finishWork"),qr=Symbol("returnMany"),Bn=Symbol("closing"),Js=Symbol("handleClose"),Lf=Symbol("closed"),Xs=Symbol("closeCallbacks"),Rn=Symbol("keyEncoding"),Ci=Symbol("valueEncoding"),Sl=Symbol("abortOnClose"),Df=Symbol("legacy"),El=Symbol("keys"),Al=Symbol("values"),On=Symbol("limit"),ar=Symbol("count"),Uf=Object.freeze({}),q3=()=>{},Rg=!1,Ys=class{constructor(e,t,n){if(typeof e!="object"||e===null){let i=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${i}`)}if(typeof t!="object"||t===null)throw new TypeError("The second argument must be an options object");this[Lf]=!1,this[Xs]=[],this[Ur]=!1,this[Bn]=!1,this[_l]=!1,this[Co]=null,this[Ii]=this[Ii].bind(this),this[on]=this[on].bind(this),this[Js]=this[Js].bind(this),this[Rn]=t[Rn],this[Ci]=t[Ci],this[Df]=n,this[On]=Number.isInteger(t.limit)&&t.limit>=0?t.limit:1/0,this[ar]=0,this[Sl]=!!t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[ar]}get limit(){return this[On]}next(e){let t;if(e===void 0)t=new Promise((n,i)=>{e=(o,s,f)=>{o?i(o):this[Df]?s===void 0&&f===void 0?n():n([s,f]):n(s)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[Bn]?this.nextTick(e,new zt("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ur]?this.nextTick(e,new zt("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Ur]=!0,this[Co]=e,this[ar]>=this[On]?this.nextTick(this[Ii],null):this._next(this[Ii])),t}_next(e){this.nextTick(e)}nextv(e,t,n){return n=Og(t,n),n=wl(n,Mi),t=xl(t,Uf),Number.isInteger(e)?(this[Bn]?this.nextTick(n,new zt("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ur]?this.nextTick(n,new zt("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[On]<1/0&&(e=Math.min(e,this[On]-this[ar])),this[Ur]=!0,this[Co]=n,e<=0?this.nextTick(this[on],null,[]):this._nextv(e,t,this[on])),n[Mi]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[Mi])}_nextv(e,t,n){let i=[],o=(s,f,h)=>{if(s)return n(s);if(this[Df]?f===void 0&&h===void 0:f===void 0)return n(null,i);i.push(this[Df]?[f,h]:f),i.length===e?n(null,i):this._next(o)};this._next(o)}all(e,t){return t=Og(e,t),t=wl(t,Mi),e=xl(e,Uf),this[Bn]?this.nextTick(t,new zt("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ur]?this.nextTick(t,new zt("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Ur]=!0,this[Co]=t,this[_l]=!0,this[ar]>=this[On]?this.nextTick(this[on],null,[]):this._all(e,this[on])),t[Mi]}_all(e,t){let n=this[ar],i=[],o=()=>{let f=this[On]<1/0?Math.min(1e3,this[On]-n):1e3;f<=0?this.nextTick(t,null,i):this._nextv(f,Uf,s)},s=(f,h)=>{f?t(f):h.length===0?t(null,i):(i.push.apply(i,h),n+=h.length,o())};o()}[Pn](){let e=this[Co];return this[Sl]&&e===null?q3:(this[Ur]=!1,this[Co]=null,this[Bn]&&this._close(this[Js]),e)}[qr](e,t,n){this[_l]?this.close(e.bind(null,t,n)):e(t,n)}seek(e,t){if(t=xl(t,Uf),!this[Bn]){if(this[Ur])throw new zt("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let n=this.db.keyEncoding(t.keyEncoding||this[Rn]),i=n.format;t.keyEncoding!==i&&(t={...t,keyEncoding:i});let o=this.db.prefixKey(n.encode(e),i);this._seek(o,t)}}}_seek(e,t){throw new zt("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=wl(e,Mi),this[Lf]?this.nextTick(e):this[Bn]?this[Xs].push(e):(this[Bn]=!0,this[Xs].push(e),this[Ur]?this[Sl]&&this[Pn]()(new zt("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[Js])),e[Mi]}_close(e){this.nextTick(e)}[Js](){this[Lf]=!0,this.db.detachResource(this);let e=this[Xs];this[Xs]=[];for(let t of e)t()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[Lf]||await this.close()}}},Bo=class extends Ys{constructor(e,t){super(e,t,!0),this[El]=t.keys!==!1,this[Al]=t.values!==!1}[Ii](e,t,n){let i=this[Pn]();if(e)return i(e);try{t=this[El]&&t!==void 0?this[Rn].decode(t):void 0,n=this[Al]&&n!==void 0?this[Ci].decode(n):void 0}catch(o){return i(new Nn("entry",o))}t===void 0&&n===void 0||this[ar]++,i(null,t,n)}[on](e,t){let n=this[Pn]();if(e)return this[qr](n,e);try{for(let i of t){let o=i[0],s=i[1];i[0]=this[El]&&o!==void 0?this[Rn].decode(o):void 0,i[1]=this[Al]&&s!==void 0?this[Ci].decode(s):void 0}}catch(i){return this[qr](n,new Nn("entries",i))}this[ar]+=t.length,this[qr](n,null,t)}end(e){return!Rg&&typeof console<"u"&&(Rg=!0,console.warn(new zt("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},Fl=class extends Ys{constructor(e,t){super(e,t,!1)}[Ii](e,t){let n=this[Pn]();if(e)return n(e);try{t=t!==void 0?this[Rn].decode(t):void 0}catch(i){return n(new Nn("key",i))}t!==void 0&&this[ar]++,n(null,t)}[on](e,t){let n=this[Pn]();if(e)return this[qr](n,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[Rn].decode(o):void 0}}catch(i){return this[qr](n,new Nn("keys",i))}this[ar]+=t.length,this[qr](n,null,t)}},Tl=class extends Ys{constructor(e,t){super(e,t,!1)}[Ii](e,t){let n=this[Pn]();if(e)return n(e);try{t=t!==void 0?this[Ci].decode(t):void 0}catch(i){return n(new Nn("value",i))}t!==void 0&&this[ar]++,n(null,t)}[on](e,t){let n=this[Pn]();if(e)return this[qr](n,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[Ci].decode(o):void 0}}catch(i){return this[qr](n,new Nn("values",i))}this[ar]+=t.length,this[qr](n,null,t)}},Nn=class extends zt{constructor(e,t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:t})}};for(let r of["_ended property","_nexting property","_end method"])Object.defineProperty(Bo.prototype,r.split(" ")[0],{get(){throw new zt(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new zt(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})}});Bo.keyEncoding=Rn;Bo.valueEncoding=Ci;qf.AbstractIterator=Bo;qf.AbstractKeyIterator=Fl;qf.AbstractValueIterator=Tl});var Pg=V(Ml=>{"use strict";var{AbstractKeyIterator:j3,AbstractValueIterator:$3}=kn(),Bi=Symbol("iterator"),Qs=Symbol("callback"),Oo=Symbol("handleOne"),Oi=Symbol("handleMany"),Zs=class extends j3{constructor(e,t){super(e,t),this[Bi]=e.iterator({...t,keys:!0,values:!1}),this[Oo]=this[Oo].bind(this),this[Oi]=this[Oi].bind(this)}},jf=class extends $3{constructor(e,t){super(e,t),this[Bi]=e.iterator({...t,keys:!1,values:!0}),this[Oo]=this[Oo].bind(this),this[Oi]=this[Oi].bind(this)}};for(let r of[Zs,jf]){let e=r===Zs,t=e?n=>n[0]:n=>n[1];r.prototype._next=function(n){this[Qs]=n,this[Bi].next(this[Oo])},r.prototype[Oo]=function(n,i,o){let s=this[Qs];n?s(n):s(null,e?i:o)},r.prototype._nextv=function(n,i,o){this[Qs]=o,this[Bi].nextv(n,i,this[Oi])},r.prototype._all=function(n,i){this[Qs]=i,this[Bi].all(n,this[Oi])},r.prototype[Oi]=function(n,i){let o=this[Qs];n?o(n):o(null,i.map(t))},r.prototype._seek=function(n,i){this[Bi].seek(n,i)},r.prototype._close=function(n){this[Bi].close(n)}}Ml.DefaultKeyIterator=Zs;Ml.DefaultValueIterator=jf});var Ng=V(Gf=>{"use strict";var{AbstractIterator:W3,AbstractKeyIterator:H3,AbstractValueIterator:K3}=kn(),Il=or(),Ut=Symbol("nut"),Kf=Symbol("undefer"),zf=Symbol("factory"),$f=class extends W3{constructor(e,t){super(e,t),this[Ut]=null,this[zf]=()=>e.iterator(t),this.db.defer(()=>this[Kf]())}},Wf=class extends H3{constructor(e,t){super(e,t),this[Ut]=null,this[zf]=()=>e.keys(t),this.db.defer(()=>this[Kf]())}},Hf=class extends K3{constructor(e,t){super(e,t),this[Ut]=null,this[zf]=()=>e.values(t),this.db.defer(()=>this[Kf]())}};for(let r of[$f,Wf,Hf])r.prototype[Kf]=function(){this.db.status==="open"&&(this[Ut]=this[zf]())},r.prototype._next=function(e){this[Ut]!==null?this[Ut].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new Il("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._nextv=function(e,t,n){this[Ut]!==null?this[Ut].nextv(e,t,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,t,n)):this.nextTick(n,new Il("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._all=function(e,t){this[Ut]!==null?this[Ut].all(t):this.db.status==="opening"?this.db.defer(()=>this._all(e,t)):this.nextTick(t,new Il("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._seek=function(e,t){this[Ut]!==null?this[Ut]._seek(e,t):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,t))},r.prototype._close=function(e){this[Ut]!==null?this[Ut].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};Gf.DeferredIterator=$f;Gf.DeferredKeyIterator=Wf;Gf.DeferredValueIterator=Hf});var Bl=V(Lg=>{"use strict";var{fromCallback:kg}=Vs(),Vf=or(),{getCallback:z3,getOptions:G3}=kf(),Jf=Symbol("promise"),fr=Symbol("status"),Ro=Symbol("operations"),ea=Symbol("finishClose"),Po=Symbol("closeCallbacks"),Cl=class{constructor(e){if(typeof e!="object"||e===null){let t=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${t}`)}this[Ro]=[],this[Po]=[],this[fr]="open",this[ea]=this[ea].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[Ro].length}put(e,t,n){if(this[fr]!=="open")throw new Vf("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let i=this.db._checkKey(e)||this.db._checkValue(t);if(i)throw i;let o=n&&n.sublevel!=null?n.sublevel:this.db,s=n,f=o.keyEncoding(n&&n.keyEncoding),h=o.valueEncoding(n&&n.valueEncoding),g=f.format;n={...n,keyEncoding:g,valueEncoding:h.format},o!==this.db&&(n.sublevel=null);let _=o.prefixKey(f.encode(e),g),T=h.encode(t);return this._put(_,T,n),this[Ro].push({...s,type:"put",key:e,value:t}),this}_put(e,t,n){}del(e,t){if(this[fr]!=="open")throw new Vf("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let n=this.db._checkKey(e);if(n)throw n;let i=t&&t.sublevel!=null?t.sublevel:this.db,o=t,s=i.keyEncoding(t&&t.keyEncoding),f=s.format;return t={...t,keyEncoding:f},i!==this.db&&(t.sublevel=null),this._del(i.prefixKey(s.encode(e),f),t),this[Ro].push({...o,type:"del",key:e}),this}_del(e,t){}clear(){if(this[fr]!=="open")throw new Vf("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[Ro]=[],this}_clear(){}write(e,t){return t=z3(e,t),t=kg(t,Jf),e=G3(e),this[fr]!=="open"?this.nextTick(t,new Vf("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(t):(this[fr]="writing",this._write(e,n=>{this[fr]="closing",this[Po].push(()=>t(n)),n||this.db.emit("batch",this[Ro]),this._close(this[ea])})),t[Jf]}_write(e,t){}close(e){return e=kg(e,Jf),this[fr]==="closing"?this[Po].push(e):this[fr]==="closed"?this.nextTick(e):(this[Po].push(e),this[fr]!=="writing"&&(this[fr]="closing",this._close(this[ea]))),e[Jf]}_close(e){this.nextTick(e)}[ea](){this[fr]="closed",this.db.detachResource(this);let e=this[Po];this[Po]=[];for(let t of e)t()}};Lg.AbstractChainedBatch=Cl});var Ug=V(Dg=>{"use strict";var{AbstractChainedBatch:V3}=Bl(),J3=or(),No=Symbol("encoded"),Ol=class extends V3{constructor(e){super(e),this[No]=[]}_put(e,t,n){this[No].push({...n,type:"put",key:e,value:t})}_del(e,t){this[No].push({...t,type:"del",key:e})}_clear(){this[No]=[]}_write(e,t){this.db.status==="opening"?this.db.defer(()=>this._write(e,t)):this.db.status==="open"?this[No].length===0?this.nextTick(t):this.db._batch(this[No],e,t):this.nextTick(t,new J3("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};Dg.DefaultChainedBatch=Ol});var $g=V((OT,jg)=>{"use strict";var qg=or(),X3=Object.prototype.hasOwnProperty,Y3=new Set(["lt","lte","gt","gte"]);jg.exports=function(r,e){let t={};for(let n in r)if(!!X3.call(r,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new qg(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new qg("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});Y3.has(n)?t[n]=e.encode(r[n]):t[n]=r[n]}return t.reverse=!!t.reverse,t.limit=Number.isInteger(t.limit)&&t.limit>=0?t.limit:-1,t}});var Rl=V((RT,Hg)=>{var Wg;Hg.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):r=>(Wg||(Wg=Promise.resolve())).then(r).catch(e=>setTimeout(()=>{throw e},0))});var Gg=V((PT,zg)=>{"use strict";var Kg=Rl();zg.exports=function(r,...e){e.length===0?Kg(r):Kg(()=>r(...e))}});var Vg=V(Xf=>{"use strict";var{AbstractIterator:Q3,AbstractKeyIterator:Z3,AbstractValueIterator:e4}=kn(),ko=Symbol("unfix"),Sr=Symbol("iterator"),Ri=Symbol("handleOne"),Ln=Symbol("handleMany"),sn=Symbol("callback"),ta=class extends Q3{constructor(e,t,n,i){super(e,t),this[Sr]=n,this[ko]=i,this[Ri]=this[Ri].bind(this),this[Ln]=this[Ln].bind(this),this[sn]=null}[Ri](e,t,n){let i=this[sn];if(e)return i(e);t!==void 0&&(t=this[ko](t)),i(e,t,n)}[Ln](e,t){let n=this[sn];if(e)return n(e);for(let i of t){let o=i[0];o!==void 0&&(i[0]=this[ko](o))}n(e,t)}},ra=class extends Z3{constructor(e,t,n,i){super(e,t),this[Sr]=n,this[ko]=i,this[Ri]=this[Ri].bind(this),this[Ln]=this[Ln].bind(this),this[sn]=null}[Ri](e,t){let n=this[sn];if(e)return n(e);t!==void 0&&(t=this[ko](t)),n(e,t)}[Ln](e,t){let n=this[sn];if(e)return n(e);for(let i=0;i<t.length;i++){let o=t[i];o!==void 0&&(t[i]=this[ko](o))}n(e,t)}},na=class extends e4{constructor(e,t,n){super(e,t),this[Sr]=n}};for(let r of[ta,ra])r.prototype._next=function(e){this[sn]=e,this[Sr].next(this[Ri])},r.prototype._nextv=function(e,t,n){this[sn]=n,this[Sr].nextv(e,t,this[Ln])},r.prototype._all=function(e,t){this[sn]=t,this[Sr].all(e,this[Ln])};for(let r of[na])r.prototype._next=function(e){this[Sr].next(e)},r.prototype._nextv=function(e,t,n){this[Sr].nextv(e,t,n)},r.prototype._all=function(e,t){this[Sr].all(e,t)};for(let r of[ta,ra,na])r.prototype._seek=function(e,t){this[Sr].seek(e,t)},r.prototype._close=function(e){this[Sr].close(e)};Xf.AbstractSublevelIterator=ta;Xf.AbstractSublevelKeyIterator=ra;Xf.AbstractSublevelValueIterator=na});var Qg=V((kT,Yg)=>{"use strict";var Pl=or(),{Buffer:Ll}=Cn()||{},{AbstractSublevelIterator:t4,AbstractSublevelKeyIterator:r4,AbstractSublevelValueIterator:n4}=Vg(),an=Symbol("prefix"),Jg=Symbol("upperBound"),ia=Symbol("prefixRange"),Gt=Symbol("parent"),Nl=Symbol("unfix"),Xg=new TextEncoder,i4={separator:"!"};Yg.exports=function({AbstractLevel:r}){class e extends r{static defaults(n){if(typeof n=="string")throw new Pl("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(n&&n.open)throw new Pl("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return n==null?i4:n.separator?n:{...n,separator:"!"}}constructor(n,i,o){let{separator:s,manifest:f,...h}=e.defaults(o);i=s4(i,s);let g=s.charCodeAt(0)+1,_=n[Gt]||n;if(!Xg.encode(i).every(x=>x>g&&x<127))throw new Pl(`Prefix must use bytes > ${g} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(o4(_,f),h);let T=(n.prefix||"")+s+i+s,I=T.slice(0,-1)+String.fromCharCode(g);this[Gt]=_,this[an]=new Yf(T),this[Jg]=new Yf(I),this[Nl]=new Dl,this.nextTick=_.nextTick}prefixKey(n,i){if(i==="utf8")return this[an].utf8+n;if(n.byteLength===0)return this[an][i];if(i==="view"){let o=this[an].view,s=new Uint8Array(o.byteLength+n.byteLength);return s.set(o,0),s.set(n,o.byteLength),s}else{let o=this[an].buffer;return Ll.concat([o,n],o.byteLength+n.byteLength)}}[ia](n,i){n.gte!==void 0?n.gte=this.prefixKey(n.gte,i):n.gt!==void 0?n.gt=this.prefixKey(n.gt,i):n.gte=this[an][i],n.lte!==void 0?n.lte=this.prefixKey(n.lte,i):n.lt!==void 0?n.lt=this.prefixKey(n.lt,i):n.lte=this[Jg][i]}get prefix(){return this[an].utf8}get db(){return this[Gt]}_open(n,i){this[Gt].open({passive:!0},i)}_put(n,i,o,s){this[Gt].put(n,i,o,s)}_get(n,i,o){this[Gt].get(n,i,o)}_getMany(n,i,o){this[Gt].getMany(n,i,o)}_del(n,i,o){this[Gt].del(n,i,o)}_batch(n,i,o){this[Gt].batch(n,i,o)}_clear(n,i){this[ia](n,n.keyEncoding),this[Gt].clear(n,i)}_iterator(n){this[ia](n,n.keyEncoding);let i=this[Gt].iterator(n),o=this[Nl].get(this[an].utf8.length,n.keyEncoding);return new t4(this,n,i,o)}_keys(n){this[ia](n,n.keyEncoding);let i=this[Gt].keys(n),o=this[Nl].get(this[an].utf8.length,n.keyEncoding);return new r4(this,n,i,o)}_values(n){this[ia](n,n.keyEncoding);let i=this[Gt].values(n);return new n4(this,n,i)}}return{AbstractSublevel:e}};var o4=function(r,e){return{...r.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:kl(r,"utf8"),buffer:kl(r,"buffer"),view:kl(r,"view")}}},kl=function(r,e){return r.supports.encodings[e]?r.keyEncoding(e).name===e:!1},Yf=class{constructor(e){this.utf8=e,this.view=Xg.encode(e),this.buffer=Ll?Ll.from(this.view.buffer,0,this.view.byteLength):{}}},Dl=class{constructor(){this.cache=new Map}get(e,t){let n=this.cache.get(t);return n===void 0&&(t==="view"?n=function(i,o){return o.subarray(i)}.bind(null,e):n=function(i,o){return o.slice(i)}.bind(null,e),this.cache.set(t,n)),n}},s4=function(r,e){let t=0,n=r.length;for(;t<n&&r[t]===e;)t++;for(;n>t&&r[n-1]===e;)n--;return r.slice(t,n)}});var Wl=V($l=>{"use strict";var{supports:a4}=$p(),{Transcoder:f4}=mg(),{EventEmitter:c4}=Mg(),{fromCallback:Dn}=Vs(),Er=or(),{AbstractIterator:Pi}=kn(),{DefaultKeyIterator:u4,DefaultValueIterator:l4}=Pg(),{DeferredIterator:h4,DeferredKeyIterator:d4,DeferredValueIterator:p4}=Ng(),{DefaultChainedBatch:Zg}=Ug(),{getCallback:Ni,getOptions:Un}=kf(),Qf=$g(),qe=Symbol("promise"),fn=Symbol("landed"),ki=Symbol("resources"),Ul=Symbol("closeResources"),oa=Symbol("operations"),sa=Symbol("undefer"),Zf=Symbol("deferOpen"),e1=Symbol("options"),We=Symbol("status"),Li=Symbol("defaultOptions"),Lo=Symbol("transcoder"),ec=Symbol("keyEncoding"),ql=Symbol("valueEncoding"),g4=()=>{},aa=class extends c4{constructor(e,t){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");t=Un(t);let{keyEncoding:n,valueEncoding:i,passive:o,...s}=t;this[ki]=new Set,this[oa]=[],this[Zf]=!0,this[e1]=s,this[We]="opening",this.supports=a4(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[Lo]=new f4(y4(this)),this[ec]=this[Lo].encoding(n||"utf8"),this[ql]=this[Lo].encoding(i||"utf8");for(let f of this[Lo].encodings())this.supports.encodings[f.commonName]||(this.supports.encodings[f.commonName]=!0);this[Li]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[ec].commonName,valueEncoding:this[ql].commonName}),key:Object.freeze({keyEncoding:this[ec].commonName})},this.nextTick(()=>{this[Zf]&&this.open({passive:!1},g4)})}get status(){return this[We]}keyEncoding(e){return this[Lo].encoding(e??this[ec])}valueEncoding(e){return this[Lo].encoding(e??this[ql])}open(e,t){t=Ni(e,t),t=Dn(t,qe),e={...this[e1],...Un(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let n=i=>{this[We]==="closing"||this[We]==="opening"?this.once(fn,i?()=>n(i):n):this[We]!=="open"?t(new Er("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:i})):t()};return e.passive?this[We]==="opening"?this.once(fn,n):this.nextTick(n):this[We]==="closed"||this[Zf]?(this[Zf]=!1,this[We]="opening",this.emit("opening"),this._open(e,i=>{if(i){this[We]="closed",this[Ul](()=>{this.emit(fn),n(i)}),this[sa]();return}this[We]="open",this[sa](),this.emit(fn),this[We]==="open"&&this.emit("open"),this[We]==="open"&&this.emit("ready"),n()})):this[We]==="open"?this.nextTick(n):this.once(fn,()=>this.open(e,t)),t[qe]}_open(e,t){this.nextTick(t)}close(e){e=Dn(e,qe);let t=n=>{this[We]==="opening"||this[We]==="closing"?this.once(fn,n?t(n):t):this[We]!=="closed"?e(new Er("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[We]==="open"){this[We]="closing",this.emit("closing");let n=i=>{this[We]="open",this[sa](),this.emit(fn),t(i)};this[Ul](()=>{this._close(i=>{if(i)return n(i);this[We]="closed",this[sa](),this.emit(fn),this[We]==="closed"&&this.emit("closed"),t()})})}else this[We]==="closed"?this.nextTick(t):this.once(fn,()=>this.close(e));return e[qe]}[Ul](e){if(this[ki].size===0)return this.nextTick(e);let t=this[ki].size,n=!0,i=()=>{--t===0&&(n?this.nextTick(e):e())};for(let o of this[ki])o.close(i);n=!1,this[ki].clear()}_close(e){this.nextTick(e)}get(e,t,n){if(n=Ni(t,n),n=Dn(n,qe),t=Un(t,this[Li].entry),this[We]==="opening")return this.defer(()=>this.get(e,t,n)),n[qe];if(Do(this,n))return n[qe];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[qe];let o=this.keyEncoding(t.keyEncoding),s=this.valueEncoding(t.valueEncoding),f=o.format,h=s.format;return(t.keyEncoding!==f||t.valueEncoding!==h)&&(t=Object.assign({},t,{keyEncoding:f,valueEncoding:h})),this._get(this.prefixKey(o.encode(e),f),t,(g,_)=>{if(g)return(g.code==="LEVEL_NOT_FOUND"||g.notFound||/NotFound/i.test(g))&&(g.code||(g.code="LEVEL_NOT_FOUND"),g.notFound||(g.notFound=!0),g.status||(g.status=404)),n(g);try{_=s.decode(_)}catch(T){return n(new Er("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:T}))}n(null,_)}),n[qe]}_get(e,t,n){this.nextTick(n,new Error("NotFound"))}getMany(e,t,n){if(n=Ni(t,n),n=Dn(n,qe),t=Un(t,this[Li].entry),this[We]==="opening")return this.defer(()=>this.getMany(e,t,n)),n[qe];if(Do(this,n))return n[qe];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[qe];if(e.length===0)return this.nextTick(n,null,[]),n[qe];let i=this.keyEncoding(t.keyEncoding),o=this.valueEncoding(t.valueEncoding),s=i.format,f=o.format;(t.keyEncoding!==s||t.valueEncoding!==f)&&(t=Object.assign({},t,{keyEncoding:s,valueEncoding:f}));let h=new Array(e.length);for(let g=0;g<e.length;g++){let _=e[g],T=this._checkKey(_);if(T)return this.nextTick(n,T),n[qe];h[g]=this.prefixKey(i.encode(_),s)}return this._getMany(h,t,(g,_)=>{if(g)return n(g);try{for(let T=0;T<_.length;T++)_[T]!==void 0&&(_[T]=o.decode(_[T]))}catch(T){return n(new Er(`Could not decode one or more of ${_.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:T}))}n(null,_)}),n[qe]}_getMany(e,t,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,t,n,i){if(i=Ni(n,i),i=Dn(i,qe),n=Un(n,this[Li].entry),this[We]==="opening")return this.defer(()=>this.put(e,t,n,i)),i[qe];if(Do(this,i))return i[qe];let o=this._checkKey(e)||this._checkValue(t);if(o)return this.nextTick(i,o),i[qe];let s=this.keyEncoding(n.keyEncoding),f=this.valueEncoding(n.valueEncoding),h=s.format,g=f.format;(n.keyEncoding!==h||n.valueEncoding!==g)&&(n=Object.assign({},n,{keyEncoding:h,valueEncoding:g}));let _=this.prefixKey(s.encode(e),h),T=f.encode(t);return this._put(_,T,n,I=>{if(I)return i(I);this.emit("put",e,t),i()}),i[qe]}_put(e,t,n,i){this.nextTick(i)}del(e,t,n){if(n=Ni(t,n),n=Dn(n,qe),t=Un(t,this[Li].key),this[We]==="opening")return this.defer(()=>this.del(e,t,n)),n[qe];if(Do(this,n))return n[qe];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[qe];let o=this.keyEncoding(t.keyEncoding),s=o.format;return t.keyEncoding!==s&&(t=Object.assign({},t,{keyEncoding:s})),this._del(this.prefixKey(o.encode(e),s),t,f=>{if(f)return n(f);this.emit("del",e),n()}),n[qe]}_del(e,t,n){this.nextTick(n)}batch(e,t,n){if(!arguments.length){if(this[We]==="opening")return new Zg(this);if(this[We]!=="open")throw new Er("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=Ni(t,n),n=Dn(n,qe),t=Un(t,this[Li].empty),this[We]==="opening")return this.defer(()=>this.batch(e,t,n)),n[qe];if(Do(this,n))return n[qe];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[qe];if(e.length===0)return this.nextTick(n),n[qe];let i=new Array(e.length),{keyEncoding:o,valueEncoding:s,...f}=t;for(let h=0;h<e.length;h++){if(typeof e[h]!="object"||e[h]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[qe];let g=Object.assign({},e[h]);if(g.type!=="put"&&g.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[qe];let _=this._checkKey(g.key);if(_)return this.nextTick(n,_),n[qe];let T=g.sublevel!=null?g.sublevel:this,I=T.keyEncoding(g.keyEncoding||o),x=I.format;if(g.key=T.prefixKey(I.encode(g.key),x),g.keyEncoding=x,g.type==="put"){let C=this._checkValue(g.value);if(C)return this.nextTick(n,C),n[qe];let j=T.valueEncoding(g.valueEncoding||s);g.value=j.encode(g.value),g.valueEncoding=j.format}T!==this&&(g.sublevel=null),i[h]=g}return this._batch(i,f,h=>{if(h)return n(h);this.emit("batch",e),n()}),n[qe]}_batch(e,t,n){this.nextTick(n)}sublevel(e,t){return this._sublevel(e,jl.defaults(t))}_sublevel(e,t){return new jl(this,e,t)}prefixKey(e,t){return e}clear(e,t){if(t=Ni(e,t),t=Dn(t,qe),e=Un(e,this[Li].empty),this[We]==="opening")return this.defer(()=>this.clear(e,t)),t[qe];if(Do(this,t))return t[qe];let n=e,i=this.keyEncoding(e.keyEncoding);return e=Qf(e,i),e.keyEncoding=i.format,e.limit===0?this.nextTick(t):this._clear(e,o=>{if(o)return t(o);this.emit("clear",n),t()}),t[qe]}_clear(e,t){this.nextTick(t)}iterator(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Qf(e,t),e.keys=e.keys!==!1,e.values=e.values!==!1,e[Pi.keyEncoding]=t,e[Pi.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[We]==="opening")return new h4(this,e);if(this[We]!=="open")throw new Er("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new Pi(this,e)}keys(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Qf(e,t),e[Pi.keyEncoding]=t,e[Pi.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[We]==="opening")return new d4(this,e);if(this[We]!=="open")throw new Er("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new u4(this,e)}values(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Qf(e,t),e[Pi.keyEncoding]=t,e[Pi.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[We]==="opening")return new p4(this,e);if(this[We]!=="open")throw new Er("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new l4(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[oa].push(e)}[sa](){if(this[oa].length===0)return;let e=this[oa];this[oa]=[];for(let t of e)t()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[ki].add(e)}detachResource(e){this[ki].delete(e)}_chainedBatch(){return new Zg(this)}_checkKey(e){if(e==null)return new Er("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new Er("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};aa.prototype.nextTick=Gg();var{AbstractSublevel:jl}=Qg()({AbstractLevel:aa});$l.AbstractLevel=aa;$l.AbstractSublevel=jl;var Do=function(r,e){return r[We]!=="open"?(r.nextTick(e,new Er("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},y4=function(r){return Object.keys(r.supports.encodings).filter(e=>!!r.supports.encodings[e])}});var tc=V(Di=>{"use strict";Di.AbstractLevel=Wl().AbstractLevel;Di.AbstractSublevel=Wl().AbstractSublevel;Di.AbstractIterator=kn().AbstractIterator;Di.AbstractKeyIterator=kn().AbstractKeyIterator;Di.AbstractValueIterator=kn().AbstractValueIterator;Di.AbstractChainedBatch=Bl().AbstractChainedBatch});var r1=V((UT,t1)=>{t1.exports=b4;var m4=Rl();function b4(r,e,t){if(typeof e!="number")throw new Error("second argument must be a Number");let n,i,o,s,f,h=!0,g;Array.isArray(r)?(n=[],o=i=r.length):(s=Object.keys(r),n={},o=i=s.length);function _(I){function x(){t&&t(I,n),t=null}h?m4(x):x()}function T(I,x,C){if(n[I]=C,x&&(f=!0),--o===0||x)_(x);else if(!f&&g<i){let j;s?(j=s[g],g+=1,r[j](function(H,z){T(j,H,z)})):(j=g,g+=1,r[j](function(H,z){T(j,H,z)}))}}g=e,o?s?s.some(function(I,x){return r[I](function(C,j){T(I,C,j)}),x===e-1}):r.some(function(I,x){return I(function(C,j){T(x,C,j)}),x===e-1}):_(null),h=!1}});var Hl=V((qT,n1)=>{"use strict";n1.exports=function(e){let t=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,i=e.gte===void 0,o=e.lte===void 0;return t!==void 0&&n!==void 0?IDBKeyRange.bound(t,n,i,o):t!==void 0?IDBKeyRange.lowerBound(t,i):n!==void 0?IDBKeyRange.upperBound(n,o):null}});var Kl=V((jT,i1)=>{"use strict";var v4=new TextEncoder;i1.exports=function(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):v4.encode(r)}});var c1=V(f1=>{"use strict";var{AbstractIterator:w4}=tc(),o1=Hl(),rc=Kl(),jr=Symbol("cache"),cn=Symbol("finished"),Vt=Symbol("options"),un=Symbol("currentOptions"),Ui=Symbol("position"),zl=Symbol("location"),Uo=Symbol("first"),s1={},Gl=class extends w4{constructor(e,t,n){super(e,n),this[jr]=[],this[cn]=this.limit===0,this[Vt]=n,this[un]={...n},this[Ui]=void 0,this[zl]=t,this[Uo]=!0}_nextv(e,t,n){if(this[Uo]=!1,this[cn])return this.nextTick(n,null,[]);if(this[jr].length>0)return e=Math.min(e,this[jr].length),this.nextTick(n,null,this[jr].splice(0,e));this[Ui]!==void 0&&(this[Vt].reverse?(this[un].lt=this[Ui],this[un].lte=void 0):(this[un].gt=this[Ui],this[un].gte=void 0));let i;try{i=o1(this[un])}catch{return this[cn]=!0,this.nextTick(n,null,[])}let o=this.db.db.transaction([this[zl]],"readonly"),s=o.objectStore(this[zl]),f=[];if(this[Vt].reverse){let h=!this[Vt].values&&s.openKeyCursor?"openKeyCursor":"openCursor";s[h](i,"prev").onsuccess=g=>{let _=g.target.result;if(_){let{key:T,value:I}=_;this[Ui]=T,f.push([this[Vt].keys&&T!==void 0?rc(T):void 0,this[Vt].values&&I!==void 0?rc(I):void 0]),f.length<e?_.continue():a1(o)}else this[cn]=!0}}else{let h,g,_=()=>{if(h===void 0||g===void 0)return;let T=Math.max(h.length,g.length);T===0||e===1/0?this[cn]=!0:this[Ui]=h[T-1],f.length=T;for(let I=0;I<T;I++){let x=h[I],C=g[I];f[I]=[this[Vt].keys&&x!==void 0?rc(x):void 0,this[Vt].values&&C!==void 0?rc(C):void 0]}a1(o)};this[Vt].keys||e<1/0?s.getAllKeys(i,e<1/0?e:void 0).onsuccess=T=>{h=T.target.result,_()}:(h=[],this.nextTick(_)),this[Vt].values?s.getAll(i,e<1/0?e:void 0).onsuccess=T=>{g=T.target.result,_()}:(g=[],this.nextTick(_))}o.onabort=()=>{n(o.error||new Error("aborted by user")),n=null},o.oncomplete=()=>{n(null,f),n=null}}_next(e){if(this[jr].length>0){let[t,n]=this[jr].shift();this.nextTick(e,null,t,n)}else if(this[cn])this.nextTick(e);else{let t=Math.min(100,this.limit-this.count);this[Uo]&&(this[Uo]=!1,t=1),this._nextv(t,s1,(n,i)=>{if(n)return e(n);this[jr]=i,this._next(e)})}}_all(e,t){this[Uo]=!1;let n=this[jr].splice(0,this[jr].length),i=this.limit-this.count-n.length;if(i<=0)return this.nextTick(t,null,n);this._nextv(i,s1,(o,s)=>{if(o)return t(o);n.length>0&&(s=n.concat(s)),t(null,s)})}_seek(e,t){this[Uo]=!0,this[jr]=[],this[cn]=!1,this[Ui]=void 0,this[un]={...this[Vt]};let n;try{n=o1(this[Vt])}catch{this[cn]=!0;return}n!==null&&!n.includes(e)?this[cn]=!0:this[Vt].reverse?this[un].lte=e:this[un].gte=e}};f1.Iterator=Gl;function a1(r){typeof r.commit=="function"&&r.commit()}});var l1=V((WT,u1)=>{"use strict";u1.exports=function(e,t,n,i,o){if(i.limit===0)return e.nextTick(o);let s=e.db.transaction([t],"readwrite"),f=s.objectStore(t),h=0;s.oncomplete=function(){o()},s.onabort=function(){o(s.error||new Error("aborted by user"))};let g=f.openKeyCursor?"openKeyCursor":"openCursor",_=i.reverse?"prev":"next";f[g](n,_).onsuccess=function(T){let I=T.target.result;I&&(f.delete(I.key).onsuccess=function(){(i.limit<=0||++h<i.limit)&&I.continue()})}}});var m1=V(y1=>{"use strict";var{AbstractLevel:x4}=tc(),h1=or(),_4=r1(),{fromCallback:S4}=Vs(),{Iterator:E4}=c1(),d1=Kl(),A4=l1(),F4=Hl(),g1="level-js-",fa=Symbol("idb"),Vl=Symbol("namePrefix"),ln=Symbol("location"),Jl=Symbol("version"),qi=Symbol("store"),ca=Symbol("onComplete"),p1=Symbol("promise"),nc=class extends x4{constructor(e,t,n){if(typeof t=="function"||typeof n=="function")throw new h1("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:i,version:o,...s}=t||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},s),typeof e!="string")throw new Error("constructor requires a location string argument");this[ln]=e,this[Vl]=i??g1,this[Jl]=parseInt(o||1,10),this[fa]=null}get location(){return this[ln]}get namePrefix(){return this[Vl]}get version(){return this[Jl]}get db(){return this[fa]}get type(){return"browser-level"}_open(e,t){let n=indexedDB.open(this[Vl]+this[ln],this[Jl]);n.onerror=function(){t(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[fa]=n.result,t()},n.onupgradeneeded=i=>{let o=i.target.result;o.objectStoreNames.contains(this[ln])||o.createObjectStore(this[ln])}}[qi](e){return this[fa].transaction([this[ln]],e).objectStore(this[ln])}[ca](e,t){let n=e.transaction;n.onabort=function(){t(n.error||new Error("aborted by user"))},n.oncomplete=function(){t(null,e.result)}}_get(e,t,n){let i=this[qi]("readonly"),o;try{o=i.get(e)}catch(s){return this.nextTick(n,s)}this[ca](o,function(s,f){if(s)return n(s);if(f===void 0)return n(new h1("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,d1(f))})}_getMany(e,t,n){let i=this[qi]("readonly"),o=e.map(s=>f=>{let h;try{h=i.get(s)}catch(g){return f(g)}h.onsuccess=()=>{let g=h.result;f(null,g===void 0?g:d1(g))},h.onerror=g=>{g.stopPropagation(),f(h.error)}});_4(o,16,n)}_del(e,t,n){let i=this[qi]("readwrite"),o;try{o=i.delete(e)}catch(s){return this.nextTick(n,s)}this[ca](o,n)}_put(e,t,n,i){let o=this[qi]("readwrite"),s;try{s=o.put(t,e)}catch(f){return this.nextTick(i,f)}this[ca](s,i)}_iterator(e){return new E4(this,this[ln],e)}_batch(e,t,n){let i=this[qi]("readwrite"),o=i.transaction,s=0,f;o.onabort=function(){n(f||o.error||new Error("aborted by user"))},o.oncomplete=function(){n()};function h(){let g=e[s++],_=g.key,T;try{T=g.type==="del"?i.delete(_):i.put(g.value,_)}catch(I){f=I,o.abort();return}s<e.length?T.onsuccess=h:typeof o.commit=="function"&&o.commit()}h()}_clear(e,t){let n,i;try{n=F4(e)}catch{return this.nextTick(t)}if(e.limit>=0)return A4(this,this[ln],n,e,t);try{let o=this[qi]("readwrite");i=n?o.delete(n):o.clear()}catch(o){return this.nextTick(t,o)}this[ca](i,t)}_close(e){this[fa].close(),this.nextTick(e)}};nc.destroy=function(r,e,t){typeof e=="function"&&(t=e,e=g1),t=S4(t,p1);let n=indexedDB.deleteDatabase(e+r);return n.onsuccess=function(){t()},n.onerror=function(i){t(i)},t[p1]};y1.BrowserLevel=nc});var v1=V(b1=>{b1.Level=m1().BrowserLevel});var _1=V((zT,x1)=>{"use strict";x1.exports=I4;var rt=0,Ve=1;function Jt(r,e,t,n,i,o){this._color=r,this.key=e,this.value=t,this.left=n,this.right=i,this._count=o}function $r(r){return new Jt(r._color,r.key,r.value,r.left,r.right,r._count)}function qn(r,e){return new Jt(r,e.key,e.value,e.left,e.right,e._count)}function ft(r){r._count=1+(r.left?r.left._count:0)+(r.right?r.right._count:0)}function jn(r,e){this._compare=r,this.root=e}var Rt=jn.prototype;Object.defineProperty(Rt,"keys",{get:function(){var r=[];return this.forEach(function(e,t){r.push(e)}),r}});Object.defineProperty(Rt,"values",{get:function(){var r=[];return this.forEach(function(e,t){r.push(t)}),r}});Object.defineProperty(Rt,"length",{get:function(){return this.root?this.root._count:0}});Rt.insert=function(r,e){for(var t=this._compare,n=this.root,i=[],o=[];n;){var s=t(r,n.key);i.push(n),o.push(s),s<=0?n=n.left:n=n.right}i.push(new Jt(rt,r,e,null,null,1));for(var f=i.length-2;f>=0;--f){var n=i[f];o[f]<=0?i[f]=new Jt(n._color,n.key,n.value,i[f+1],n.right,n._count+1):i[f]=new Jt(n._color,n.key,n.value,n.left,i[f+1],n._count+1)}for(var f=i.length-1;f>1;--f){var h=i[f-1],n=i[f];if(h._color===Ve||n._color===Ve)break;var g=i[f-2];if(g.left===h)if(h.left===n){var _=g.right;if(_&&_._color===rt)h._color=Ve,g.right=qn(Ve,_),g._color=rt,f-=1;else{if(g._color=rt,g.left=h.right,h._color=Ve,h.right=g,i[f-2]=h,i[f-1]=n,ft(g),ft(h),f>=3){var T=i[f-3];T.left===g?T.left=h:T.right=h}break}}else{var _=g.right;if(_&&_._color===rt)h._color=Ve,g.right=qn(Ve,_),g._color=rt,f-=1;else{if(h.right=n.left,g._color=rt,g.left=n.right,n._color=Ve,n.left=h,n.right=g,i[f-2]=n,i[f-1]=h,ft(g),ft(h),ft(n),f>=3){var T=i[f-3];T.left===g?T.left=n:T.right=n}break}}else if(h.right===n){var _=g.left;if(_&&_._color===rt)h._color=Ve,g.left=qn(Ve,_),g._color=rt,f-=1;else{if(g._color=rt,g.right=h.left,h._color=Ve,h.left=g,i[f-2]=h,i[f-1]=n,ft(g),ft(h),f>=3){var T=i[f-3];T.right===g?T.right=h:T.left=h}break}}else{var _=g.left;if(_&&_._color===rt)h._color=Ve,g.left=qn(Ve,_),g._color=rt,f-=1;else{if(h.left=n.right,g._color=rt,g.right=n.left,n._color=Ve,n.right=h,n.left=g,i[f-2]=n,i[f-1]=h,ft(g),ft(h),ft(n),f>=3){var T=i[f-3];T.right===g?T.right=n:T.left=n}break}}}return i[0]._color=Ve,new jn(t,i[0])};function Xl(r,e){if(e.left){var t=Xl(r,e.left);if(t)return t}var t=r(e.key,e.value);if(t)return t;if(e.right)return Xl(r,e.right)}function Yl(r,e,t,n){var i=e(r,n.key);if(i<=0){if(n.left){var o=Yl(r,e,t,n.left);if(o)return o}var o=t(n.key,n.value);if(o)return o}if(n.right)return Yl(r,e,t,n.right)}function Ql(r,e,t,n,i){var o=t(r,i.key),s=t(e,i.key),f;if(o<=0&&(i.left&&(f=Ql(r,e,t,n,i.left),f)||s>0&&(f=n(i.key,i.value),f)))return f;if(s>0&&i.right)return Ql(r,e,t,n,i.right)}Rt.forEach=function(e,t,n){if(!!this.root)switch(arguments.length){case 1:return Xl(e,this.root);case 2:return Yl(t,this._compare,e,this.root);case 3:return this._compare(t,n)>=0?void 0:Ql(t,n,this._compare,e,this.root)}};Object.defineProperty(Rt,"begin",{get:function(){for(var r=[],e=this.root;e;)r.push(e),e=e.left;return new Xt(this,r)}});Object.defineProperty(Rt,"end",{get:function(){for(var r=[],e=this.root;e;)r.push(e),e=e.right;return new Xt(this,r)}});Rt.at=function(r){if(r<0)return new Xt(this,[]);for(var e=this.root,t=[];;){if(t.push(e),e.left){if(r<e.left._count){e=e.left;continue}r-=e.left._count}if(!r)return new Xt(this,t);if(r-=1,e.right){if(r>=e.right._count)break;e=e.right}else break}return new Xt(this,[])};Rt.ge=function(r){for(var e=this._compare,t=this.root,n=[],i=0;t;){var o=e(r,t.key);n.push(t),o<=0&&(i=n.length),o<=0?t=t.left:t=t.right}return n.length=i,new Xt(this,n)};Rt.gt=function(r){for(var e=this._compare,t=this.root,n=[],i=0;t;){var o=e(r,t.key);n.push(t),o<0&&(i=n.length),o<0?t=t.left:t=t.right}return n.length=i,new Xt(this,n)};Rt.lt=function(r){for(var e=this._compare,t=this.root,n=[],i=0;t;){var o=e(r,t.key);n.push(t),o>0&&(i=n.length),o<=0?t=t.left:t=t.right}return n.length=i,new Xt(this,n)};Rt.le=function(r){for(var e=this._compare,t=this.root,n=[],i=0;t;){var o=e(r,t.key);n.push(t),o>=0&&(i=n.length),o<0?t=t.left:t=t.right}return n.length=i,new Xt(this,n)};Rt.find=function(r){for(var e=this._compare,t=this.root,n=[];t;){var i=e(r,t.key);if(n.push(t),i===0)return new Xt(this,n);i<=0?t=t.left:t=t.right}return new Xt(this,[])};Rt.remove=function(r){var e=this.find(r);return e?e.remove():this};Rt.get=function(r){for(var e=this._compare,t=this.root;t;){var n=e(r,t.key);if(n===0)return t.value;n<=0?t=t.left:t=t.right}};function Xt(r,e){this.tree=r,this._stack=e}var cr=Xt.prototype;Object.defineProperty(cr,"valid",{get:function(){return this._stack.length>0}});Object.defineProperty(cr,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0});cr.clone=function(){return new Xt(this.tree,this._stack.slice())};function w1(r,e){r.key=e.key,r.value=e.value,r.left=e.left,r.right=e.right,r._color=e._color,r._count=e._count}function T4(r){for(var e,t,n,i,o=r.length-1;o>=0;--o){if(e=r[o],o===0){e._color=Ve;return}if(t=r[o-1],t.left===e){if(n=t.right,n.right&&n.right._color===rt){if(n=t.right=$r(n),i=n.right=$r(n.right),t.right=n.left,n.left=t,n.right=i,n._color=t._color,e._color=Ve,t._color=Ve,i._color=Ve,ft(t),ft(n),o>1){var s=r[o-2];s.left===t?s.left=n:s.right=n}r[o-1]=n;return}else if(n.left&&n.left._color===rt){if(n=t.right=$r(n),i=n.left=$r(n.left),t.right=i.left,n.left=i.right,i.left=t,i.right=n,i._color=t._color,t._color=Ve,n._color=Ve,e._color=Ve,ft(t),ft(n),ft(i),o>1){var s=r[o-2];s.left===t?s.left=i:s.right=i}r[o-1]=i;return}if(n._color===Ve)if(t._color===rt){t._color=Ve,t.right=qn(rt,n);return}else{t.right=qn(rt,n);continue}else{if(n=$r(n),t.right=n.left,n.left=t,n._color=t._color,t._color=rt,ft(t),ft(n),o>1){var s=r[o-2];s.left===t?s.left=n:s.right=n}r[o-1]=n,r[o]=t,o+1<r.length?r[o+1]=e:r.push(e),o=o+2}}else{if(n=t.left,n.left&&n.left._color===rt){if(n=t.left=$r(n),i=n.left=$r(n.left),t.left=n.right,n.right=t,n.left=i,n._color=t._color,e._color=Ve,t._color=Ve,i._color=Ve,ft(t),ft(n),o>1){var s=r[o-2];s.right===t?s.right=n:s.left=n}r[o-1]=n;return}else if(n.right&&n.right._color===rt){if(n=t.left=$r(n),i=n.right=$r(n.right),t.left=i.right,n.right=i.left,i.right=t,i.left=n,i._color=t._color,t._color=Ve,n._color=Ve,e._color=Ve,ft(t),ft(n),ft(i),o>1){var s=r[o-2];s.right===t?s.right=i:s.left=i}r[o-1]=i;return}if(n._color===Ve)if(t._color===rt){t._color=Ve,t.left=qn(rt,n);return}else{t.left=qn(rt,n);continue}else{if(n=$r(n),t.left=n.right,n.right=t,n._color=t._color,t._color=rt,ft(t),ft(n),o>1){var s=r[o-2];s.right===t?s.right=n:s.left=n}r[o-1]=n,r[o]=t,o+1<r.length?r[o+1]=e:r.push(e),o=o+2}}}}cr.remove=function(){var r=this._stack;if(r.length===0)return this.tree;var e=new Array(r.length),t=r[r.length-1];e[e.length-1]=new Jt(t._color,t.key,t.value,t.left,t.right,t._count);for(var n=r.length-2;n>=0;--n){var t=r[n];t.left===r[n+1]?e[n]=new Jt(t._color,t.key,t.value,e[n+1],t.right,t._count):e[n]=new Jt(t._color,t.key,t.value,t.left,e[n+1],t._count)}if(t=e[e.length-1],t.left&&t.right){var i=e.length;for(t=t.left;t.right;)e.push(t),t=t.right;var o=e[i-1];e.push(new Jt(t._color,o.key,o.value,t.left,t.right,t._count)),e[i-1].key=t.key,e[i-1].value=t.value;for(var n=e.length-2;n>=i;--n)t=e[n],e[n]=new Jt(t._color,t.key,t.value,t.left,e[n+1],t._count);e[i-1].left=e[i]}if(t=e[e.length-1],t._color===rt){var s=e[e.length-2];s.left===t?s.left=null:s.right===t&&(s.right=null),e.pop();for(var n=0;n<e.length;++n)e[n]._count--;return new jn(this.tree._compare,e[0])}else if(t.left||t.right){t.left?w1(t,t.left):t.right&&w1(t,t.right),t._color=Ve;for(var n=0;n<e.length-1;++n)e[n]._count--;return new jn(this.tree._compare,e[0])}else{if(e.length===1)return new jn(this.tree._compare,null);for(var n=0;n<e.length;++n)e[n]._count--;var f=e[e.length-2];T4(e),f.left===t?f.left=null:f.right=null}return new jn(this.tree._compare,e[0])};Object.defineProperty(cr,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(cr,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(cr,"index",{get:function(){var r=0,e=this._stack;if(e.length===0){var t=this.tree.root;return t?t._count:0}else e[e.length-1].left&&(r=e[e.length-1].left._count);for(var n=e.length-2;n>=0;--n)e[n+1]===e[n].right&&(++r,e[n].left&&(r+=e[n].left._count));return r},enumerable:!0});cr.next=function(){var r=this._stack;if(r.length!==0){var e=r[r.length-1];if(e.right)for(e=e.right;e;)r.push(e),e=e.left;else for(r.pop();r.length>0&&r[r.length-1].right===e;)e=r[r.length-1],r.pop()}};Object.defineProperty(cr,"hasNext",{get:function(){var r=this._stack;if(r.length===0)return!1;if(r[r.length-1].right)return!0;for(var e=r.length-1;e>0;--e)if(r[e-1].left===r[e])return!0;return!1}});cr.update=function(r){var e=this._stack;if(e.length===0)throw new Error("Can't update empty node!");var t=new Array(e.length),n=e[e.length-1];t[t.length-1]=new Jt(n._color,n.key,r,n.left,n.right,n._count);for(var i=e.length-2;i>=0;--i)n=e[i],n.left===e[i+1]?t[i]=new Jt(n._color,n.key,n.value,t[i+1],n.right,n._count):t[i]=new Jt(n._color,n.key,n.value,n.left,t[i+1],n._count);return new jn(this.tree._compare,t[0])};cr.prev=function(){var r=this._stack;if(r.length!==0){var e=r[r.length-1];if(e.left)for(e=e.left;e;)r.push(e),e=e.right;else for(r.pop();r.length>0&&r[r.length-1].left===e;)e=r[r.length-1],r.pop()}};Object.defineProperty(cr,"hasPrev",{get:function(){var r=this._stack;if(r.length===0)return!1;if(r[r.length-1].left)return!0;for(var e=r.length-1;e>0;--e)if(r[e-1].right===r[e])return!0;return!1}});function M4(r,e){return r<e?-1:r>e?1:0}function I4(r){return new jn(r||M4,null)}});var T1=V(F1=>{"use strict";var{AbstractLevel:C4,AbstractIterator:B4,AbstractKeyIterator:O4,AbstractValueIterator:R4}=tc(),S1=or(),E1=_1(),P4=new Set(["gt","gte","lt","lte"]),hn=Symbol("none"),At=Symbol("tree"),ze=Symbol("iterator"),Yt=Symbol("lowerBound"),$n=Symbol("upperBound"),A1=Symbol("outOfRange"),ic=Symbol("reverse"),Zl=Symbol("options"),qt=Symbol("test"),ur=Symbol("advance"),cc=Symbol("init");function Wr(r,e){if(typeof r=="string")return r<e?-1:r>e?1:0;let t=Math.min(r.byteLength,e.byteLength);for(let n=0;n<t;n++){let i=r[n]-e[n];if(i!==0)return i}return r.byteLength-e.byteLength}function N4(r){return Wr(r,this[$n])>0}function k4(r){return Wr(r,this[$n])>=0}function L4(r){return Wr(r,this[$n])<0}function D4(r){return Wr(r,this[$n])<=0}var oc=class extends B4{constructor(e,t){super(e,t),this[cc](e[At],t)}_next(e){if(!this[ze].valid)return this.nextTick(e);let t=this[ze].key,n=this[ze].value;if(!this[qt](t))return this.nextTick(e);this[ze][this[ur]](),this.nextTick(e,null,t,n)}_nextv(e,t,n){let i=this[ze],o=[];for(;i.valid&&o.length<e&&this[qt](i.key);)o.push([i.key,i.value]),i[this[ur]]();this.nextTick(n,null,o)}_all(e,t){let n=this.limit-this.count,i=this[ze],o=[];for(;i.valid&&o.length<n&&this[qt](i.key);)o.push([i.key,i.value]),i[this[ur]]();this.nextTick(t,null,o)}},sc=class extends O4{constructor(e,t){super(e,t),this[cc](e[At],t)}_next(e){if(!this[ze].valid)return this.nextTick(e);let t=this[ze].key;if(!this[qt](t))return this.nextTick(e);this[ze][this[ur]](),this.nextTick(e,null,t)}_nextv(e,t,n){let i=this[ze],o=[];for(;i.valid&&o.length<e&&this[qt](i.key);)o.push(i.key),i[this[ur]]();this.nextTick(n,null,o)}_all(e,t){let n=this.limit-this.count,i=this[ze],o=[];for(;i.valid&&o.length<n&&this[qt](i.key);)o.push(i.key),i[this[ur]]();this.nextTick(t,null,o)}},ac=class extends R4{constructor(e,t){super(e,t),this[cc](e[At],t)}_next(e){if(!this[ze].valid)return this.nextTick(e);let t=this[ze].key,n=this[ze].value;if(!this[qt](t))return this.nextTick(e);this[ze][this[ur]](),this.nextTick(e,null,n)}_nextv(e,t,n){let i=this[ze],o=[];for(;i.valid&&o.length<e&&this[qt](i.key);)o.push(i.value),i[this[ur]]();this.nextTick(n,null,o)}_all(e,t){let n=this.limit-this.count,i=this[ze],o=[];for(;i.valid&&o.length<n&&this[qt](i.key);)o.push(i.value),i[this[ur]]();this.nextTick(t,null,o)}};for(let r of[oc,sc,ac])r.prototype[cc]=function(e,t){this[ic]=t.reverse,this[Zl]=t,this[ic]?(this[ur]="prev",this[Yt]="lte"in t?t.lte:"lt"in t?t.lt:hn,this[$n]="gte"in t?t.gte:"gt"in t?t.gt:hn,this[Yt]===hn?this[ze]=e.end:"lte"in t?this[ze]=e.le(this[Yt]):this[ze]=e.lt(this[Yt]),this[$n]!==hn&&(this[qt]="gte"in t?k4:N4)):(this[ur]="next",this[Yt]="gte"in t?t.gte:"gt"in t?t.gt:hn,this[$n]="lte"in t?t.lte:"lt"in t?t.lt:hn,this[Yt]===hn?this[ze]=e.begin:"gte"in t?this[ze]=e.ge(this[Yt]):this[ze]=e.gt(this[Yt]),this[$n]!==hn&&(this[qt]="lte"in t?D4:L4))},r.prototype[qt]=function(){return!0},r.prototype[A1]=function(e){return this[qt](e)?this[Yt]===hn?!1:this[ic]?"lte"in this[Zl]?Wr(e,this[Yt])>0:Wr(e,this[Yt])>=0:"gte"in this[Zl]?Wr(e,this[Yt])<0:Wr(e,this[Yt])<=0:!0},r.prototype._seek=function(e,t){this[A1](e)?(this[ze]=this[ze].tree.end,this[ze].next()):this[ic]?this[ze]=this[ze].tree.le(e):this[ze]=this[ze].tree.ge(e)};var fc=class extends C4{constructor(e,t,n){if(typeof e=="object"&&e!==null&&(t=e),typeof e=="function"||typeof t=="function"||typeof n=="function")throw new S1("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{storeEncoding:i,...o}=t||{};if(i=i||"buffer",!["buffer","view","utf8"].includes(i))throw new S1("The storeEncoding option must be 'buffer', 'view' or 'utf8'",{code:"LEVEL_ENCODING_NOT_SUPPORTED"});super({seek:!0,permanence:!1,createIfMissing:!1,errorIfExists:!1,encodings:{[i]:!0}},o),this[At]=E1(Wr)}_put(e,t,n,i){let o=this[At].find(e);o.valid?this[At]=o.update(t):this[At]=this[At].insert(e,t),this.nextTick(i)}_get(e,t,n){let i=this[At].get(e);if(typeof i>"u")return this.nextTick(n,new Error("NotFound"));this.nextTick(n,null,i)}_getMany(e,t,n){this.nextTick(n,null,e.map(i=>this[At].get(i)))}_del(e,t,n){this[At]=this[At].remove(e),this.nextTick(n)}_batch(e,t,n){let i=this[At];for(let o of e){let s=o.key,f=i.find(s);o.type==="put"?i=f.valid?f.update(o.value):i.insert(s,o.value):i=f.remove()}this[At]=i,this.nextTick(n)}_clear(e,t){if(e.limit===-1&&!Object.keys(e).some(U4))return this[At]=E1(Wr),this.nextTick(t);let n=this._keys({...e}),i=n.limit,o=0,s=()=>{for(let f=0;f<500;f++){if(++o>i||!n[ze].valid||!n[qt](n[ze].key))return t();this[At]=this[At].remove(n[ze].key),n[ze][n[ur]]()}this.nextTick(s)};this.nextTick(s)}_iterator(e){return new oc(this,e)}_keys(e){return new sc(this,e)}_values(e){return new ac(this,e)}};F1.MemoryLevel=fc;if(typeof process<"u"&&!process.browser&&typeof global<"u"&&typeof global.setImmediate=="function"){let r=global.setImmediate;fc.prototype.nextTick=function(e,...t){t.length===0?r(e):r(()=>e(...t))}}function U4(r){return P4.has(r)}});var eh=V((B1,uc)=>{(function(r){"use strict";var e,t=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,i=Math.floor,o="[BigNumber Error] ",s=o+"Number primitive has more than 15 significant digits: ",f=1e14,h=14,g=9007199254740991,_=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],T=1e7,I=1e9;function x(G){var q,J,Q,W=S.prototype={constructor:S,toString:null,valueOf:null},R=new S(1),l=20,b=4,d=-7,a=21,u=-1e7,v=1e7,E=!1,p=1,c=0,F={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},M="0123456789abcdefghijklmnopqrstuvwxyz",m=!0;function S(y,w){var A,k,P,N,D,B,O,L,U=this;if(!(U instanceof S))return new S(y,w);if(w==null){if(y&&y._isBigNumber===!0){U.s=y.s,!y.c||y.e>v?U.c=U.e=null:y.e<u?U.c=[U.e=0]:(U.e=y.e,U.c=y.c.slice());return}if((B=typeof y=="number")&&y*0==0){if(U.s=1/y<0?(y=-y,-1):1,y===~~y){for(N=0,D=y;D>=10;D/=10,N++);N>v?U.c=U.e=null:(U.e=N,U.c=[y]);return}L=String(y)}else{if(!t.test(L=String(y)))return Q(U,L,B);U.s=L.charCodeAt(0)==45?(L=L.slice(1),-1):1}(N=L.indexOf("."))>-1&&(L=L.replace(".","")),(D=L.search(/e/i))>0?(N<0&&(N=D),N+=+L.slice(D+1),L=L.substring(0,D)):N<0&&(N=L.length)}else{if(z(w,2,M.length,"Base"),w==10&&m)return U=new S(y),he(U,l+U.e+1,b);if(L=String(y),B=typeof y=="number"){if(y*0!=0)return Q(U,L,B,w);if(U.s=1/y<0?(L=L.slice(1),-1):1,S.DEBUG&&L.replace(/^0\.0*|\./,"").length>15)throw Error(s+y)}else U.s=L.charCodeAt(0)===45?(L=L.slice(1),-1):1;for(A=M.slice(0,w),N=D=0,O=L.length;D<O;D++)if(A.indexOf(k=L.charAt(D))<0){if(k=="."){if(D>N){N=O;continue}}else if(!P&&(L==L.toUpperCase()&&(L=L.toLowerCase())||L==L.toLowerCase()&&(L=L.toUpperCase()))){P=!0,D=-1,N=0;continue}return Q(U,String(y),B,w)}B=!1,L=J(L,w,10,U.s),(N=L.indexOf("."))>-1?L=L.replace(".",""):N=L.length}for(D=0;L.charCodeAt(D)===48;D++);for(O=L.length;L.charCodeAt(--O)===48;);if(L=L.slice(D,++O)){if(O-=D,B&&S.DEBUG&&O>15&&(y>g||y!==i(y)))throw Error(s+U.s*y);if((N=N-D-1)>v)U.c=U.e=null;else if(N<u)U.c=[U.e=0];else{if(U.e=N,U.c=[],D=(N+1)%h,N<0&&(D+=h),D<O){for(D&&U.c.push(+L.slice(0,D)),O-=h;D<O;)U.c.push(+L.slice(D,D+=h));D=h-(L=L.slice(D)).length}else D-=O;for(;D--;L+="0");U.c.push(+L)}}else U.c=[U.e=0]}S.clone=x,S.ROUND_UP=0,S.ROUND_DOWN=1,S.ROUND_CEIL=2,S.ROUND_FLOOR=3,S.ROUND_HALF_UP=4,S.ROUND_HALF_DOWN=5,S.ROUND_HALF_EVEN=6,S.ROUND_HALF_CEIL=7,S.ROUND_HALF_FLOOR=8,S.EUCLID=9,S.config=S.set=function(y){var w,A;if(y!=null)if(typeof y=="object"){if(y.hasOwnProperty(w="DECIMAL_PLACES")&&(A=y[w],z(A,0,I,w),l=A),y.hasOwnProperty(w="ROUNDING_MODE")&&(A=y[w],z(A,0,8,w),b=A),y.hasOwnProperty(w="EXPONENTIAL_AT")&&(A=y[w],A&&A.pop?(z(A[0],-I,0,w),z(A[1],0,I,w),d=A[0],a=A[1]):(z(A,-I,I,w),d=-(a=A<0?-A:A))),y.hasOwnProperty(w="RANGE"))if(A=y[w],A&&A.pop)z(A[0],-I,-1,w),z(A[1],1,I,w),u=A[0],v=A[1];else if(z(A,-I,I,w),A)u=-(v=A<0?-A:A);else throw Error(o+w+" cannot be zero: "+A);if(y.hasOwnProperty(w="CRYPTO"))if(A=y[w],A===!!A)if(A)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))E=A;else throw E=!A,Error(o+"crypto unavailable");else E=A;else throw Error(o+w+" not true or false: "+A);if(y.hasOwnProperty(w="MODULO_MODE")&&(A=y[w],z(A,0,9,w),p=A),y.hasOwnProperty(w="POW_PRECISION")&&(A=y[w],z(A,0,I,w),c=A),y.hasOwnProperty(w="FORMAT"))if(A=y[w],typeof A=="object")F=A;else throw Error(o+w+" not an object: "+A);if(y.hasOwnProperty(w="ALPHABET"))if(A=y[w],typeof A=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(A))m=A.slice(0,10)=="0123456789",M=A;else throw Error(o+w+" invalid: "+A)}else throw Error(o+"Object expected: "+y);return{DECIMAL_PLACES:l,ROUNDING_MODE:b,EXPONENTIAL_AT:[d,a],RANGE:[u,v],CRYPTO:E,MODULO_MODE:p,POW_PRECISION:c,FORMAT:F,ALPHABET:M}},S.isBigNumber=function(y){if(!y||y._isBigNumber!==!0)return!1;if(!S.DEBUG)return!0;var w,A,k=y.c,P=y.e,N=y.s;e:if({}.toString.call(k)=="[object Array]"){if((N===1||N===-1)&&P>=-I&&P<=I&&P===i(P)){if(k[0]===0){if(P===0&&k.length===1)return!0;break e}if(w=(P+1)%h,w<1&&(w+=h),String(k[0]).length==w){for(w=0;w<k.length;w++)if(A=k[w],A<0||A>=f||A!==i(A))break e;if(A!==0)return!0}}}else if(k===null&&P===null&&(N===null||N===1||N===-1))return!0;throw Error(o+"Invalid BigNumber: "+y)},S.maximum=S.max=function(){return ie(arguments,W.lt)},S.minimum=S.min=function(){return ie(arguments,W.gt)},S.random=function(){var y=9007199254740992,w=Math.random()*y&2097151?function(){return i(Math.random()*y)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(A){var k,P,N,D,B,O=0,L=[],U=new S(R);if(A==null?A=l:z(A,0,I),D=n(A/h),E)if(crypto.getRandomValues){for(k=crypto.getRandomValues(new Uint32Array(D*=2));O<D;)B=k[O]*131072+(k[O+1]>>>11),B>=9e15?(P=crypto.getRandomValues(new Uint32Array(2)),k[O]=P[0],k[O+1]=P[1]):(L.push(B%1e14),O+=2);O=D/2}else if(crypto.randomBytes){for(k=crypto.randomBytes(D*=7);O<D;)B=(k[O]&31)*281474976710656+k[O+1]*1099511627776+k[O+2]*4294967296+k[O+3]*16777216+(k[O+4]<<16)+(k[O+5]<<8)+k[O+6],B>=9e15?crypto.randomBytes(7).copy(k,O):(L.push(B%1e14),O+=7);O=D/7}else throw E=!1,Error(o+"crypto unavailable");if(!E)for(;O<D;)B=w(),B<9e15&&(L[O++]=B%1e14);for(D=L[--O],A%=h,D&&A&&(B=_[h-A],L[O]=i(D/B)*B);L[O]===0;L.pop(),O--);if(O<0)L=[N=0];else{for(N=-1;L[0]===0;L.splice(0,1),N-=h);for(O=1,B=L[0];B>=10;B/=10,O++);O<h&&(N-=h-O)}return U.e=N,U.c=L,U}}(),S.sum=function(){for(var y=1,w=arguments,A=new S(w[0]);y<w.length;)A=A.plus(w[y++]);return A},J=function(){var y="0123456789";function w(A,k,P,N){for(var D,B=[0],O,L=0,U=A.length;L<U;){for(O=B.length;O--;B[O]*=k);for(B[0]+=N.indexOf(A.charAt(L++)),D=0;D<B.length;D++)B[D]>P-1&&(B[D+1]==null&&(B[D+1]=0),B[D+1]+=B[D]/P|0,B[D]%=P)}return B.reverse()}return function(A,k,P,N,D){var B,O,L,U,$,Z,ee,te,fe=A.indexOf("."),ge=l,ae=b;for(fe>=0&&(U=c,c=0,A=A.replace(".",""),te=new S(k),Z=te.pow(A.length-fe),c=U,te.c=w(se(j(Z.c),Z.e,"0"),10,P,y),te.e=te.c.length),ee=w(A,k,P,D?(B=M,y):(B=y,M)),L=U=ee.length;ee[--U]==0;ee.pop());if(!ee[0])return B.charAt(0);if(fe<0?--L:(Z.c=ee,Z.e=L,Z.s=N,Z=q(Z,te,ge,ae,P),ee=Z.c,$=Z.r,L=Z.e),O=L+ge+1,fe=ee[O],U=P/2,$=$||O<0||ee[O+1]!=null,$=ae<4?(fe!=null||$)&&(ae==0||ae==(Z.s<0?3:2)):fe>U||fe==U&&(ae==4||$||ae==6&&ee[O-1]&1||ae==(Z.s<0?8:7)),O<1||!ee[0])A=$?se(B.charAt(1),-ge,B.charAt(0)):B.charAt(0);else{if(ee.length=O,$)for(--P;++ee[--O]>P;)ee[O]=0,O||(++L,ee=[1].concat(ee));for(U=ee.length;!ee[--U];);for(fe=0,A="";fe<=U;A+=B.charAt(ee[fe++]));A=se(A,L,B.charAt(0))}return A}}(),q=function(){function y(k,P,N){var D,B,O,L,U=0,$=k.length,Z=P%T,ee=P/T|0;for(k=k.slice();$--;)O=k[$]%T,L=k[$]/T|0,D=ee*O+L*Z,B=Z*O+D%T*T+U,U=(B/N|0)+(D/T|0)+ee*L,k[$]=B%N;return U&&(k=[U].concat(k)),k}function w(k,P,N,D){var B,O;if(N!=D)O=N>D?1:-1;else for(B=O=0;B<N;B++)if(k[B]!=P[B]){O=k[B]>P[B]?1:-1;break}return O}function A(k,P,N,D){for(var B=0;N--;)k[N]-=B,B=k[N]<P[N]?1:0,k[N]=B*D+k[N]-P[N];for(;!k[0]&&k.length>1;k.splice(0,1));}return function(k,P,N,D,B){var O,L,U,$,Z,ee,te,fe,ge,ae,ue,Se,me,be,Xe,pe,ye,Fe=k.s==P.s?1:-1,de=k.c,le=P.c;if(!de||!de[0]||!le||!le[0])return new S(!k.s||!P.s||(de?le&&de[0]==le[0]:!le)?NaN:de&&de[0]==0||!le?Fe*0:Fe/0);for(fe=new S(Fe),ge=fe.c=[],L=k.e-P.e,Fe=N+L+1,B||(B=f,L=C(k.e/h)-C(P.e/h),Fe=Fe/h|0),U=0;le[U]==(de[U]||0);U++);if(le[U]>(de[U]||0)&&L--,Fe<0)ge.push(1),$=!0;else{for(be=de.length,pe=le.length,U=0,Fe+=2,Z=i(B/(le[0]+1)),Z>1&&(le=y(le,Z,B),de=y(de,Z,B),pe=le.length,be=de.length),me=pe,ae=de.slice(0,pe),ue=ae.length;ue<pe;ae[ue++]=0);ye=le.slice(),ye=[0].concat(ye),Xe=le[0],le[1]>=B/2&&Xe++;do{if(Z=0,O=w(le,ae,pe,ue),O<0){if(Se=ae[0],pe!=ue&&(Se=Se*B+(ae[1]||0)),Z=i(Se/Xe),Z>1)for(Z>=B&&(Z=B-1),ee=y(le,Z,B),te=ee.length,ue=ae.length;w(ee,ae,te,ue)==1;)Z--,A(ee,pe<te?ye:le,te,B),te=ee.length,O=1;else Z==0&&(O=Z=1),ee=le.slice(),te=ee.length;if(te<ue&&(ee=[0].concat(ee)),A(ae,ee,ue,B),ue=ae.length,O==-1)for(;w(le,ae,pe,ue)<1;)Z++,A(ae,pe<ue?ye:le,ue,B),ue=ae.length}else O===0&&(Z++,ae=[0]);ge[U++]=Z,ae[0]?ae[ue++]=de[me]||0:(ae=[de[me]],ue=1)}while((me++<be||ae[0]!=null)&&Fe--);$=ae[0]!=null,ge[0]||ge.splice(0,1)}if(B==f){for(U=1,Fe=ge[0];Fe>=10;Fe/=10,U++);he(fe,N+(fe.e=U+L*h-1)+1,D,$)}else fe.e=L,fe.r=+$;return fe}}();function ne(y,w,A,k){var P,N,D,B,O;if(A==null?A=b:z(A,0,8),!y.c)return y.toString();if(P=y.c[0],D=y.e,w==null)O=j(y.c),O=k==1||k==2&&(D<=d||D>=a)?Y(O,D):se(O,D,"0");else if(y=he(new S(y),w,A),N=y.e,O=j(y.c),B=O.length,k==1||k==2&&(w<=N||N<=d)){for(;B<w;O+="0",B++);O=Y(O,N)}else if(w-=D,O=se(O,N,"0"),N+1>B){if(--w>0)for(O+=".";w--;O+="0");}else if(w+=N-B,w>0)for(N+1==B&&(O+=".");w--;O+="0");return y.s<0&&P?"-"+O:O}function ie(y,w){for(var A,k=1,P=new S(y[0]);k<y.length;k++)if(A=new S(y[k]),A.s)w.call(P,A)&&(P=A);else{P=A;break}return P}function ce(y,w,A){for(var k=1,P=w.length;!w[--P];w.pop());for(P=w[0];P>=10;P/=10,k++);return(A=k+A*h-1)>v?y.c=y.e=null:A<u?y.c=[y.e=0]:(y.e=A,y.c=w),y}Q=function(){var y=/^(-?)0([xbo])(?=\w[\w.]*$)/i,w=/^([^.]+)\.$/,A=/^\.([^.]+)$/,k=/^-?(Infinity|NaN)$/,P=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(N,D,B,O){var L,U=B?D:D.replace(P,"");if(k.test(U))N.s=isNaN(U)?null:U<0?-1:1;else{if(!B&&(U=U.replace(y,function($,Z,ee){return L=(ee=ee.toLowerCase())=="x"?16:ee=="b"?2:8,!O||O==L?Z:$}),O&&(L=O,U=U.replace(w,"$1").replace(A,"0.$1")),D!=U))return new S(U,L);if(S.DEBUG)throw Error(o+"Not a"+(O?" base "+O:"")+" number: "+D);N.s=null}N.c=N.e=null}}();function he(y,w,A,k){var P,N,D,B,O,L,U,$=y.c,Z=_;if($){e:{for(P=1,B=$[0];B>=10;B/=10,P++);if(N=w-P,N<0)N+=h,D=w,O=$[L=0],U=O/Z[P-D-1]%10|0;else if(L=n((N+1)/h),L>=$.length)if(k){for(;$.length<=L;$.push(0));O=U=0,P=1,N%=h,D=N-h+1}else break e;else{for(O=B=$[L],P=1;B>=10;B/=10,P++);N%=h,D=N-h+P,U=D<0?0:O/Z[P-D-1]%10|0}if(k=k||w<0||$[L+1]!=null||(D<0?O:O%Z[P-D-1]),k=A<4?(U||k)&&(A==0||A==(y.s<0?3:2)):U>5||U==5&&(A==4||k||A==6&&(N>0?D>0?O/Z[P-D]:0:$[L-1])%10&1||A==(y.s<0?8:7)),w<1||!$[0])return $.length=0,k?(w-=y.e+1,$[0]=Z[(h-w%h)%h],y.e=-w||0):$[0]=y.e=0,y;if(N==0?($.length=L,B=1,L--):($.length=L+1,B=Z[h-N],$[L]=D>0?i(O/Z[P-D]%Z[D])*B:0),k)for(;;)if(L==0){for(N=1,D=$[0];D>=10;D/=10,N++);for(D=$[0]+=B,B=1;D>=10;D/=10,B++);N!=B&&(y.e++,$[0]==f&&($[0]=1));break}else{if($[L]+=B,$[L]!=f)break;$[L--]=0,B=1}for(N=$.length;$[--N]===0;$.pop());}y.e>v?y.c=y.e=null:y.e<u&&(y.c=[y.e=0])}return y}function re(y){var w,A=y.e;return A===null?y.toString():(w=j(y.c),w=A<=d||A>=a?Y(w,A):se(w,A,"0"),y.s<0?"-"+w:w)}return W.absoluteValue=W.abs=function(){var y=new S(this);return y.s<0&&(y.s=1),y},W.comparedTo=function(y,w){return H(this,new S(y,w))},W.decimalPlaces=W.dp=function(y,w){var A,k,P,N=this;if(y!=null)return z(y,0,I),w==null?w=b:z(w,0,8),he(new S(N),y+N.e+1,w);if(!(A=N.c))return null;if(k=((P=A.length-1)-C(this.e/h))*h,P=A[P])for(;P%10==0;P/=10,k--);return k<0&&(k=0),k},W.dividedBy=W.div=function(y,w){return q(this,new S(y,w),l,b)},W.dividedToIntegerBy=W.idiv=function(y,w){return q(this,new S(y,w),0,1)},W.exponentiatedBy=W.pow=function(y,w){var A,k,P,N,D,B,O,L,U,$=this;if(y=new S(y),y.c&&!y.isInteger())throw Error(o+"Exponent not an integer: "+re(y));if(w!=null&&(w=new S(w)),B=y.e>14,!$.c||!$.c[0]||$.c[0]==1&&!$.e&&$.c.length==1||!y.c||!y.c[0])return U=new S(Math.pow(+re($),B?2-X(y):+re(y))),w?U.mod(w):U;if(O=y.s<0,w){if(w.c?!w.c[0]:!w.s)return new S(NaN);k=!O&&$.isInteger()&&w.isInteger(),k&&($=$.mod(w))}else{if(y.e>9&&($.e>0||$.e<-1||($.e==0?$.c[0]>1||B&&$.c[1]>=24e7:$.c[0]<8e13||B&&$.c[0]<=9999975e7)))return N=$.s<0&&X(y)?-0:0,$.e>-1&&(N=1/N),new S(O?1/N:N);c&&(N=n(c/h+2))}for(B?(A=new S(.5),O&&(y.s=1),L=X(y)):(P=Math.abs(+re(y)),L=P%2),U=new S(R);;){if(L){if(U=U.times($),!U.c)break;N?U.c.length>N&&(U.c.length=N):k&&(U=U.mod(w))}if(P){if(P=i(P/2),P===0)break;L=P%2}else if(y=y.times(A),he(y,y.e+1,1),y.e>14)L=X(y);else{if(P=+re(y),P===0)break;L=P%2}$=$.times($),N?$.c&&$.c.length>N&&($.c.length=N):k&&($=$.mod(w))}return k?U:(O&&(U=R.div(U)),w?U.mod(w):N?he(U,c,b,D):U)},W.integerValue=function(y){var w=new S(this);return y==null?y=b:z(y,0,8),he(w,w.e+1,y)},W.isEqualTo=W.eq=function(y,w){return H(this,new S(y,w))===0},W.isFinite=function(){return!!this.c},W.isGreaterThan=W.gt=function(y,w){return H(this,new S(y,w))>0},W.isGreaterThanOrEqualTo=W.gte=function(y,w){return(w=H(this,new S(y,w)))===1||w===0},W.isInteger=function(){return!!this.c&&C(this.e/h)>this.c.length-2},W.isLessThan=W.lt=function(y,w){return H(this,new S(y,w))<0},W.isLessThanOrEqualTo=W.lte=function(y,w){return(w=H(this,new S(y,w)))===-1||w===0},W.isNaN=function(){return!this.s},W.isNegative=function(){return this.s<0},W.isPositive=function(){return this.s>0},W.isZero=function(){return!!this.c&&this.c[0]==0},W.minus=function(y,w){var A,k,P,N,D=this,B=D.s;if(y=new S(y,w),w=y.s,!B||!w)return new S(NaN);if(B!=w)return y.s=-w,D.plus(y);var O=D.e/h,L=y.e/h,U=D.c,$=y.c;if(!O||!L){if(!U||!$)return U?(y.s=-w,y):new S($?D:NaN);if(!U[0]||!$[0])return $[0]?(y.s=-w,y):new S(U[0]?D:b==3?-0:0)}if(O=C(O),L=C(L),U=U.slice(),B=O-L){for((N=B<0)?(B=-B,P=U):(L=O,P=$),P.reverse(),w=B;w--;P.push(0));P.reverse()}else for(k=(N=(B=U.length)<(w=$.length))?B:w,B=w=0;w<k;w++)if(U[w]!=$[w]){N=U[w]<$[w];break}if(N&&(P=U,U=$,$=P,y.s=-y.s),w=(k=$.length)-(A=U.length),w>0)for(;w--;U[A++]=0);for(w=f-1;k>B;){if(U[--k]<$[k]){for(A=k;A&&!U[--A];U[A]=w);--U[A],U[k]+=f}U[k]-=$[k]}for(;U[0]==0;U.splice(0,1),--L);return U[0]?ce(y,U,L):(y.s=b==3?-1:1,y.c=[y.e=0],y)},W.modulo=W.mod=function(y,w){var A,k,P=this;return y=new S(y,w),!P.c||!y.s||y.c&&!y.c[0]?new S(NaN):!y.c||P.c&&!P.c[0]?new S(P):(p==9?(k=y.s,y.s=1,A=q(P,y,0,3),y.s=k,A.s*=k):A=q(P,y,0,p),y=P.minus(A.times(y)),!y.c[0]&&p==1&&(y.s=P.s),y)},W.multipliedBy=W.times=function(y,w){var A,k,P,N,D,B,O,L,U,$,Z,ee,te,fe,ge,ae=this,ue=ae.c,Se=(y=new S(y,w)).c;if(!ue||!Se||!ue[0]||!Se[0])return!ae.s||!y.s||ue&&!ue[0]&&!Se||Se&&!Se[0]&&!ue?y.c=y.e=y.s=null:(y.s*=ae.s,!ue||!Se?y.c=y.e=null:(y.c=[0],y.e=0)),y;for(k=C(ae.e/h)+C(y.e/h),y.s*=ae.s,O=ue.length,$=Se.length,O<$&&(te=ue,ue=Se,Se=te,P=O,O=$,$=P),P=O+$,te=[];P--;te.push(0));for(fe=f,ge=T,P=$;--P>=0;){for(A=0,Z=Se[P]%ge,ee=Se[P]/ge|0,D=O,N=P+D;N>P;)L=ue[--D]%ge,U=ue[D]/ge|0,B=ee*L+U*Z,L=Z*L+B%ge*ge+te[N]+A,A=(L/fe|0)+(B/ge|0)+ee*U,te[N--]=L%fe;te[N]=A}return A?++k:te.splice(0,1),ce(y,te,k)},W.negated=function(){var y=new S(this);return y.s=-y.s||null,y},W.plus=function(y,w){var A,k=this,P=k.s;if(y=new S(y,w),w=y.s,!P||!w)return new S(NaN);if(P!=w)return y.s=-w,k.minus(y);var N=k.e/h,D=y.e/h,B=k.c,O=y.c;if(!N||!D){if(!B||!O)return new S(P/0);if(!B[0]||!O[0])return O[0]?y:new S(B[0]?k:P*0)}if(N=C(N),D=C(D),B=B.slice(),P=N-D){for(P>0?(D=N,A=O):(P=-P,A=B),A.reverse();P--;A.push(0));A.reverse()}for(P=B.length,w=O.length,P-w<0&&(A=O,O=B,B=A,w=P),P=0;w;)P=(B[--w]=B[w]+O[w]+P)/f|0,B[w]=f===B[w]?0:B[w]%f;return P&&(B=[P].concat(B),++D),ce(y,B,D)},W.precision=W.sd=function(y,w){var A,k,P,N=this;if(y!=null&&y!==!!y)return z(y,1,I),w==null?w=b:z(w,0,8),he(new S(N),y,w);if(!(A=N.c))return null;if(P=A.length-1,k=P*h+1,P=A[P]){for(;P%10==0;P/=10,k--);for(P=A[0];P>=10;P/=10,k++);}return y&&N.e+1>k&&(k=N.e+1),k},W.shiftedBy=function(y){return z(y,-g,g),this.times("1e"+y)},W.squareRoot=W.sqrt=function(){var y,w,A,k,P,N=this,D=N.c,B=N.s,O=N.e,L=l+4,U=new S("0.5");if(B!==1||!D||!D[0])return new S(!B||B<0&&(!D||D[0])?NaN:D?N:1/0);if(B=Math.sqrt(+re(N)),B==0||B==1/0?(w=j(D),(w.length+O)%2==0&&(w+="0"),B=Math.sqrt(+w),O=C((O+1)/2)-(O<0||O%2),B==1/0?w="5e"+O:(w=B.toExponential(),w=w.slice(0,w.indexOf("e")+1)+O),A=new S(w)):A=new S(B+""),A.c[0]){for(O=A.e,B=O+L,B<3&&(B=0);;)if(P=A,A=U.times(P.plus(q(N,P,L,1))),j(P.c).slice(0,B)===(w=j(A.c)).slice(0,B))if(A.e<O&&--B,w=w.slice(B-3,B+1),w=="9999"||!k&&w=="4999"){if(!k&&(he(P,P.e+l+2,0),P.times(P).eq(N))){A=P;break}L+=4,B+=4,k=1}else{(!+w||!+w.slice(1)&&w.charAt(0)=="5")&&(he(A,A.e+l+2,1),y=!A.times(A).eq(N));break}}return he(A,A.e+l+1,b,y)},W.toExponential=function(y,w){return y!=null&&(z(y,0,I),y++),ne(this,y,w,1)},W.toFixed=function(y,w){return y!=null&&(z(y,0,I),y=y+this.e+1),ne(this,y,w)},W.toFormat=function(y,w,A){var k,P=this;if(A==null)y!=null&&w&&typeof w=="object"?(A=w,w=null):y&&typeof y=="object"?(A=y,y=w=null):A=F;else if(typeof A!="object")throw Error(o+"Argument not an object: "+A);if(k=P.toFixed(y,w),P.c){var N,D=k.split("."),B=+A.groupSize,O=+A.secondaryGroupSize,L=A.groupSeparator||"",U=D[0],$=D[1],Z=P.s<0,ee=Z?U.slice(1):U,te=ee.length;if(O&&(N=B,B=O,O=N,te-=N),B>0&&te>0){for(N=te%B||B,U=ee.substr(0,N);N<te;N+=B)U+=L+ee.substr(N,B);O>0&&(U+=L+ee.slice(N)),Z&&(U="-"+U)}k=$?U+(A.decimalSeparator||"")+((O=+A.fractionGroupSize)?$.replace(new RegExp("\\d{"+O+"}\\B","g"),"$&"+(A.fractionGroupSeparator||"")):$):U}return(A.prefix||"")+k+(A.suffix||"")},W.toFraction=function(y){var w,A,k,P,N,D,B,O,L,U,$,Z,ee=this,te=ee.c;if(y!=null&&(B=new S(y),!B.isInteger()&&(B.c||B.s!==1)||B.lt(R)))throw Error(o+"Argument "+(B.isInteger()?"out of range: ":"not an integer: ")+re(B));if(!te)return new S(ee);for(w=new S(R),L=A=new S(R),k=O=new S(R),Z=j(te),N=w.e=Z.length-ee.e-1,w.c[0]=_[(D=N%h)<0?h+D:D],y=!y||B.comparedTo(w)>0?N>0?w:L:B,D=v,v=1/0,B=new S(Z),O.c[0]=0;U=q(B,w,0,1),P=A.plus(U.times(k)),P.comparedTo(y)!=1;)A=k,k=P,L=O.plus(U.times(P=L)),O=P,w=B.minus(U.times(P=w)),B=P;return P=q(y.minus(A),k,0,1),O=O.plus(P.times(L)),A=A.plus(P.times(k)),O.s=L.s=ee.s,N=N*2,$=q(L,k,N,b).minus(ee).abs().comparedTo(q(O,A,N,b).minus(ee).abs())<1?[L,k]:[O,A],v=D,$},W.toNumber=function(){return+re(this)},W.toPrecision=function(y,w){return y!=null&&z(y,1,I),ne(this,y,w,2)},W.toString=function(y){var w,A=this,k=A.s,P=A.e;return P===null?k?(w="Infinity",k<0&&(w="-"+w)):w="NaN":(y==null?w=P<=d||P>=a?Y(j(A.c),P):se(j(A.c),P,"0"):y===10&&m?(A=he(new S(A),l+P+1,b),w=se(j(A.c),A.e,"0")):(z(y,2,M.length,"Base"),w=J(se(j(A.c),P,"0"),10,y,k,!0)),k<0&&A.c[0]&&(w="-"+w)),w},W.valueOf=W.toJSON=function(){return re(this)},W._isBigNumber=!0,G!=null&&S.set(G),S}function C(G){var q=G|0;return G>0||G===q?q:q-1}function j(G){for(var q,J,Q=1,W=G.length,R=G[0]+"";Q<W;){for(q=G[Q++]+"",J=h-q.length;J--;q="0"+q);R+=q}for(W=R.length;R.charCodeAt(--W)===48;);return R.slice(0,W+1||1)}function H(G,q){var J,Q,W=G.c,R=q.c,l=G.s,b=q.s,d=G.e,a=q.e;if(!l||!b)return null;if(J=W&&!W[0],Q=R&&!R[0],J||Q)return J?Q?0:-b:l;if(l!=b)return l;if(J=l<0,Q=d==a,!W||!R)return Q?0:!W^J?1:-1;if(!Q)return d>a^J?1:-1;for(b=(d=W.length)<(a=R.length)?d:a,l=0;l<b;l++)if(W[l]!=R[l])return W[l]>R[l]^J?1:-1;return d==a?0:d>a^J?1:-1}function z(G,q,J,Q){if(G<q||G>J||G!==i(G))throw Error(o+(Q||"Argument")+(typeof G=="number"?G<q||G>J?" out of range: ":" not an integer: ":" not a primitive number: ")+String(G))}function X(G){var q=G.c.length-1;return C(G.e/h)==q&&G.c[q]%2!=0}function Y(G,q){return(G.length>1?G.charAt(0)+"."+G.slice(1):G)+(q<0?"e":"e+")+q}function se(G,q,J){var Q,W;if(q<0){for(W=J+".";++q;W+=J);G=W+G}else if(Q=G.length,++q>Q){for(W=J,q-=Q;--q;W+=J);G+=W}else q<Q&&(G=G.slice(0,q)+"."+G.slice(q));return G}e=x(),e.default=e.BigNumber=e,typeof define=="function"&&define.amd?define(function(){return e}):typeof uc<"u"&&uc.exports?uc.exports=e:(r||(r=typeof self<"u"&&self?self:window),r.BigNumber=e)})(B1)});var O1=V(rh=>{"use strict";Object.defineProperty(rh,"__esModule",{value:!0});var q4=eh(),th=class{constructor(){this.BigNum=(e,t)=>{let n=q4.BigNumber.clone({DECIMAL_PLACES:t});return new n(e)}}winstonToAr(e,{formatted:t=!1,decimals:n=12,trim:i=!0}={}){let o=this.stringToBigNum(e,n).shiftedBy(-12);return t?o.toFormat(n):o.toFixed(n)}arToWinston(e,{formatted:t=!1}={}){let n=this.stringToBigNum(e).shiftedBy(12);return t?n.toFormat():n.toFixed(0)}compare(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.comparedTo(i)}isEqual(e,t){return this.compare(e,t)===0}isLessThan(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.isLessThan(i)}isGreaterThan(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.isGreaterThan(i)}add(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.plus(t).toFixed(0)}sub(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.minus(t).toFixed(0)}stringToBigNum(e,t=12){return this.BigNum(e,t)}};rh.default=th});var nh=V((eM,R1)=>{"use strict";R1.exports=function(e,t){return function(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return e.apply(t,i)}}});var bt=V((tM,k1)=>{"use strict";var j4=nh(),oh=Object.prototype.toString,sh=function(r){return function(e){var t=oh.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())}}(Object.create(null));function Wi(r){return r=r.toLowerCase(),function(t){return sh(t)===r}}function ah(r){return Array.isArray(r)}function hc(r){return typeof r>"u"}function $4(r){return r!==null&&!hc(r)&&r.constructor!==null&&!hc(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}var P1=Wi("ArrayBuffer");function W4(r){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&P1(r.buffer),e}function H4(r){return typeof r=="string"}function K4(r){return typeof r=="number"}function N1(r){return r!==null&&typeof r=="object"}function lc(r){if(sh(r)!=="object")return!1;var e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}var z4=Wi("Date"),G4=Wi("File"),V4=Wi("Blob"),J4=Wi("FileList");function fh(r){return oh.call(r)==="[object Function]"}function X4(r){return N1(r)&&fh(r.pipe)}function Y4(r){var e="[object FormData]";return r&&(typeof FormData=="function"&&r instanceof FormData||oh.call(r)===e||fh(r.toString)&&r.toString()===e)}var Q4=Wi("URLSearchParams");function Z4(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function e_(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function ch(r,e){if(!(r===null||typeof r>"u"))if(typeof r!="object"&&(r=[r]),ah(r))for(var t=0,n=r.length;t<n;t++)e.call(null,r[t],t,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.call(null,r[i],i,r)}function ih(){var r={};function e(i,o){lc(r[o])&&lc(i)?r[o]=ih(r[o],i):lc(i)?r[o]=ih({},i):ah(i)?r[o]=i.slice():r[o]=i}for(var t=0,n=arguments.length;t<n;t++)ch(arguments[t],e);return r}function t_(r,e,t){return ch(e,function(i,o){t&&typeof i=="function"?r[o]=j4(i,t):r[o]=i}),r}function r_(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}function n_(r,e,t,n){r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,t&&Object.assign(r.prototype,t)}function i_(r,e,t){var n,i,o,s={};e=e||{};do{for(n=Object.getOwnPropertyNames(r),i=n.length;i-- >0;)o=n[i],s[o]||(e[o]=r[o],s[o]=!0);r=Object.getPrototypeOf(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e}function o_(r,e,t){r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;var n=r.indexOf(e,t);return n!==-1&&n===t}function s_(r){if(!r)return null;var e=r.length;if(hc(e))return null;for(var t=new Array(e);e-- >0;)t[e]=r[e];return t}var a_=function(r){return function(e){return r&&e instanceof r}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array));k1.exports={isArray:ah,isArrayBuffer:P1,isBuffer:$4,isFormData:Y4,isArrayBufferView:W4,isString:H4,isNumber:K4,isObject:N1,isPlainObject:lc,isUndefined:hc,isDate:z4,isFile:G4,isBlob:V4,isFunction:fh,isStream:X4,isURLSearchParams:Q4,isStandardBrowserEnv:e_,forEach:ch,merge:ih,extend:t_,trim:Z4,stripBOM:r_,inherits:n_,toFlatObject:i_,kindOf:sh,kindOfTest:Wi,endsWith:o_,toArray:s_,isTypedArray:a_,isFileList:J4}});var uh=V((rM,D1)=>{"use strict";var qo=bt();function L1(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}D1.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(qo.isURLSearchParams(t))i=t.toString();else{var o=[];qo.forEach(t,function(h,g){h===null||typeof h>"u"||(qo.isArray(h)?g=g+"[]":h=[h],qo.forEach(h,function(T){qo.isDate(T)?T=T.toISOString():qo.isObject(T)&&(T=JSON.stringify(T)),o.push(L1(g)+"="+L1(T))}))}),i=o.join("&")}if(i){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var q1=V((nM,U1)=>{"use strict";var f_=bt();function dc(){this.handlers=[]}dc.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};dc.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};dc.prototype.forEach=function(e){f_.forEach(this.handlers,function(n){n!==null&&e(n)})};U1.exports=dc});var $1=V((iM,j1)=>{"use strict";var c_=bt();j1.exports=function(e,t){c_.forEach(e,function(i,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[o])})}});var Hi=V((oM,z1)=>{"use strict";var W1=bt();function jo(r,e,t,n,i){Error.call(this),this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),i&&(this.response=i)}W1.inherits(jo,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var H1=jo.prototype,K1={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(r){K1[r]={value:r}});Object.defineProperties(jo,K1);Object.defineProperty(H1,"isAxiosError",{value:!0});jo.from=function(r,e,t,n,i,o){var s=Object.create(H1);return W1.toFlatObject(r,s,function(h){return h!==Error.prototype}),jo.call(s,r.message,e,t,n,i),s.name=r.name,o&&Object.assign(s,o),s};z1.exports=jo});var lh=V((sM,G1)=>{"use strict";G1.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}});var hh=V((aM,V1)=>{"use strict";var Ar=bt();function u_(r,e){e=e||new FormData;var t=[];function n(o){return o===null?"":Ar.isDate(o)?o.toISOString():Ar.isArrayBuffer(o)||Ar.isTypedArray(o)?typeof Blob=="function"?new Blob([o]):Buffer.from(o):o}function i(o,s){if(Ar.isPlainObject(o)||Ar.isArray(o)){if(t.indexOf(o)!==-1)throw Error("Circular reference detected in "+s);t.push(o),Ar.forEach(o,function(h,g){if(!Ar.isUndefined(h)){var _=s?s+"."+g:g,T;if(h&&!s&&typeof h=="object"){if(Ar.endsWith(g,"{}"))h=JSON.stringify(h);else if(Ar.endsWith(g,"[]")&&(T=Ar.toArray(h))){T.forEach(function(I){!Ar.isUndefined(I)&&e.append(_,n(I))});return}}i(h,_)}}),t.pop()}else e.append(s,n(o))}return i(r),e}V1.exports=u_});var X1=V((fM,J1)=>{"use strict";var dh=Hi();J1.exports=function(e,t,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new dh("Request failed with status code "+n.status,[dh.ERR_BAD_REQUEST,dh.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}});var Q1=V((cM,Y1)=>{"use strict";var pc=bt();Y1.exports=pc.isStandardBrowserEnv()?function(){return{write:function(t,n,i,o,s,f){var h=[];h.push(t+"="+encodeURIComponent(n)),pc.isNumber(i)&&h.push("expires="+new Date(i).toGMTString()),pc.isString(o)&&h.push("path="+o),pc.isString(s)&&h.push("domain="+s),f===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(t){var n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var ey=V((uM,Z1)=>{"use strict";Z1.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}});var ry=V((lM,ty)=>{"use strict";ty.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}});var ph=V((hM,ny)=>{"use strict";var l_=ey(),h_=ry();ny.exports=function(e,t){return e&&!l_(t)?h_(e,t):t}});var oy=V((dM,iy)=>{"use strict";var gh=bt(),d_=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];iy.exports=function(e){var t={},n,i,o;return e&&gh.forEach(e.split(`
`),function(f){if(o=f.indexOf(":"),n=gh.trim(f.substr(0,o)).toLowerCase(),i=gh.trim(f.substr(o+1)),n){if(t[n]&&d_.indexOf(n)>=0)return;n==="set-cookie"?t[n]=(t[n]?t[n]:[]).concat([i]):t[n]=t[n]?t[n]+", "+i:i}}),t}});var fy=V((pM,ay)=>{"use strict";var sy=bt();ay.exports=sy.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),n;function i(o){var s=o;return e&&(t.setAttribute("href",s),s=t.href),t.setAttribute("href",s),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(s){var f=sy.isString(s)?i(s):s;return f.protocol===n.protocol&&f.host===n.host}}():function(){return function(){return!0}}()});var la=V((gM,uy)=>{"use strict";var yh=Hi(),p_=bt();function cy(r){yh.call(this,r??"canceled",yh.ERR_CANCELED),this.name="CanceledError"}p_.inherits(cy,yh,{__CANCEL__:!0});uy.exports=cy});var hy=V((yM,ly)=>{"use strict";ly.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}});var mh=V((mM,dy)=>{"use strict";var ha=bt(),g_=X1(),y_=Q1(),m_=uh(),b_=ph(),v_=oy(),w_=fy(),x_=lh(),dn=Hi(),__=la(),S_=hy();dy.exports=function(e){return new Promise(function(n,i){var o=e.data,s=e.headers,f=e.responseType,h;function g(){e.cancelToken&&e.cancelToken.unsubscribe(h),e.signal&&e.signal.removeEventListener("abort",h)}ha.isFormData(o)&&ha.isStandardBrowserEnv()&&delete s["Content-Type"];var _=new XMLHttpRequest;if(e.auth){var T=e.auth.username||"",I=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.Authorization="Basic "+btoa(T+":"+I)}var x=b_(e.baseURL,e.url);_.open(e.method.toUpperCase(),m_(x,e.params,e.paramsSerializer),!0),_.timeout=e.timeout;function C(){if(!!_){var z="getAllResponseHeaders"in _?v_(_.getAllResponseHeaders()):null,X=!f||f==="text"||f==="json"?_.responseText:_.response,Y={data:X,status:_.status,statusText:_.statusText,headers:z,config:e,request:_};g_(function(G){n(G),g()},function(G){i(G),g()},Y),_=null}}if("onloadend"in _?_.onloadend=C:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(C)},_.onabort=function(){!_||(i(new dn("Request aborted",dn.ECONNABORTED,e,_)),_=null)},_.onerror=function(){i(new dn("Network Error",dn.ERR_NETWORK,e,_,_)),_=null},_.ontimeout=function(){var X=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",Y=e.transitional||x_;e.timeoutErrorMessage&&(X=e.timeoutErrorMessage),i(new dn(X,Y.clarifyTimeoutError?dn.ETIMEDOUT:dn.ECONNABORTED,e,_)),_=null},ha.isStandardBrowserEnv()){var j=(e.withCredentials||w_(x))&&e.xsrfCookieName?y_.read(e.xsrfCookieName):void 0;j&&(s[e.xsrfHeaderName]=j)}"setRequestHeader"in _&&ha.forEach(s,function(X,Y){typeof o>"u"&&Y.toLowerCase()==="content-type"?delete s[Y]:_.setRequestHeader(Y,X)}),ha.isUndefined(e.withCredentials)||(_.withCredentials=!!e.withCredentials),f&&f!=="json"&&(_.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&_.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&_.upload&&_.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(h=function(z){!_||(i(!z||z&&z.type?new __:z),_.abort(),_=null)},e.cancelToken&&e.cancelToken.subscribe(h),e.signal&&(e.signal.aborted?h():e.signal.addEventListener("abort",h))),o||(o=null);var H=S_(x);if(H&&["http","https","file"].indexOf(H)===-1){i(new dn("Unsupported protocol "+H+":",dn.ERR_BAD_REQUEST,e));return}_.send(o)})}});var gy=V((bM,py)=>{py.exports=null});var yc=V((vM,vy)=>{"use strict";var vt=bt(),yy=$1(),my=Hi(),E_=lh(),A_=hh(),F_={"Content-Type":"application/x-www-form-urlencoded"};function by(r,e){!vt.isUndefined(r)&&vt.isUndefined(r["Content-Type"])&&(r["Content-Type"]=e)}function T_(){var r;return typeof XMLHttpRequest<"u"?r=mh():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(r=mh()),r}function M_(r,e,t){if(vt.isString(r))try{return(e||JSON.parse)(r),vt.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}var gc={transitional:E_,adapter:T_(),transformRequest:[function(e,t){if(yy(t,"Accept"),yy(t,"Content-Type"),vt.isFormData(e)||vt.isArrayBuffer(e)||vt.isBuffer(e)||vt.isStream(e)||vt.isFile(e)||vt.isBlob(e))return e;if(vt.isArrayBufferView(e))return e.buffer;if(vt.isURLSearchParams(e))return by(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n=vt.isObject(e),i=t&&t["Content-Type"],o;if((o=vt.isFileList(e))||n&&i==="multipart/form-data"){var s=this.env&&this.env.FormData;return A_(o?{"files[]":e}:e,s&&new s)}else if(n||i==="application/json")return by(t,"application/json"),M_(e);return e}],transformResponse:[function(e){var t=this.transitional||gc.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,o=!n&&this.responseType==="json";if(o||i&&vt.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(o)throw s.name==="SyntaxError"?my.from(s,my.ERR_BAD_RESPONSE,this,null,this.response):s}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:gy()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};vt.forEach(["delete","get","head"],function(e){gc.headers[e]={}});vt.forEach(["post","put","patch"],function(e){gc.headers[e]=vt.merge(F_)});vy.exports=gc});var xy=V((wM,wy)=>{"use strict";var I_=bt(),C_=yc();wy.exports=function(e,t,n){var i=this||C_;return I_.forEach(n,function(s){e=s.call(i,e,t)}),e}});var bh=V((xM,_y)=>{"use strict";_y.exports=function(e){return!!(e&&e.__CANCEL__)}});var Ay=V((_M,Ey)=>{"use strict";var Sy=bt(),vh=xy(),B_=bh(),O_=yc(),R_=la();function wh(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new R_}Ey.exports=function(e){wh(e),e.headers=e.headers||{},e.data=vh.call(e,e.data,e.headers,e.transformRequest),e.headers=Sy.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Sy.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var t=e.adapter||O_.adapter;return t(e).then(function(i){return wh(e),i.data=vh.call(e,i.data,i.headers,e.transformResponse),i},function(i){return B_(i)||(wh(e),i&&i.response&&(i.response.data=vh.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var xh=V((SM,Fy)=>{"use strict";var Qt=bt();Fy.exports=function(e,t){t=t||{};var n={};function i(_,T){return Qt.isPlainObject(_)&&Qt.isPlainObject(T)?Qt.merge(_,T):Qt.isPlainObject(T)?Qt.merge({},T):Qt.isArray(T)?T.slice():T}function o(_){if(Qt.isUndefined(t[_])){if(!Qt.isUndefined(e[_]))return i(void 0,e[_])}else return i(e[_],t[_])}function s(_){if(!Qt.isUndefined(t[_]))return i(void 0,t[_])}function f(_){if(Qt.isUndefined(t[_])){if(!Qt.isUndefined(e[_]))return i(void 0,e[_])}else return i(void 0,t[_])}function h(_){if(_ in t)return i(e[_],t[_]);if(_ in e)return i(void 0,e[_])}var g={url:s,method:s,data:s,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:h};return Qt.forEach(Object.keys(e).concat(Object.keys(t)),function(T){var I=g[T]||o,x=I(T);Qt.isUndefined(x)&&I!==h||(n[T]=x)}),n}});var _h=V((EM,Ty)=>{Ty.exports={version:"0.27.2"}});var Cy=V((AM,Iy)=>{"use strict";var P_=_h().version,Wn=Hi(),Sh={};["object","boolean","number","function","string","symbol"].forEach(function(r,e){Sh[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});var My={};Sh.transitional=function(e,t,n){function i(o,s){return"[Axios v"+P_+"] Transitional option '"+o+"'"+s+(n?". "+n:"")}return function(o,s,f){if(e===!1)throw new Wn(i(s," has been removed"+(t?" in "+t:"")),Wn.ERR_DEPRECATED);return t&&!My[s]&&(My[s]=!0,console.warn(i(s," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,s,f):!0}};function N_(r,e,t){if(typeof r!="object")throw new Wn("options must be an object",Wn.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(r),i=n.length;i-- >0;){var o=n[i],s=e[o];if(s){var f=r[o],h=f===void 0||s(f,o,r);if(h!==!0)throw new Wn("option "+o+" must be "+h,Wn.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Wn("Unknown option "+o,Wn.ERR_BAD_OPTION)}}Iy.exports={assertOptions:N_,validators:Sh}});var ky=V((FM,Ny)=>{"use strict";var Ry=bt(),k_=uh(),By=q1(),Oy=Ay(),mc=xh(),L_=ph(),Py=Cy(),$o=Py.validators;function Wo(r){this.defaults=r,this.interceptors={request:new By,response:new By}}Wo.prototype.request=function(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=mc(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;n!==void 0&&Py.assertOptions(n,{silentJSONParsing:$o.transitional($o.boolean),forcedJSONParsing:$o.transitional($o.boolean),clarifyTimeoutError:$o.transitional($o.boolean)},!1);var i=[],o=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(t)===!1||(o=o&&x.synchronous,i.unshift(x.fulfilled,x.rejected))});var s=[];this.interceptors.response.forEach(function(x){s.push(x.fulfilled,x.rejected)});var f;if(!o){var h=[Oy,void 0];for(Array.prototype.unshift.apply(h,i),h=h.concat(s),f=Promise.resolve(t);h.length;)f=f.then(h.shift(),h.shift());return f}for(var g=t;i.length;){var _=i.shift(),T=i.shift();try{g=_(g)}catch(I){T(I);break}}try{f=Oy(g)}catch(I){return Promise.reject(I)}for(;s.length;)f=f.then(s.shift(),s.shift());return f};Wo.prototype.getUri=function(e){e=mc(this.defaults,e);var t=L_(e.baseURL,e.url);return k_(t,e.params,e.paramsSerializer)};Ry.forEach(["delete","get","head","options"],function(e){Wo.prototype[e]=function(t,n){return this.request(mc(n||{},{method:e,url:t,data:(n||{}).data}))}});Ry.forEach(["post","put","patch"],function(e){function t(n){return function(o,s,f){return this.request(mc(f||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}Wo.prototype[e]=t(),Wo.prototype[e+"Form"]=t(!0)});Ny.exports=Wo});var Dy=V((TM,Ly)=>{"use strict";var D_=la();function Ho(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var t=this;this.promise.then(function(n){if(!!t._listeners){var i,o=t._listeners.length;for(i=0;i<o;i++)t._listeners[i](n);t._listeners=null}}),this.promise.then=function(n){var i,o=new Promise(function(s){t.subscribe(s),i=s}).then(n);return o.cancel=function(){t.unsubscribe(i)},o},r(function(i){t.reason||(t.reason=new D_(i),e(t.reason))})}Ho.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Ho.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};Ho.prototype.unsubscribe=function(e){if(!!this._listeners){var t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}};Ho.source=function(){var e,t=new Ho(function(i){e=i});return{token:t,cancel:e}};Ly.exports=Ho});var qy=V((MM,Uy)=>{"use strict";Uy.exports=function(e){return function(n){return e.apply(null,n)}}});var $y=V((IM,jy)=>{"use strict";var U_=bt();jy.exports=function(e){return U_.isObject(e)&&e.isAxiosError===!0}});var Ky=V((CM,Eh)=>{"use strict";var Wy=bt(),q_=nh(),bc=ky(),j_=xh(),$_=yc();function Hy(r){var e=new bc(r),t=q_(bc.prototype.request,e);return Wy.extend(t,bc.prototype,e),Wy.extend(t,e),t.create=function(i){return Hy(j_(r,i))},t}var jt=Hy($_);jt.Axios=bc;jt.CanceledError=la();jt.CancelToken=Dy();jt.isCancel=bh();jt.VERSION=_h().version;jt.toFormData=hh();jt.AxiosError=Hi();jt.Cancel=jt.CanceledError;jt.all=function(e){return Promise.all(e)};jt.spread=qy();jt.isAxiosError=$y();Eh.exports=jt;Eh.exports.default=jt});var Ah=V((BM,zy)=>{zy.exports=Ky()});var Gy=V(Th=>{"use strict";Object.defineProperty(Th,"__esModule",{value:!0});var W_=Ah(),Fh=class{constructor(e){this.METHOD_GET="GET",this.METHOD_POST="POST",this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e)}getConfig(){return this.config}mergeDefaults(e){let t=e.protocol||"http",n=e.port||(t==="https"?443:80);return{host:e.host||"127.0.0.1",protocol:t,port:n,timeout:e.timeout||2e4,logging:e.logging||!1,logger:e.logger||console.log,network:e.network}}async get(e,t){try{return await this.request().get(e,t)}catch(n){if(n.response&&n.response.status)return n.response;throw n}}async post(e,t,n){try{return await this.request().post(e,t,n)}catch(i){if(i.response&&i.response.status)return i.response;throw i}}request(){let e={};this.config.network&&(e["x-network"]=this.config.network);let t=W_.default.create({baseURL:`${this.config.protocol}://${this.config.host}:${this.config.port}`,timeout:this.config.timeout,maxContentLength:1024*1024*512,headers:e});return this.config.logging&&(t.interceptors.request.use(n=>(this.config.logger(`Requesting: ${n.baseURL}/${n.url}`),n)),t.interceptors.response.use(n=>(this.config.logger(`Response:   ${n.config.url} - ${n.status}`),n))),t}};Th.default=Fh});var Mh=V((RM,Vy)=>{"use strict";Vy.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,t);if(s.value!==i||s.enumerable!==!0)return!1}return!0}});var da=V((PM,Jy)=>{"use strict";var H_=Mh();Jy.exports=function(){return H_()&&!!Symbol.toStringTag}});var Qy=V((NM,Yy)=>{"use strict";var Xy=typeof Symbol<"u"&&Symbol,K_=Mh();Yy.exports=function(){return typeof Xy!="function"||typeof Symbol!="function"||typeof Xy("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:K_()}});var em=V((kM,Zy)=>{"use strict";var z_="Function.prototype.bind called on incompatible ",Ih=Array.prototype.slice,G_=Object.prototype.toString,V_="[object Function]";Zy.exports=function(e){var t=this;if(typeof t!="function"||G_.call(t)!==V_)throw new TypeError(z_+t);for(var n=Ih.call(arguments,1),i,o=function(){if(this instanceof i){var _=t.apply(this,n.concat(Ih.call(arguments)));return Object(_)===_?_:this}else return t.apply(e,n.concat(Ih.call(arguments)))},s=Math.max(0,t.length-n.length),f=[],h=0;h<s;h++)f.push("$"+h);if(i=Function("binder","return function ("+f.join(",")+"){ return binder.apply(this,arguments); }")(o),t.prototype){var g=function(){};g.prototype=t.prototype,i.prototype=new g,g.prototype=null}return i}});var vc=V((LM,tm)=>{"use strict";var J_=em();tm.exports=Function.prototype.bind||J_});var nm=V((DM,rm)=>{"use strict";var X_=vc();rm.exports=X_.call(Function.call,Object.prototype.hasOwnProperty)});var _c=V((UM,am)=>{"use strict";var Ge,Jo=SyntaxError,sm=Function,Go=TypeError,Ch=function(r){try{return sm('"use strict"; return ('+r+").constructor;")()}catch{}},Ki=Object.getOwnPropertyDescriptor;if(Ki)try{Ki({},"")}catch{Ki=null}var Bh=function(){throw new Go},Y_=Ki?function(){try{return arguments.callee,Bh}catch{try{return Ki(arguments,"callee").get}catch{return Bh}}}():Bh,Ko=Qy()(),Hn=Object.getPrototypeOf||function(r){return r.__proto__},zo={},Q_=typeof Uint8Array>"u"?Ge:Hn(Uint8Array),Vo={"%AggregateError%":typeof AggregateError>"u"?Ge:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ge:ArrayBuffer,"%ArrayIteratorPrototype%":Ko?Hn([][Symbol.iterator]()):Ge,"%AsyncFromSyncIteratorPrototype%":Ge,"%AsyncFunction%":zo,"%AsyncGenerator%":zo,"%AsyncGeneratorFunction%":zo,"%AsyncIteratorPrototype%":zo,"%Atomics%":typeof Atomics>"u"?Ge:Atomics,"%BigInt%":typeof BigInt>"u"?Ge:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ge:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ge:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ge:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ge:FinalizationRegistry,"%Function%":sm,"%GeneratorFunction%":zo,"%Int8Array%":typeof Int8Array>"u"?Ge:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ge:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ge:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ko?Hn(Hn([][Symbol.iterator]())):Ge,"%JSON%":typeof JSON=="object"?JSON:Ge,"%Map%":typeof Map>"u"?Ge:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ko?Ge:Hn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ge:Promise,"%Proxy%":typeof Proxy>"u"?Ge:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ge:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ge:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ko?Ge:Hn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ge:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ko?Hn(""[Symbol.iterator]()):Ge,"%Symbol%":Ko?Symbol:Ge,"%SyntaxError%":Jo,"%ThrowTypeError%":Y_,"%TypedArray%":Q_,"%TypeError%":Go,"%Uint8Array%":typeof Uint8Array>"u"?Ge:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ge:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ge:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ge:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ge:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ge:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ge:WeakSet},Z_=function r(e){var t;if(e==="%AsyncFunction%")t=Ch("async function () {}");else if(e==="%GeneratorFunction%")t=Ch("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=Ch("async function* () {}");else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=r("%AsyncGenerator%");i&&(t=Hn(i.prototype))}return Vo[e]=t,t},im={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},pa=vc(),wc=nm(),e8=pa.call(Function.call,Array.prototype.concat),t8=pa.call(Function.apply,Array.prototype.splice),om=pa.call(Function.call,String.prototype.replace),xc=pa.call(Function.call,String.prototype.slice),r8=pa.call(Function.call,RegExp.prototype.exec),n8=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,i8=/\\(\\)?/g,o8=function(e){var t=xc(e,0,1),n=xc(e,-1);if(t==="%"&&n!=="%")throw new Jo("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new Jo("invalid intrinsic syntax, expected opening `%`");var i=[];return om(e,n8,function(o,s,f,h){i[i.length]=f?om(h,i8,"$1"):s||o}),i},s8=function(e,t){var n=e,i;if(wc(im,n)&&(i=im[n],n="%"+i[0]+"%"),wc(Vo,n)){var o=Vo[n];if(o===zo&&(o=Z_(n)),typeof o>"u"&&!t)throw new Go("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Jo("intrinsic "+e+" does not exist!")};am.exports=function(e,t){if(typeof e!="string"||e.length===0)throw new Go("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Go('"allowMissing" argument must be a boolean');if(r8(/^%?[^%]*%?$/,e)===null)throw new Jo("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=o8(e),i=n.length>0?n[0]:"",o=s8("%"+i+"%",t),s=o.name,f=o.value,h=!1,g=o.alias;g&&(i=g[0],t8(n,e8([0,1],g)));for(var _=1,T=!0;_<n.length;_+=1){var I=n[_],x=xc(I,0,1),C=xc(I,-1);if((x==='"'||x==="'"||x==="`"||C==='"'||C==="'"||C==="`")&&x!==C)throw new Jo("property names with quotes must have matching quotes");if((I==="constructor"||!T)&&(h=!0),i+="."+I,s="%"+i+"%",wc(Vo,s))f=Vo[s];else if(f!=null){if(!(I in f)){if(!t)throw new Go("base intrinsic for "+e+" exists, but the property is not available.");return}if(Ki&&_+1>=n.length){var j=Ki(f,I);T=!!j,T&&"get"in j&&!("originalValue"in j.get)?f=j.get:f=f[I]}else T=wc(f,I),f=f[I];T&&!h&&(Vo[s]=f)}}return f}});var dm=V((qM,Sc)=>{"use strict";var Oh=vc(),Xo=_c(),um=Xo("%Function.prototype.apply%"),lm=Xo("%Function.prototype.call%"),hm=Xo("%Reflect.apply%",!0)||Oh.call(lm,um),fm=Xo("%Object.getOwnPropertyDescriptor%",!0),zi=Xo("%Object.defineProperty%",!0),a8=Xo("%Math.max%");if(zi)try{zi({},"a",{value:1})}catch{zi=null}Sc.exports=function(e){var t=hm(Oh,lm,arguments);if(fm&&zi){var n=fm(t,"length");n.configurable&&zi(t,"length",{value:1+a8(0,e.length-(arguments.length-1))})}return t};var cm=function(){return hm(Oh,um,arguments)};zi?zi(Sc.exports,"apply",{value:cm}):Sc.exports.apply=cm});var Ec=V((jM,ym)=>{"use strict";var pm=_c(),gm=dm(),f8=gm(pm("String.prototype.indexOf"));ym.exports=function(e,t){var n=pm(e,!!t);return typeof n=="function"&&f8(e,".prototype.")>-1?gm(n):n}});var vm=V(($M,bm)=>{"use strict";var c8=da()(),u8=Ec(),Rh=u8("Object.prototype.toString"),Ac=function(e){return c8&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:Rh(e)==="[object Arguments]"},mm=function(e){return Ac(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&Rh(e)!=="[object Array]"&&Rh(e.callee)==="[object Function]"},l8=function(){return Ac(arguments)}();Ac.isLegacyArguments=mm;bm.exports=l8?Ac:mm});var _m=V((WM,xm)=>{"use strict";var h8=Object.prototype.toString,d8=Function.prototype.toString,p8=/^\s*(?:function)?\*/,wm=da()(),Ph=Object.getPrototypeOf,g8=function(){if(!wm)return!1;try{return Function("return function*() {}")()}catch{}},Nh;xm.exports=function(e){if(typeof e!="function")return!1;if(p8.test(d8.call(e)))return!0;if(!wm){var t=h8.call(e);return t==="[object GeneratorFunction]"}if(!Ph)return!1;if(typeof Nh>"u"){var n=g8();Nh=n?Ph(n):!1}return Ph(e)===Nh}});var Fm=V((HM,Am)=>{"use strict";var Em=Function.prototype.toString,Yo=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,Lh,Fc;if(typeof Yo=="function"&&typeof Object.defineProperty=="function")try{Lh=Object.defineProperty({},"length",{get:function(){throw Fc}}),Fc={},Yo(function(){throw 42},null,Lh)}catch(r){r!==Fc&&(Yo=null)}else Yo=null;var y8=/^\s*class\b/,Dh=function(e){try{var t=Em.call(e);return y8.test(t)}catch{return!1}},kh=function(e){try{return Dh(e)?!1:(Em.call(e),!0)}catch{return!1}},Tc=Object.prototype.toString,m8="[object Object]",b8="[object Function]",v8="[object GeneratorFunction]",w8="[object HTMLAllCollection]",x8="[object HTML document.all class]",_8="[object HTMLCollection]",S8=typeof Symbol=="function"&&!!Symbol.toStringTag,E8=!(0 in[,]),Uh=function(){return!1};typeof document=="object"&&(Sm=document.all,Tc.call(Sm)===Tc.call(document.all)&&(Uh=function(e){if((E8||!e)&&(typeof e>"u"||typeof e=="object"))try{var t=Tc.call(e);return(t===w8||t===x8||t===_8||t===m8)&&e("")==null}catch{}return!1}));var Sm;Am.exports=Yo?function(e){if(Uh(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{Yo(e,null,Lh)}catch(t){if(t!==Fc)return!1}return!Dh(e)&&kh(e)}:function(e){if(Uh(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(S8)return kh(e);if(Dh(e))return!1;var t=Tc.call(e);return t!==b8&&t!==v8&&!/^\[object HTML/.test(t)?!1:kh(e)}});var qh=V((KM,Mm)=>{"use strict";var A8=Fm(),F8=Object.prototype.toString,Tm=Object.prototype.hasOwnProperty,T8=function(e,t,n){for(var i=0,o=e.length;i<o;i++)Tm.call(e,i)&&(n==null?t(e[i],i,e):t.call(n,e[i],i,e))},M8=function(e,t,n){for(var i=0,o=e.length;i<o;i++)n==null?t(e.charAt(i),i,e):t.call(n,e.charAt(i),i,e)},I8=function(e,t,n){for(var i in e)Tm.call(e,i)&&(n==null?t(e[i],i,e):t.call(n,e[i],i,e))},C8=function(e,t,n){if(!A8(t))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),F8.call(e)==="[object Array]"?T8(e,t,i):typeof e=="string"?M8(e,t,i):I8(e,t,i)};Mm.exports=C8});var $h=V((zM,Im)=>{"use strict";var jh=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],B8=typeof globalThis>"u"?global:globalThis;Im.exports=function(){for(var e=[],t=0;t<jh.length;t++)typeof B8[jh[t]]=="function"&&(e[e.length]=jh[t]);return e}});var Wh=V((GM,Cm)=>{"use strict";var O8=_c(),Mc=O8("%Object.getOwnPropertyDescriptor%",!0);if(Mc)try{Mc([],"length")}catch{Mc=null}Cm.exports=Mc});var zh=V((VM,Nm)=>{"use strict";var Bm=qh(),R8=$h(),Kh=Ec(),P8=Kh("Object.prototype.toString"),Om=da()(),Ic=Wh(),N8=typeof globalThis>"u"?global:globalThis,Rm=R8(),k8=Kh("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},L8=Kh("String.prototype.slice"),Pm={},Hh=Object.getPrototypeOf;Om&&Ic&&Hh&&Bm(Rm,function(r){var e=new N8[r];if(Symbol.toStringTag in e){var t=Hh(e),n=Ic(t,Symbol.toStringTag);if(!n){var i=Hh(t);n=Ic(i,Symbol.toStringTag)}Pm[r]=n.get}});var D8=function(e){var t=!1;return Bm(Pm,function(n,i){if(!t)try{t=n.call(e)===i}catch{}}),t};Nm.exports=function(e){if(!e||typeof e!="object")return!1;if(!Om||!(Symbol.toStringTag in e)){var t=L8(P8(e),8,-1);return k8(Rm,t)>-1}return Ic?D8(e):!1}});var $m=V((JM,jm)=>{"use strict";var Lm=qh(),U8=$h(),Dm=Ec(),Gh=Wh(),q8=Dm("Object.prototype.toString"),Um=da()(),km=typeof globalThis>"u"?global:globalThis,j8=U8(),$8=Dm("String.prototype.slice"),qm={},Vh=Object.getPrototypeOf;Um&&Gh&&Vh&&Lm(j8,function(r){if(typeof km[r]=="function"){var e=new km[r];if(Symbol.toStringTag in e){var t=Vh(e),n=Gh(t,Symbol.toStringTag);if(!n){var i=Vh(t);n=Gh(i,Symbol.toStringTag)}qm[r]=n.get}}});var W8=function(e){var t=!1;return Lm(qm,function(n,i){if(!t)try{var o=n.call(e);o===i&&(t=o)}catch{}}),t},H8=zh();jm.exports=function(e){return H8(e)?!Um||!(Symbol.toStringTag in e)?$8(q8(e),8,-1):W8(e):!1}});var rb=V(He=>{"use strict";var K8=vm(),z8=_m(),Fr=$m(),Wm=zh();function Qo(r){return r.call.bind(r)}var Hm=typeof BigInt<"u",Km=typeof Symbol<"u",lr=Qo(Object.prototype.toString),G8=Qo(Number.prototype.valueOf),V8=Qo(String.prototype.valueOf),J8=Qo(Boolean.prototype.valueOf);Hm&&(zm=Qo(BigInt.prototype.valueOf));var zm;Km&&(Gm=Qo(Symbol.prototype.valueOf));var Gm;function ya(r,e){if(typeof r!="object")return!1;try{return e(r),!0}catch{return!1}}He.isArgumentsObject=K8;He.isGeneratorFunction=z8;He.isTypedArray=Wm;function X8(r){return typeof Promise<"u"&&r instanceof Promise||r!==null&&typeof r=="object"&&typeof r.then=="function"&&typeof r.catch=="function"}He.isPromise=X8;function Y8(r){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(r):Wm(r)||Jm(r)}He.isArrayBufferView=Y8;function Q8(r){return Fr(r)==="Uint8Array"}He.isUint8Array=Q8;function Z8(r){return Fr(r)==="Uint8ClampedArray"}He.isUint8ClampedArray=Z8;function e5(r){return Fr(r)==="Uint16Array"}He.isUint16Array=e5;function t5(r){return Fr(r)==="Uint32Array"}He.isUint32Array=t5;function r5(r){return Fr(r)==="Int8Array"}He.isInt8Array=r5;function n5(r){return Fr(r)==="Int16Array"}He.isInt16Array=n5;function i5(r){return Fr(r)==="Int32Array"}He.isInt32Array=i5;function o5(r){return Fr(r)==="Float32Array"}He.isFloat32Array=o5;function s5(r){return Fr(r)==="Float64Array"}He.isFloat64Array=s5;function a5(r){return Fr(r)==="BigInt64Array"}He.isBigInt64Array=a5;function f5(r){return Fr(r)==="BigUint64Array"}He.isBigUint64Array=f5;function Cc(r){return lr(r)==="[object Map]"}Cc.working=typeof Map<"u"&&Cc(new Map);function c5(r){return typeof Map>"u"?!1:Cc.working?Cc(r):r instanceof Map}He.isMap=c5;function Bc(r){return lr(r)==="[object Set]"}Bc.working=typeof Set<"u"&&Bc(new Set);function u5(r){return typeof Set>"u"?!1:Bc.working?Bc(r):r instanceof Set}He.isSet=u5;function Oc(r){return lr(r)==="[object WeakMap]"}Oc.working=typeof WeakMap<"u"&&Oc(new WeakMap);function l5(r){return typeof WeakMap>"u"?!1:Oc.working?Oc(r):r instanceof WeakMap}He.isWeakMap=l5;function Xh(r){return lr(r)==="[object WeakSet]"}Xh.working=typeof WeakSet<"u"&&Xh(new WeakSet);function h5(r){return Xh(r)}He.isWeakSet=h5;function Rc(r){return lr(r)==="[object ArrayBuffer]"}Rc.working=typeof ArrayBuffer<"u"&&Rc(new ArrayBuffer);function Vm(r){return typeof ArrayBuffer>"u"?!1:Rc.working?Rc(r):r instanceof ArrayBuffer}He.isArrayBuffer=Vm;function Pc(r){return lr(r)==="[object DataView]"}Pc.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Pc(new DataView(new ArrayBuffer(1),0,1));function Jm(r){return typeof DataView>"u"?!1:Pc.working?Pc(r):r instanceof DataView}He.isDataView=Jm;var Jh=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function ga(r){return lr(r)==="[object SharedArrayBuffer]"}function Xm(r){return typeof Jh>"u"?!1:(typeof ga.working>"u"&&(ga.working=ga(new Jh)),ga.working?ga(r):r instanceof Jh)}He.isSharedArrayBuffer=Xm;function d5(r){return lr(r)==="[object AsyncFunction]"}He.isAsyncFunction=d5;function p5(r){return lr(r)==="[object Map Iterator]"}He.isMapIterator=p5;function g5(r){return lr(r)==="[object Set Iterator]"}He.isSetIterator=g5;function y5(r){return lr(r)==="[object Generator]"}He.isGeneratorObject=y5;function m5(r){return lr(r)==="[object WebAssembly.Module]"}He.isWebAssemblyCompiledModule=m5;function Ym(r){return ya(r,G8)}He.isNumberObject=Ym;function Qm(r){return ya(r,V8)}He.isStringObject=Qm;function Zm(r){return ya(r,J8)}He.isBooleanObject=Zm;function eb(r){return Hm&&ya(r,zm)}He.isBigIntObject=eb;function tb(r){return Km&&ya(r,Gm)}He.isSymbolObject=tb;function b5(r){return Ym(r)||Qm(r)||Zm(r)||eb(r)||tb(r)}He.isBoxedPrimitive=b5;function v5(r){return typeof Uint8Array<"u"&&(Vm(r)||Xm(r))}He.isAnyArrayBuffer=v5;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(r){Object.defineProperty(He,r,{enumerable:!1,value:function(){throw new Error(r+" is not supported in userland")}})})});var ib=V((YM,nb)=>{nb.exports=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}});var Zt=V((QM,Yh)=>{typeof Object.create=="function"?Yh.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Yh.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}});var va=V(Ke=>{var ob=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++)n[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return n},w5=/%[sdj%]/g;Ke.format=function(r){if(!jc(r)){for(var e=[],t=0;t<arguments.length;t++)e.push(Kn(arguments[t]));return e.join(" ")}for(var t=1,n=arguments,i=n.length,o=String(r).replace(w5,function(f){if(f==="%%")return"%";if(t>=i)return f;switch(f){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch{return"[Circular]"}default:return f}}),s=n[t];t<i;s=n[++t])qc(s)||!Zo(s)?o+=" "+s:o+=" "+Kn(s);return o};Ke.deprecate=function(r,e){if(typeof process<"u"&&process.noDeprecation===!0)return r;if(typeof process>"u")return function(){return Ke.deprecate(r,e).apply(this,arguments)};var t=!1;function n(){if(!t){if(process.throwDeprecation)throw new Error(e);process.traceDeprecation?console.trace(e):console.error(e),t=!0}return r.apply(this,arguments)}return n};var Nc={},sb=/^$/;process.env.NODE_DEBUG&&(kc=process.env.NODE_DEBUG,kc=kc.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),sb=new RegExp("^"+kc+"$","i"));var kc;Ke.debuglog=function(r){if(r=r.toUpperCase(),!Nc[r])if(sb.test(r)){var e=process.pid;Nc[r]=function(){var t=Ke.format.apply(Ke,arguments);console.error("%s %d: %s",r,e,t)}}else Nc[r]=function(){};return Nc[r]};function Kn(r,e){var t={seen:[],stylize:_5};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),t0(e)?t.showHidden=e:e&&Ke._extend(t,e),Vi(t.showHidden)&&(t.showHidden=!1),Vi(t.depth)&&(t.depth=2),Vi(t.colors)&&(t.colors=!1),Vi(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=x5),Dc(t,r,t.depth)}Ke.inspect=Kn;Kn.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Kn.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function x5(r,e){var t=Kn.styles[e];return t?"\x1B["+Kn.colors[t][0]+"m"+r+"\x1B["+Kn.colors[t][1]+"m":r}function _5(r,e){return r}function S5(r){var e={};return r.forEach(function(t,n){e[t]=!0}),e}function Dc(r,e,t){if(r.customInspect&&e&&Lc(e.inspect)&&e.inspect!==Ke.inspect&&!(e.constructor&&e.constructor.prototype===e)){var n=e.inspect(t,r);return jc(n)||(n=Dc(r,n,t)),n}var i=E5(r,e);if(i)return i;var o=Object.keys(e),s=S5(o);if(r.showHidden&&(o=Object.getOwnPropertyNames(e)),ba(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return Qh(e);if(o.length===0){if(Lc(e)){var f=e.name?": "+e.name:"";return r.stylize("[Function"+f+"]","special")}if(ma(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(Uc(e))return r.stylize(Date.prototype.toString.call(e),"date");if(ba(e))return Qh(e)}var h="",g=!1,_=["{","}"];if(ab(e)&&(g=!0,_=["[","]"]),Lc(e)){var T=e.name?": "+e.name:"";h=" [Function"+T+"]"}if(ma(e)&&(h=" "+RegExp.prototype.toString.call(e)),Uc(e)&&(h=" "+Date.prototype.toUTCString.call(e)),ba(e)&&(h=" "+Qh(e)),o.length===0&&(!g||e.length==0))return _[0]+h+_[1];if(t<0)return ma(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special");r.seen.push(e);var I;return g?I=A5(r,e,t,s,o):I=o.map(function(x){return e0(r,e,t,s,x,g)}),r.seen.pop(),F5(I,h,_)}function E5(r,e){if(Vi(e))return r.stylize("undefined","undefined");if(jc(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(t,"string")}if(fb(e))return r.stylize(""+e,"number");if(t0(e))return r.stylize(""+e,"boolean");if(qc(e))return r.stylize("null","null")}function Qh(r){return"["+Error.prototype.toString.call(r)+"]"}function A5(r,e,t,n,i){for(var o=[],s=0,f=e.length;s<f;++s)cb(e,String(s))?o.push(e0(r,e,t,n,String(s),!0)):o.push("");return i.forEach(function(h){h.match(/^\d+$/)||o.push(e0(r,e,t,n,h,!0))}),o}function e0(r,e,t,n,i,o){var s,f,h;if(h=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},h.get?h.set?f=r.stylize("[Getter/Setter]","special"):f=r.stylize("[Getter]","special"):h.set&&(f=r.stylize("[Setter]","special")),cb(n,i)||(s="["+i+"]"),f||(r.seen.indexOf(h.value)<0?(qc(t)?f=Dc(r,h.value,null):f=Dc(r,h.value,t-1),f.indexOf(`
`)>-1&&(o?f=f.split(`
`).map(function(g){return"  "+g}).join(`
`).slice(2):f=`
`+f.split(`
`).map(function(g){return"   "+g}).join(`
`))):f=r.stylize("[Circular]","special")),Vi(s)){if(o&&i.match(/^\d+$/))return f;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.slice(1,-1),s=r.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=r.stylize(s,"string"))}return s+": "+f}function F5(r,e,t){var n=0,i=r.reduce(function(o,s){return n++,s.indexOf(`
`)>=0&&n++,o+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?t[0]+(e===""?"":e+`
 `)+" "+r.join(`,
  `)+" "+t[1]:t[0]+e+" "+r.join(", ")+" "+t[1]}Ke.types=rb();function ab(r){return Array.isArray(r)}Ke.isArray=ab;function t0(r){return typeof r=="boolean"}Ke.isBoolean=t0;function qc(r){return r===null}Ke.isNull=qc;function T5(r){return r==null}Ke.isNullOrUndefined=T5;function fb(r){return typeof r=="number"}Ke.isNumber=fb;function jc(r){return typeof r=="string"}Ke.isString=jc;function M5(r){return typeof r=="symbol"}Ke.isSymbol=M5;function Vi(r){return r===void 0}Ke.isUndefined=Vi;function ma(r){return Zo(r)&&r0(r)==="[object RegExp]"}Ke.isRegExp=ma;Ke.types.isRegExp=ma;function Zo(r){return typeof r=="object"&&r!==null}Ke.isObject=Zo;function Uc(r){return Zo(r)&&r0(r)==="[object Date]"}Ke.isDate=Uc;Ke.types.isDate=Uc;function ba(r){return Zo(r)&&(r0(r)==="[object Error]"||r instanceof Error)}Ke.isError=ba;Ke.types.isNativeError=ba;function Lc(r){return typeof r=="function"}Ke.isFunction=Lc;function I5(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||typeof r>"u"}Ke.isPrimitive=I5;Ke.isBuffer=ib();function r0(r){return Object.prototype.toString.call(r)}function Zh(r){return r<10?"0"+r.toString(10):r.toString(10)}var C5=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function B5(){var r=new Date,e=[Zh(r.getHours()),Zh(r.getMinutes()),Zh(r.getSeconds())].join(":");return[r.getDate(),C5[r.getMonth()],e].join(" ")}Ke.log=function(){console.log("%s - %s",B5(),Ke.format.apply(Ke,arguments))};Ke.inherits=Zt();Ke._extend=function(r,e){if(!e||!Zo(e))return r;for(var t=Object.keys(e),n=t.length;n--;)r[t[n]]=e[t[n]];return r};function cb(r,e){return Object.prototype.hasOwnProperty.call(r,e)}var Gi=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;Ke.promisify=function(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');if(Gi&&e[Gi]){var t=e[Gi];if(typeof t!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,Gi,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var n,i,o=new Promise(function(h,g){n=h,i=g}),s=[],f=0;f<arguments.length;f++)s.push(arguments[f]);s.push(function(h,g){h?i(h):n(g)});try{e.apply(this,s)}catch(h){i(h)}return o}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Gi&&Object.defineProperty(t,Gi,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,ob(e))};Ke.promisify.custom=Gi;function O5(r,e){if(!r){var t=new Error("Promise was rejected with a falsy value");t.reason=r,r=t}return e(r)}function R5(r){if(typeof r!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var i=t.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};r.apply(this,t).then(function(f){process.nextTick(s.bind(null,null,f))},function(f){process.nextTick(O5.bind(null,f,s))})}return Object.setPrototypeOf(e,Object.getPrototypeOf(r)),Object.defineProperties(e,ob(r)),e}Ke.callbackify=R5});var Hr=V(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.b64UrlDecode=ut.b64UrlEncode=ut.bufferTob64Url=ut.bufferTob64=ut.b64UrlToBuffer=ut.stringToB64Url=ut.stringToBuffer=ut.bufferToString=ut.b64UrlToString=ut.concatBuffers=void 0;var ub=Tf();function P5(r){let e=0;for(let i=0;i<r.length;i++)e+=r[i].byteLength;let t=new Uint8Array(e),n=0;t.set(new Uint8Array(r[0]),n),n+=r[0].byteLength;for(let i=1;i<r.length;i++)t.set(new Uint8Array(r[i]),n),n+=r[i].byteLength;return t}ut.concatBuffers=P5;function N5(r){let e=db(r);return lb(e)}ut.b64UrlToString=N5;function lb(r){if(typeof TextDecoder>"u"){let e=va().TextDecoder;return new e("utf-8",{fatal:!0}).decode(r)}return new TextDecoder("utf-8",{fatal:!0}).decode(r)}ut.bufferToString=lb;function hb(r){if(typeof TextEncoder>"u"){let e=va().TextEncoder;return new e().encode(r)}return new TextEncoder().encode(r)}ut.stringToBuffer=hb;function k5(r){return gb(hb(r))}ut.stringToB64Url=k5;function db(r){return new Uint8Array(ub.toByteArray(mb(r)))}ut.b64UrlToBuffer=db;function pb(r){return ub.fromByteArray(new Uint8Array(r))}ut.bufferTob64=pb;function gb(r){return yb(pb(r))}ut.bufferTob64Url=gb;function yb(r){return r.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}ut.b64UrlEncode=yb;function mb(r){r=r.replace(/\-/g,"+").replace(/\_/g,"/");let e;return r.length%4==0?e=0:e=4-r.length%4,r.concat("=".repeat(e))}ut.b64UrlDecode=mb});var bb=V(i0=>{"use strict";Object.defineProperty(i0,"__esModule",{value:!0});var zn=Hr(),n0=class{constructor(){if(this.keyLength=4096,this.publicExponent=65537,this.hashAlgorithm="sha256",!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let e=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),t=await this.driver.exportKey("jwk",e.privateKey);return{kty:t.kty,e:t.e,n:t.n,d:t.d,p:t.p,q:t.q,dp:t.dp,dq:t.dq,qi:t.qi}}async sign(e,t,{saltLength:n}={}){let i=await this.driver.sign({name:"RSA-PSS",saltLength:32},await this.jwkToCryptoKey(e),t);return new Uint8Array(i)}async hash(e,t="SHA-256"){let n=await this.driver.digest(t,e);return new Uint8Array(n)}async verify(e,t,n){let i={kty:"RSA",e:"AQAB",n:e},o=await this.jwkToPublicCryptoKey(i),s=await this.driver.digest("SHA-256",t),f=await this.driver.verify({name:"RSA-PSS",saltLength:0},o,n,t),h=await this.driver.verify({name:"RSA-PSS",saltLength:32},o,n,t),g=await this.driver.verify({name:"RSA-PSS",saltLength:Math.ceil((o.algorithm.modulusLength-1)/8)-s.byteLength-2},o,n,t);return f||h||g}async jwkToCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if(typeof crypto>"u")return!1;let e=crypto==null?void 0:crypto.subtle;return e===void 0?!1:["generateKey","importKey","exportKey","digest","sign"].every(n=>typeof e[n]=="function")}async encrypt(e,t,n){let i=await this.driver.importKey("raw",typeof t=="string"?zn.stringToBuffer(t):t,{name:"PBKDF2",length:32},!1,["deriveKey"]),o=await this.driver.deriveKey({name:"PBKDF2",salt:n?zn.stringToBuffer(n):zn.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),s=new Uint8Array(16);crypto.getRandomValues(s);let f=await this.driver.encrypt({name:"AES-CBC",iv:s},o,e);return zn.concatBuffers([s,f])}async decrypt(e,t,n){let i=await this.driver.importKey("raw",typeof t=="string"?zn.stringToBuffer(t):t,{name:"PBKDF2",length:32},!1,["deriveKey"]),o=await this.driver.deriveKey({name:"PBKDF2",salt:n?zn.stringToBuffer(n):zn.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),s=e.slice(0,16),f=await this.driver.decrypt({name:"AES-CBC",iv:s},o,e.slice(16));return zn.concatBuffers([f])}};i0.default=n0});var vb=V(s0=>{"use strict";Object.defineProperty(s0,"__esModule",{value:!0});var o0=class{constructor(e){this.api=e}getInfo(){return this.api.get("info").then(e=>e.data)}getPeers(){return this.api.get("peers").then(e=>e.data)}};s0.default=o0});var xa=V(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.getError=void 0;var a0=class extends Error{constructor(e,t={}){t.message?super(t.message):super(),this.type=e,this.response=t.response}getType(){return this.type}};wa.default=a0;function L5(r){let e=r.data;if(typeof r.data=="string")try{e=JSON.parse(r.data)}catch{}if(r.data instanceof ArrayBuffer||r.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch{}return e?e.error||e:r.statusText||"unknown"}wa.getError=L5});var _b=V(f0=>{"use strict";Object.defineProperty(f0,"__esModule",{value:!0});var er=_a();async function wb(r){if(Array.isArray(r)){let n=er.default.utils.concatBuffers([er.default.utils.stringToBuffer("list"),er.default.utils.stringToBuffer(r.length.toString())]);return await xb(r,await er.default.crypto.hash(n,"SHA-384"))}let e=er.default.utils.concatBuffers([er.default.utils.stringToBuffer("blob"),er.default.utils.stringToBuffer(r.byteLength.toString())]),t=er.default.utils.concatBuffers([await er.default.crypto.hash(e,"SHA-384"),await er.default.crypto.hash(r,"SHA-384")]);return await er.default.crypto.hash(t,"SHA-384")}f0.default=wb;async function xb(r,e){if(r.length<1)return e;let t=er.default.utils.concatBuffers([e,await wb(r[0])]),n=await er.default.crypto.hash(t,"SHA-384");return await xb(r.slice(1),n)}});var p0=V($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.debug=$e.validatePath=$e.arrayCompare=$e.bufferToInt=$e.intToBuffer=$e.arrayFlatten=$e.generateProofs=$e.buildLayers=$e.generateTransactionChunks=$e.generateTree=$e.computeRootHash=$e.generateLeaves=$e.chunkData=$e.MIN_CHUNK_SIZE=$e.MAX_CHUNK_SIZE=void 0;var $c=_a(),Sb=Hr();$e.MAX_CHUNK_SIZE=256*1024;$e.MIN_CHUNK_SIZE=32*1024;var Ea=32,es=32;async function u0(r){let e=[],t=r,n=0;for(;t.byteLength>=$e.MAX_CHUNK_SIZE;){let i=$e.MAX_CHUNK_SIZE,o=t.byteLength-$e.MAX_CHUNK_SIZE;o>0&&o<$e.MIN_CHUNK_SIZE&&(i=Math.ceil(t.byteLength/2));let s=t.slice(0,i),f=await $c.default.crypto.hash(s);n+=s.byteLength,e.push({dataHash:f,minByteRange:n-s.byteLength,maxByteRange:n}),t=t.slice(i)}return e.push({dataHash:await $c.default.crypto.hash(t),minByteRange:n,maxByteRange:n+t.byteLength}),e}$e.chunkData=u0;async function l0(r){return Promise.all(r.map(async({dataHash:e,minByteRange:t,maxByteRange:n})=>({type:"leaf",id:await wt(await Promise.all([wt(e),wt(Aa(n))])),dataHash:e,minByteRange:t,maxByteRange:n})))}$e.generateLeaves=l0;async function D5(r){return(await Eb(r)).id}$e.computeRootHash=D5;async function Eb(r){return await Wc(await l0(await u0(r)))}$e.generateTree=Eb;async function U5(r){let e=await u0(r),t=await l0(e),n=await Wc(t),i=await Ab(n),o=e.slice(-1)[0];return o.maxByteRange-o.minByteRange===0&&(e.splice(e.length-1,1),i.splice(i.length-1,1)),{data_root:n.id,chunks:e,proofs:i}}$e.generateTransactionChunks=U5;async function Wc(r,e=0){if(r.length<2)return r[0];let t=[];for(let n=0;n<r.length;n+=2)t.push(await q5(r[n],r[n+1]));return Wc(t,e+1)}$e.buildLayers=Wc;function Ab(r){let e=c0(r);return Array.isArray(e)?h0(e):[e]}$e.generateProofs=Ab;function c0(r,e=new Uint8Array,t=0){if(r.type=="leaf")return{offset:r.maxByteRange-1,proof:(0,Sb.concatBuffers)([e,r.dataHash,Aa(r.maxByteRange)])};if(r.type=="branch"){let n=(0,Sb.concatBuffers)([e,r.leftChild.id,r.rightChild.id,Aa(r.byteRange)]);return[c0(r.leftChild,n,t+1),c0(r.rightChild,n,t+1)]}throw new Error("Unexpected node type")}function h0(r){let e=[];return r.forEach(t=>{Array.isArray(t)?e.push(...h0(t)):e.push(t)}),e}$e.arrayFlatten=h0;async function q5(r,e){return e?{type:"branch",id:await wt([await wt(r.id),await wt(e.id),await wt(Aa(r.maxByteRange))]),byteRange:r.maxByteRange,maxByteRange:e.maxByteRange,leftChild:r,rightChild:e}:r}async function wt(r){return Array.isArray(r)&&(r=$c.default.utils.concatBuffers(r)),new Uint8Array(await $c.default.crypto.hash(r))}function Aa(r){let e=new Uint8Array(Ea);for(var t=e.length-1;t>=0;t--){var n=r%256;e[t]=n,r=(r-n)/256}return e}$e.intToBuffer=Aa;function d0(r){let e=0;for(var t=0;t<r.length;t++)e*=256,e+=r[t];return e}$e.bufferToInt=d0;var j5=(r,e)=>r.every((t,n)=>e[n]===t);$e.arrayCompare=j5;async function Sa(r,e,t,n,i){if(n<=0)return!1;if(e>=n)return Sa(r,0,n-1,n,i);if(e<0)return Sa(r,0,0,n,i);if(i.length==es+Ea){let T=i.slice(0,es),I=i.slice(T.length,T.length+Ea),x=await wt([await wt(T),await wt(I)]);return(0,$e.arrayCompare)(r,x)?{offset:n-1,leftBound:t,rightBound:n,chunkSize:n-t}:!1}let o=i.slice(0,es),s=i.slice(o.length,o.length+es),f=i.slice(o.length+s.length,o.length+s.length+Ea),h=d0(f),g=i.slice(o.length+s.length+f.length),_=await wt([await wt(o),await wt(s),await wt(f)]);return(0,$e.arrayCompare)(r,_)?e<h?await Sa(o,e,t,Math.min(n,h),g):await Sa(s,e,Math.max(t,h),n,g):!1}$e.validatePath=Sa;async function Fb(r,e=""){if(r.byteLength<1)return e;let t=r.slice(0,es),n=r.slice(t.length,t.length+es),i=r.slice(t.length+n.length,t.length+n.length+Ea),o=d0(i),s=r.slice(t.length+n.length+i.length),f=await wt([await wt(t),await wt(n),await wt(i)]),h=`${e}
${JSON.stringify(Buffer.from(t))},${JSON.stringify(Buffer.from(n))},${o} => ${JSON.stringify(f)}`;return Fb(s,h)}$e.debug=Fb});var Kc=V(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});Ta.Tag=void 0;var gt=Hr(),$5=_b(),W5=p0(),Hc=class{get(e,t){if(!Object.getOwnPropertyNames(this).includes(e))throw new Error(`Field "${e}" is not a property of the Arweave Transaction class.`);return this[e]instanceof Uint8Array?t&&t.decode&&t.string?gt.bufferToString(this[e]):t&&t.decode&&!t.string?this[e]:gt.bufferTob64Url(this[e]):t&&t.decode==!0?t&&t.string?gt.b64UrlToString(this[e]):gt.b64UrlToBuffer(this[e]):this[e]}},Fa=class extends Hc{constructor(e,t,n=!1){super(),this.name=e,this.value=t}};Ta.Tag=Fa;var g0=class extends Hc{constructor(e={}){super(),this.format=2,this.id="",this.last_tx="",this.owner="",this.tags=[],this.target="",this.quantity="0",this.data_size="0",this.data=new Uint8Array,this.data_root="",this.reward="0",this.signature="",Object.assign(this,e),typeof this.data=="string"&&(this.data=gt.b64UrlToBuffer(this.data)),e.tags&&(this.tags=e.tags.map(t=>new Fa(t.name,t.value)))}addTag(e,t){this.tags.push(new Fa(gt.stringToB64Url(e),gt.stringToB64Url(t)))}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:gt.bufferTob64Url(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(e){this.owner=e}setSignature({id:e,owner:t,reward:n,tags:i,signature:o}){this.id=e,this.owner=t,n&&(this.reward=n),i&&(this.tags=i),this.signature=o}async prepareChunks(e){!this.chunks&&e.byteLength>0&&(this.chunks=await(0,W5.generateTransactionChunks)(e),this.data_root=gt.bufferTob64Url(this.chunks.data_root)),!this.chunks&&e.byteLength===0&&(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(e,t){if(!this.chunks)throw new Error("Chunks have not been prepared");let n=this.chunks.proofs[e],i=this.chunks.chunks[e];return{data_root:this.data_root,data_size:this.data_size,data_path:gt.bufferTob64Url(n.proof),offset:n.offset.toString(),chunk:gt.bufferTob64Url(t.slice(i.minByteRange,i.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:let e=this.tags.reduce((n,i)=>gt.concatBuffers([n,i.get("name",{decode:!0,string:!1}),i.get("value",{decode:!0,string:!1})]),new Uint8Array);return gt.concatBuffers([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),gt.stringToBuffer(this.quantity),gt.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),e]);case 2:this.data_root||await this.prepareChunks(this.data);let t=this.tags.map(n=>[n.get("name",{decode:!0,string:!1}),n.get("value",{decode:!0,string:!1})]);return await(0,$5.default)([gt.stringToBuffer(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),gt.stringToBuffer(this.quantity),gt.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),t,gt.stringToBuffer(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}};Ta.default=g0});var Cb=V(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});zc.TransactionUploader=void 0;var Tb=Kc(),H5=Hr(),y0=xa(),K5=p0(),Mb=1,z5=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"],Ib=1e3*40,Ma=class{get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}constructor(e,t){if(this.api=e,this.chunkIndex=0,this.txPosted=!1,this.lastRequestTimeEnd=0,this.totalErrors=0,this.lastResponseStatus=0,this.lastResponseError="",!t.id)throw new Error("Transaction is not signed");if(!t.chunks)throw new Error("Transaction chunks not prepared");this.data=t.data,this.transaction=new Tb.default(Object.assign({},t,{data:new Uint8Array(0)}))}async uploadChunk(e){if(this.isComplete)throw new Error("Upload is already complete");if(this.lastResponseError!==""?this.totalErrors++:this.totalErrors=0,this.totalErrors===100)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let t=this.lastResponseError===""?0:Math.max(this.lastRequestTimeEnd+Ib-Date.now(),Ib);if(t>0&&(t=t-t*Math.random()*.3,await new Promise(s=>setTimeout(s,t))),this.lastResponseError="",!this.txPosted){await this.postTransaction();return}e&&(this.chunkIndex=e);let n=this.transaction.getChunk(e||this.chunkIndex,this.data);if(!await(0,K5.validatePath)(this.transaction.chunks.data_root,parseInt(n.offset),0,parseInt(n.data_size),H5.b64UrlToBuffer(n.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);let o=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch(s=>(console.error(s.message),{status:-1,data:{error:s.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=o.status,this.lastResponseStatus==200)this.chunkIndex++;else if(this.lastResponseError=(0,y0.getError)(o),z5.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized(e,t,n){if(!t||typeof t.chunkIndex!="number"||typeof t.transaction!="object")throw new Error("Serialized object does not match expected format.");var i=new Tb.default(t.transaction);i.chunks||await i.prepareChunks(n);let o=new Ma(e,i);if(o.chunkIndex=t.chunkIndex,o.lastRequestTimeEnd=t.lastRequestTimeEnd,o.lastResponseError=t.lastResponseError,o.lastResponseStatus=t.lastResponseStatus,o.txPosted=t.txPosted,o.data=n,o.transaction.data_root!==t.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return o}static async fromTransactionId(e,t){let n=await e.get(`tx/${t}`);if(n.status!==200)throw new Error(`Tx ${t} not found: ${n.status}`);let i=n.data;return i.data=new Uint8Array(0),{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:i}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=Mb){this.transaction.data=this.data;let n=await this.api.post("tx",this.transaction).catch(i=>(console.error(i),{status:-1,data:{error:i.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=n.status,this.transaction.data=new Uint8Array(0),n.status>=200&&n.status<300){this.txPosted=!0,this.chunkIndex=Mb;return}throw this.lastResponseError=(0,y0.getError)(n),new Error(`Unable to upload transaction: ${n.status}, ${this.lastResponseError}`)}let t=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=t.status,!(t.status>=200&&t.status<300))throw this.lastResponseError=(0,y0.getError)(t),new Error(`Unable to upload transaction: ${t.status}, ${this.lastResponseError}`);this.txPosted=!0}};zc.TransactionUploader=Ma});var Ji=V((fI,Bb)=>{Bb.exports={}});var Ob=V(Yi=>{"use strict";var Xi=Yi&&Yi.__await||function(r){return this instanceof Xi?(this.v=r,this):new Xi(r)},G5=Yi&&Yi.__asyncGenerator||function(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(I){n[I]&&(i[I]=function(x){return new Promise(function(C,j){o.push([I,x,C,j])>1||f(I,x)})})}function f(I,x){try{h(n[I](x))}catch(C){T(o[0][3],C)}}function h(I){I.value instanceof Xi?Promise.resolve(I.value.v).then(g,_):T(o[0][2],I)}function g(I){f("next",I)}function _(I){f("throw",I)}function T(I,x){I(x),o.shift(),o.length&&f(o[0][0],o[0][1])}};Object.defineProperty(Yi,"__esModule",{value:!0});var m0=xa(),pn=Kc(),Ia=Hr(),b0=Cb();Ji();var v0=class{constructor(e,t,n){this.api=e,this.crypto=t,this.chunks=n}getTransactionAnchor(){return this.api.get("tx_anchor",{transformResponse:[]}).then(e=>e.data)}getPrice(e,t){let n=t?`price/${e}/${t}`:`price/${e}`;return this.api.get(n,{transformResponse:[function(i){return i}]}).then(i=>i.data)}async get(e){let t=await this.api.get(`tx/${e}`);if(t.status==200){let n=parseInt(t.data.data_size);if(t.data.format>=2&&n>0&&n<=1024*1024*12){let i=await this.getData(e);return new pn.default(Object.assign(Object.assign({},t.data),{data:i}))}return new pn.default(Object.assign(Object.assign({},t.data),{format:t.data.format||1}))}throw t.status==404?new m0.default("TX_NOT_FOUND"):t.status==410?new m0.default("TX_FAILED"):new m0.default("TX_INVALID")}fromRaw(e){return new pn.default(e)}async search(e,t){return this.api.post("arql",{op:"equals",expr1:e,expr2:t}).then(n=>n.data?n.data:[])}getStatus(e){return this.api.get(`tx/${e}/status`).then(t=>t.status==200?{status:200,confirmed:t.data}:{status:t.status,confirmed:null})}async getData(e,t){let n;try{n=await this.chunks.downloadChunkedData(e)}catch(i){console.error(`Error while trying to download chunked data for ${e}`),console.error(i)}if(!n){console.warn(`Falling back to gateway cache for ${e}`);try{n=(await this.api.get(`/${e}`)).data}catch(i){console.error(`Error while trying to download contiguous data from gateway cache for ${e}`),console.error(i)}}if(!n)throw new Error(`${e} was not found!`);return t&&t.decode&&!t.string?n:t&&t.decode&&t.string?Ia.bufferToString(n):Ia.bufferTob64Url(n)}async sign(e,t,n){if(!t&&typeof arweaveWallet!="object")throw new Error("A new Arweave transaction must provide the jwk parameter.");if(!t||t==="use_wallet"){try{(await arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await arweaveWallet.connect(["SIGN_TRANSACTION"])}catch{}let i=await arweaveWallet.sign(e,n);e.setSignature({id:i.id,owner:i.owner,reward:i.reward,tags:i.tags,signature:i.signature})}else{e.setOwner(t.n);let i=await e.getSignatureData(),o=await this.crypto.sign(t,i,n),s=await this.crypto.hash(o);e.setSignature({id:Ia.bufferTob64Url(s),owner:t.n,signature:Ia.bufferTob64Url(o)})}}async verify(e){let t=await e.getSignatureData(),n=e.get("signature",{decode:!0,string:!1}),i=Ia.bufferTob64Url(await this.crypto.hash(n));if(e.id!==i)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(e.owner,t,n)}async post(e){if(typeof e=="string"?e=new pn.default(JSON.parse(e)):typeof e.readInt32BE=="function"?e=new pn.default(JSON.parse(e.toString())):typeof e=="object"&&!(e instanceof pn.default)&&(e=new pn.default(e)),!(e instanceof pn.default))throw new Error("Must be Transaction object");e.chunks||await e.prepareChunks(e.data);let t=await this.getUploader(e,e.data);try{for(;!t.isComplete;)await t.uploadChunk()}catch(n){if(t.lastResponseStatus>0)return{status:t.lastResponseStatus,statusText:t.lastResponseError,data:{error:t.lastResponseError}};throw n}return{status:200,statusText:"OK",data:{}}}async getUploader(e,t){let n;if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),e instanceof pn.default){if(t||(t=e.data),!(t instanceof Uint8Array))throw new Error("Data format is invalid");e.chunks||await e.prepareChunks(t),n=new b0.TransactionUploader(this.api,e),(!n.data||n.data.length===0)&&(n.data=t)}else{if(typeof e=="string"&&(e=await b0.TransactionUploader.fromTransactionId(this.api,e)),!t||!(t instanceof Uint8Array))throw new Error("Must provide data when resuming upload");n=await b0.TransactionUploader.fromSerialized(this.api,e,t)}return n}upload(e,t){return G5(this,arguments,function*(){let i=yield Xi(this.getUploader(e,t));for(;!i.isComplete;)yield Xi(i.uploadChunk()),yield yield Xi(i);return yield Xi(i)})}};Yi.default=v0});var Pb=V(x0=>{"use strict";Object.defineProperty(x0,"__esModule",{value:!0});var Rb=Hr();Ji();var w0=class{constructor(e,t){this.api=e,this.crypto=t}getBalance(e){return this.api.get(`wallet/${e}/balance`,{transformResponse:[function(t){return t}]}).then(t=>t.data)}getLastTransactionID(e){return this.api.get(`wallet/${e}/last_tx`).then(t=>t.data)}generate(){return this.crypto.generateJWK()}async jwkToAddress(e){return!e||e==="use_wallet"?this.getAddress():this.getAddress(e)}async getAddress(e){if(!e||e==="use_wallet"){try{await arweaveWallet.connect(["ACCESS_ADDRESS"])}catch{}return arweaveWallet.getActiveAddress()}else return this.ownerToAddress(e.n)}async ownerToAddress(e){return Rb.bufferTob64Url(await this.crypto.hash(Rb.b64UrlToBuffer(e)))}};x0.default=w0});var kb=V(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.SiloResource=void 0;var Nb=Hr(),_0=class{constructor(e,t,n){this.api=e,this.crypto=t,this.transactions=n}async get(e){if(!e)throw new Error("No Silo URI specified");let t=await this.parseUri(e),n=await this.transactions.search("Silo-Name",t.getAccessKey());if(n.length==0)throw new Error(`No data could be found for the Silo URI: ${e}`);let i=await this.transactions.get(n[0]);if(!i)throw new Error(`No data could be found for the Silo URI: ${e}`);let o=i.get("data",{decode:!0,string:!1});return this.crypto.decrypt(o,t.getEncryptionKey())}async readTransactionData(e,t){if(!t)throw new Error("No Silo URI specified");let n=await this.parseUri(t),i=e.get("data",{decode:!0,string:!1});return this.crypto.decrypt(i,n.getEncryptionKey())}async parseUri(e){let t=e.match(/^([a-z0-9-_]+)\.([0-9]+)/i);if(!t)throw new Error("Invalid Silo name, must be a name in the format of [a-z0-9]+.[0-9]+, e.g. 'bubble.7'");let n=t[1],i=Math.pow(2,parseInt(t[2])),o=await this.hash(Nb.stringToBuffer(n),i),s=Nb.bufferTob64(o.slice(0,15)),f=await this.hash(o.slice(16,31),1);return new Gc(e,s,f)}async hash(e,t){let n=await this.crypto.hash(e);for(let i=0;i<t-1;i++)n=await this.crypto.hash(n);return n}};Ca.default=_0;var Gc=class{constructor(e,t,n){this.uri=e,this.accessKey=t,this.encryptionKey=n}getUri(){return this.uri}getAccessKey(){return this.accessKey}getEncryptionKey(){return this.encryptionKey}};Ca.SiloResource=Gc});var Db=V(E0=>{"use strict";Object.defineProperty(E0,"__esModule",{value:!0});var Lb=xa(),V5=Hr(),S0=class{constructor(e){this.api=e}async getTransactionOffset(e){let t=await this.api.get(`tx/${e}/offset`);if(t.status===200)return t.data;throw new Error(`Unable to get transaction offset: ${(0,Lb.getError)(t)}`)}async getChunk(e){let t=await this.api.get(`chunk/${e}`);if(t.status===200)return t.data;throw new Error(`Unable to get chunk: ${(0,Lb.getError)(t)}`)}async getChunkData(e){let t=await this.getChunk(e);return V5.b64UrlToBuffer(t.chunk)}firstChunkOffset(e){return parseInt(e.offset)-parseInt(e.size)+1}async downloadChunkedData(e){let t=await this.getTransactionOffset(e),n=parseInt(t.size),o=parseInt(t.offset)-n+1,s=new Uint8Array(n),f=0;for(;f<n;){this.api.config.logging&&console.log(`[chunk] ${f}/${n}`);let h;try{h=await this.getChunkData(o+f)}catch{console.error(`[chunk] Failed to fetch chunk at offset ${o+f}`),console.error("[chunk] This could indicate that the chunk wasn't uploaded or hasn't yet seeded properly to a particular gateway/node")}if(h)s.set(h,f),f+=h.length;else throw new Error(`Couldn't complete data download at ${f}/${n}`)}return s}};E0.default=S0});var Ub=V(A0=>{"use strict";Object.defineProperty(A0,"__esModule",{value:!0});var J5=xa();Ji();var ts=class{constructor(e,t){this.api=e,this.network=t}async get(e){let t=await this.api.get(`${ts.ENDPOINT}${e}`);if(t.status===200)return t.data;throw t.status===404?new J5.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${t}`)}async getCurrent(){let{current:e}=await this.network.getInfo();return await this.get(e)}};A0.default=ts;ts.ENDPOINT="block/hash/"});var _a=V(F0=>{"use strict";Object.defineProperty(F0,"__esModule",{value:!0});var X5=O1(),Y5=Gy(),Q5=bb(),Z5=vb(),eS=Ob(),tS=Pb(),qb=Kc(),Ba=Hr(),rS=kb(),nS=Db(),iS=Ub(),Kr=class{constructor(e){this.api=new Y5.default(e),this.wallets=new tS.default(this.api,Kr.crypto),this.chunks=new nS.default(this.api),this.transactions=new eS.default(this.api,Kr.crypto,this.chunks),this.silo=new rS.default(this.api,this.crypto,this.transactions),this.network=new Z5.default(this.api),this.blocks=new iS.default(this.api,this.network),this.ar=new X5.default}get crypto(){return Kr.crypto}get utils(){return Kr.utils}getConfig(){return{api:this.api.getConfig(),crypto:null}}async createTransaction(e,t){let n={};if(Object.assign(n,e),!e.data&&!(e.target&&e.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(e.owner==null&&t&&t!=="use_wallet"&&(n.owner=t.n),e.last_tx==null&&(n.last_tx=await this.transactions.getTransactionAnchor()),typeof e.data=="string"&&(e.data=Ba.stringToBuffer(e.data)),e.data instanceof ArrayBuffer&&(e.data=new Uint8Array(e.data)),e.data&&!(e.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(e.reward==null){let o=e.data?e.data.byteLength:0;n.reward=await this.transactions.getPrice(o,n.target)}n.data_root="",n.data_size=e.data?e.data.byteLength.toString():"0",n.data=e.data||new Uint8Array(0);let i=new qb.default(n);return await i.getSignatureData(),i}async createSiloTransaction(e,t,n){let i={};if(Object.assign(i,e),!e.data)throw new Error("Silo transactions must have a 'data' value");if(!n)throw new Error("No Silo URI specified.");if(e.target||e.quantity)throw new Error("Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.");if(e.owner==null){if(!t||!t.n)throw new Error("A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.");i.owner=t.n}e.last_tx==null&&(i.last_tx=await this.transactions.getTransactionAnchor());let o=await this.silo.parseUri(n);if(typeof e.data=="string"){let f=await this.crypto.encrypt(Ba.stringToBuffer(e.data),o.getEncryptionKey());i.reward=await this.transactions.getPrice(f.byteLength),i.data=Ba.bufferTob64Url(f)}if(e.data instanceof Uint8Array){let f=await this.crypto.encrypt(e.data,o.getEncryptionKey());i.reward=await this.transactions.getPrice(f.byteLength),i.data=Ba.bufferTob64Url(f)}let s=new qb.default(i);return s.addTag("Silo-Name",o.getAccessKey()),s.addTag("Silo-Version","0.1.0"),s}arql(e){return this.api.post("/arql",e).then(t=>t.data||[])}};F0.default=Kr;Kr.crypto=new Q5.default;Kr.utils=Ba});var T0=V(Gn=>{"use strict";var oS=Gn&&Gn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),sS=Gn&&Gn.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&oS(e,r,t)};Object.defineProperty(Gn,"__esModule",{value:!0});var Oa=_a();Oa.default.init=function(r={}){function e(){let s={host:"arweave.net",port:443,protocol:"https"};if(typeof location!="object"||!location.protocol||!location.hostname)return s;let f=location.protocol.replace(":",""),h=location.hostname,g=location.port?parseInt(location.port):f=="https"?443:80;return["localhost","127.0.0.1"].includes(h)||f=="file"?s:{host:h,port:g,protocol:f}}let t=e(),n=r.protocol||t.protocol,i=r.host||t.host,o=r.port||t.port;return new Oa.default(Object.assign(Object.assign({},r),{host:i,protocol:n,port:o}))};typeof globalThis=="object"?globalThis.Arweave=Oa.default:typeof self=="object"&&(self.Arweave=Oa.default);sS(_a(),Gn);Gn.default=Oa.default});var gn=V(Qe=>{"use strict";var aS=Qe&&Qe.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),fS=Qe&&Qe.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),cS=Qe&&Qe.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&aS(e,r,t);return fS(e,r),e};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.b64UrlDecode=Qe.b64UrlEncode=Qe.bufferTob64Url=Qe.bufferTob64=Qe.b64UrlToBuffer=Qe.stringToB64Url=Qe.stringToBuffer=Qe.bufferToString=Qe.b64UrlToString=Qe.concatBuffers=void 0;var jb=cS(Tf());function uS(r){let e=0;for(let i=0;i<r.length;i++)e+=r[i].byteLength;let t=new Uint8Array(e),n=0;t.set(new Uint8Array(r[0]),n),n+=r[0].byteLength;for(let i=1;i<r.length;i++)t.set(new Uint8Array(r[i]),n),n+=r[i].byteLength;return t}Qe.concatBuffers=uS;function lS(r){let e=Hb(r);return $b(e)}Qe.b64UrlToString=lS;function $b(r){if(typeof TextDecoder>"u"){let e=va().TextDecoder;return new e("utf-8",{fatal:!0}).decode(r)}return new TextDecoder("utf-8",{fatal:!0}).decode(r)}Qe.bufferToString=$b;function Wb(r){if(typeof TextEncoder>"u"){let e=va().TextEncoder;return new e().encode(r)}return new TextEncoder().encode(r)}Qe.stringToBuffer=Wb;function hS(r){return zb(Wb(r))}Qe.stringToB64Url=hS;function Hb(r){return new Uint8Array(jb.toByteArray(Vb(r)))}Qe.b64UrlToBuffer=Hb;function Kb(r){return jb.fromByteArray(new Uint8Array(r))}Qe.bufferTob64=Kb;function zb(r){return Gb(Kb(r))}Qe.bufferTob64Url=zb;function Gb(r){return r.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}Qe.b64UrlEncode=Gb;function Vb(r){r=r.replace(/\-/g,"+").replace(/\_/g,"/");let e;return r.length%4==0?e=0:e=4-r.length%4,r.concat("=".repeat(e))}Qe.b64UrlDecode=Vb});var Jb=V(I0=>{"use strict";Object.defineProperty(I0,"__esModule",{value:!0});var dS=eh(),M0=class{constructor(){this.BigNum=(e,t)=>{let n=dS.BigNumber.clone({DECIMAL_PLACES:t});return new n(e)}}winstonToAr(e,{formatted:t=!1,decimals:n=12,trim:i=!0}={}){let o=this.stringToBigNum(e,n).shiftedBy(-12);return t?o.toFormat(n):o.toFixed(n)}arToWinston(e,{formatted:t=!1}={}){let n=this.stringToBigNum(e).shiftedBy(12);return t?n.toFormat():n.toFixed(0)}compare(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.comparedTo(i)}isEqual(e,t){return this.compare(e,t)===0}isLessThan(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.isLessThan(i)}isGreaterThan(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.isGreaterThan(i)}add(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.plus(t).toFixed(0)}sub(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.minus(t).toFixed(0)}stringToBigNum(e,t=12){return this.BigNum(e,t)}};I0.default=M0});var Xb=V(Ra=>{"use strict";var pS=Ra&&Ra.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ra,"__esModule",{value:!0});var gS=pS(Ah()),C0=class{constructor(e){this.METHOD_GET="GET",this.METHOD_POST="POST",this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e)}getConfig(){return this.config}mergeDefaults(e){let t=e.protocol||"http",n=e.port||(t==="https"?443:80);return{host:e.host||"127.0.0.1",protocol:t,port:n,timeout:e.timeout||2e4,logging:e.logging||!1,logger:e.logger||console.log,network:e.network}}async get(e,t){try{return await this.request().get(e,t)}catch(n){if(n.response&&n.response.status)return n.response;throw n}}async post(e,t,n){try{return await this.request().post(e,t,n)}catch(i){if(i.response&&i.response.status)return i.response;throw i}}request(){let e={};this.config.network&&(e["x-network"]=this.config.network);let t=gS.default.create({baseURL:`${this.config.protocol}://${this.config.host}:${this.config.port}`,timeout:this.config.timeout,maxContentLength:1024*1024*512,headers:e});return this.config.logging&&(t.interceptors.request.use(n=>(this.config.logger(`Requesting: ${n.baseURL}/${n.url}`),n)),t.interceptors.response.use(n=>(this.config.logger(`Response:   ${n.config.url} - ${n.status}`),n))),t}};Ra.default=C0});var B0=V(()=>{});var $t=V((Yb,O0)=>{(function(r,e){"use strict";function t(R,l){if(!R)throw new Error(l||"Assertion failed")}function n(R,l){R.super_=l;var b=function(){};b.prototype=l.prototype,R.prototype=new b,R.prototype.constructor=R}function i(R,l,b){if(i.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,R!==null&&((l==="le"||l==="be")&&(b=l,l=10),this._init(R||0,l||10,b||"be"))}typeof r=="object"?r.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=B0().Buffer}catch{}i.isBN=function(l){return l instanceof i?!0:l!==null&&typeof l=="object"&&l.constructor.wordSize===i.wordSize&&Array.isArray(l.words)},i.max=function(l,b){return l.cmp(b)>0?l:b},i.min=function(l,b){return l.cmp(b)<0?l:b},i.prototype._init=function(l,b,d){if(typeof l=="number")return this._initNumber(l,b,d);if(typeof l=="object")return this._initArray(l,b,d);b==="hex"&&(b=16),t(b===(b|0)&&b>=2&&b<=36),l=l.toString().replace(/\s+/g,"");var a=0;l[0]==="-"&&(a++,this.negative=1),a<l.length&&(b===16?this._parseHex(l,a,d):(this._parseBase(l,b,a),d==="le"&&this._initArray(this.toArray(),b,d)))},i.prototype._initNumber=function(l,b,d){l<0&&(this.negative=1,l=-l),l<67108864?(this.words=[l&67108863],this.length=1):l<4503599627370496?(this.words=[l&67108863,l/67108864&67108863],this.length=2):(t(l<9007199254740992),this.words=[l&67108863,l/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),b,d)},i.prototype._initArray=function(l,b,d){if(t(typeof l.length=="number"),l.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(l.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var u,v,E=0;if(d==="be")for(a=l.length-1,u=0;a>=0;a-=3)v=l[a]|l[a-1]<<8|l[a-2]<<16,this.words[u]|=v<<E&67108863,this.words[u+1]=v>>>26-E&67108863,E+=24,E>=26&&(E-=26,u++);else if(d==="le")for(a=0,u=0;a<l.length;a+=3)v=l[a]|l[a+1]<<8|l[a+2]<<16,this.words[u]|=v<<E&67108863,this.words[u+1]=v>>>26-E&67108863,E+=24,E>=26&&(E-=26,u++);return this.strip()};function s(R,l){var b=R.charCodeAt(l);return b>=65&&b<=70?b-55:b>=97&&b<=102?b-87:b-48&15}function f(R,l,b){var d=s(R,b);return b-1>=l&&(d|=s(R,b-1)<<4),d}i.prototype._parseHex=function(l,b,d){this.length=Math.ceil((l.length-b)/6),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var u=0,v=0,E;if(d==="be")for(a=l.length-1;a>=b;a-=2)E=f(l,b,a)<<u,this.words[v]|=E&67108863,u>=18?(u-=18,v+=1,this.words[v]|=E>>>26):u+=8;else{var p=l.length-b;for(a=p%2===0?b+1:b;a<l.length;a+=2)E=f(l,b,a)<<u,this.words[v]|=E&67108863,u>=18?(u-=18,v+=1,this.words[v]|=E>>>26):u+=8}this.strip()};function h(R,l,b,d){for(var a=0,u=Math.min(R.length,b),v=l;v<u;v++){var E=R.charCodeAt(v)-48;a*=d,E>=49?a+=E-49+10:E>=17?a+=E-17+10:a+=E}return a}i.prototype._parseBase=function(l,b,d){this.words=[0],this.length=1;for(var a=0,u=1;u<=67108863;u*=b)a++;a--,u=u/b|0;for(var v=l.length-d,E=v%a,p=Math.min(v,v-E)+d,c=0,F=d;F<p;F+=a)c=h(l,F,F+a,b),this.imuln(u),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(E!==0){var M=1;for(c=h(l,F,l.length,b),F=0;F<E;F++)M*=b;this.imuln(M),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},i.prototype.copy=function(l){l.words=new Array(this.length);for(var b=0;b<this.length;b++)l.words[b]=this.words[b];l.length=this.length,l.negative=this.negative,l.red=this.red},i.prototype.clone=function(){var l=new i(null);return this.copy(l),l},i.prototype._expand=function(l){for(;this.length<l;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],T=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(l,b){l=l||10,b=b|0||1;var d;if(l===16||l==="hex"){d="";for(var a=0,u=0,v=0;v<this.length;v++){var E=this.words[v],p=((E<<a|u)&16777215).toString(16);u=E>>>24-a&16777215,u!==0||v!==this.length-1?d=g[6-p.length]+p+d:d=p+d,a+=2,a>=26&&(a-=26,v--)}for(u!==0&&(d=u.toString(16)+d);d.length%b!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(l===(l|0)&&l>=2&&l<=36){var c=_[l],F=T[l];d="";var M=this.clone();for(M.negative=0;!M.isZero();){var m=M.modn(F).toString(l);M=M.idivn(F),M.isZero()?d=m+d:d=g[c-m.length]+m+d}for(this.isZero()&&(d="0"+d);d.length%b!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}t(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var l=this.words[0];return this.length===2?l+=this.words[1]*67108864:this.length===3&&this.words[2]===1?l+=4503599627370496+this.words[1]*67108864:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-l:l},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(l,b){return t(typeof o<"u"),this.toArrayLike(o,l,b)},i.prototype.toArray=function(l,b){return this.toArrayLike(Array,l,b)},i.prototype.toArrayLike=function(l,b,d){var a=this.byteLength(),u=d||Math.max(1,a);t(a<=u,"byte array longer than desired length"),t(u>0,"Requested array length <= 0"),this.strip();var v=b==="le",E=new l(u),p,c,F=this.clone();if(v){for(c=0;!F.isZero();c++)p=F.andln(255),F.iushrn(8),E[c]=p;for(;c<u;c++)E[c]=0}else{for(c=0;c<u-a;c++)E[c]=0;for(c=0;!F.isZero();c++)p=F.andln(255),F.iushrn(8),E[u-c-1]=p}return E},Math.clz32?i.prototype._countBits=function(l){return 32-Math.clz32(l)}:i.prototype._countBits=function(l){var b=l,d=0;return b>=4096&&(d+=13,b>>>=13),b>=64&&(d+=7,b>>>=7),b>=8&&(d+=4,b>>>=4),b>=2&&(d+=2,b>>>=2),d+b},i.prototype._zeroBits=function(l){if(l===0)return 26;var b=l,d=0;return(b&8191)===0&&(d+=13,b>>>=13),(b&127)===0&&(d+=7,b>>>=7),(b&15)===0&&(d+=4,b>>>=4),(b&3)===0&&(d+=2,b>>>=2),(b&1)===0&&d++,d},i.prototype.bitLength=function(){var l=this.words[this.length-1],b=this._countBits(l);return(this.length-1)*26+b};function I(R){for(var l=new Array(R.bitLength()),b=0;b<l.length;b++){var d=b/26|0,a=b%26;l[b]=(R.words[d]&1<<a)>>>a}return l}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var l=0,b=0;b<this.length;b++){var d=this._zeroBits(this.words[b]);if(l+=d,d!==26)break}return l},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(l){return this.negative!==0?this.abs().inotn(l).iaddn(1):this.clone()},i.prototype.fromTwos=function(l){return this.testn(l-1)?this.notn(l).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(l){for(;this.length<l.length;)this.words[this.length++]=0;for(var b=0;b<l.length;b++)this.words[b]=this.words[b]|l.words[b];return this.strip()},i.prototype.ior=function(l){return t((this.negative|l.negative)===0),this.iuor(l)},i.prototype.or=function(l){return this.length>l.length?this.clone().ior(l):l.clone().ior(this)},i.prototype.uor=function(l){return this.length>l.length?this.clone().iuor(l):l.clone().iuor(this)},i.prototype.iuand=function(l){var b;this.length>l.length?b=l:b=this;for(var d=0;d<b.length;d++)this.words[d]=this.words[d]&l.words[d];return this.length=b.length,this.strip()},i.prototype.iand=function(l){return t((this.negative|l.negative)===0),this.iuand(l)},i.prototype.and=function(l){return this.length>l.length?this.clone().iand(l):l.clone().iand(this)},i.prototype.uand=function(l){return this.length>l.length?this.clone().iuand(l):l.clone().iuand(this)},i.prototype.iuxor=function(l){var b,d;this.length>l.length?(b=this,d=l):(b=l,d=this);for(var a=0;a<d.length;a++)this.words[a]=b.words[a]^d.words[a];if(this!==b)for(;a<b.length;a++)this.words[a]=b.words[a];return this.length=b.length,this.strip()},i.prototype.ixor=function(l){return t((this.negative|l.negative)===0),this.iuxor(l)},i.prototype.xor=function(l){return this.length>l.length?this.clone().ixor(l):l.clone().ixor(this)},i.prototype.uxor=function(l){return this.length>l.length?this.clone().iuxor(l):l.clone().iuxor(this)},i.prototype.inotn=function(l){t(typeof l=="number"&&l>=0);var b=Math.ceil(l/26)|0,d=l%26;this._expand(b),d>0&&b--;for(var a=0;a<b;a++)this.words[a]=~this.words[a]&67108863;return d>0&&(this.words[a]=~this.words[a]&67108863>>26-d),this.strip()},i.prototype.notn=function(l){return this.clone().inotn(l)},i.prototype.setn=function(l,b){t(typeof l=="number"&&l>=0);var d=l/26|0,a=l%26;return this._expand(d+1),b?this.words[d]=this.words[d]|1<<a:this.words[d]=this.words[d]&~(1<<a),this.strip()},i.prototype.iadd=function(l){var b;if(this.negative!==0&&l.negative===0)return this.negative=0,b=this.isub(l),this.negative^=1,this._normSign();if(this.negative===0&&l.negative!==0)return l.negative=0,b=this.isub(l),l.negative=1,b._normSign();var d,a;this.length>l.length?(d=this,a=l):(d=l,a=this);for(var u=0,v=0;v<a.length;v++)b=(d.words[v]|0)+(a.words[v]|0)+u,this.words[v]=b&67108863,u=b>>>26;for(;u!==0&&v<d.length;v++)b=(d.words[v]|0)+u,this.words[v]=b&67108863,u=b>>>26;if(this.length=d.length,u!==0)this.words[this.length]=u,this.length++;else if(d!==this)for(;v<d.length;v++)this.words[v]=d.words[v];return this},i.prototype.add=function(l){var b;return l.negative!==0&&this.negative===0?(l.negative=0,b=this.sub(l),l.negative^=1,b):l.negative===0&&this.negative!==0?(this.negative=0,b=l.sub(this),this.negative=1,b):this.length>l.length?this.clone().iadd(l):l.clone().iadd(this)},i.prototype.isub=function(l){if(l.negative!==0){l.negative=0;var b=this.iadd(l);return l.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(l),this.negative=1,this._normSign();var d=this.cmp(l);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var a,u;d>0?(a=this,u=l):(a=l,u=this);for(var v=0,E=0;E<u.length;E++)b=(a.words[E]|0)-(u.words[E]|0)+v,v=b>>26,this.words[E]=b&67108863;for(;v!==0&&E<a.length;E++)b=(a.words[E]|0)+v,v=b>>26,this.words[E]=b&67108863;if(v===0&&E<a.length&&a!==this)for(;E<a.length;E++)this.words[E]=a.words[E];return this.length=Math.max(this.length,E),a!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(l){return this.clone().isub(l)};function x(R,l,b){b.negative=l.negative^R.negative;var d=R.length+l.length|0;b.length=d,d=d-1|0;var a=R.words[0]|0,u=l.words[0]|0,v=a*u,E=v&67108863,p=v/67108864|0;b.words[0]=E;for(var c=1;c<d;c++){for(var F=p>>>26,M=p&67108863,m=Math.min(c,l.length-1),S=Math.max(0,c-R.length+1);S<=m;S++){var ne=c-S|0;a=R.words[ne]|0,u=l.words[S]|0,v=a*u+M,F+=v/67108864|0,M=v&67108863}b.words[c]=M|0,p=F|0}return p!==0?b.words[c]=p|0:b.length--,b.strip()}var C=function(l,b,d){var a=l.words,u=b.words,v=d.words,E=0,p,c,F,M=a[0]|0,m=M&8191,S=M>>>13,ne=a[1]|0,ie=ne&8191,ce=ne>>>13,he=a[2]|0,re=he&8191,y=he>>>13,w=a[3]|0,A=w&8191,k=w>>>13,P=a[4]|0,N=P&8191,D=P>>>13,B=a[5]|0,O=B&8191,L=B>>>13,U=a[6]|0,$=U&8191,Z=U>>>13,ee=a[7]|0,te=ee&8191,fe=ee>>>13,ge=a[8]|0,ae=ge&8191,ue=ge>>>13,Se=a[9]|0,me=Se&8191,be=Se>>>13,Xe=u[0]|0,pe=Xe&8191,ye=Xe>>>13,Fe=u[1]|0,de=Fe&8191,le=Fe>>>13,ht=u[2]|0,ve=ht&8191,we=ht>>>13,dt=u[3]|0,xe=dt&8191,_e=dt>>>13,pt=u[4]|0,Te=pt&8191,Me=pt>>>13,Ps=u[5]|0,Ie=Ps&8191,Ce=Ps>>>13,Ns=u[6]|0,Be=Ns&8191,Oe=Ns>>>13,ks=u[7]|0,Re=ks&8191,Pe=ks>>>13,Ls=u[8]|0,Ne=Ls&8191,ke=Ls>>>13,Ds=u[9]|0,Le=Ds&8191,De=Ds>>>13;d.negative=l.negative^b.negative,d.length=19,p=Math.imul(m,pe),c=Math.imul(m,ye),c=c+Math.imul(S,pe)|0,F=Math.imul(S,ye);var Eo=(E+p|0)+((c&8191)<<13)|0;E=(F+(c>>>13)|0)+(Eo>>>26)|0,Eo&=67108863,p=Math.imul(ie,pe),c=Math.imul(ie,ye),c=c+Math.imul(ce,pe)|0,F=Math.imul(ce,ye),p=p+Math.imul(m,de)|0,c=c+Math.imul(m,le)|0,c=c+Math.imul(S,de)|0,F=F+Math.imul(S,le)|0;var st=(E+p|0)+((c&8191)<<13)|0;E=(F+(c>>>13)|0)+(st>>>26)|0,st&=67108863,p=Math.imul(re,pe),c=Math.imul(re,ye),c=c+Math.imul(y,pe)|0,F=Math.imul(y,ye),p=p+Math.imul(ie,de)|0,c=c+Math.imul(ie,le)|0,c=c+Math.imul(ce,de)|0,F=F+Math.imul(ce,le)|0,p=p+Math.imul(m,ve)|0,c=c+Math.imul(m,we)|0,c=c+Math.imul(S,ve)|0,F=F+Math.imul(S,we)|0;var at=(E+p|0)+((c&8191)<<13)|0;E=(F+(c>>>13)|0)+(at>>>26)|0,at&=67108863,p=Math.imul(A,pe),c=Math.imul(A,ye),c=c+Math.imul(k,pe)|0,F=Math.imul(k,ye),p=p+Math.imul(re,de)|0,c=c+Math.imul(re,le)|0,c=c+Math.imul(y,de)|0,F=F+Math.imul(y,le)|0,p=p+Math.imul(ie,ve)|0,c=c+Math.imul(ie,we)|0,c=c+Math.imul(ce,ve)|0,F=F+Math.imul(ce,we)|0,p=p+Math.imul(m,xe)|0,c=c+Math.imul(m,_e)|0,c=c+Math.imul(S,xe)|0,F=F+Math.imul(S,_e)|0;var ai=(E+p|0)+((c&8191)<<13)|0;E=(F+(c>>>13)|0)+(ai>>>26)|0,ai&=67108863,p=Math.imul(N,pe),c=Math.imul(N,ye),c=c+Math.imul(D,pe)|0,F=Math.imul(D,ye),p=p+Math.imul(A,de)|0,c=c+Math.imul(A,le)|0,c=c+Math.imul(k,de)|0,F=F+Math.imul(k,le)|0,p=p+Math.imul(re,ve)|0,c=c+Math.imul(re,we)|0,c=c+Math.imul(y,ve)|0,F=F+Math.imul(y,we)|0,p=p+Math.imul(ie,xe)|0,c=c+Math.imul(ie,_e)|0,c=c+Math.imul(ce,xe)|0,F=F+Math.imul(ce,_e)|0,p=p+Math.imul(m,Te)|0,c=c+Math.imul(m,Me)|0,c=c+Math.imul(S,Te)|0,F=F+Math.imul(S,Me)|0;var fi=(E+p|0)+((c&8191)<<13)|0;E=(F+(c>>>13)|0)+(fi>>>26)|0,fi&=67108863,p=Math.imul(O,pe),c=Math.imul(O,ye),c=c+Math.imul(L,pe)|0,F=Math.imul(L,ye),p=p+Math.imul(N,de)|0,c=c+Math.imul(N,le)|0,c=c+Math.imul(D,de)|0,F=F+Math.imul(D,le)|0,p=p+Math.imul(A,ve)|0,c=c+Math.imul(A,we)|0,c=c+Math.imul(k,ve)|0,F=F+Math.imul(k,we)|0,p=p+Math.imul(re,xe)|0,c=c+Math.imul(re,_e)|0,c=c+Math.imul(y,xe)|0,F=F+Math.imul(y,_e)|0,p=p+Math.imul(ie,Te)|0,c=c+Math.imul(ie,Me)|0,c=c+Math.imul(ce,Te)|0,F=F+Math.imul(ce,Me)|0,p=p+Math.imul(m,Ie)|0,c=c+Math.imul(m,Ce)|0,c=c+Math.imul(S,Ie)|0,F=F+Math.imul(S,Ce)|0;var ci=(E+p|0)+((c&8191)<<13)|0;E=(F+(c>>>13)|0)+(ci>>>26)|0,ci&=67108863,p=Math.imul($,pe),c=Math.imul($,ye),c=c+Math.imul(Z,pe)|0,F=Math.imul(Z,ye),p=p+Math.imul(O,de)|0,c=c+Math.imul(O,le)|0,c=c+Math.imul(L,de)|0,F=F+Math.imul(L,le)|0,p=p+Math.imul(N,ve)|0,c=c+Math.imul(N,we)|0,c=c+Math.imul(D,ve)|0,F=F+Math.imul(D,we)|0,p=p+Math.imul(A,xe)|0,c=c+Math.imul(A,_e)|0,c=c+Math.imul(k,xe)|0,F=F+Math.imul(k,_e)|0,p=p+Math.imul(re,Te)|0,c=c+Math.imul(re,Me)|0,c=c+Math.imul(y,Te)|0,F=F+Math.imul(y,Me)|0,p=p+Math.imul(ie,Ie)|0,c=c+Math.imul(ie,Ce)|0,c=c+Math.imul(ce,Ie)|0,F=F+Math.imul(ce,Ce)|0,p=p+Math.imul(m,Be)|0,c=c+Math.imul(m,Oe)|0,c=c+Math.imul(S,Be)|0,F=F+Math.imul(S,Oe)|0;var ui=(E+p|0)+((c&8191)<<13)|0;E=(F+(c>>>13)|0)+(ui>>>26)|0,ui&=67108863,p=Math.imul(te,pe),c=Math.imul(te,ye),c=c+Math.imul(fe,pe)|0,F=Math.imul(fe,ye),p=p+Math.imul($,de)|0,c=c+Math.imul($,le)|0,c=c+Math.imul(Z,de)|0,F=F+Math.imul(Z,le)|0,p=p+Math.imul(O,ve)|0,c=c+Math.imul(O,we)|0,c=c+Math.imul(L,ve)|0,F=F+Math.imul(L,we)|0,p=p+Math.imul(N,xe)|0,c=c+Math.imul(N,_e)|0,c=c+Math.imul(D,xe)|0,F=F+Math.imul(D,_e)|0,p=p+Math.imul(A,Te)|0,c=c+Math.imul(A,Me)|0,c=c+Math.imul(k,Te)|0,F=F+Math.imul(k,Me)|0,p=p+Math.imul(re,Ie)|0,c=c+Math.imul(re,Ce)|0,c=c+Math.imul(y,Ie)|0,F=F+Math.imul(y,Ce)|0,p=p+Math.imul(ie,Be)|0,c=c+Math.imul(ie,Oe)|0,c=c+Math.imul(ce,Be)|0,F=F+Math.imul(ce,Oe)|0,p=p+Math.imul(m,Re)|0,c=c+Math.imul(m,Pe)|0,c=c+Math.imul(S,Re)|0,F=F+Math.imul(S,Pe)|0;var li=(E+p|0)+((c&8191)<<13)|0;E=(F+(c>>>13)|0)+(li>>>26)|0,li&=67108863,p=Math.imul(ae,pe),c=Math.imul(ae,ye),c=c+Math.imul(ue,pe)|0,F=Math.imul(ue,ye),p=p+Math.imul(te,de)|0,c=c+Math.imul(te,le)|0,c=c+Math.imul(fe,de)|0,F=F+Math.imul(fe,le)|0,p=p+Math.imul($,ve)|0,c=c+Math.imul($,we)|0,c=c+Math.imul(Z,ve)|0,F=F+Math.imul(Z,we)|0,p=p+Math.imul(O,xe)|0,c=c+Math.imul(O,_e)|0,c=c+Math.imul(L,xe)|0,F=F+Math.imul(L,_e)|0,p=p+Math.imul(N,Te)|0,c=c+Math.imul(N,Me)|0,c=c+Math.imul(D,Te)|0,F=F+Math.imul(D,Me)|0,p=p+Math.imul(A,Ie)|0,c=c+Math.imul(A,Ce)|0,c=c+Math.imul(k,Ie)|0,F=F+Math.imul(k,Ce)|0,p=p+Math.imul(re,Be)|0,c=c+Math.imul(re,Oe)|0,c=c+Math.imul(y,Be)|0,F=F+Math.imul(y,Oe)|0,p=p+Math.imul(ie,Re)|0,c=c+Math.imul(ie,Pe)|0,c=c+Math.imul(ce,Re)|0,F=F+Math.imul(ce,Pe)|0,p=p+Math.imul(m,Ne)|0,c=c+Math.imul(m,ke)|0,c=c+Math.imul(S,Ne)|0,F=F+Math.imul(S,ke)|0;var hi=(E+p|0)+((c&8191)<<13)|0;E=(F+(c>>>13)|0)+(hi>>>26)|0,hi&=67108863,p=Math.imul(me,pe),c=Math.imul(me,ye),c=c+Math.imul(be,pe)|0,F=Math.imul(be,ye),p=p+Math.imul(ae,de)|0,c=c+Math.imul(ae,le)|0,c=c+Math.imul(ue,de)|0,F=F+Math.imul(ue,le)|0,p=p+Math.imul(te,ve)|0,c=c+Math.imul(te,we)|0,c=c+Math.imul(fe,ve)|0,F=F+Math.imul(fe,we)|0,p=p+Math.imul($,xe)|0,c=c+Math.imul($,_e)|0,c=c+Math.imul(Z,xe)|0,F=F+Math.imul(Z,_e)|0,p=p+Math.imul(O,Te)|0,c=c+Math.imul(O,Me)|0,c=c+Math.imul(L,Te)|0,F=F+Math.imul(L,Me)|0,p=p+Math.imul(N,Ie)|0,c=c+Math.imul(N,Ce)|0,c=c+Math.imul(D,Ie)|0,F=F+Math.imul(D,Ce)|0,p=p+Math.imul(A,Be)|0,c=c+Math.imul(A,Oe)|0,c=c+Math.imul(k,Be)|0,F=F+Math.imul(k,Oe)|0,p=p+Math.imul(re,Re)|0,c=c+Math.imul(re,Pe)|0,c=c+Math.imul(y,Re)|0,F=F+Math.imul(y,Pe)|0,p=p+Math.imul(ie,Ne)|0,c=c+Math.imul(ie,ke)|0,c=c+Math.imul(ce,Ne)|0,F=F+Math.imul(ce,ke)|0,p=p+Math.imul(m,Le)|0,c=c+Math.imul(m,De)|0,c=c+Math.imul(S,Le)|0,F=F+Math.imul(S,De)|0;var di=(E+p|0)+((c&8191)<<13)|0;E=(F+(c>>>13)|0)+(di>>>26)|0,di&=67108863,p=Math.imul(me,de),c=Math.imul(me,le),c=c+Math.imul(be,de)|0,F=Math.imul(be,le),p=p+Math.imul(ae,ve)|0,c=c+Math.imul(ae,we)|0,c=c+Math.imul(ue,ve)|0,F=F+Math.imul(ue,we)|0,p=p+Math.imul(te,xe)|0,c=c+Math.imul(te,_e)|0,c=c+Math.imul(fe,xe)|0,F=F+Math.imul(fe,_e)|0,p=p+Math.imul($,Te)|0,c=c+Math.imul($,Me)|0,c=c+Math.imul(Z,Te)|0,F=F+Math.imul(Z,Me)|0,p=p+Math.imul(O,Ie)|0,c=c+Math.imul(O,Ce)|0,c=c+Math.imul(L,Ie)|0,F=F+Math.imul(L,Ce)|0,p=p+Math.imul(N,Be)|0,c=c+Math.imul(N,Oe)|0,c=c+Math.imul(D,Be)|0,F=F+Math.imul(D,Oe)|0,p=p+Math.imul(A,Re)|0,c=c+Math.imul(A,Pe)|0,c=c+Math.imul(k,Re)|0,F=F+Math.imul(k,Pe)|0,p=p+Math.imul(re,Ne)|0,c=c+Math.imul(re,ke)|0,c=c+Math.imul(y,Ne)|0,F=F+Math.imul(y,ke)|0,p=p+Math.imul(ie,Le)|0,c=c+Math.imul(ie,De)|0,c=c+Math.imul(ce,Le)|0,F=F+Math.imul(ce,De)|0;var pi=(E+p|0)+((c&8191)<<13)|0;E=(F+(c>>>13)|0)+(pi>>>26)|0,pi&=67108863,p=Math.imul(me,ve),c=Math.imul(me,we),c=c+Math.imul(be,ve)|0,F=Math.imul(be,we),p=p+Math.imul(ae,xe)|0,c=c+Math.imul(ae,_e)|0,c=c+Math.imul(ue,xe)|0,F=F+Math.imul(ue,_e)|0,p=p+Math.imul(te,Te)|0,c=c+Math.imul(te,Me)|0,c=c+Math.imul(fe,Te)|0,F=F+Math.imul(fe,Me)|0,p=p+Math.imul($,Ie)|0,c=c+Math.imul($,Ce)|0,c=c+Math.imul(Z,Ie)|0,F=F+Math.imul(Z,Ce)|0,p=p+Math.imul(O,Be)|0,c=c+Math.imul(O,Oe)|0,c=c+Math.imul(L,Be)|0,F=F+Math.imul(L,Oe)|0,p=p+Math.imul(N,Re)|0,c=c+Math.imul(N,Pe)|0,c=c+Math.imul(D,Re)|0,F=F+Math.imul(D,Pe)|0,p=p+Math.imul(A,Ne)|0,c=c+Math.imul(A,ke)|0,c=c+Math.imul(k,Ne)|0,F=F+Math.imul(k,ke)|0,p=p+Math.imul(re,Le)|0,c=c+Math.imul(re,De)|0,c=c+Math.imul(y,Le)|0,F=F+Math.imul(y,De)|0;var gi=(E+p|0)+((c&8191)<<13)|0;E=(F+(c>>>13)|0)+(gi>>>26)|0,gi&=67108863,p=Math.imul(me,xe),c=Math.imul(me,_e),c=c+Math.imul(be,xe)|0,F=Math.imul(be,_e),p=p+Math.imul(ae,Te)|0,c=c+Math.imul(ae,Me)|0,c=c+Math.imul(ue,Te)|0,F=F+Math.imul(ue,Me)|0,p=p+Math.imul(te,Ie)|0,c=c+Math.imul(te,Ce)|0,c=c+Math.imul(fe,Ie)|0,F=F+Math.imul(fe,Ce)|0,p=p+Math.imul($,Be)|0,c=c+Math.imul($,Oe)|0,c=c+Math.imul(Z,Be)|0,F=F+Math.imul(Z,Oe)|0,p=p+Math.imul(O,Re)|0,c=c+Math.imul(O,Pe)|0,c=c+Math.imul(L,Re)|0,F=F+Math.imul(L,Pe)|0,p=p+Math.imul(N,Ne)|0,c=c+Math.imul(N,ke)|0,c=c+Math.imul(D,Ne)|0,F=F+Math.imul(D,ke)|0,p=p+Math.imul(A,Le)|0,c=c+Math.imul(A,De)|0,c=c+Math.imul(k,Le)|0,F=F+Math.imul(k,De)|0;var yi=(E+p|0)+((c&8191)<<13)|0;E=(F+(c>>>13)|0)+(yi>>>26)|0,yi&=67108863,p=Math.imul(me,Te),c=Math.imul(me,Me),c=c+Math.imul(be,Te)|0,F=Math.imul(be,Me),p=p+Math.imul(ae,Ie)|0,c=c+Math.imul(ae,Ce)|0,c=c+Math.imul(ue,Ie)|0,F=F+Math.imul(ue,Ce)|0,p=p+Math.imul(te,Be)|0,c=c+Math.imul(te,Oe)|0,c=c+Math.imul(fe,Be)|0,F=F+Math.imul(fe,Oe)|0,p=p+Math.imul($,Re)|0,c=c+Math.imul($,Pe)|0,c=c+Math.imul(Z,Re)|0,F=F+Math.imul(Z,Pe)|0,p=p+Math.imul(O,Ne)|0,c=c+Math.imul(O,ke)|0,c=c+Math.imul(L,Ne)|0,F=F+Math.imul(L,ke)|0,p=p+Math.imul(N,Le)|0,c=c+Math.imul(N,De)|0,c=c+Math.imul(D,Le)|0,F=F+Math.imul(D,De)|0;var mi=(E+p|0)+((c&8191)<<13)|0;E=(F+(c>>>13)|0)+(mi>>>26)|0,mi&=67108863,p=Math.imul(me,Ie),c=Math.imul(me,Ce),c=c+Math.imul(be,Ie)|0,F=Math.imul(be,Ce),p=p+Math.imul(ae,Be)|0,c=c+Math.imul(ae,Oe)|0,c=c+Math.imul(ue,Be)|0,F=F+Math.imul(ue,Oe)|0,p=p+Math.imul(te,Re)|0,c=c+Math.imul(te,Pe)|0,c=c+Math.imul(fe,Re)|0,F=F+Math.imul(fe,Pe)|0,p=p+Math.imul($,Ne)|0,c=c+Math.imul($,ke)|0,c=c+Math.imul(Z,Ne)|0,F=F+Math.imul(Z,ke)|0,p=p+Math.imul(O,Le)|0,c=c+Math.imul(O,De)|0,c=c+Math.imul(L,Le)|0,F=F+Math.imul(L,De)|0;var bi=(E+p|0)+((c&8191)<<13)|0;E=(F+(c>>>13)|0)+(bi>>>26)|0,bi&=67108863,p=Math.imul(me,Be),c=Math.imul(me,Oe),c=c+Math.imul(be,Be)|0,F=Math.imul(be,Oe),p=p+Math.imul(ae,Re)|0,c=c+Math.imul(ae,Pe)|0,c=c+Math.imul(ue,Re)|0,F=F+Math.imul(ue,Pe)|0,p=p+Math.imul(te,Ne)|0,c=c+Math.imul(te,ke)|0,c=c+Math.imul(fe,Ne)|0,F=F+Math.imul(fe,ke)|0,p=p+Math.imul($,Le)|0,c=c+Math.imul($,De)|0,c=c+Math.imul(Z,Le)|0,F=F+Math.imul(Z,De)|0;var vi=(E+p|0)+((c&8191)<<13)|0;E=(F+(c>>>13)|0)+(vi>>>26)|0,vi&=67108863,p=Math.imul(me,Re),c=Math.imul(me,Pe),c=c+Math.imul(be,Re)|0,F=Math.imul(be,Pe),p=p+Math.imul(ae,Ne)|0,c=c+Math.imul(ae,ke)|0,c=c+Math.imul(ue,Ne)|0,F=F+Math.imul(ue,ke)|0,p=p+Math.imul(te,Le)|0,c=c+Math.imul(te,De)|0,c=c+Math.imul(fe,Le)|0,F=F+Math.imul(fe,De)|0;var wi=(E+p|0)+((c&8191)<<13)|0;E=(F+(c>>>13)|0)+(wi>>>26)|0,wi&=67108863,p=Math.imul(me,Ne),c=Math.imul(me,ke),c=c+Math.imul(be,Ne)|0,F=Math.imul(be,ke),p=p+Math.imul(ae,Le)|0,c=c+Math.imul(ae,De)|0,c=c+Math.imul(ue,Le)|0,F=F+Math.imul(ue,De)|0;var xi=(E+p|0)+((c&8191)<<13)|0;E=(F+(c>>>13)|0)+(xi>>>26)|0,xi&=67108863,p=Math.imul(me,Le),c=Math.imul(me,De),c=c+Math.imul(be,Le)|0,F=Math.imul(be,De);var _i=(E+p|0)+((c&8191)<<13)|0;return E=(F+(c>>>13)|0)+(_i>>>26)|0,_i&=67108863,v[0]=Eo,v[1]=st,v[2]=at,v[3]=ai,v[4]=fi,v[5]=ci,v[6]=ui,v[7]=li,v[8]=hi,v[9]=di,v[10]=pi,v[11]=gi,v[12]=yi,v[13]=mi,v[14]=bi,v[15]=vi,v[16]=wi,v[17]=xi,v[18]=_i,E!==0&&(v[19]=E,d.length++),d};Math.imul||(C=x);function j(R,l,b){b.negative=l.negative^R.negative,b.length=R.length+l.length;for(var d=0,a=0,u=0;u<b.length-1;u++){var v=a;a=0;for(var E=d&67108863,p=Math.min(u,l.length-1),c=Math.max(0,u-R.length+1);c<=p;c++){var F=u-c,M=R.words[F]|0,m=l.words[c]|0,S=M*m,ne=S&67108863;v=v+(S/67108864|0)|0,ne=ne+E|0,E=ne&67108863,v=v+(ne>>>26)|0,a+=v>>>26,v&=67108863}b.words[u]=E,d=v,v=a}return d!==0?b.words[u]=d:b.length--,b.strip()}function H(R,l,b){var d=new z;return d.mulp(R,l,b)}i.prototype.mulTo=function(l,b){var d,a=this.length+l.length;return this.length===10&&l.length===10?d=C(this,l,b):a<63?d=x(this,l,b):a<1024?d=j(this,l,b):d=H(this,l,b),d};function z(R,l){this.x=R,this.y=l}z.prototype.makeRBT=function(l){for(var b=new Array(l),d=i.prototype._countBits(l)-1,a=0;a<l;a++)b[a]=this.revBin(a,d,l);return b},z.prototype.revBin=function(l,b,d){if(l===0||l===d-1)return l;for(var a=0,u=0;u<b;u++)a|=(l&1)<<b-u-1,l>>=1;return a},z.prototype.permute=function(l,b,d,a,u,v){for(var E=0;E<v;E++)a[E]=b[l[E]],u[E]=d[l[E]]},z.prototype.transform=function(l,b,d,a,u,v){this.permute(v,l,b,d,a,u);for(var E=1;E<u;E<<=1)for(var p=E<<1,c=Math.cos(2*Math.PI/p),F=Math.sin(2*Math.PI/p),M=0;M<u;M+=p)for(var m=c,S=F,ne=0;ne<E;ne++){var ie=d[M+ne],ce=a[M+ne],he=d[M+ne+E],re=a[M+ne+E],y=m*he-S*re;re=m*re+S*he,he=y,d[M+ne]=ie+he,a[M+ne]=ce+re,d[M+ne+E]=ie-he,a[M+ne+E]=ce-re,ne!==p&&(y=c*m-F*S,S=c*S+F*m,m=y)}},z.prototype.guessLen13b=function(l,b){var d=Math.max(b,l)|1,a=d&1,u=0;for(d=d/2|0;d;d=d>>>1)u++;return 1<<u+1+a},z.prototype.conjugate=function(l,b,d){if(!(d<=1))for(var a=0;a<d/2;a++){var u=l[a];l[a]=l[d-a-1],l[d-a-1]=u,u=b[a],b[a]=-b[d-a-1],b[d-a-1]=-u}},z.prototype.normalize13b=function(l,b){for(var d=0,a=0;a<b/2;a++){var u=Math.round(l[2*a+1]/b)*8192+Math.round(l[2*a]/b)+d;l[a]=u&67108863,u<67108864?d=0:d=u/67108864|0}return l},z.prototype.convert13b=function(l,b,d,a){for(var u=0,v=0;v<b;v++)u=u+(l[v]|0),d[2*v]=u&8191,u=u>>>13,d[2*v+1]=u&8191,u=u>>>13;for(v=2*b;v<a;++v)d[v]=0;t(u===0),t((u&-8192)===0)},z.prototype.stub=function(l){for(var b=new Array(l),d=0;d<l;d++)b[d]=0;return b},z.prototype.mulp=function(l,b,d){var a=2*this.guessLen13b(l.length,b.length),u=this.makeRBT(a),v=this.stub(a),E=new Array(a),p=new Array(a),c=new Array(a),F=new Array(a),M=new Array(a),m=new Array(a),S=d.words;S.length=a,this.convert13b(l.words,l.length,E,a),this.convert13b(b.words,b.length,F,a),this.transform(E,v,p,c,a,u),this.transform(F,v,M,m,a,u);for(var ne=0;ne<a;ne++){var ie=p[ne]*M[ne]-c[ne]*m[ne];c[ne]=p[ne]*m[ne]+c[ne]*M[ne],p[ne]=ie}return this.conjugate(p,c,a),this.transform(p,c,S,v,a,u),this.conjugate(S,v,a),this.normalize13b(S,a),d.negative=l.negative^b.negative,d.length=l.length+b.length,d.strip()},i.prototype.mul=function(l){var b=new i(null);return b.words=new Array(this.length+l.length),this.mulTo(l,b)},i.prototype.mulf=function(l){var b=new i(null);return b.words=new Array(this.length+l.length),H(this,l,b)},i.prototype.imul=function(l){return this.clone().mulTo(l,this)},i.prototype.imuln=function(l){t(typeof l=="number"),t(l<67108864);for(var b=0,d=0;d<this.length;d++){var a=(this.words[d]|0)*l,u=(a&67108863)+(b&67108863);b>>=26,b+=a/67108864|0,b+=u>>>26,this.words[d]=u&67108863}return b!==0&&(this.words[d]=b,this.length++),this},i.prototype.muln=function(l){return this.clone().imuln(l)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(l){var b=I(l);if(b.length===0)return new i(1);for(var d=this,a=0;a<b.length&&b[a]===0;a++,d=d.sqr());if(++a<b.length)for(var u=d.sqr();a<b.length;a++,u=u.sqr())b[a]!==0&&(d=d.mul(u));return d},i.prototype.iushln=function(l){t(typeof l=="number"&&l>=0);var b=l%26,d=(l-b)/26,a=67108863>>>26-b<<26-b,u;if(b!==0){var v=0;for(u=0;u<this.length;u++){var E=this.words[u]&a,p=(this.words[u]|0)-E<<b;this.words[u]=p|v,v=E>>>26-b}v&&(this.words[u]=v,this.length++)}if(d!==0){for(u=this.length-1;u>=0;u--)this.words[u+d]=this.words[u];for(u=0;u<d;u++)this.words[u]=0;this.length+=d}return this.strip()},i.prototype.ishln=function(l){return t(this.negative===0),this.iushln(l)},i.prototype.iushrn=function(l,b,d){t(typeof l=="number"&&l>=0);var a;b?a=(b-b%26)/26:a=0;var u=l%26,v=Math.min((l-u)/26,this.length),E=67108863^67108863>>>u<<u,p=d;if(a-=v,a=Math.max(0,a),p){for(var c=0;c<v;c++)p.words[c]=this.words[c];p.length=v}if(v!==0)if(this.length>v)for(this.length-=v,c=0;c<this.length;c++)this.words[c]=this.words[c+v];else this.words[0]=0,this.length=1;var F=0;for(c=this.length-1;c>=0&&(F!==0||c>=a);c--){var M=this.words[c]|0;this.words[c]=F<<26-u|M>>>u,F=M&E}return p&&F!==0&&(p.words[p.length++]=F),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(l,b,d){return t(this.negative===0),this.iushrn(l,b,d)},i.prototype.shln=function(l){return this.clone().ishln(l)},i.prototype.ushln=function(l){return this.clone().iushln(l)},i.prototype.shrn=function(l){return this.clone().ishrn(l)},i.prototype.ushrn=function(l){return this.clone().iushrn(l)},i.prototype.testn=function(l){t(typeof l=="number"&&l>=0);var b=l%26,d=(l-b)/26,a=1<<b;if(this.length<=d)return!1;var u=this.words[d];return!!(u&a)},i.prototype.imaskn=function(l){t(typeof l=="number"&&l>=0);var b=l%26,d=(l-b)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(b!==0&&d++,this.length=Math.min(d,this.length),b!==0){var a=67108863^67108863>>>b<<b;this.words[this.length-1]&=a}return this.strip()},i.prototype.maskn=function(l){return this.clone().imaskn(l)},i.prototype.iaddn=function(l){return t(typeof l=="number"),t(l<67108864),l<0?this.isubn(-l):this.negative!==0?this.length===1&&(this.words[0]|0)<l?(this.words[0]=l-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(l),this.negative=1,this):this._iaddn(l)},i.prototype._iaddn=function(l){this.words[0]+=l;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},i.prototype.isubn=function(l){if(t(typeof l=="number"),t(l<67108864),l<0)return this.iaddn(-l);if(this.negative!==0)return this.negative=0,this.iaddn(l),this.negative=1,this;if(this.words[0]-=l,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},i.prototype.addn=function(l){return this.clone().iaddn(l)},i.prototype.subn=function(l){return this.clone().isubn(l)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(l,b,d){var a=l.length+d,u;this._expand(a);var v,E=0;for(u=0;u<l.length;u++){v=(this.words[u+d]|0)+E;var p=(l.words[u]|0)*b;v-=p&67108863,E=(v>>26)-(p/67108864|0),this.words[u+d]=v&67108863}for(;u<this.length-d;u++)v=(this.words[u+d]|0)+E,E=v>>26,this.words[u+d]=v&67108863;if(E===0)return this.strip();for(t(E===-1),E=0,u=0;u<this.length;u++)v=-(this.words[u]|0)+E,E=v>>26,this.words[u]=v&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(l,b){var d=this.length-l.length,a=this.clone(),u=l,v=u.words[u.length-1]|0,E=this._countBits(v);d=26-E,d!==0&&(u=u.ushln(d),a.iushln(d),v=u.words[u.length-1]|0);var p=a.length-u.length,c;if(b!=="mod"){c=new i(null),c.length=p+1,c.words=new Array(c.length);for(var F=0;F<c.length;F++)c.words[F]=0}var M=a.clone()._ishlnsubmul(u,1,p);M.negative===0&&(a=M,c&&(c.words[p]=1));for(var m=p-1;m>=0;m--){var S=(a.words[u.length+m]|0)*67108864+(a.words[u.length+m-1]|0);for(S=Math.min(S/v|0,67108863),a._ishlnsubmul(u,S,m);a.negative!==0;)S--,a.negative=0,a._ishlnsubmul(u,1,m),a.isZero()||(a.negative^=1);c&&(c.words[m]=S)}return c&&c.strip(),a.strip(),b!=="div"&&d!==0&&a.iushrn(d),{div:c||null,mod:a}},i.prototype.divmod=function(l,b,d){if(t(!l.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var a,u,v;return this.negative!==0&&l.negative===0?(v=this.neg().divmod(l,b),b!=="mod"&&(a=v.div.neg()),b!=="div"&&(u=v.mod.neg(),d&&u.negative!==0&&u.iadd(l)),{div:a,mod:u}):this.negative===0&&l.negative!==0?(v=this.divmod(l.neg(),b),b!=="mod"&&(a=v.div.neg()),{div:a,mod:v.mod}):(this.negative&l.negative)!==0?(v=this.neg().divmod(l.neg(),b),b!=="div"&&(u=v.mod.neg(),d&&u.negative!==0&&u.isub(l)),{div:v.div,mod:u}):l.length>this.length||this.cmp(l)<0?{div:new i(0),mod:this}:l.length===1?b==="div"?{div:this.divn(l.words[0]),mod:null}:b==="mod"?{div:null,mod:new i(this.modn(l.words[0]))}:{div:this.divn(l.words[0]),mod:new i(this.modn(l.words[0]))}:this._wordDiv(l,b)},i.prototype.div=function(l){return this.divmod(l,"div",!1).div},i.prototype.mod=function(l){return this.divmod(l,"mod",!1).mod},i.prototype.umod=function(l){return this.divmod(l,"mod",!0).mod},i.prototype.divRound=function(l){var b=this.divmod(l);if(b.mod.isZero())return b.div;var d=b.div.negative!==0?b.mod.isub(l):b.mod,a=l.ushrn(1),u=l.andln(1),v=d.cmp(a);return v<0||u===1&&v===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},i.prototype.modn=function(l){t(l<=67108863);for(var b=(1<<26)%l,d=0,a=this.length-1;a>=0;a--)d=(b*d+(this.words[a]|0))%l;return d},i.prototype.idivn=function(l){t(l<=67108863);for(var b=0,d=this.length-1;d>=0;d--){var a=(this.words[d]|0)+b*67108864;this.words[d]=a/l|0,b=a%l}return this.strip()},i.prototype.divn=function(l){return this.clone().idivn(l)},i.prototype.egcd=function(l){t(l.negative===0),t(!l.isZero());var b=this,d=l.clone();b.negative!==0?b=b.umod(l):b=b.clone();for(var a=new i(1),u=new i(0),v=new i(0),E=new i(1),p=0;b.isEven()&&d.isEven();)b.iushrn(1),d.iushrn(1),++p;for(var c=d.clone(),F=b.clone();!b.isZero();){for(var M=0,m=1;(b.words[0]&m)===0&&M<26;++M,m<<=1);if(M>0)for(b.iushrn(M);M-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(c),u.isub(F)),a.iushrn(1),u.iushrn(1);for(var S=0,ne=1;(d.words[0]&ne)===0&&S<26;++S,ne<<=1);if(S>0)for(d.iushrn(S);S-- >0;)(v.isOdd()||E.isOdd())&&(v.iadd(c),E.isub(F)),v.iushrn(1),E.iushrn(1);b.cmp(d)>=0?(b.isub(d),a.isub(v),u.isub(E)):(d.isub(b),v.isub(a),E.isub(u))}return{a:v,b:E,gcd:d.iushln(p)}},i.prototype._invmp=function(l){t(l.negative===0),t(!l.isZero());var b=this,d=l.clone();b.negative!==0?b=b.umod(l):b=b.clone();for(var a=new i(1),u=new i(0),v=d.clone();b.cmpn(1)>0&&d.cmpn(1)>0;){for(var E=0,p=1;(b.words[0]&p)===0&&E<26;++E,p<<=1);if(E>0)for(b.iushrn(E);E-- >0;)a.isOdd()&&a.iadd(v),a.iushrn(1);for(var c=0,F=1;(d.words[0]&F)===0&&c<26;++c,F<<=1);if(c>0)for(d.iushrn(c);c-- >0;)u.isOdd()&&u.iadd(v),u.iushrn(1);b.cmp(d)>=0?(b.isub(d),a.isub(u)):(d.isub(b),u.isub(a))}var M;return b.cmpn(1)===0?M=a:M=u,M.cmpn(0)<0&&M.iadd(l),M},i.prototype.gcd=function(l){if(this.isZero())return l.abs();if(l.isZero())return this.abs();var b=this.clone(),d=l.clone();b.negative=0,d.negative=0;for(var a=0;b.isEven()&&d.isEven();a++)b.iushrn(1),d.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;d.isEven();)d.iushrn(1);var u=b.cmp(d);if(u<0){var v=b;b=d,d=v}else if(u===0||d.cmpn(1)===0)break;b.isub(d)}while(!0);return d.iushln(a)},i.prototype.invm=function(l){return this.egcd(l).a.umod(l)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(l){return this.words[0]&l},i.prototype.bincn=function(l){t(typeof l=="number");var b=l%26,d=(l-b)/26,a=1<<b;if(this.length<=d)return this._expand(d+1),this.words[d]|=a,this;for(var u=a,v=d;u!==0&&v<this.length;v++){var E=this.words[v]|0;E+=u,u=E>>>26,E&=67108863,this.words[v]=E}return u!==0&&(this.words[v]=u,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(l){var b=l<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this.strip();var d;if(this.length>1)d=1;else{b&&(l=-l),t(l<=67108863,"Number is too big");var a=this.words[0]|0;d=a===l?0:a<l?-1:1}return this.negative!==0?-d|0:d},i.prototype.cmp=function(l){if(this.negative!==0&&l.negative===0)return-1;if(this.negative===0&&l.negative!==0)return 1;var b=this.ucmp(l);return this.negative!==0?-b|0:b},i.prototype.ucmp=function(l){if(this.length>l.length)return 1;if(this.length<l.length)return-1;for(var b=0,d=this.length-1;d>=0;d--){var a=this.words[d]|0,u=l.words[d]|0;if(a!==u){a<u?b=-1:a>u&&(b=1);break}}return b},i.prototype.gtn=function(l){return this.cmpn(l)===1},i.prototype.gt=function(l){return this.cmp(l)===1},i.prototype.gten=function(l){return this.cmpn(l)>=0},i.prototype.gte=function(l){return this.cmp(l)>=0},i.prototype.ltn=function(l){return this.cmpn(l)===-1},i.prototype.lt=function(l){return this.cmp(l)===-1},i.prototype.lten=function(l){return this.cmpn(l)<=0},i.prototype.lte=function(l){return this.cmp(l)<=0},i.prototype.eqn=function(l){return this.cmpn(l)===0},i.prototype.eq=function(l){return this.cmp(l)===0},i.red=function(l){return new Q(l)},i.prototype.toRed=function(l){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),l.convertTo(this)._forceRed(l)},i.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(l){return this.red=l,this},i.prototype.forceRed=function(l){return t(!this.red,"Already a number in reduction context"),this._forceRed(l)},i.prototype.redAdd=function(l){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,l)},i.prototype.redIAdd=function(l){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,l)},i.prototype.redSub=function(l){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,l)},i.prototype.redISub=function(l){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,l)},i.prototype.redShl=function(l){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,l)},i.prototype.redMul=function(l){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.mul(this,l)},i.prototype.redIMul=function(l){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.imul(this,l)},i.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(l){return t(this.red&&!l.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,l)};var X={k256:null,p224:null,p192:null,p25519:null};function Y(R,l){this.name=R,this.p=new i(l,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Y.prototype._tmp=function(){var l=new i(null);return l.words=new Array(Math.ceil(this.n/13)),l},Y.prototype.ireduce=function(l){var b=l,d;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),d=b.bitLength();while(d>this.n);var a=d<this.n?-1:b.ucmp(this.p);return a===0?(b.words[0]=0,b.length=1):a>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},Y.prototype.split=function(l,b){l.iushrn(this.n,0,b)},Y.prototype.imulK=function(l){return l.imul(this.k)};function se(){Y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(se,Y),se.prototype.split=function(l,b){for(var d=4194303,a=Math.min(l.length,9),u=0;u<a;u++)b.words[u]=l.words[u];if(b.length=a,l.length<=9){l.words[0]=0,l.length=1;return}var v=l.words[9];for(b.words[b.length++]=v&d,u=10;u<l.length;u++){var E=l.words[u]|0;l.words[u-10]=(E&d)<<4|v>>>22,v=E}v>>>=22,l.words[u-10]=v,v===0&&l.length>10?l.length-=10:l.length-=9},se.prototype.imulK=function(l){l.words[l.length]=0,l.words[l.length+1]=0,l.length+=2;for(var b=0,d=0;d<l.length;d++){var a=l.words[d]|0;b+=a*977,l.words[d]=b&67108863,b=a*64+(b/67108864|0)}return l.words[l.length-1]===0&&(l.length--,l.words[l.length-1]===0&&l.length--),l};function G(){Y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(G,Y);function q(){Y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(q,Y);function J(){Y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(J,Y),J.prototype.imulK=function(l){for(var b=0,d=0;d<l.length;d++){var a=(l.words[d]|0)*19+b,u=a&67108863;a>>>=26,l.words[d]=u,b=a}return b!==0&&(l.words[l.length++]=b),l},i._prime=function(l){if(X[l])return X[l];var b;if(l==="k256")b=new se;else if(l==="p224")b=new G;else if(l==="p192")b=new q;else if(l==="p25519")b=new J;else throw new Error("Unknown prime "+l);return X[l]=b,b};function Q(R){if(typeof R=="string"){var l=i._prime(R);this.m=l.p,this.prime=l}else t(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}Q.prototype._verify1=function(l){t(l.negative===0,"red works only with positives"),t(l.red,"red works only with red numbers")},Q.prototype._verify2=function(l,b){t((l.negative|b.negative)===0,"red works only with positives"),t(l.red&&l.red===b.red,"red works only with red numbers")},Q.prototype.imod=function(l){return this.prime?this.prime.ireduce(l)._forceRed(this):l.umod(this.m)._forceRed(this)},Q.prototype.neg=function(l){return l.isZero()?l.clone():this.m.sub(l)._forceRed(this)},Q.prototype.add=function(l,b){this._verify2(l,b);var d=l.add(b);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},Q.prototype.iadd=function(l,b){this._verify2(l,b);var d=l.iadd(b);return d.cmp(this.m)>=0&&d.isub(this.m),d},Q.prototype.sub=function(l,b){this._verify2(l,b);var d=l.sub(b);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},Q.prototype.isub=function(l,b){this._verify2(l,b);var d=l.isub(b);return d.cmpn(0)<0&&d.iadd(this.m),d},Q.prototype.shl=function(l,b){return this._verify1(l),this.imod(l.ushln(b))},Q.prototype.imul=function(l,b){return this._verify2(l,b),this.imod(l.imul(b))},Q.prototype.mul=function(l,b){return this._verify2(l,b),this.imod(l.mul(b))},Q.prototype.isqr=function(l){return this.imul(l,l.clone())},Q.prototype.sqr=function(l){return this.mul(l,l)},Q.prototype.sqrt=function(l){if(l.isZero())return l.clone();var b=this.m.andln(3);if(t(b%2===1),b===3){var d=this.m.add(new i(1)).iushrn(2);return this.pow(l,d)}for(var a=this.m.subn(1),u=0;!a.isZero()&&a.andln(1)===0;)u++,a.iushrn(1);t(!a.isZero());var v=new i(1).toRed(this),E=v.redNeg(),p=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);this.pow(c,p).cmp(E)!==0;)c.redIAdd(E);for(var F=this.pow(c,a),M=this.pow(l,a.addn(1).iushrn(1)),m=this.pow(l,a),S=u;m.cmp(v)!==0;){for(var ne=m,ie=0;ne.cmp(v)!==0;ie++)ne=ne.redSqr();t(ie<S);var ce=this.pow(F,new i(1).iushln(S-ie-1));M=M.redMul(ce),F=ce.redSqr(),m=m.redMul(F),S=ie}return M},Q.prototype.invm=function(l){var b=l._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},Q.prototype.pow=function(l,b){if(b.isZero())return new i(1).toRed(this);if(b.cmpn(1)===0)return l.clone();var d=4,a=new Array(1<<d);a[0]=new i(1).toRed(this),a[1]=l;for(var u=2;u<a.length;u++)a[u]=this.mul(a[u-1],l);var v=a[0],E=0,p=0,c=b.bitLength()%26;for(c===0&&(c=26),u=b.length-1;u>=0;u--){for(var F=b.words[u],M=c-1;M>=0;M--){var m=F>>M&1;if(v!==a[0]&&(v=this.sqr(v)),m===0&&E===0){p=0;continue}E<<=1,E|=m,p++,!(p!==d&&(u!==0||M!==0))&&(v=this.mul(v,a[E]),p=0,E=0)}c=26}return v},Q.prototype.convertTo=function(l){var b=l.umod(this.m);return b===l?b.clone():b},Q.prototype.convertFrom=function(l){var b=l.clone();return b.red=null,b},i.mont=function(l){return new W(l)};function W(R){Q.call(this,R),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(W,Q),W.prototype.convertTo=function(l){return this.imod(l.ushln(this.shift))},W.prototype.convertFrom=function(l){var b=this.imod(l.mul(this.rinv));return b.red=null,b},W.prototype.imul=function(l,b){if(l.isZero()||b.isZero())return l.words[0]=0,l.length=1,l;var d=l.imul(b),a=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=d.isub(a).iushrn(this.shift),v=u;return u.cmp(this.m)>=0?v=u.isub(this.m):u.cmpn(0)<0&&(v=u.iadd(this.m)),v._forceRed(this)},W.prototype.mul=function(l,b){if(l.isZero()||b.isZero())return new i(0)._forceRed(this);var d=l.mul(b),a=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=d.isub(a).iushrn(this.shift),v=u;return u.cmp(this.m)>=0?v=u.isub(this.m):u.cmpn(0)<0&&(v=u.iadd(this.m)),v._forceRed(this)},W.prototype.invm=function(l){var b=this.imod(l._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(typeof O0>"u"||O0,Yb)});var Jc=V((xI,Qb)=>{"use strict";var Vc=Cn(),rs=Vc.Buffer,hr={},dr;for(dr in Vc)!Vc.hasOwnProperty(dr)||dr==="SlowBuffer"||dr==="Buffer"||(hr[dr]=Vc[dr]);var ns=hr.Buffer={};for(dr in rs)!rs.hasOwnProperty(dr)||dr==="allocUnsafe"||dr==="allocUnsafeSlow"||(ns[dr]=rs[dr]);hr.Buffer.prototype=rs.prototype;(!ns.from||ns.from===Uint8Array.from)&&(ns.from=function(r,e,t){if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof r);if(r&&typeof r.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);return rs(r,e,t)});ns.alloc||(ns.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof r);if(r<0||r>=2*(1<<30))throw new RangeError('The value "'+r+'" is invalid for option "size"');var n=rs(r);return!e||e.length===0?n.fill(0):typeof t=="string"?n.fill(e,t):n.fill(e),n});if(!hr.kStringMaxLength)try{hr.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch{}hr.constants||(hr.constants={MAX_LENGTH:hr.kMaxLength},hr.kStringMaxLength&&(hr.constants.MAX_STRING_LENGTH=hr.kStringMaxLength));Qb.exports=hr});var Xc=V(Zb=>{"use strict";var yS=Zt();function pr(r){this._reporterState={obj:null,path:[],options:r||{},errors:[]}}Zb.Reporter=pr;pr.prototype.isError=function(e){return e instanceof is};pr.prototype.save=function(){let e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}};pr.prototype.restore=function(e){let t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)};pr.prototype.enterKey=function(e){return this._reporterState.path.push(e)};pr.prototype.exitKey=function(e){let t=this._reporterState;t.path=t.path.slice(0,e-1)};pr.prototype.leaveKey=function(e,t,n){let i=this._reporterState;this.exitKey(e),i.obj!==null&&(i.obj[t]=n)};pr.prototype.path=function(){return this._reporterState.path.join("/")};pr.prototype.enterObject=function(){let e=this._reporterState,t=e.obj;return e.obj={},t};pr.prototype.leaveObject=function(e){let t=this._reporterState,n=t.obj;return t.obj=e,n};pr.prototype.error=function(e){let t,n=this._reporterState,i=e instanceof is;if(i?t=e:t=new is(n.path.map(function(o){return"["+JSON.stringify(o)+"]"}).join(""),e.message||e,e.stack),!n.options.partial)throw t;return i||n.errors.push(t),t};pr.prototype.wrapResult=function(e){let t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e};function is(r,e){this.path=r,this.rethrow(e)}yS(is,Error);is.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,is),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}});var as=V(R0=>{"use strict";var mS=Zt(),Yc=Xc().Reporter,os=Jc().Buffer;function gr(r,e){if(Yc.call(this,e),!os.isBuffer(r)){this.error("Input not Buffer");return}this.base=r,this.offset=0,this.length=r.length}mS(gr,Yc);R0.DecoderBuffer=gr;gr.isDecoderBuffer=function(e){return e instanceof gr?!0:typeof e=="object"&&os.isBuffer(e.base)&&e.constructor.name==="DecoderBuffer"&&typeof e.offset=="number"&&typeof e.length=="number"&&typeof e.save=="function"&&typeof e.restore=="function"&&typeof e.isEmpty=="function"&&typeof e.readUInt8=="function"&&typeof e.skip=="function"&&typeof e.raw=="function"};gr.prototype.save=function(){return{offset:this.offset,reporter:Yc.prototype.save.call(this)}};gr.prototype.restore=function(e){let t=new gr(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,Yc.prototype.restore.call(this,e.reporter),t};gr.prototype.isEmpty=function(){return this.offset===this.length};gr.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")};gr.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");let n=new gr(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n};gr.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)};function ss(r,e){if(Array.isArray(r))this.length=0,this.value=r.map(function(t){return ss.isEncoderBuffer(t)||(t=new ss(t,e)),this.length+=t.length,t},this);else if(typeof r=="number"){if(!(0<=r&&r<=255))return e.error("non-byte EncoderBuffer value");this.value=r,this.length=1}else if(typeof r=="string")this.value=r,this.length=os.byteLength(r);else if(os.isBuffer(r))this.value=r,this.length=r.length;else return e.error("Unsupported type: "+typeof r)}R0.EncoderBuffer=ss;ss.isEncoderBuffer=function(e){return e instanceof ss?!0:typeof e=="object"&&e.constructor.name==="EncoderBuffer"&&typeof e.length=="number"&&typeof e.join=="function"};ss.prototype.join=function(e,t){return e||(e=os.alloc(this.length)),t||(t=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(n){n.join(e,t),t+=n.length}):(typeof this.value=="number"?e[t]=this.value:typeof this.value=="string"?e.write(this.value,t):os.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e}});var yn=V((EI,tv)=>{tv.exports=ev;function ev(r,e){if(!r)throw new Error(e||"Assertion failed")}ev.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)}});var Qc=V((AI,nv)=>{"use strict";var bS=Xc().Reporter,vS=as().EncoderBuffer,wS=as().DecoderBuffer,Pt=yn(),rv=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],xS=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(rv),_S=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function Ze(r,e,t){let n={};this._baseState=n,n.name=t,n.enc=r,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}nv.exports=Ze;var SS=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];Ze.prototype.clone=function(){let e=this._baseState,t={};SS.forEach(function(i){t[i]=e[i]});let n=new this.constructor(t.parent);return n._baseState=t,n};Ze.prototype._wrap=function(){let e=this._baseState;xS.forEach(function(t){this[t]=function(){let i=new this.constructor(this);return e.children.push(i),i[t].apply(i,arguments)}},this)};Ze.prototype._init=function(e){let t=this._baseState;Pt(t.parent===null),e.call(this),t.children=t.children.filter(function(n){return n._baseState.parent===this},this),Pt.equal(t.children.length,1,"Root node can have only one child")};Ze.prototype._useArgs=function(e){let t=this._baseState,n=e.filter(function(i){return i instanceof this.constructor},this);e=e.filter(function(i){return!(i instanceof this.constructor)},this),n.length!==0&&(Pt(t.children===null),t.children=n,n.forEach(function(i){i._baseState.parent=this},this)),e.length!==0&&(Pt(t.args===null),t.args=e,t.reverseArgs=e.map(function(i){if(typeof i!="object"||i.constructor!==Object)return i;let o={};return Object.keys(i).forEach(function(s){s==(s|0)&&(s|=0);let f=i[s];o[f]=s}),o}))};_S.forEach(function(r){Ze.prototype[r]=function(){let t=this._baseState;throw new Error(r+" not implemented for encoding: "+t.enc)}});rv.forEach(function(r){Ze.prototype[r]=function(){let t=this._baseState,n=Array.prototype.slice.call(arguments);return Pt(t.tag===null),t.tag=r,this._useArgs(n),this}});Ze.prototype.use=function(e){Pt(e);let t=this._baseState;return Pt(t.use===null),t.use=e,this};Ze.prototype.optional=function(){let e=this._baseState;return e.optional=!0,this};Ze.prototype.def=function(e){let t=this._baseState;return Pt(t.default===null),t.default=e,t.optional=!0,this};Ze.prototype.explicit=function(e){let t=this._baseState;return Pt(t.explicit===null&&t.implicit===null),t.explicit=e,this};Ze.prototype.implicit=function(e){let t=this._baseState;return Pt(t.explicit===null&&t.implicit===null),t.implicit=e,this};Ze.prototype.obj=function(){let e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,t.length!==0&&this._useArgs(t),this};Ze.prototype.key=function(e){let t=this._baseState;return Pt(t.key===null),t.key=e,this};Ze.prototype.any=function(){let e=this._baseState;return e.any=!0,this};Ze.prototype.choice=function(e){let t=this._baseState;return Pt(t.choice===null),t.choice=e,this._useArgs(Object.keys(e).map(function(n){return e[n]})),this};Ze.prototype.contains=function(e){let t=this._baseState;return Pt(t.use===null),t.contains=e,this};Ze.prototype._decode=function(e,t){let n=this._baseState;if(n.parent===null)return e.wrapResult(n.children[0]._decode(e,t));let i=n.default,o=!0,s=null;if(n.key!==null&&(s=e.enterKey(n.key)),n.optional){let h=null;if(n.explicit!==null?h=n.explicit:n.implicit!==null?h=n.implicit:n.tag!==null&&(h=n.tag),h===null&&!n.any){let g=e.save();try{n.choice===null?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t),o=!0}catch{o=!1}e.restore(g)}else if(o=this._peekTag(e,h,n.any),e.isError(o))return o}let f;if(n.obj&&o&&(f=e.enterObject()),o){if(n.explicit!==null){let g=this._decodeTag(e,n.explicit);if(e.isError(g))return g;e=g}let h=e.offset;if(n.use===null&&n.choice===null){let g;n.any&&(g=e.save());let _=this._decodeTag(e,n.implicit!==null?n.implicit:n.tag,n.any);if(e.isError(_))return _;n.any?i=e.raw(g):e=_}if(t&&t.track&&n.tag!==null&&t.track(e.path(),h,e.length,"tagged"),t&&t.track&&n.tag!==null&&t.track(e.path(),e.offset,e.length,"content"),n.any||(n.choice===null?i=this._decodeGeneric(n.tag,e,t):i=this._decodeChoice(e,t)),e.isError(i))return i;if(!n.any&&n.choice===null&&n.children!==null&&n.children.forEach(function(_){_._decode(e,t)}),n.contains&&(n.tag==="octstr"||n.tag==="bitstr")){let g=new wS(i);i=this._getUse(n.contains,e._reporterState.obj)._decode(g,t)}}return n.obj&&o&&(i=e.leaveObject(f)),n.key!==null&&(i!==null||o===!0)?e.leaveKey(s,n.key,i):s!==null&&e.exitKey(s),i};Ze.prototype._decodeGeneric=function(e,t,n){let i=this._baseState;return e==="seq"||e==="set"?null:e==="seqof"||e==="setof"?this._decodeList(t,e,i.args[0],n):/str$/.test(e)?this._decodeStr(t,e,n):e==="objid"&&i.args?this._decodeObjid(t,i.args[0],i.args[1],n):e==="objid"?this._decodeObjid(t,null,null,n):e==="gentime"||e==="utctime"?this._decodeTime(t,e,n):e==="null_"?this._decodeNull(t,n):e==="bool"?this._decodeBool(t,n):e==="objDesc"?this._decodeStr(t,e,n):e==="int"||e==="enum"?this._decodeInt(t,i.args&&i.args[0],n):i.use!==null?this._getUse(i.use,t._reporterState.obj)._decode(t,n):t.error("unknown tag: "+e)};Ze.prototype._getUse=function(e,t){let n=this._baseState;return n.useDecoder=this._use(e,t),Pt(n.useDecoder._baseState.parent===null),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder};Ze.prototype._decodeChoice=function(e,t){let n=this._baseState,i=null,o=!1;return Object.keys(n.choice).some(function(s){let f=e.save(),h=n.choice[s];try{let g=h._decode(e,t);if(e.isError(g))return!1;i={type:s,value:g},o=!0}catch{return e.restore(f),!1}return!0},this),o?i:e.error("Choice not matched")};Ze.prototype._createEncoderBuffer=function(e){return new vS(e,this.reporter)};Ze.prototype._encode=function(e,t,n){let i=this._baseState;if(i.default!==null&&i.default===e)return;let o=this._encodeValue(e,t,n);if(o!==void 0&&!this._skipDefault(o,t,n))return o};Ze.prototype._encodeValue=function(e,t,n){let i=this._baseState;if(i.parent===null)return i.children[0]._encode(e,t||new bS);let o=null;if(this.reporter=t,i.optional&&e===void 0)if(i.default!==null)e=i.default;else return;let s=null,f=!1;if(i.any)o=this._createEncoderBuffer(e);else if(i.choice)o=this._encodeChoice(e,t);else if(i.contains)s=this._getUse(i.contains,n)._encode(e,t),f=!0;else if(i.children)s=i.children.map(function(h){if(h._baseState.tag==="null_")return h._encode(null,t,e);if(h._baseState.key===null)return t.error("Child should have a key");let g=t.enterKey(h._baseState.key);if(typeof e!="object")return t.error("Child expected, but input is not object");let _=h._encode(e[h._baseState.key],t,e);return t.leaveKey(g),_},this).filter(function(h){return h}),s=this._createEncoderBuffer(s);else if(i.tag==="seqof"||i.tag==="setof"){if(!(i.args&&i.args.length===1))return t.error("Too many args for : "+i.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");let h=this.clone();h._baseState.implicit=null,s=this._createEncoderBuffer(e.map(function(g){let _=this._baseState;return this._getUse(_.args[0],e)._encode(g,t)},h))}else i.use!==null?o=this._getUse(i.use,n)._encode(e,t):(s=this._encodePrimitive(i.tag,e),f=!0);if(!i.any&&i.choice===null){let h=i.implicit!==null?i.implicit:i.tag,g=i.implicit===null?"universal":"context";h===null?i.use===null&&t.error("Tag could be omitted only for .use()"):i.use===null&&(o=this._encodeComposite(h,f,g,s))}return i.explicit!==null&&(o=this._encodeComposite(i.explicit,!1,"context",o)),o};Ze.prototype._encodeChoice=function(e,t){let n=this._baseState,i=n.choice[e.type];return i||Pt(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),i._encode(e.value,t)};Ze.prototype._encodePrimitive=function(e,t){let n=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if(e==="objid"&&n.args)return this._encodeObjid(t,n.reverseArgs[0],n.args[1]);if(e==="objid")return this._encodeObjid(t,null,null);if(e==="gentime"||e==="utctime")return this._encodeTime(t,e);if(e==="null_")return this._encodeNull();if(e==="int"||e==="enum")return this._encodeInt(t,n.args&&n.reverseArgs[0]);if(e==="bool")return this._encodeBool(t);if(e==="objDesc")return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)};Ze.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)};Ze.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)}});var Zc=V(Qi=>{"use strict";function iv(r){let e={};return Object.keys(r).forEach(function(t){(t|0)==t&&(t=t|0);let n=r[t];e[n]=t}),e}Qi.tagClass={0:"universal",1:"application",2:"context",3:"private"};Qi.tagClassByName=iv(Qi.tagClass);Qi.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"};Qi.tagByName=iv(Qi.tag)});var N0=V((TI,av)=>{"use strict";var ES=Zt(),mn=Jc().Buffer,ov=Qc(),P0=Zc();function sv(r){this.enc="der",this.name=r.name,this.entity=r,this.tree=new Tr,this.tree._init(r.body)}av.exports=sv;sv.prototype.encode=function(e,t){return this.tree._encode(e,t).join()};function Tr(r){ov.call(this,"der",r)}ES(Tr,ov);Tr.prototype._encodeComposite=function(e,t,n,i){let o=AS(e,t,n,this.reporter);if(i.length<128){let h=mn.alloc(2);return h[0]=o,h[1]=i.length,this._createEncoderBuffer([h,i])}let s=1;for(let h=i.length;h>=256;h>>=8)s++;let f=mn.alloc(1+1+s);f[0]=o,f[1]=128|s;for(let h=1+s,g=i.length;g>0;h--,g>>=8)f[h]=g&255;return this._createEncoderBuffer([f,i])};Tr.prototype._encodeStr=function(e,t){if(t==="bitstr")return this._createEncoderBuffer([e.unused|0,e.data]);if(t==="bmpstr"){let n=mn.alloc(e.length*2);for(let i=0;i<e.length;i++)n.writeUInt16BE(e.charCodeAt(i),i*2);return this._createEncoderBuffer(n)}else return t==="numstr"?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):t==="printstr"?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)?this._createEncoderBuffer(e):t==="objDesc"?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")};Tr.prototype._encodeObjid=function(e,t,n){if(typeof e=="string"){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(let f=0;f<e.length;f++)e[f]|=0}else if(Array.isArray(e)){e=e.slice();for(let f=0;f<e.length;f++)e[f]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,e[0]*40+e[1])}let i=0;for(let f=0;f<e.length;f++){let h=e[f];for(i++;h>=128;h>>=7)i++}let o=mn.alloc(i),s=o.length-1;for(let f=e.length-1;f>=0;f--){let h=e[f];for(o[s--]=h&127;(h>>=7)>0;)o[s--]=128|h&127}return this._createEncoderBuffer(o)};function yr(r){return r<10?"0"+r:r}Tr.prototype._encodeTime=function(e,t){let n,i=new Date(e);return t==="gentime"?n=[yr(i.getUTCFullYear()),yr(i.getUTCMonth()+1),yr(i.getUTCDate()),yr(i.getUTCHours()),yr(i.getUTCMinutes()),yr(i.getUTCSeconds()),"Z"].join(""):t==="utctime"?n=[yr(i.getUTCFullYear()%100),yr(i.getUTCMonth()+1),yr(i.getUTCDate()),yr(i.getUTCHours()),yr(i.getUTCMinutes()),yr(i.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(n,"octstr")};Tr.prototype._encodeNull=function(){return this._createEncoderBuffer("")};Tr.prototype._encodeInt=function(e,t){if(typeof e=="string"){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if(typeof e!="number"&&!mn.isBuffer(e)){let o=e.toArray();!e.sign&&o[0]&128&&o.unshift(0),e=mn.from(o)}if(mn.isBuffer(e)){let o=e.length;e.length===0&&o++;let s=mn.alloc(o);return e.copy(s),e.length===0&&(s[0]=0),this._createEncoderBuffer(s)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let n=1;for(let o=e;o>=256;o>>=8)n++;let i=new Array(n);for(let o=i.length-1;o>=0;o--)i[o]=e&255,e>>=8;return i[0]&128&&i.unshift(0),this._createEncoderBuffer(mn.from(i))};Tr.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)};Tr.prototype._use=function(e,t){return typeof e=="function"&&(e=e(t)),e._getEncoder("der").tree};Tr.prototype._skipDefault=function(e,t,n){let i=this._baseState,o;if(i.default===null)return!1;let s=e.join();if(i.defaultBuffer===void 0&&(i.defaultBuffer=this._encodeValue(i.default,t,n).join()),s.length!==i.defaultBuffer.length)return!1;for(o=0;o<s.length;o++)if(s[o]!==i.defaultBuffer[o])return!1;return!0};function AS(r,e,t,n){let i;if(r==="seqof"?r="seq":r==="setof"&&(r="set"),P0.tagByName.hasOwnProperty(r))i=P0.tagByName[r];else if(typeof r=="number"&&(r|0)===r)i=r;else return n.error("Unknown tag: "+r);return i>=31?n.error("Multi-octet tag encoding unsupported"):(e||(i|=32),i|=P0.tagClassByName[t||"universal"]<<6,i)}});var cv=V((MI,fv)=>{"use strict";var FS=Zt(),k0=N0();function L0(r){k0.call(this,r),this.enc="pem"}FS(L0,k0);fv.exports=L0;L0.prototype.encode=function(e,t){let i=k0.prototype.encode.call(this,e).toString("base64"),o=["-----BEGIN "+t.label+"-----"];for(let s=0;s<i.length;s+=64)o.push(i.slice(s,s+64));return o.push("-----END "+t.label+"-----"),o.join(`
`)}});var D0=V(lv=>{"use strict";var uv=lv;uv.der=N0();uv.pem=cv()});var q0=V((CI,mv)=>{"use strict";var TS=Zt(),MS=$t(),hv=as().DecoderBuffer,pv=Qc(),dv=Zc();function gv(r){this.enc="der",this.name=r.name,this.entity=r,this.tree=new tr,this.tree._init(r.body)}mv.exports=gv;gv.prototype.decode=function(e,t){return hv.isDecoderBuffer(e)||(e=new hv(e,t)),this.tree._decode(e,t)};function tr(r){pv.call(this,"der",r)}TS(tr,pv);tr.prototype._peekTag=function(e,t,n){if(e.isEmpty())return!1;let i=e.save(),o=U0(e,'Failed to peek tag: "'+t+'"');return e.isError(o)?o:(e.restore(i),o.tag===t||o.tagStr===t||o.tagStr+"of"===t||n)};tr.prototype._decodeTag=function(e,t,n){let i=U0(e,'Failed to decode tag of "'+t+'"');if(e.isError(i))return i;let o=yv(e,i.primitive,'Failed to get length of "'+t+'"');if(e.isError(o))return o;if(!n&&i.tag!==t&&i.tagStr!==t&&i.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(i.primitive||o!==null)return e.skip(o,'Failed to match body of: "'+t+'"');let s=e.save(),f=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(f)?f:(o=e.offset-s.offset,e.restore(s),e.skip(o,'Failed to match body of: "'+t+'"'))};tr.prototype._skipUntilEnd=function(e,t){for(;;){let n=U0(e,t);if(e.isError(n))return n;let i=yv(e,n.primitive,t);if(e.isError(i))return i;let o;if(n.primitive||i!==null?o=e.skip(i):o=this._skipUntilEnd(e,t),e.isError(o))return o;if(n.tagStr==="end")break}};tr.prototype._decodeList=function(e,t,n,i){let o=[];for(;!e.isEmpty();){let s=this._peekTag(e,"end");if(e.isError(s))return s;let f=n.decode(e,"der",i);if(e.isError(f)&&s)break;o.push(f)}return o};tr.prototype._decodeStr=function(e,t){if(t==="bitstr"){let n=e.readUInt8();return e.isError(n)?n:{unused:n,data:e.raw()}}else if(t==="bmpstr"){let n=e.raw();if(n.length%2===1)return e.error("Decoding of string type: bmpstr length mismatch");let i="";for(let o=0;o<n.length/2;o++)i+=String.fromCharCode(n.readUInt16BE(o*2));return i}else if(t==="numstr"){let n=e.raw().toString("ascii");return this._isNumstr(n)?n:e.error("Decoding of string type: numstr unsupported characters")}else{if(t==="octstr")return e.raw();if(t==="objDesc")return e.raw();if(t==="printstr"){let n=e.raw().toString("ascii");return this._isPrintstr(n)?n:e.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")}};tr.prototype._decodeObjid=function(e,t,n){let i,o=[],s=0,f=0;for(;!e.isEmpty();)f=e.readUInt8(),s<<=7,s|=f&127,(f&128)===0&&(o.push(s),s=0);f&128&&o.push(s);let h=o[0]/40|0,g=o[0]%40;if(n?i=o:i=[h,g].concat(o.slice(1)),t){let _=t[i.join(" ")];_===void 0&&(_=t[i.join(".")]),_!==void 0&&(i=_)}return i};tr.prototype._decodeTime=function(e,t){let n=e.raw().toString(),i,o,s,f,h,g;if(t==="gentime")i=n.slice(0,4)|0,o=n.slice(4,6)|0,s=n.slice(6,8)|0,f=n.slice(8,10)|0,h=n.slice(10,12)|0,g=n.slice(12,14)|0;else if(t==="utctime")i=n.slice(0,2)|0,o=n.slice(2,4)|0,s=n.slice(4,6)|0,f=n.slice(6,8)|0,h=n.slice(8,10)|0,g=n.slice(10,12)|0,i<70?i=2e3+i:i=1900+i;else return e.error("Decoding "+t+" time is not supported yet");return Date.UTC(i,o-1,s,f,h,g,0)};tr.prototype._decodeNull=function(){return null};tr.prototype._decodeBool=function(e){let t=e.readUInt8();return e.isError(t)?t:t!==0};tr.prototype._decodeInt=function(e,t){let n=e.raw(),i=new MS(n);return t&&(i=t[i.toString(10)]||i),i};tr.prototype._use=function(e,t){return typeof e=="function"&&(e=e(t)),e._getDecoder("der").tree};function U0(r,e){let t=r.readUInt8(e);if(r.isError(t))return t;let n=dv.tagClass[t>>6],i=(t&32)===0;if((t&31)===31){let s=t;for(t=0;(s&128)===128;){if(s=r.readUInt8(e),r.isError(s))return s;t<<=7,t|=s&127}}else t&=31;let o=dv.tag[t];return{cls:n,primitive:i,tag:t,tagStr:o}}function yv(r,e,t){let n=r.readUInt8(t);if(r.isError(n))return n;if(!e&&n===128)return null;if((n&128)===0)return n;let i=n&127;if(i>4)return r.error("length octect is too long");n=0;for(let o=0;o<i;o++){n<<=8;let s=r.readUInt8(t);if(r.isError(s))return s;n|=s}return n}});var vv=V((BI,bv)=>{"use strict";var IS=Zt(),CS=Jc().Buffer,j0=q0();function $0(r){j0.call(this,r),this.enc="pem"}IS($0,j0);bv.exports=$0;$0.prototype.decode=function(e,t){let n=e.toString().split(/[\r\n]+/g),i=t.label.toUpperCase(),o=/^-----(BEGIN|END) ([^-]+)-----$/,s=-1,f=-1;for(let _=0;_<n.length;_++){let T=n[_].match(o);if(T!==null&&T[2]===i)if(s===-1){if(T[1]!=="BEGIN")break;s=_}else{if(T[1]!=="END")break;f=_;break}}if(s===-1||f===-1)throw new Error("PEM section not found for: "+i);let h=n.slice(s+1,f).join("");h.replace(/[^a-z0-9+/=]+/gi,"");let g=CS.from(h,"base64");return j0.prototype.decode.call(this,g,t)}});var W0=V(xv=>{"use strict";var wv=xv;wv.der=q0();wv.pem=vv()});var Sv=V(_v=>{"use strict";var BS=D0(),OS=W0(),RS=Zt(),PS=_v;PS.define=function(e,t){return new fs(e,t)};function fs(r,e){this.name=r,this.body=e,this.decoders={},this.encoders={}}fs.prototype._createNamed=function(e){let t=this.name;function n(i){this._initNamed(i,t)}return RS(n,e),n.prototype._initNamed=function(o,s){e.call(this,o,s)},new n(this)};fs.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(OS[e])),this.decoders[e]};fs.prototype.decode=function(e,t,n){return this._getDecoder(t).decode(e,n)};fs.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(BS[e])),this.encoders[e]};fs.prototype.encode=function(e,t,n){return this._getEncoder(t).encode(e,n)}});var Av=V(Ev=>{"use strict";var eu=Ev;eu.Reporter=Xc().Reporter;eu.DecoderBuffer=as().DecoderBuffer;eu.EncoderBuffer=as().EncoderBuffer;eu.Node=Qc()});var Mv=V(Tv=>{"use strict";var Fv=Tv;Fv._reverse=function(e){let t={};return Object.keys(e).forEach(function(n){(n|0)==n&&(n=n|0);let i=e[n];t[i]=n}),t};Fv.der=Zc()});var Cv=V(Iv=>{"use strict";var cs=Iv;cs.bignum=$t();cs.define=Sv().define;cs.base=Av();cs.constants=Mv();cs.decoders=W0();cs.encoders=D0()});var Dv=V(mr=>{"use strict";var NS=mr&&mr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),kS=mr&&mr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),LS=mr&&mr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&NS(e,r,t);return kS(e,r),e};Object.defineProperty(mr,"__esModule",{value:!0});mr.jwkTopem=mr.pemTojwk=void 0;var bn=LS(Cv());function DS(r){return r.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function H0(r){return DS(Buffer.from(r,"hex").toString("base64"))}var Bv=bn.define("RSAPublicKey",function(){this.seq().obj(this.key("n").int(),this.key("e").int())}),Ov=bn.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())}),US=bn.define("PublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(Ov),this.key("publicKey").bitstr())}),Rv=bn.define("Version",function(){this.int({0:"two-prime",1:"multi"})}),qS=bn.define("OtherPrimeInfos",function(){this.seq().obj(this.key("ri").int(),this.key("di").int(),this.key("ti").int())}),Pv=bn.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").use(Rv),this.key("n").int(),this.key("e").int(),this.key("d").int(),this.key("p").int(),this.key("q").int(),this.key("dp").int(),this.key("dq").int(),this.key("qi").int(),this.key("other").optional().use(qS))}),jS=bn.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").use(Rv),this.key("algorithm").use(Ov),this.key("privateKey").bitstr())});function Nv(r,e){return e=e||{},Object.keys(e).forEach(function(t){r[t]=e[t]}),r}function K0(r){return r.length%2===1?"0"+r:r}function kv(r,e){var t=Bv.decode(r,"der"),n=K0(t.e.toString(16)),i={kty:"RSA",n:Jn(t.n),e:H0(n)};return Nv(i,e)}function Lv(r,e){var t=Pv.decode(r,"der"),n=K0(t.e.toString(16)),i={kty:"RSA",n:Jn(t.n),e:H0(n),d:Jn(t.d),p:Jn(t.p),q:Jn(t.q),dp:Jn(t.dp),dq:Jn(t.dq),qi:Jn(t.qi)};return Nv(i,e)}function $S(r,e){var t=US.decode(r,"der");return kv(t.publicKey.data,e)}function WS(r,e){var t=jS.decode(r,"der");return Lv(t.privateKey.data,e)}function HS(r){var e=/^-----BEGIN (RSA )?(PUBLIC|PRIVATE) KEY-----$/.exec(r);if(!e)return null;var t=!!e[1],n=e[2]==="PRIVATE";return n?t?Lv:WS:t?kv:$S}function KS(r){return{n:Vn(r.n),e:Vn(r.e),d:r.d&&Vn(r.d),p:r.p&&Vn(r.p),q:r.q&&Vn(r.q),dp:r.dp&&Vn(r.dp),dq:r.dq&&Vn(r.dq),qi:r.qi&&Vn(r.qi)}}function Jn(r){return H0(K0(r.toString(16)))}function zS(r){return new bn.bignum(Buffer.from(r,"base64"))}function Vn(r){return/^[0-9]+$/.test(r)?new bn.bignum(r,10):zS(r)}function GS(r,e){var t=r.toString().split(/(\r\n|\r|\n)+/g);t=t.filter(function(i){return i.trim().length!==0});var n=HS(t[0]);return t=t.slice(1,-1).join(""),n(Buffer.from(t.replace(/[^\w\d\+\/=]+/g,""),"base64"),e)}mr.pemTojwk=GS;function VS(r){var e=KS(r),t=!!e.d,n=t?"PRIVATE":"PUBLIC",i="-----BEGIN RSA "+n+` KEY-----
`,o=`
-----END RSA `+n+` KEY-----
`,s=Buffer.alloc(0);t?(e.version="two-prime",s=Pv.encode(e,"der")):s=Bv.encode(e,"der");var f=s.toString("base64").match(/.{1,64}/g).join(`
`);return i+f+o}mr.jwkTopem=VS});var Pa=V(()=>{});var qv=V(vn=>{"use strict";var JS=vn&&vn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),XS=vn&&vn.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),YS=vn&&vn.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&JS(e,r,t);return XS(e,r),e};Object.defineProperty(vn,"__esModule",{value:!0});var Uv=Dv(),br=YS(Pa()),z0=class{constructor(){this.keyLength=4096,this.publicExponent=65537,this.hashAlgorithm="sha256",this.encryptionAlgorithm="aes-256-cbc"}generateJWK(){if(typeof br.generateKeyPair!="function")throw new Error("Keypair generation not supported in this version of Node, only supported in versions 10+");return new Promise((e,t)=>{br.generateKeyPair("rsa",{modulusLength:this.keyLength,publicExponent:this.publicExponent,privateKeyEncoding:{type:"pkcs1",format:"pem"},publicKeyEncoding:{type:"pkcs1",format:"pem"}},(n,i,o)=>{n&&t(n),e(this.pemToJWK(o))})})}sign(e,t,{saltLength:n}={}){return new Promise((i,o)=>{i(br.createSign(this.hashAlgorithm).update(t).sign({key:this.jwkToPem(e),padding:br.constants.RSA_PKCS1_PSS_PADDING,saltLength:n}))})}verify(e,t,n){return new Promise((i,o)=>{let s={kty:"RSA",e:"AQAB",n:e},f=this.jwkToPem(s);i(br.createVerify(this.hashAlgorithm).update(t).verify({key:f,padding:br.constants.RSA_PKCS1_PSS_PADDING},n))})}hash(e,t="SHA-256"){return new Promise((n,i)=>{n(br.createHash(this.parseHashAlgorithm(t)).update(e).digest())})}async encrypt(e,t,n){let i=br.pbkdf2Sync(t,n=n||"salt",1e5,32,this.hashAlgorithm),o=br.randomBytes(16),s=br.createCipheriv(this.encryptionAlgorithm,i,o);return Buffer.concat([o,s.update(e),s.final()])}async decrypt(e,t,n){try{let i=br.pbkdf2Sync(t,n=n||"salt",1e5,32,this.hashAlgorithm),o=e.slice(0,16),s=e.slice(16),f=br.createDecipheriv(this.encryptionAlgorithm,i,o);return Buffer.concat([f.update(s),f.final()])}catch{throw new Error("Failed to decrypt")}}jwkToPem(e){return(0,Uv.jwkTopem)(e)}pemToJWK(e){return(0,Uv.pemTojwk)(e)}parseHashAlgorithm(e){switch(e){case"SHA-256":return"sha256";case"SHA-384":return"sha384";default:throw new Error(`Algorithm not supported: ${e}`)}}};vn.default=z0});var jv=V(V0=>{"use strict";Object.defineProperty(V0,"__esModule",{value:!0});var G0=class{constructor(e){this.api=e}getInfo(){return this.api.get("info").then(e=>e.data)}getPeers(){return this.api.get("peers").then(e=>e.data)}};V0.default=G0});var ka=V(Na=>{"use strict";Object.defineProperty(Na,"__esModule",{value:!0});Na.getError=void 0;var J0=class extends Error{constructor(e,t={}){t.message?super(t.message):super(),this.type=e,this.response=t.response}getType(){return this.type}};Na.default=J0;function QS(r){let e=r.data;if(typeof r.data=="string")try{e=JSON.parse(r.data)}catch{}if(r.data instanceof ArrayBuffer||r.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch{}return e?e.error||e:r.statusText||"unknown"}Na.getError=QS});var td=V(je=>{"use strict";var ZS=je&&je.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(je,"__esModule",{value:!0});je.debug=je.validatePath=je.arrayCompare=je.bufferToInt=je.intToBuffer=je.arrayFlatten=je.generateProofs=je.buildLayers=je.generateTransactionChunks=je.generateTree=je.computeRootHash=je.generateLeaves=je.chunkData=je.MIN_CHUNK_SIZE=je.MAX_CHUNK_SIZE=void 0;var tu=ZS(rd()),$v=gn();je.MAX_CHUNK_SIZE=256*1024;je.MIN_CHUNK_SIZE=32*1024;var Da=32,us=32;async function Y0(r){let e=[],t=r,n=0;for(;t.byteLength>=je.MAX_CHUNK_SIZE;){let i=je.MAX_CHUNK_SIZE,o=t.byteLength-je.MAX_CHUNK_SIZE;o>0&&o<je.MIN_CHUNK_SIZE&&(i=Math.ceil(t.byteLength/2));let s=t.slice(0,i),f=await tu.default.crypto.hash(s);n+=s.byteLength,e.push({dataHash:f,minByteRange:n-s.byteLength,maxByteRange:n}),t=t.slice(i)}return e.push({dataHash:await tu.default.crypto.hash(t),minByteRange:n,maxByteRange:n+t.byteLength}),e}je.chunkData=Y0;async function Q0(r){return Promise.all(r.map(async({dataHash:e,minByteRange:t,maxByteRange:n})=>({type:"leaf",id:await xt(await Promise.all([xt(e),xt(Ua(n))])),dataHash:e,minByteRange:t,maxByteRange:n})))}je.generateLeaves=Q0;async function eE(r){return(await Wv(r)).id}je.computeRootHash=eE;async function Wv(r){return await ru(await Q0(await Y0(r)))}je.generateTree=Wv;async function tE(r){let e=await Y0(r),t=await Q0(e),n=await ru(t),i=await Hv(n),o=e.slice(-1)[0];return o.maxByteRange-o.minByteRange===0&&(e.splice(e.length-1,1),i.splice(i.length-1,1)),{data_root:n.id,chunks:e,proofs:i}}je.generateTransactionChunks=tE;async function ru(r,e=0){if(r.length<2)return r[0];let t=[];for(let n=0;n<r.length;n+=2)t.push(await rE(r[n],r[n+1]));return ru(t,e+1)}je.buildLayers=ru;function Hv(r){let e=X0(r);return Array.isArray(e)?Z0(e):[e]}je.generateProofs=Hv;function X0(r,e=new Uint8Array,t=0){if(r.type=="leaf")return{offset:r.maxByteRange-1,proof:(0,$v.concatBuffers)([e,r.dataHash,Ua(r.maxByteRange)])};if(r.type=="branch"){let n=(0,$v.concatBuffers)([e,r.leftChild.id,r.rightChild.id,Ua(r.byteRange)]);return[X0(r.leftChild,n,t+1),X0(r.rightChild,n,t+1)]}throw new Error("Unexpected node type")}function Z0(r){let e=[];return r.forEach(t=>{Array.isArray(t)?e.push(...Z0(t)):e.push(t)}),e}je.arrayFlatten=Z0;async function rE(r,e){return e?{type:"branch",id:await xt([await xt(r.id),await xt(e.id),await xt(Ua(r.maxByteRange))]),byteRange:r.maxByteRange,maxByteRange:e.maxByteRange,leftChild:r,rightChild:e}:r}async function xt(r){return Array.isArray(r)&&(r=tu.default.utils.concatBuffers(r)),new Uint8Array(await tu.default.crypto.hash(r))}function Ua(r){let e=new Uint8Array(Da);for(var t=e.length-1;t>=0;t--){var n=r%256;e[t]=n,r=(r-n)/256}return e}je.intToBuffer=Ua;function ed(r){let e=0;for(var t=0;t<r.length;t++)e*=256,e+=r[t];return e}je.bufferToInt=ed;var nE=(r,e)=>r.every((t,n)=>e[n]===t);je.arrayCompare=nE;async function La(r,e,t,n,i){if(n<=0)return!1;if(e>=n)return La(r,0,n-1,n,i);if(e<0)return La(r,0,0,n,i);if(i.length==us+Da){let T=i.slice(0,us),I=i.slice(T.length,T.length+Da),x=await xt([await xt(T),await xt(I)]);return(0,je.arrayCompare)(r,x)?{offset:n-1,leftBound:t,rightBound:n,chunkSize:n-t}:!1}let o=i.slice(0,us),s=i.slice(o.length,o.length+us),f=i.slice(o.length+s.length,o.length+s.length+Da),h=ed(f),g=i.slice(o.length+s.length+f.length),_=await xt([await xt(o),await xt(s),await xt(f)]);return(0,je.arrayCompare)(r,_)?e<h?await La(o,e,t,Math.min(n,h),g):await La(s,e,Math.max(t,h),n,g):!1}je.validatePath=La;async function Kv(r,e=""){if(r.byteLength<1)return e;let t=r.slice(0,us),n=r.slice(t.length,t.length+us),i=r.slice(t.length+n.length,t.length+n.length+Da),o=ed(i),s=r.slice(t.length+n.length+i.length),f=await xt([await xt(t),await xt(n),await xt(i)]),h=`${e}
${JSON.stringify(Buffer.from(t))},${JSON.stringify(Buffer.from(n))},${o} => ${JSON.stringify(f)}`;return Kv(s,h)}je.debug=Kv});var Jv=V(vr=>{"use strict";var iE=vr&&vr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),oE=vr&&vr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),sE=vr&&vr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&iE(e,r,t);return oE(e,r),e},aE=vr&&vr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vr,"__esModule",{value:!0});vr.TransactionUploader=void 0;var zv=aE(ls()),fE=sE(gn()),nd=ka(),cE=td(),Gv=1,uE=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"],Vv=1e3*40,qa=class{get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}constructor(e,t){if(this.api=e,this.chunkIndex=0,this.txPosted=!1,this.lastRequestTimeEnd=0,this.totalErrors=0,this.lastResponseStatus=0,this.lastResponseError="",!t.id)throw new Error("Transaction is not signed");if(!t.chunks)throw new Error("Transaction chunks not prepared");this.data=t.data,this.transaction=new zv.default(Object.assign({},t,{data:new Uint8Array(0)}))}async uploadChunk(e){if(this.isComplete)throw new Error("Upload is already complete");if(this.lastResponseError!==""?this.totalErrors++:this.totalErrors=0,this.totalErrors===100)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let t=this.lastResponseError===""?0:Math.max(this.lastRequestTimeEnd+Vv-Date.now(),Vv);if(t>0&&(t=t-t*Math.random()*.3,await new Promise(s=>setTimeout(s,t))),this.lastResponseError="",!this.txPosted){await this.postTransaction();return}e&&(this.chunkIndex=e);let n=this.transaction.getChunk(e||this.chunkIndex,this.data);if(!await(0,cE.validatePath)(this.transaction.chunks.data_root,parseInt(n.offset),0,parseInt(n.data_size),fE.b64UrlToBuffer(n.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);let o=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch(s=>(console.error(s.message),{status:-1,data:{error:s.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=o.status,this.lastResponseStatus==200)this.chunkIndex++;else if(this.lastResponseError=(0,nd.getError)(o),uE.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized(e,t,n){if(!t||typeof t.chunkIndex!="number"||typeof t.transaction!="object")throw new Error("Serialized object does not match expected format.");var i=new zv.default(t.transaction);i.chunks||await i.prepareChunks(n);let o=new qa(e,i);if(o.chunkIndex=t.chunkIndex,o.lastRequestTimeEnd=t.lastRequestTimeEnd,o.lastResponseError=t.lastResponseError,o.lastResponseStatus=t.lastResponseStatus,o.txPosted=t.txPosted,o.data=n,o.transaction.data_root!==t.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return o}static async fromTransactionId(e,t){let n=await e.get(`tx/${t}`);if(n.status!==200)throw new Error(`Tx ${t} not found: ${n.status}`);let i=n.data;return i.data=new Uint8Array(0),{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:i}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=Gv){this.transaction.data=this.data;let n=await this.api.post("tx",this.transaction).catch(i=>(console.error(i),{status:-1,data:{error:i.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=n.status,this.transaction.data=new Uint8Array(0),n.status>=200&&n.status<300){this.txPosted=!0,this.chunkIndex=Gv;return}throw this.lastResponseError=(0,nd.getError)(n),new Error(`Unable to upload transaction: ${n.status}, ${this.lastResponseError}`)}let t=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=t.status,!(t.status>=200&&t.status<300))throw this.lastResponseError=(0,nd.getError)(t),new Error(`Unable to upload transaction: ${t.status}, ${this.lastResponseError}`);this.txPosted=!0}};vr.TransactionUploader=qa});var Yv=V(Nt=>{"use strict";var lE=Nt&&Nt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),hE=Nt&&Nt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),dE=Nt&&Nt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&lE(e,r,t);return hE(e,r),e},Zi=Nt&&Nt.__await||function(r){return this instanceof Zi?(this.v=r,this):new Zi(r)},pE=Nt&&Nt.__asyncGenerator||function(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(I){n[I]&&(i[I]=function(x){return new Promise(function(C,j){o.push([I,x,C,j])>1||f(I,x)})})}function f(I,x){try{h(n[I](x))}catch(C){T(o[0][3],C)}}function h(I){I.value instanceof Zi?Promise.resolve(I.value.v).then(g,_):T(o[0][2],I)}function g(I){f("next",I)}function _(I){f("throw",I)}function T(I,x){I(x),o.shift(),o.length&&f(o[0][0],o[0][1])}},Xv=Nt&&Nt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Nt,"__esModule",{value:!0});var id=Xv(ka()),wn=Xv(ls()),ja=dE(gn()),od=Jv();Ji();var sd=class{constructor(e,t,n){this.api=e,this.crypto=t,this.chunks=n}getTransactionAnchor(){return this.api.get("tx_anchor",{transformResponse:[]}).then(e=>e.data)}getPrice(e,t){let n=t?`price/${e}/${t}`:`price/${e}`;return this.api.get(n,{transformResponse:[function(i){return i}]}).then(i=>i.data)}async get(e){let t=await this.api.get(`tx/${e}`);if(t.status==200){let n=parseInt(t.data.data_size);if(t.data.format>=2&&n>0&&n<=1024*1024*12){let i=await this.getData(e);return new wn.default(Object.assign(Object.assign({},t.data),{data:i}))}return new wn.default(Object.assign(Object.assign({},t.data),{format:t.data.format||1}))}throw t.status==404?new id.default("TX_NOT_FOUND"):t.status==410?new id.default("TX_FAILED"):new id.default("TX_INVALID")}fromRaw(e){return new wn.default(e)}async search(e,t){return this.api.post("arql",{op:"equals",expr1:e,expr2:t}).then(n=>n.data?n.data:[])}getStatus(e){return this.api.get(`tx/${e}/status`).then(t=>t.status==200?{status:200,confirmed:t.data}:{status:t.status,confirmed:null})}async getData(e,t){let n;try{n=await this.chunks.downloadChunkedData(e)}catch(i){console.error(`Error while trying to download chunked data for ${e}`),console.error(i)}if(!n){console.warn(`Falling back to gateway cache for ${e}`);try{n=(await this.api.get(`/${e}`)).data}catch(i){console.error(`Error while trying to download contiguous data from gateway cache for ${e}`),console.error(i)}}if(!n)throw new Error(`${e} was not found!`);return t&&t.decode&&!t.string?n:t&&t.decode&&t.string?ja.bufferToString(n):ja.bufferTob64Url(n)}async sign(e,t,n){if(!t&&typeof arweaveWallet!="object")throw new Error("A new Arweave transaction must provide the jwk parameter.");if(!t||t==="use_wallet"){try{(await arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await arweaveWallet.connect(["SIGN_TRANSACTION"])}catch{}let i=await arweaveWallet.sign(e,n);e.setSignature({id:i.id,owner:i.owner,reward:i.reward,tags:i.tags,signature:i.signature})}else{e.setOwner(t.n);let i=await e.getSignatureData(),o=await this.crypto.sign(t,i,n),s=await this.crypto.hash(o);e.setSignature({id:ja.bufferTob64Url(s),owner:t.n,signature:ja.bufferTob64Url(o)})}}async verify(e){let t=await e.getSignatureData(),n=e.get("signature",{decode:!0,string:!1}),i=ja.bufferTob64Url(await this.crypto.hash(n));if(e.id!==i)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(e.owner,t,n)}async post(e){if(typeof e=="string"?e=new wn.default(JSON.parse(e)):typeof e.readInt32BE=="function"?e=new wn.default(JSON.parse(e.toString())):typeof e=="object"&&!(e instanceof wn.default)&&(e=new wn.default(e)),!(e instanceof wn.default))throw new Error("Must be Transaction object");e.chunks||await e.prepareChunks(e.data);let t=await this.getUploader(e,e.data);try{for(;!t.isComplete;)await t.uploadChunk()}catch(n){if(t.lastResponseStatus>0)return{status:t.lastResponseStatus,statusText:t.lastResponseError,data:{error:t.lastResponseError}};throw n}return{status:200,statusText:"OK",data:{}}}async getUploader(e,t){let n;if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),e instanceof wn.default){if(t||(t=e.data),!(t instanceof Uint8Array))throw new Error("Data format is invalid");e.chunks||await e.prepareChunks(t),n=new od.TransactionUploader(this.api,e),(!n.data||n.data.length===0)&&(n.data=t)}else{if(typeof e=="string"&&(e=await od.TransactionUploader.fromTransactionId(this.api,e)),!t||!(t instanceof Uint8Array))throw new Error("Must provide data when resuming upload");n=await od.TransactionUploader.fromSerialized(this.api,e,t)}return n}upload(e,t){return pE(this,arguments,function*(){let i=yield Zi(this.getUploader(e,t));for(;!i.isComplete;)yield Zi(i.uploadChunk()),yield yield Zi(i);return yield Zi(i)})}};Nt.default=sd});var Zv=V(xn=>{"use strict";var gE=xn&&xn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),yE=xn&&xn.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),mE=xn&&xn.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&gE(e,r,t);return yE(e,r),e};Object.defineProperty(xn,"__esModule",{value:!0});var Qv=mE(gn());Ji();var ad=class{constructor(e,t){this.api=e,this.crypto=t}getBalance(e){return this.api.get(`wallet/${e}/balance`,{transformResponse:[function(t){return t}]}).then(t=>t.data)}getLastTransactionID(e){return this.api.get(`wallet/${e}/last_tx`).then(t=>t.data)}generate(){return this.crypto.generateJWK()}async jwkToAddress(e){return!e||e==="use_wallet"?this.getAddress():this.getAddress(e)}async getAddress(e){if(!e||e==="use_wallet"){try{await arweaveWallet.connect(["ACCESS_ADDRESS"])}catch{}return arweaveWallet.getActiveAddress()}else return this.ownerToAddress(e.n)}async ownerToAddress(e){return Qv.bufferTob64Url(await this.crypto.hash(Qv.b64UrlToBuffer(e)))}};xn.default=ad});var tw=V(Mr=>{"use strict";var bE=Mr&&Mr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),vE=Mr&&Mr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),wE=Mr&&Mr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&bE(e,r,t);return vE(e,r),e};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.SiloResource=void 0;var ew=wE(gn()),fd=class{constructor(e,t,n){this.api=e,this.crypto=t,this.transactions=n}async get(e){if(!e)throw new Error("No Silo URI specified");let t=await this.parseUri(e),n=await this.transactions.search("Silo-Name",t.getAccessKey());if(n.length==0)throw new Error(`No data could be found for the Silo URI: ${e}`);let i=await this.transactions.get(n[0]);if(!i)throw new Error(`No data could be found for the Silo URI: ${e}`);let o=i.get("data",{decode:!0,string:!1});return this.crypto.decrypt(o,t.getEncryptionKey())}async readTransactionData(e,t){if(!t)throw new Error("No Silo URI specified");let n=await this.parseUri(t),i=e.get("data",{decode:!0,string:!1});return this.crypto.decrypt(i,n.getEncryptionKey())}async parseUri(e){let t=e.match(/^([a-z0-9-_]+)\.([0-9]+)/i);if(!t)throw new Error("Invalid Silo name, must be a name in the format of [a-z0-9]+.[0-9]+, e.g. 'bubble.7'");let n=t[1],i=Math.pow(2,parseInt(t[2])),o=await this.hash(ew.stringToBuffer(n),i),s=ew.bufferTob64(o.slice(0,15)),f=await this.hash(o.slice(16,31),1);return new nu(e,s,f)}async hash(e,t){let n=await this.crypto.hash(e);for(let i=0;i<t-1;i++)n=await this.crypto.hash(n);return n}};Mr.default=fd;var nu=class{constructor(e,t,n){this.uri=e,this.accessKey=t,this.encryptionKey=n}getUri(){return this.uri}getAccessKey(){return this.accessKey}getEncryptionKey(){return this.encryptionKey}};Mr.SiloResource=nu});var nw=V(_n=>{"use strict";var xE=_n&&_n.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),_E=_n&&_n.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),SE=_n&&_n.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&xE(e,r,t);return _E(e,r),e};Object.defineProperty(_n,"__esModule",{value:!0});var rw=ka(),EE=SE(gn()),cd=class{constructor(e){this.api=e}async getTransactionOffset(e){let t=await this.api.get(`tx/${e}/offset`);if(t.status===200)return t.data;throw new Error(`Unable to get transaction offset: ${(0,rw.getError)(t)}`)}async getChunk(e){let t=await this.api.get(`chunk/${e}`);if(t.status===200)return t.data;throw new Error(`Unable to get chunk: ${(0,rw.getError)(t)}`)}async getChunkData(e){let t=await this.getChunk(e);return EE.b64UrlToBuffer(t.chunk)}firstChunkOffset(e){return parseInt(e.offset)-parseInt(e.size)+1}async downloadChunkedData(e){let t=await this.getTransactionOffset(e),n=parseInt(t.size),o=parseInt(t.offset)-n+1,s=new Uint8Array(n),f=0;for(;f<n;){this.api.config.logging&&console.log(`[chunk] ${f}/${n}`);let h;try{h=await this.getChunkData(o+f)}catch{console.error(`[chunk] Failed to fetch chunk at offset ${o+f}`),console.error("[chunk] This could indicate that the chunk wasn't uploaded or hasn't yet seeded properly to a particular gateway/node")}if(h)s.set(h,f),f+=h.length;else throw new Error(`Couldn't complete data download at ${f}/${n}`)}return s}};_n.default=cd});var iw=V($a=>{"use strict";var AE=$a&&$a.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($a,"__esModule",{value:!0});var FE=AE(ka());Ji();var hs=class{constructor(e,t){this.api=e,this.network=t}async get(e){let t=await this.api.get(`${hs.ENDPOINT}${e}`);if(t.status===200)return t.data;throw t.status===404?new FE.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${t}`)}async getCurrent(){let{current:e}=await this.network.getInfo();return await this.get(e)}};$a.default=hs;hs.ENDPOINT="block/hash/"});var rd=V(Ir=>{"use strict";var TE=Ir&&Ir.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),ME=Ir&&Ir.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),IE=Ir&&Ir.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&TE(e,r,t);return ME(e,r),e},Gr=Ir&&Ir.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ir,"__esModule",{value:!0});var CE=Gr(Jb()),BE=Gr(Xb()),OE=Gr(qv()),RE=Gr(jv()),PE=Gr(Yv()),NE=Gr(Zv()),ow=Gr(ls()),Wa=IE(gn()),kE=Gr(tw()),LE=Gr(nw()),DE=Gr(iw()),zr=class{constructor(e){this.api=new BE.default(e),this.wallets=new NE.default(this.api,zr.crypto),this.chunks=new LE.default(this.api),this.transactions=new PE.default(this.api,zr.crypto,this.chunks),this.silo=new kE.default(this.api,this.crypto,this.transactions),this.network=new RE.default(this.api),this.blocks=new DE.default(this.api,this.network),this.ar=new CE.default}get crypto(){return zr.crypto}get utils(){return zr.utils}getConfig(){return{api:this.api.getConfig(),crypto:null}}async createTransaction(e,t){let n={};if(Object.assign(n,e),!e.data&&!(e.target&&e.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(e.owner==null&&t&&t!=="use_wallet"&&(n.owner=t.n),e.last_tx==null&&(n.last_tx=await this.transactions.getTransactionAnchor()),typeof e.data=="string"&&(e.data=Wa.stringToBuffer(e.data)),e.data instanceof ArrayBuffer&&(e.data=new Uint8Array(e.data)),e.data&&!(e.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(e.reward==null){let o=e.data?e.data.byteLength:0;n.reward=await this.transactions.getPrice(o,n.target)}n.data_root="",n.data_size=e.data?e.data.byteLength.toString():"0",n.data=e.data||new Uint8Array(0);let i=new ow.default(n);return await i.getSignatureData(),i}async createSiloTransaction(e,t,n){let i={};if(Object.assign(i,e),!e.data)throw new Error("Silo transactions must have a 'data' value");if(!n)throw new Error("No Silo URI specified.");if(e.target||e.quantity)throw new Error("Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.");if(e.owner==null){if(!t||!t.n)throw new Error("A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.");i.owner=t.n}e.last_tx==null&&(i.last_tx=await this.transactions.getTransactionAnchor());let o=await this.silo.parseUri(n);if(typeof e.data=="string"){let f=await this.crypto.encrypt(Wa.stringToBuffer(e.data),o.getEncryptionKey());i.reward=await this.transactions.getPrice(f.byteLength),i.data=Wa.bufferTob64Url(f)}if(e.data instanceof Uint8Array){let f=await this.crypto.encrypt(e.data,o.getEncryptionKey());i.reward=await this.transactions.getPrice(f.byteLength),i.data=Wa.bufferTob64Url(f)}let s=new ow.default(i);return s.addTag("Silo-Name",o.getAccessKey()),s.addTag("Silo-Version","0.1.0"),s}arql(e){return this.api.post("/arql",e).then(t=>t.data||[])}};Ir.default=zr;zr.crypto=new OE.default;zr.utils=Wa});var fw=V(Ha=>{"use strict";var UE=Ha&&Ha.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ha,"__esModule",{value:!0});var rr=UE(rd());async function sw(r){if(Array.isArray(r)){let n=rr.default.utils.concatBuffers([rr.default.utils.stringToBuffer("list"),rr.default.utils.stringToBuffer(r.length.toString())]);return await aw(r,await rr.default.crypto.hash(n,"SHA-384"))}let e=rr.default.utils.concatBuffers([rr.default.utils.stringToBuffer("blob"),rr.default.utils.stringToBuffer(r.byteLength.toString())]),t=rr.default.utils.concatBuffers([await rr.default.crypto.hash(e,"SHA-384"),await rr.default.crypto.hash(r,"SHA-384")]);return await rr.default.crypto.hash(t,"SHA-384")}Ha.default=sw;async function aw(r,e){if(r.length<1)return e;let t=rr.default.utils.concatBuffers([e,await sw(r[0])]),n=await rr.default.crypto.hash(t,"SHA-384");return await aw(r.slice(1),n)}});var ls=V(nr=>{"use strict";var qE=nr&&nr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),jE=nr&&nr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),$E=nr&&nr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&qE(e,r,t);return jE(e,r),e},WE=nr&&nr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(nr,"__esModule",{value:!0});nr.Tag=void 0;var yt=$E(gn()),HE=WE(fw()),KE=td(),iu=class{get(e,t){if(!Object.getOwnPropertyNames(this).includes(e))throw new Error(`Field "${e}" is not a property of the Arweave Transaction class.`);return this[e]instanceof Uint8Array?t&&t.decode&&t.string?yt.bufferToString(this[e]):t&&t.decode&&!t.string?this[e]:yt.bufferTob64Url(this[e]):t&&t.decode==!0?t&&t.string?yt.b64UrlToString(this[e]):yt.b64UrlToBuffer(this[e]):this[e]}},Ka=class extends iu{constructor(e,t,n=!1){super(),this.name=e,this.value=t}};nr.Tag=Ka;var ud=class extends iu{constructor(e={}){super(),this.format=2,this.id="",this.last_tx="",this.owner="",this.tags=[],this.target="",this.quantity="0",this.data_size="0",this.data=new Uint8Array,this.data_root="",this.reward="0",this.signature="",Object.assign(this,e),typeof this.data=="string"&&(this.data=yt.b64UrlToBuffer(this.data)),e.tags&&(this.tags=e.tags.map(t=>new Ka(t.name,t.value)))}addTag(e,t){this.tags.push(new Ka(yt.stringToB64Url(e),yt.stringToB64Url(t)))}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:yt.bufferTob64Url(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(e){this.owner=e}setSignature({id:e,owner:t,reward:n,tags:i,signature:o}){this.id=e,this.owner=t,n&&(this.reward=n),i&&(this.tags=i),this.signature=o}async prepareChunks(e){!this.chunks&&e.byteLength>0&&(this.chunks=await(0,KE.generateTransactionChunks)(e),this.data_root=yt.bufferTob64Url(this.chunks.data_root)),!this.chunks&&e.byteLength===0&&(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(e,t){if(!this.chunks)throw new Error("Chunks have not been prepared");let n=this.chunks.proofs[e],i=this.chunks.chunks[e];return{data_root:this.data_root,data_size:this.data_size,data_path:yt.bufferTob64Url(n.proof),offset:n.offset.toString(),chunk:yt.bufferTob64Url(t.slice(i.minByteRange,i.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:let e=this.tags.reduce((n,i)=>yt.concatBuffers([n,i.get("name",{decode:!0,string:!1}),i.get("value",{decode:!0,string:!1})]),new Uint8Array);return yt.concatBuffers([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),yt.stringToBuffer(this.quantity),yt.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),e]);case 2:this.data_root||await this.prepareChunks(this.data);let t=this.tags.map(n=>[n.get("name",{decode:!0,string:!1}),n.get("value",{decode:!0,string:!1})]);return await(0,HE.default)([yt.stringToBuffer(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),yt.stringToBuffer(this.quantity),yt.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),t,yt.stringToBuffer(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}};nr.default=ud});var eo=V((ZI,cw)=>{window.global=window;global.fetch=window.fetch;cw.exports.Buffer=Cn().Buffer});var Sw=V((uC,P7)=>{P7.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}});var wd=V(Fw=>{"use strict";var fu=Fw;function N7(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r!="string"){for(var n=0;n<r.length;n++)t[n]=r[n]|0;return t}if(e==="hex"){r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r);for(var n=0;n<r.length;n+=2)t.push(parseInt(r[n]+r[n+1],16))}else for(var n=0;n<r.length;n++){var i=r.charCodeAt(n),o=i>>8,s=i&255;o?t.push(o,s):t.push(s)}return t}fu.toArray=N7;function Ew(r){return r.length===1?"0"+r:r}fu.zero2=Ew;function Aw(r){for(var e="",t=0;t<r.length;t++)e+=Ew(r[t].toString(16));return e}fu.toHex=Aw;fu.encode=function(e,t){return t==="hex"?Aw(e):e}});var ir=V(Tw=>{"use strict";var Br=Tw,k7=$t(),L7=yn(),cu=wd();Br.assert=L7;Br.toArray=cu.toArray;Br.zero2=cu.zero2;Br.toHex=cu.toHex;Br.encode=cu.encode;function D7(r,e,t){var n=new Array(Math.max(r.bitLength(),t)+1);n.fill(0);for(var i=1<<e+1,o=r.clone(),s=0;s<n.length;s++){var f,h=o.andln(i-1);o.isOdd()?(h>(i>>1)-1?f=(i>>1)-h:f=h,o.isubn(f)):f=0,n[s]=f,o.iushrn(1)}return n}Br.getNAF=D7;function U7(r,e){var t=[[],[]];r=r.clone(),e=e.clone();for(var n=0,i=0,o;r.cmpn(-n)>0||e.cmpn(-i)>0;){var s=r.andln(3)+n&3,f=e.andln(3)+i&3;s===3&&(s=-1),f===3&&(f=-1);var h;(s&1)===0?h=0:(o=r.andln(7)+n&7,(o===3||o===5)&&f===2?h=-s:h=s),t[0].push(h);var g;(f&1)===0?g=0:(o=e.andln(7)+i&7,(o===3||o===5)&&s===2?g=-f:g=f),t[1].push(g),2*n===h+1&&(n=1-n),2*i===g+1&&(i=1-i),r.iushrn(1),e.iushrn(1)}return t}Br.getJSF=U7;function q7(r,e,t){var n="_"+e;r.prototype[e]=function(){return this[n]!==void 0?this[n]:this[n]=t.call(this)}}Br.cachedProperty=q7;function j7(r){return typeof r=="string"?Br.toArray(r,"hex"):r}Br.parseBytes=j7;function $7(r){return new k7(r,"hex","le")}Br.intFromLE=$7});var Ed=V((dC,Sd)=>{var xd;Sd.exports=function(e){return xd||(xd=new Qn(null)),xd.generate(e)};function Qn(r){this.rand=r}Sd.exports.Rand=Qn;Qn.prototype.generate=function(e){return this._rand(e)};Qn.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?Qn.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?Qn.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:typeof window=="object"&&(Qn.prototype._rand=function(){throw new Error("Not implemented yet")});else try{if(_d=Pa(),typeof _d.randomBytes!="function")throw new Error("Not supported");Qn.prototype._rand=function(e){return _d.randomBytes(e)}}catch{}var _d});var Xa=V((pC,Mw)=>{"use strict";var to=$t(),Ja=ir(),uu=Ja.getNAF,W7=Ja.getJSF,lu=Ja.assert;function Zn(r,e){this.type=r,this.p=new to(e.p,16),this.red=e.prime?to.red(e.prime):to.mont(this.p),this.zero=new to(0).toRed(this.red),this.one=new to(1).toRed(this.red),this.two=new to(2).toRed(this.red),this.n=e.n&&new to(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}Mw.exports=Zn;Zn.prototype.point=function(){throw new Error("Not implemented")};Zn.prototype.validate=function(){throw new Error("Not implemented")};Zn.prototype._fixedNafMul=function(e,t){lu(e.precomputed);var n=e._getDoubles(),i=uu(t,1,this._bitLength),o=(1<<n.step+1)-(n.step%2===0?2:1);o/=3;var s=[],f,h;for(f=0;f<i.length;f+=n.step){h=0;for(var g=f+n.step-1;g>=f;g--)h=(h<<1)+i[g];s.push(h)}for(var _=this.jpoint(null,null,null),T=this.jpoint(null,null,null),I=o;I>0;I--){for(f=0;f<s.length;f++)h=s[f],h===I?T=T.mixedAdd(n.points[f]):h===-I&&(T=T.mixedAdd(n.points[f].neg()));_=_.add(T)}return _.toP()};Zn.prototype._wnafMul=function(e,t){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var o=i.points,s=uu(t,n,this._bitLength),f=this.jpoint(null,null,null),h=s.length-1;h>=0;h--){for(var g=0;h>=0&&s[h]===0;h--)g++;if(h>=0&&g++,f=f.dblp(g),h<0)break;var _=s[h];lu(_!==0),e.type==="affine"?_>0?f=f.mixedAdd(o[_-1>>1]):f=f.mixedAdd(o[-_-1>>1].neg()):_>0?f=f.add(o[_-1>>1]):f=f.add(o[-_-1>>1].neg())}return e.type==="affine"?f.toP():f};Zn.prototype._wnafMulAdd=function(e,t,n,i,o){var s=this._wnafT1,f=this._wnafT2,h=this._wnafT3,g=0,_,T,I;for(_=0;_<i;_++){I=t[_];var x=I._getNAFPoints(e);s[_]=x.wnd,f[_]=x.points}for(_=i-1;_>=1;_-=2){var C=_-1,j=_;if(s[C]!==1||s[j]!==1){h[C]=uu(n[C],s[C],this._bitLength),h[j]=uu(n[j],s[j],this._bitLength),g=Math.max(h[C].length,g),g=Math.max(h[j].length,g);continue}var H=[t[C],null,null,t[j]];t[C].y.cmp(t[j].y)===0?(H[1]=t[C].add(t[j]),H[2]=t[C].toJ().mixedAdd(t[j].neg())):t[C].y.cmp(t[j].y.redNeg())===0?(H[1]=t[C].toJ().mixedAdd(t[j]),H[2]=t[C].add(t[j].neg())):(H[1]=t[C].toJ().mixedAdd(t[j]),H[2]=t[C].toJ().mixedAdd(t[j].neg()));var z=[-3,-1,-5,-7,0,7,5,1,3],X=W7(n[C],n[j]);for(g=Math.max(X[0].length,g),h[C]=new Array(g),h[j]=new Array(g),T=0;T<g;T++){var Y=X[0][T]|0,se=X[1][T]|0;h[C][T]=z[(Y+1)*3+(se+1)],h[j][T]=0,f[C]=H}}var G=this.jpoint(null,null,null),q=this._wnafT4;for(_=g;_>=0;_--){for(var J=0;_>=0;){var Q=!0;for(T=0;T<i;T++)q[T]=h[T][_]|0,q[T]!==0&&(Q=!1);if(!Q)break;J++,_--}if(_>=0&&J++,G=G.dblp(J),_<0)break;for(T=0;T<i;T++){var W=q[T];W!==0&&(W>0?I=f[T][W-1>>1]:W<0&&(I=f[T][-W-1>>1].neg()),I.type==="affine"?G=G.mixedAdd(I):G=G.add(I))}}for(_=0;_<i;_++)f[_]=null;return o?G:G.toP()};function wr(r,e){this.curve=r,this.type=e,this.precomputed=null}Zn.BasePoint=wr;wr.prototype.eq=function(){throw new Error("Not implemented")};wr.prototype.validate=function(){return this.curve.validate(this)};Zn.prototype.decodePoint=function(e,t){e=Ja.toArray(e,t);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?lu(e[e.length-1]%2===0):e[0]===7&&lu(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};wr.prototype.encodeCompressed=function(e){return this.encode(e,!0)};wr.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))};wr.prototype.encode=function(e,t){return Ja.encode(this._encode(t),e)};wr.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};wr.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};wr.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,o=0;o<t;o+=e){for(var s=0;s<e;s++)i=i.dbl();n.push(i)}return{step:e,points:n}};wr.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),o=1;o<n;o++)t[o]=t[o-1].add(i);return{wnd:e,points:t}};wr.prototype._getBeta=function(){return null};wr.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t}});var Cw=V((gC,Iw)=>{"use strict";var H7=ir(),lt=$t(),Ad=Zt(),ps=Xa(),K7=H7.assert;function xr(r){ps.call(this,"short",r),this.a=new lt(r.a,16).toRed(this.red),this.b=new lt(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Ad(xr,ps);Iw.exports=xr;xr.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,n;if(e.beta)t=new lt(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)n=new lt(e.lambda,16);else{var o=this._getEndoRoots(this.n);this.g.mul(o[0]).x.cmp(this.g.x.redMul(t))===0?n=o[0]:(n=o[1],K7(this.g.mul(n).x.cmp(this.g.x.redMul(t))===0))}var s;return e.basis?s=e.basis.map(function(f){return{a:new lt(f.a,16),b:new lt(f.b,16)}}):s=this._getEndoBasis(n),{beta:t,lambda:n,basis:s}}};xr.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:lt.mont(e),n=new lt(2).toRed(t).redInvm(),i=n.redNeg(),o=new lt(3).toRed(t).redNeg().redSqrt().redMul(n),s=i.redAdd(o).fromRed(),f=i.redSub(o).fromRed();return[s,f]};xr.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),o=new lt(1),s=new lt(0),f=new lt(0),h=new lt(1),g,_,T,I,x,C,j,H=0,z,X;n.cmpn(0)!==0;){var Y=i.div(n);z=i.sub(Y.mul(n)),X=f.sub(Y.mul(o));var se=h.sub(Y.mul(s));if(!T&&z.cmp(t)<0)g=j.neg(),_=o,T=z.neg(),I=X;else if(T&&++H===2)break;j=z,i=n,n=z,f=o,o=X,h=s,s=se}x=z.neg(),C=X;var G=T.sqr().add(I.sqr()),q=x.sqr().add(C.sqr());return q.cmp(G)>=0&&(x=g,C=_),T.negative&&(T=T.neg(),I=I.neg()),x.negative&&(x=x.neg(),C=C.neg()),[{a:T,b:I},{a:x,b:C}]};xr.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],i=t[1],o=i.b.mul(e).divRound(this.n),s=n.b.neg().mul(e).divRound(this.n),f=o.mul(n.a),h=s.mul(i.a),g=o.mul(n.b),_=s.mul(i.b),T=e.sub(f).sub(h),I=g.add(_).neg();return{k1:T,k2:I}};xr.prototype.pointFromX=function(e,t){e=new lt(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var o=i.fromRed().isOdd();return(t&&!o||!t&&o)&&(i=i.redNeg()),this.point(e,i)};xr.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,i=this.a.redMul(t),o=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(o).cmpn(0)===0};xr.prototype._endoWnafMulAdd=function(e,t,n){for(var i=this._endoWnafT1,o=this._endoWnafT2,s=0;s<e.length;s++){var f=this._endoSplit(t[s]),h=e[s],g=h._getBeta();f.k1.negative&&(f.k1.ineg(),h=h.neg(!0)),f.k2.negative&&(f.k2.ineg(),g=g.neg(!0)),i[s*2]=h,i[s*2+1]=g,o[s*2]=f.k1,o[s*2+1]=f.k2}for(var _=this._wnafMulAdd(1,i,o,s*2,n),T=0;T<s*2;T++)i[T]=null,o[T]=null;return _};function _t(r,e,t,n){ps.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new lt(e,16),this.y=new lt(t,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Ad(_t,ps.BasePoint);xr.prototype.point=function(e,t,n){return new _t(this,e,t,n)};xr.prototype.pointFromJSON=function(e,t){return _t.fromJSON(this,e,t)};_t.prototype._getBeta=function(){if(!!this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(o){return n.point(o.x.redMul(n.endo.beta),o.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}};_t.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};_t.fromJSON=function(e,t,n){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],n);if(!t[2])return i;function o(f){return e.point(f[0],f[1],n)}var s=t[2];return i.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[i].concat(s.doubles.points.map(o))},naf:s.naf&&{wnd:s.naf.wnd,points:[i].concat(s.naf.points.map(o))}},i};_t.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};_t.prototype.isInfinity=function(){return this.inf};_t.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};_t.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),o=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(i),s=o.redSqr().redISub(this.x.redAdd(this.x)),f=o.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,f)};_t.prototype.getX=function(){return this.x.fromRed()};_t.prototype.getY=function(){return this.y.fromRed()};_t.prototype.mul=function(e){return e=new lt(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};_t.prototype.mulAdd=function(e,t,n){var i=[this,t],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o):this.curve._wnafMulAdd(1,i,o,2)};_t.prototype.jmulAdd=function(e,t,n){var i=[this,t],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o,!0):this.curve._wnafMulAdd(1,i,o,2,!0)};_t.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};_t.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(o){return o.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return t};_t.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Tt(r,e,t,n){ps.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new lt(0)):(this.x=new lt(e,16),this.y=new lt(t,16),this.z=new lt(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Ad(Tt,ps.BasePoint);xr.prototype.jpoint=function(e,t,n){return new Tt(this,e,t,n)};Tt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(n,i)};Tt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Tt.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(t),o=e.x.redMul(n),s=this.y.redMul(t.redMul(e.z)),f=e.y.redMul(n.redMul(this.z)),h=i.redSub(o),g=s.redSub(f);if(h.cmpn(0)===0)return g.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var _=h.redSqr(),T=_.redMul(h),I=i.redMul(_),x=g.redSqr().redIAdd(T).redISub(I).redISub(I),C=g.redMul(I.redISub(x)).redISub(s.redMul(T)),j=this.z.redMul(e.z).redMul(h);return this.curve.jpoint(x,C,j)};Tt.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,i=e.x.redMul(t),o=this.y,s=e.y.redMul(t).redMul(this.z),f=n.redSub(i),h=o.redSub(s);if(f.cmpn(0)===0)return h.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var g=f.redSqr(),_=g.redMul(f),T=n.redMul(g),I=h.redSqr().redIAdd(_).redISub(T).redISub(T),x=h.redMul(T.redISub(I)).redISub(o.redMul(_)),C=this.z.redMul(f);return this.curve.jpoint(I,x,C)};Tt.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var i=this.curve.a,o=this.curve.tinv,s=this.x,f=this.y,h=this.z,g=h.redSqr().redSqr(),_=f.redAdd(f);for(t=0;t<e;t++){var T=s.redSqr(),I=_.redSqr(),x=I.redSqr(),C=T.redAdd(T).redIAdd(T).redIAdd(i.redMul(g)),j=s.redMul(I),H=C.redSqr().redISub(j.redAdd(j)),z=j.redISub(H),X=C.redMul(z);X=X.redIAdd(X).redISub(x);var Y=_.redMul(h);t+1<e&&(g=g.redMul(x)),s=H,h=Y,_=X}return this.curve.jpoint(s,_.redMul(o),h)};Tt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Tt.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),s=o.redSqr(),f=this.x.redAdd(o).redSqr().redISub(i).redISub(s);f=f.redIAdd(f);var h=i.redAdd(i).redIAdd(i),g=h.redSqr().redISub(f).redISub(f),_=s.redIAdd(s);_=_.redIAdd(_),_=_.redIAdd(_),e=g,t=h.redMul(f.redISub(g)).redISub(_),n=this.y.redAdd(this.y)}else{var T=this.x.redSqr(),I=this.y.redSqr(),x=I.redSqr(),C=this.x.redAdd(I).redSqr().redISub(T).redISub(x);C=C.redIAdd(C);var j=T.redAdd(T).redIAdd(T),H=j.redSqr(),z=x.redIAdd(x);z=z.redIAdd(z),z=z.redIAdd(z),e=H.redISub(C).redISub(C),t=j.redMul(C.redISub(e)).redISub(z),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,t,n)};Tt.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),s=o.redSqr(),f=this.x.redAdd(o).redSqr().redISub(i).redISub(s);f=f.redIAdd(f);var h=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),g=h.redSqr().redISub(f).redISub(f);e=g;var _=s.redIAdd(s);_=_.redIAdd(_),_=_.redIAdd(_),t=h.redMul(f.redISub(g)).redISub(_),n=this.y.redAdd(this.y)}else{var T=this.z.redSqr(),I=this.y.redSqr(),x=this.x.redMul(I),C=this.x.redSub(T).redMul(this.x.redAdd(T));C=C.redAdd(C).redIAdd(C);var j=x.redIAdd(x);j=j.redIAdd(j);var H=j.redAdd(j);e=C.redSqr().redISub(H),n=this.y.redAdd(this.z).redSqr().redISub(I).redISub(T);var z=I.redSqr();z=z.redIAdd(z),z=z.redIAdd(z),z=z.redIAdd(z),t=C.redMul(j.redISub(e)).redISub(z)}return this.curve.jpoint(e,t,n)};Tt.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,i=this.z,o=i.redSqr().redSqr(),s=t.redSqr(),f=n.redSqr(),h=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(o)),g=t.redAdd(t);g=g.redIAdd(g);var _=g.redMul(f),T=h.redSqr().redISub(_.redAdd(_)),I=_.redISub(T),x=f.redSqr();x=x.redIAdd(x),x=x.redIAdd(x),x=x.redIAdd(x);var C=h.redMul(I).redISub(x),j=n.redAdd(n).redMul(i);return this.curve.jpoint(T,C,j)};Tt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),i=t.redSqr(),o=e.redAdd(e).redIAdd(e),s=o.redSqr(),f=this.x.redAdd(t).redSqr().redISub(e).redISub(i);f=f.redIAdd(f),f=f.redAdd(f).redIAdd(f),f=f.redISub(s);var h=f.redSqr(),g=i.redIAdd(i);g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g);var _=o.redIAdd(f).redSqr().redISub(s).redISub(h).redISub(g),T=t.redMul(_);T=T.redIAdd(T),T=T.redIAdd(T);var I=this.x.redMul(h).redISub(T);I=I.redIAdd(I),I=I.redIAdd(I);var x=this.y.redMul(_.redMul(g.redISub(_)).redISub(f.redMul(h)));x=x.redIAdd(x),x=x.redIAdd(x),x=x.redIAdd(x);var C=this.z.redAdd(f).redSqr().redISub(n).redISub(h);return this.curve.jpoint(I,x,C)};Tt.prototype.mul=function(e,t){return e=new lt(e,t),this.curve._wnafMul(this,e)};Tt.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),o=n.redMul(e.z);return this.y.redMul(o).redISub(e.y.redMul(i)).cmpn(0)===0};Tt.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),o=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(o),this.x.cmp(n)===0)return!0}};Tt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Tt.prototype.isInfinity=function(){return this.z.cmpn(0)===0}});var Rw=V((yC,Ow)=>{"use strict";var gs=$t(),Bw=Zt(),hu=Xa(),z7=ir();function ys(r){hu.call(this,"mont",r),this.a=new gs(r.a,16).toRed(this.red),this.b=new gs(r.b,16).toRed(this.red),this.i4=new gs(4).toRed(this.red).redInvm(),this.two=new gs(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}Bw(ys,hu);Ow.exports=ys;ys.prototype.validate=function(e){var t=e.normalize().x,n=t.redSqr(),i=n.redMul(t).redAdd(n.redMul(this.a)).redAdd(t),o=i.redSqrt();return o.redSqr().cmp(i)===0};function St(r,e,t){hu.BasePoint.call(this,r,"projective"),e===null&&t===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new gs(e,16),this.z=new gs(t,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}Bw(St,hu.BasePoint);ys.prototype.decodePoint=function(e,t){return this.point(z7.toArray(e,t),1)};ys.prototype.point=function(e,t){return new St(this,e,t)};ys.prototype.pointFromJSON=function(e){return St.fromJSON(this,e)};St.prototype.precompute=function(){};St.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};St.fromJSON=function(e,t){return new St(e,t[0],t[1]||e.one)};St.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};St.prototype.isInfinity=function(){return this.z.cmpn(0)===0};St.prototype.dbl=function(){var e=this.x.redAdd(this.z),t=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),o=t.redSub(i),s=t.redMul(i),f=o.redMul(i.redAdd(this.curve.a24.redMul(o)));return this.curve.point(s,f)};St.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};St.prototype.diffAdd=function(e,t){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),o=e.x.redAdd(e.z),s=e.x.redSub(e.z),f=s.redMul(n),h=o.redMul(i),g=t.z.redMul(f.redAdd(h).redSqr()),_=t.x.redMul(f.redISub(h).redSqr());return this.curve.point(g,_)};St.prototype.mul=function(e){for(var t=e.clone(),n=this,i=this.curve.point(null,null),o=this,s=[];t.cmpn(0)!==0;t.iushrn(1))s.push(t.andln(1));for(var f=s.length-1;f>=0;f--)s[f]===0?(n=n.diffAdd(i,o),i=i.dbl()):(i=n.diffAdd(i,o),n=n.dbl());return i};St.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};St.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};St.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};St.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};St.prototype.getX=function(){return this.normalize(),this.x.fromRed()}});var kw=V((mC,Nw)=>{"use strict";var G7=ir(),Sn=$t(),Pw=Zt(),du=Xa(),V7=G7.assert;function Vr(r){this.twisted=(r.a|0)!==1,this.mOneA=this.twisted&&(r.a|0)===-1,this.extended=this.mOneA,du.call(this,"edwards",r),this.a=new Sn(r.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Sn(r.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Sn(r.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),V7(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(r.c|0)===1}Pw(Vr,du);Nw.exports=Vr;Vr.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};Vr.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};Vr.prototype.jpoint=function(e,t,n,i){return this.point(e,t,n,i)};Vr.prototype.pointFromX=function(e,t){e=new Sn(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),o=this.one.redSub(this.c2.redMul(this.d).redMul(n)),s=i.redMul(o.redInvm()),f=s.redSqrt();if(f.redSqr().redSub(s).cmp(this.zero)!==0)throw new Error("invalid point");var h=f.fromRed().isOdd();return(t&&!h||!t&&h)&&(f=f.redNeg()),this.point(e,f)};Vr.prototype.pointFromY=function(e,t){e=new Sn(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),o=n.redMul(this.d).redMul(this.c2).redSub(this.a),s=i.redMul(o.redInvm());if(s.cmp(this.zero)===0){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var f=s.redSqrt();if(f.redSqr().redSub(s).cmp(this.zero)!==0)throw new Error("invalid point");return f.fromRed().isOdd()!==t&&(f=f.redNeg()),this.point(f,e)};Vr.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),n=e.y.redSqr(),i=t.redMul(this.a).redAdd(n),o=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(n)));return i.cmp(o)===0};function nt(r,e,t,n,i){du.BasePoint.call(this,r,"projective"),e===null&&t===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Sn(e,16),this.y=new Sn(t,16),this.z=n?new Sn(n,16):this.curve.one,this.t=i&&new Sn(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}Pw(nt,du.BasePoint);Vr.prototype.pointFromJSON=function(e){return nt.fromJSON(this,e)};Vr.prototype.point=function(e,t,n,i){return new nt(this,e,t,n,i)};nt.fromJSON=function(e,t){return new nt(e,t[0],t[1],t[2])};nt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};nt.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};nt.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),o=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),s=i.redAdd(t),f=s.redSub(n),h=i.redSub(t),g=o.redMul(f),_=s.redMul(h),T=o.redMul(h),I=f.redMul(s);return this.curve.point(g,_,I,T)};nt.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),t=this.x.redSqr(),n=this.y.redSqr(),i,o,s,f,h,g;if(this.curve.twisted){f=this.curve._mulA(t);var _=f.redAdd(n);this.zOne?(i=e.redSub(t).redSub(n).redMul(_.redSub(this.curve.two)),o=_.redMul(f.redSub(n)),s=_.redSqr().redSub(_).redSub(_)):(h=this.z.redSqr(),g=_.redSub(h).redISub(h),i=e.redSub(t).redISub(n).redMul(g),o=_.redMul(f.redSub(n)),s=_.redMul(g))}else f=t.redAdd(n),h=this.curve._mulC(this.z).redSqr(),g=f.redSub(h).redSub(h),i=this.curve._mulC(e.redISub(f)).redMul(g),o=this.curve._mulC(f).redMul(t.redISub(n)),s=f.redMul(g);return this.curve.point(i,o,s)};nt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};nt.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),o=this.z.redMul(e.z.redAdd(e.z)),s=n.redSub(t),f=o.redSub(i),h=o.redAdd(i),g=n.redAdd(t),_=s.redMul(f),T=h.redMul(g),I=s.redMul(g),x=f.redMul(h);return this.curve.point(_,T,x,I)};nt.prototype._projAdd=function(e){var t=this.z.redMul(e.z),n=t.redSqr(),i=this.x.redMul(e.x),o=this.y.redMul(e.y),s=this.curve.d.redMul(i).redMul(o),f=n.redSub(s),h=n.redAdd(s),g=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(o),_=t.redMul(f).redMul(g),T,I;return this.curve.twisted?(T=t.redMul(h).redMul(o.redSub(this.curve._mulA(i))),I=f.redMul(h)):(T=t.redMul(h).redMul(o.redSub(i)),I=this.curve._mulC(f).redMul(h)),this.curve.point(_,T,I)};nt.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};nt.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};nt.prototype.mulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!1)};nt.prototype.jmulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!0)};nt.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};nt.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};nt.prototype.getX=function(){return this.normalize(),this.x.fromRed()};nt.prototype.getY=function(){return this.normalize(),this.y.fromRed()};nt.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};nt.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(t)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),this.x.cmp(t)===0)return!0}};nt.prototype.toP=nt.prototype.normalize;nt.prototype.mixedAdd=nt.prototype.add});var Fd=V(Lw=>{"use strict";var pu=Lw;pu.base=Xa();pu.short=Cw();pu.mont=Rw();pu.edwards=kw()});var Or=V(tt=>{"use strict";var J7=yn(),X7=Zt();tt.inherits=X7;function Y7(r,e){return(r.charCodeAt(e)&64512)!==55296||e<0||e+1>=r.length?!1:(r.charCodeAt(e+1)&64512)===56320}function Q7(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r=="string")if(e){if(e==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),i=0;i<r.length;i+=2)t.push(parseInt(r[i]+r[i+1],16))}else for(var n=0,i=0;i<r.length;i++){var o=r.charCodeAt(i);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):Y7(r,i)?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}else for(i=0;i<r.length;i++)t[i]=r[i]|0;return t}tt.toArray=Q7;function Z7(r){for(var e="",t=0;t<r.length;t++)e+=Uw(r[t].toString(16));return e}tt.toHex=Z7;function Dw(r){var e=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return e>>>0}tt.htonl=Dw;function e9(r,e){for(var t="",n=0;n<r.length;n++){var i=r[n];e==="little"&&(i=Dw(i)),t+=qw(i.toString(16))}return t}tt.toHex32=e9;function Uw(r){return r.length===1?"0"+r:r}tt.zero2=Uw;function qw(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}tt.zero8=qw;function t9(r,e,t,n){var i=t-e;J7(i%4===0);for(var o=new Array(i/4),s=0,f=e;s<o.length;s++,f+=4){var h;n==="big"?h=r[f]<<24|r[f+1]<<16|r[f+2]<<8|r[f+3]:h=r[f+3]<<24|r[f+2]<<16|r[f+1]<<8|r[f],o[s]=h>>>0}return o}tt.join32=t9;function r9(r,e){for(var t=new Array(r.length*4),n=0,i=0;n<r.length;n++,i+=4){var o=r[n];e==="big"?(t[i]=o>>>24,t[i+1]=o>>>16&255,t[i+2]=o>>>8&255,t[i+3]=o&255):(t[i+3]=o>>>24,t[i+2]=o>>>16&255,t[i+1]=o>>>8&255,t[i]=o&255)}return t}tt.split32=r9;function n9(r,e){return r>>>e|r<<32-e}tt.rotr32=n9;function i9(r,e){return r<<e|r>>>32-e}tt.rotl32=i9;function o9(r,e){return r+e>>>0}tt.sum32=o9;function s9(r,e,t){return r+e+t>>>0}tt.sum32_3=s9;function a9(r,e,t,n){return r+e+t+n>>>0}tt.sum32_4=a9;function f9(r,e,t,n,i){return r+e+t+n+i>>>0}tt.sum32_5=f9;function c9(r,e,t,n){var i=r[e],o=r[e+1],s=n+o>>>0,f=(s<n?1:0)+t+i;r[e]=f>>>0,r[e+1]=s}tt.sum64=c9;function u9(r,e,t,n){var i=e+n>>>0,o=(i<e?1:0)+r+t;return o>>>0}tt.sum64_hi=u9;function l9(r,e,t,n){var i=e+n;return i>>>0}tt.sum64_lo=l9;function h9(r,e,t,n,i,o,s,f){var h=0,g=e;g=g+n>>>0,h+=g<e?1:0,g=g+o>>>0,h+=g<o?1:0,g=g+f>>>0,h+=g<f?1:0;var _=r+t+i+s+h;return _>>>0}tt.sum64_4_hi=h9;function d9(r,e,t,n,i,o,s,f){var h=e+n+o+f;return h>>>0}tt.sum64_4_lo=d9;function p9(r,e,t,n,i,o,s,f,h,g){var _=0,T=e;T=T+n>>>0,_+=T<e?1:0,T=T+o>>>0,_+=T<o?1:0,T=T+f>>>0,_+=T<f?1:0,T=T+g>>>0,_+=T<g?1:0;var I=r+t+i+s+h+_;return I>>>0}tt.sum64_5_hi=p9;function g9(r,e,t,n,i,o,s,f,h,g){var _=e+n+o+f+g;return _>>>0}tt.sum64_5_lo=g9;function y9(r,e,t){var n=e<<32-t|r>>>t;return n>>>0}tt.rotr64_hi=y9;function m9(r,e,t){var n=r<<32-t|e>>>t;return n>>>0}tt.rotr64_lo=m9;function b9(r,e,t){return r>>>t}tt.shr64_hi=b9;function v9(r,e,t){var n=r<<32-t|e>>>t;return n>>>0}tt.shr64_lo=v9});var ms=V($w=>{"use strict";var jw=Or(),w9=yn();function gu(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}$w.BlockHash=gu;gu.prototype.update=function(e,t){if(e=jw.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=jw.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};gu.prototype.digest=function(e){return this.update(this._pad()),w9(this.pending===null),this._digest(e)};gu.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,i=new Array(n+this.padLength);i[0]=128;for(var o=1;o<n;o++)i[o]=0;if(e<<=3,this.endian==="big"){for(var s=8;s<this.padLength;s++)i[o++]=0;i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=e>>>24&255,i[o++]=e>>>16&255,i[o++]=e>>>8&255,i[o++]=e&255}else for(i[o++]=e&255,i[o++]=e>>>8&255,i[o++]=e>>>16&255,i[o++]=e>>>24&255,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=0,s=8;s<this.padLength;s++)i[o++]=0;return i}});var Td=V(En=>{"use strict";var x9=Or(),Jr=x9.rotr32;function _9(r,e,t,n){if(r===0)return Ww(e,t,n);if(r===1||r===3)return Kw(e,t,n);if(r===2)return Hw(e,t,n)}En.ft_1=_9;function Ww(r,e,t){return r&e^~r&t}En.ch32=Ww;function Hw(r,e,t){return r&e^r&t^e&t}En.maj32=Hw;function Kw(r,e,t){return r^e^t}En.p32=Kw;function S9(r){return Jr(r,2)^Jr(r,13)^Jr(r,22)}En.s0_256=S9;function E9(r){return Jr(r,6)^Jr(r,11)^Jr(r,25)}En.s1_256=E9;function A9(r){return Jr(r,7)^Jr(r,18)^r>>>3}En.g0_256=A9;function F9(r){return Jr(r,17)^Jr(r,19)^r>>>10}En.g1_256=F9});var Vw=V((_C,Gw)=>{"use strict";var bs=Or(),T9=ms(),M9=Td(),Md=bs.rotl32,Ya=bs.sum32,I9=bs.sum32_5,C9=M9.ft_1,zw=T9.BlockHash,B9=[1518500249,1859775393,2400959708,3395469782];function Xr(){if(!(this instanceof Xr))return new Xr;zw.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}bs.inherits(Xr,zw);Gw.exports=Xr;Xr.blockSize=512;Xr.outSize=160;Xr.hmacStrength=80;Xr.padLength=64;Xr.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=Md(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var o=this.h[0],s=this.h[1],f=this.h[2],h=this.h[3],g=this.h[4];for(i=0;i<n.length;i++){var _=~~(i/20),T=I9(Md(o,5),C9(_,s,f,h),g,n[i],B9[_]);g=h,h=f,f=Md(s,30),s=o,o=T}this.h[0]=Ya(this.h[0],o),this.h[1]=Ya(this.h[1],s),this.h[2]=Ya(this.h[2],f),this.h[3]=Ya(this.h[3],h),this.h[4]=Ya(this.h[4],g)};Xr.prototype._digest=function(e){return e==="hex"?bs.toHex32(this.h,"big"):bs.split32(this.h,"big")}});var Id=V((SC,Xw)=>{"use strict";var vs=Or(),O9=ms(),ws=Td(),R9=yn(),Rr=vs.sum32,P9=vs.sum32_4,N9=vs.sum32_5,k9=ws.ch32,L9=ws.maj32,D9=ws.s0_256,U9=ws.s1_256,q9=ws.g0_256,j9=ws.g1_256,Jw=O9.BlockHash,$9=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Yr(){if(!(this instanceof Yr))return new Yr;Jw.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=$9,this.W=new Array(64)}vs.inherits(Yr,Jw);Xw.exports=Yr;Yr.blockSize=512;Yr.outSize=256;Yr.hmacStrength=192;Yr.padLength=64;Yr.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=P9(j9(n[i-2]),n[i-7],q9(n[i-15]),n[i-16]);var o=this.h[0],s=this.h[1],f=this.h[2],h=this.h[3],g=this.h[4],_=this.h[5],T=this.h[6],I=this.h[7];for(R9(this.k.length===n.length),i=0;i<n.length;i++){var x=N9(I,U9(g),k9(g,_,T),this.k[i],n[i]),C=Rr(D9(o),L9(o,s,f));I=T,T=_,_=g,g=Rr(h,x),h=f,f=s,s=o,o=Rr(x,C)}this.h[0]=Rr(this.h[0],o),this.h[1]=Rr(this.h[1],s),this.h[2]=Rr(this.h[2],f),this.h[3]=Rr(this.h[3],h),this.h[4]=Rr(this.h[4],g),this.h[5]=Rr(this.h[5],_),this.h[6]=Rr(this.h[6],T),this.h[7]=Rr(this.h[7],I)};Yr.prototype._digest=function(e){return e==="hex"?vs.toHex32(this.h,"big"):vs.split32(this.h,"big")}});var Zw=V((EC,Qw)=>{"use strict";var Cd=Or(),Yw=Id();function An(){if(!(this instanceof An))return new An;Yw.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Cd.inherits(An,Yw);Qw.exports=An;An.blockSize=512;An.outSize=224;An.hmacStrength=192;An.padLength=64;An.prototype._digest=function(e){return e==="hex"?Cd.toHex32(this.h.slice(0,7),"big"):Cd.split32(this.h.slice(0,7),"big")}});var Rd=V((AC,n2)=>{"use strict";var Wt=Or(),W9=ms(),H9=yn(),Qr=Wt.rotr64_hi,Zr=Wt.rotr64_lo,e2=Wt.shr64_hi,t2=Wt.shr64_lo,ei=Wt.sum64,Bd=Wt.sum64_hi,Od=Wt.sum64_lo,K9=Wt.sum64_4_hi,z9=Wt.sum64_4_lo,G9=Wt.sum64_5_hi,V9=Wt.sum64_5_lo,r2=W9.BlockHash,J9=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Pr(){if(!(this instanceof Pr))return new Pr;r2.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=J9,this.W=new Array(160)}Wt.inherits(Pr,r2);n2.exports=Pr;Pr.blockSize=1024;Pr.outSize=512;Pr.hmacStrength=192;Pr.padLength=128;Pr.prototype._prepareBlock=function(e,t){for(var n=this.W,i=0;i<32;i++)n[i]=e[t+i];for(;i<n.length;i+=2){var o=sA(n[i-4],n[i-3]),s=aA(n[i-4],n[i-3]),f=n[i-14],h=n[i-13],g=iA(n[i-30],n[i-29]),_=oA(n[i-30],n[i-29]),T=n[i-32],I=n[i-31];n[i]=K9(o,s,f,h,g,_,T,I),n[i+1]=z9(o,s,f,h,g,_,T,I)}};Pr.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,i=this.h[0],o=this.h[1],s=this.h[2],f=this.h[3],h=this.h[4],g=this.h[5],_=this.h[6],T=this.h[7],I=this.h[8],x=this.h[9],C=this.h[10],j=this.h[11],H=this.h[12],z=this.h[13],X=this.h[14],Y=this.h[15];H9(this.k.length===n.length);for(var se=0;se<n.length;se+=2){var G=X,q=Y,J=rA(I,x),Q=nA(I,x),W=X9(I,x,C,j,H,z),R=Y9(I,x,C,j,H,z),l=this.k[se],b=this.k[se+1],d=n[se],a=n[se+1],u=G9(G,q,J,Q,W,R,l,b,d,a),v=V9(G,q,J,Q,W,R,l,b,d,a);G=eA(i,o),q=tA(i,o),J=Q9(i,o,s,f,h,g),Q=Z9(i,o,s,f,h,g);var E=Bd(G,q,J,Q),p=Od(G,q,J,Q);X=H,Y=z,H=C,z=j,C=I,j=x,I=Bd(_,T,u,v),x=Od(T,T,u,v),_=h,T=g,h=s,g=f,s=i,f=o,i=Bd(u,v,E,p),o=Od(u,v,E,p)}ei(this.h,0,i,o),ei(this.h,2,s,f),ei(this.h,4,h,g),ei(this.h,6,_,T),ei(this.h,8,I,x),ei(this.h,10,C,j),ei(this.h,12,H,z),ei(this.h,14,X,Y)};Pr.prototype._digest=function(e){return e==="hex"?Wt.toHex32(this.h,"big"):Wt.split32(this.h,"big")};function X9(r,e,t,n,i){var o=r&t^~r&i;return o<0&&(o+=4294967296),o}function Y9(r,e,t,n,i,o){var s=e&n^~e&o;return s<0&&(s+=4294967296),s}function Q9(r,e,t,n,i){var o=r&t^r&i^t&i;return o<0&&(o+=4294967296),o}function Z9(r,e,t,n,i,o){var s=e&n^e&o^n&o;return s<0&&(s+=4294967296),s}function eA(r,e){var t=Qr(r,e,28),n=Qr(e,r,2),i=Qr(e,r,7),o=t^n^i;return o<0&&(o+=4294967296),o}function tA(r,e){var t=Zr(r,e,28),n=Zr(e,r,2),i=Zr(e,r,7),o=t^n^i;return o<0&&(o+=4294967296),o}function rA(r,e){var t=Qr(r,e,14),n=Qr(r,e,18),i=Qr(e,r,9),o=t^n^i;return o<0&&(o+=4294967296),o}function nA(r,e){var t=Zr(r,e,14),n=Zr(r,e,18),i=Zr(e,r,9),o=t^n^i;return o<0&&(o+=4294967296),o}function iA(r,e){var t=Qr(r,e,1),n=Qr(r,e,8),i=e2(r,e,7),o=t^n^i;return o<0&&(o+=4294967296),o}function oA(r,e){var t=Zr(r,e,1),n=Zr(r,e,8),i=t2(r,e,7),o=t^n^i;return o<0&&(o+=4294967296),o}function sA(r,e){var t=Qr(r,e,19),n=Qr(e,r,29),i=e2(r,e,6),o=t^n^i;return o<0&&(o+=4294967296),o}function aA(r,e){var t=Zr(r,e,19),n=Zr(e,r,29),i=t2(r,e,6),o=t^n^i;return o<0&&(o+=4294967296),o}});var s2=V((FC,o2)=>{"use strict";var Pd=Or(),i2=Rd();function Fn(){if(!(this instanceof Fn))return new Fn;i2.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Pd.inherits(Fn,i2);o2.exports=Fn;Fn.blockSize=1024;Fn.outSize=384;Fn.hmacStrength=192;Fn.padLength=128;Fn.prototype._digest=function(e){return e==="hex"?Pd.toHex32(this.h.slice(0,12),"big"):Pd.split32(this.h.slice(0,12),"big")}});var a2=V(xs=>{"use strict";xs.sha1=Vw();xs.sha224=Zw();xs.sha256=Id();xs.sha384=s2();xs.sha512=Rd()});var d2=V(h2=>{"use strict";var ro=Or(),fA=ms(),yu=ro.rotl32,f2=ro.sum32,Qa=ro.sum32_3,c2=ro.sum32_4,l2=fA.BlockHash;function en(){if(!(this instanceof en))return new en;l2.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}ro.inherits(en,l2);h2.ripemd160=en;en.blockSize=512;en.outSize=160;en.hmacStrength=192;en.padLength=64;en.prototype._update=function(e,t){for(var n=this.h[0],i=this.h[1],o=this.h[2],s=this.h[3],f=this.h[4],h=n,g=i,_=o,T=s,I=f,x=0;x<80;x++){var C=f2(yu(c2(n,u2(x,i,o,s),e[lA[x]+t],cA(x)),dA[x]),f);n=f,f=s,s=yu(o,10),o=i,i=C,C=f2(yu(c2(h,u2(79-x,g,_,T),e[hA[x]+t],uA(x)),pA[x]),I),h=I,I=T,T=yu(_,10),_=g,g=C}C=Qa(this.h[1],o,T),this.h[1]=Qa(this.h[2],s,I),this.h[2]=Qa(this.h[3],f,h),this.h[3]=Qa(this.h[4],n,g),this.h[4]=Qa(this.h[0],i,_),this.h[0]=C};en.prototype._digest=function(e){return e==="hex"?ro.toHex32(this.h,"little"):ro.split32(this.h,"little")};function u2(r,e,t,n){return r<=15?e^t^n:r<=31?e&t|~e&n:r<=47?(e|~t)^n:r<=63?e&n|t&~n:e^(t|~n)}function cA(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function uA(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var lA=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],hA=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],dA=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],pA=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]});var g2=V((IC,p2)=>{"use strict";var gA=Or(),yA=yn();function _s(r,e,t){if(!(this instanceof _s))return new _s(r,e,t);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(gA.toArray(e,t))}p2.exports=_s;_s.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),yA(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};_s.prototype.update=function(e,t){return this.inner.update(e,t),this};_s.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}});var mu=V(y2=>{var Mt=y2;Mt.utils=Or();Mt.common=ms();Mt.sha=a2();Mt.ripemd=d2();Mt.hmac=g2();Mt.sha1=Mt.sha.sha1;Mt.sha256=Mt.sha.sha256;Mt.sha224=Mt.sha.sha224;Mt.sha384=Mt.sha.sha384;Mt.sha512=Mt.sha.sha512;Mt.ripemd160=Mt.ripemd.ripemd160});var b2=V((BC,m2)=>{m2.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}});var bu=V(x2=>{"use strict";var kd=x2,ti=mu(),Nd=Fd(),mA=ir(),v2=mA.assert;function w2(r){r.type==="short"?this.curve=new Nd.short(r):r.type==="edwards"?this.curve=new Nd.edwards(r):this.curve=new Nd.mont(r),this.g=this.curve.g,this.n=this.curve.n,this.hash=r.hash,v2(this.g.validate(),"Invalid curve"),v2(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}kd.PresetCurve=w2;function ri(r,e){Object.defineProperty(kd,r,{configurable:!0,enumerable:!0,get:function(){var t=new w2(e);return Object.defineProperty(kd,r,{configurable:!0,enumerable:!0,value:t}),t}})}ri("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:ti.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});ri("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:ti.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});ri("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:ti.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});ri("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:ti.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});ri("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:ti.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});ri("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ti.sha256,gRed:!1,g:["9"]});ri("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ti.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var Ld;try{Ld=b2()}catch{Ld=void 0}ri("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:ti.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",Ld]})});var E2=V((RC,S2)=>{"use strict";var bA=mu(),no=wd(),_2=yn();function ni(r){if(!(this instanceof ni))return new ni(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=no.toArray(r.entropy,r.entropyEnc||"hex"),t=no.toArray(r.nonce,r.nonceEnc||"hex"),n=no.toArray(r.pers,r.persEnc||"hex");_2(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,n)}S2.exports=ni;ni.prototype._init=function(e,t,n){var i=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var o=0;o<this.V.length;o++)this.K[o]=0,this.V[o]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};ni.prototype._hmac=function(){return new bA.hmac(this.hash,this.K)};ni.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};ni.prototype.reseed=function(e,t,n,i){typeof t!="string"&&(i=n,n=t,t=null),e=no.toArray(e,t),n=no.toArray(n,i),_2(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};ni.prototype.generate=function(e,t,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=n,n=t,t=null),n&&(n=no.toArray(n,i||"hex"),this._update(n));for(var o=[];o.length<e;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var s=o.slice(0,e);return this._update(n),this._reseed++,no.encode(s,t)}});var F2=V((PC,A2)=>{"use strict";var vA=$t(),wA=ir(),Dd=wA.assert;function Bt(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}A2.exports=Bt;Bt.fromPublic=function(e,t,n){return t instanceof Bt?t:new Bt(e,{pub:t,pubEnc:n})};Bt.fromPrivate=function(e,t,n){return t instanceof Bt?t:new Bt(e,{priv:t,privEnc:n})};Bt.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Bt.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};Bt.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Bt.prototype._importPrivate=function(e,t){this.priv=new vA(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};Bt.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?Dd(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Dd(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};Bt.prototype.derive=function(e){return e.validate()||Dd(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Bt.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)};Bt.prototype.verify=function(e,t){return this.ec.verify(e,t,this)};Bt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}});var I2=V((NC,M2)=>{"use strict";var vu=$t(),jd=ir(),xA=jd.assert;function wu(r,e){if(r instanceof wu)return r;this._importDER(r,e)||(xA(r.r&&r.s,"Signature without r or s"),this.r=new vu(r.r,16),this.s=new vu(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}M2.exports=wu;function _A(){this.place=0}function Ud(r,e){var t=r[e.place++];if(!(t&128))return t;var n=t&15;if(n===0||n>4)return!1;for(var i=0,o=0,s=e.place;o<n;o++,s++)i<<=8,i|=r[s],i>>>=0;return i<=127?!1:(e.place=s,i)}function T2(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}wu.prototype._importDER=function(e,t){e=jd.toArray(e,t);var n=new _A;if(e[n.place++]!==48)return!1;var i=Ud(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var o=Ud(e,n);if(o===!1)return!1;var s=e.slice(n.place,o+n.place);if(n.place+=o,e[n.place++]!==2)return!1;var f=Ud(e,n);if(f===!1||e.length!==f+n.place)return!1;var h=e.slice(n.place,f+n.place);if(s[0]===0)if(s[1]&128)s=s.slice(1);else return!1;if(h[0]===0)if(h[1]&128)h=h.slice(1);else return!1;return this.r=new vu(s),this.s=new vu(h),this.recoveryParam=null,!0};function qd(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}wu.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),n[0]&128&&(n=[0].concat(n)),t=T2(t),n=T2(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];qd(i,t.length),i=i.concat(t),i.push(2),qd(i,n.length);var o=i.concat(n),s=[48];return qd(s,o.length),s=s.concat(o),jd.encode(s,e)}});var R2=V((kC,O2)=>{"use strict";var io=$t(),C2=E2(),SA=ir(),$d=bu(),EA=Ed(),B2=SA.assert,Wd=F2(),xu=I2();function _r(r){if(!(this instanceof _r))return new _r(r);typeof r=="string"&&(B2(Object.prototype.hasOwnProperty.call($d,r),"Unknown curve "+r),r=$d[r]),r instanceof $d.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}O2.exports=_r;_r.prototype.keyPair=function(e){return new Wd(this,e)};_r.prototype.keyFromPrivate=function(e,t){return Wd.fromPrivate(this,e,t)};_r.prototype.keyFromPublic=function(e,t){return Wd.fromPublic(this,e,t)};_r.prototype.genKeyPair=function(e){e||(e={});for(var t=new C2({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||EA(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new io(2));;){var o=new io(t.generate(n));if(!(o.cmp(i)>0))return o.iaddn(1),this.keyFromPrivate(o)}};_r.prototype._truncateToN=function(e,t){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};_r.prototype.sign=function(e,t,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),t=this.keyFromPrivate(t,n),e=this._truncateToN(new io(e,16));for(var o=this.n.byteLength(),s=t.getPrivate().toArray("be",o),f=e.toArray("be",o),h=new C2({hash:this.hash,entropy:s,nonce:f,pers:i.pers,persEnc:i.persEnc||"utf8"}),g=this.n.sub(new io(1)),_=0;;_++){var T=i.k?i.k(_):new io(h.generate(this.n.byteLength()));if(T=this._truncateToN(T,!0),!(T.cmpn(1)<=0||T.cmp(g)>=0)){var I=this.g.mul(T);if(!I.isInfinity()){var x=I.getX(),C=x.umod(this.n);if(C.cmpn(0)!==0){var j=T.invm(this.n).mul(C.mul(t.getPrivate()).iadd(e));if(j=j.umod(this.n),j.cmpn(0)!==0){var H=(I.getY().isOdd()?1:0)|(x.cmp(C)!==0?2:0);return i.canonical&&j.cmp(this.nh)>0&&(j=this.n.sub(j),H^=1),new xu({r:C,s:j,recoveryParam:H})}}}}}};_r.prototype.verify=function(e,t,n,i){e=this._truncateToN(new io(e,16)),n=this.keyFromPublic(n,i),t=new xu(t,"hex");var o=t.r,s=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var f=s.invm(this.n),h=f.mul(e).umod(this.n),g=f.mul(o).umod(this.n),_;return this.curve._maxwellTrick?(_=this.g.jmulAdd(h,n.getPublic(),g),_.isInfinity()?!1:_.eqXToP(o)):(_=this.g.mulAdd(h,n.getPublic(),g),_.isInfinity()?!1:_.getX().umod(this.n).cmp(o)===0)};_r.prototype.recoverPubKey=function(r,e,t,n){B2((3&t)===t,"The recovery param is more than two bits"),e=new xu(e,n);var i=this.n,o=new io(r),s=e.r,f=e.s,h=t&1,g=t>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&g)throw new Error("Unable to find sencond key candinate");g?s=this.curve.pointFromX(s.add(this.curve.n),h):s=this.curve.pointFromX(s,h);var _=e.r.invm(i),T=i.sub(o).mul(_).umod(i),I=f.mul(_).umod(i);return this.g.mulAdd(T,s,I)};_r.prototype.getKeyRecoveryParam=function(r,e,t,n){if(e=new xu(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(r,e,i)}catch{continue}if(o.eq(t))return i}throw new Error("Unable to find valid recovery factor")}});var L2=V((LC,k2)=>{"use strict";var Za=ir(),N2=Za.assert,P2=Za.parseBytes,Ss=Za.cachedProperty;function Et(r,e){this.eddsa=r,this._secret=P2(e.secret),r.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=P2(e.pub)}Et.fromPublic=function(e,t){return t instanceof Et?t:new Et(e,{pub:t})};Et.fromSecret=function(e,t){return t instanceof Et?t:new Et(e,{secret:t})};Et.prototype.secret=function(){return this._secret};Ss(Et,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Ss(Et,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Ss(Et,"privBytes",function(){var e=this.eddsa,t=this.hash(),n=e.encodingLength-1,i=t.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});Ss(Et,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Ss(Et,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Ss(Et,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Et.prototype.sign=function(e){return N2(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Et.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)};Et.prototype.getSecret=function(e){return N2(this._secret,"KeyPair is public only"),Za.encode(this.secret(),e)};Et.prototype.getPublic=function(e){return Za.encode(this.pubBytes(),e)};k2.exports=Et});var U2=V((DC,D2)=>{"use strict";var AA=$t(),_u=ir(),FA=_u.assert,Su=_u.cachedProperty,TA=_u.parseBytes;function oo(r,e){this.eddsa=r,typeof e!="object"&&(e=TA(e)),Array.isArray(e)&&(e={R:e.slice(0,r.encodingLength),S:e.slice(r.encodingLength)}),FA(e.R&&e.S,"Signature without R or S"),r.isPoint(e.R)&&(this._R=e.R),e.S instanceof AA&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}Su(oo,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});Su(oo,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});Su(oo,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});Su(oo,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});oo.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};oo.prototype.toHex=function(){return _u.encode(this.toBytes(),"hex").toUpperCase()};D2.exports=oo});var H2=V((UC,W2)=>{"use strict";var MA=mu(),IA=bu(),Es=ir(),CA=Es.assert,j2=Es.parseBytes,$2=L2(),q2=U2();function Ht(r){if(CA(r==="ed25519","only tested with ed25519 so far"),!(this instanceof Ht))return new Ht(r);r=IA[r].curve,this.curve=r,this.g=r.g,this.g.precompute(r.n.bitLength()+1),this.pointClass=r.point().constructor,this.encodingLength=Math.ceil(r.n.bitLength()/8),this.hash=MA.sha512}W2.exports=Ht;Ht.prototype.sign=function(e,t){e=j2(e);var n=this.keyFromSecret(t),i=this.hashInt(n.messagePrefix(),e),o=this.g.mul(i),s=this.encodePoint(o),f=this.hashInt(s,n.pubBytes(),e).mul(n.priv()),h=i.add(f).umod(this.curve.n);return this.makeSignature({R:o,S:h,Rencoded:s})};Ht.prototype.verify=function(e,t,n){e=j2(e),t=this.makeSignature(t);var i=this.keyFromPublic(n),o=this.hashInt(t.Rencoded(),i.pubBytes(),e),s=this.g.mul(t.S()),f=t.R().add(i.pub().mul(o));return f.eq(s)};Ht.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return Es.intFromLE(e.digest()).umod(this.curve.n)};Ht.prototype.keyFromPublic=function(e){return $2.fromPublic(this,e)};Ht.prototype.keyFromSecret=function(e){return $2.fromSecret(this,e)};Ht.prototype.makeSignature=function(e){return e instanceof q2?e:new q2(this,e)};Ht.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t};Ht.prototype.decodePoint=function(e){e=Es.parseBytes(e);var t=e.length-1,n=e.slice(0,t).concat(e[t]&-129),i=(e[t]&128)!==0,o=Es.intFromLE(n);return this.curve.pointFromY(o,i)};Ht.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};Ht.prototype.decodeInt=function(e){return Es.intFromLE(e)};Ht.prototype.isPoint=function(e){return e instanceof this.pointClass}});var Eu=V(K2=>{"use strict";var so=K2;so.version=Sw().version;so.utils=ir();so.rand=Ed();so.curve=Fd();so.curves=bu();so.ec=R2();so.eddsa=H2()});var G2=V((z2,Hd)=>{(function(r,e){"use strict";function t(d,a){if(!d)throw new Error(a||"Assertion failed")}function n(d,a){d.super_=a;var u=function(){};u.prototype=a.prototype,d.prototype=new u,d.prototype.constructor=d}function i(d,a,u){if(i.isBN(d))return d;this.negative=0,this.words=null,this.length=0,this.red=null,d!==null&&((a==="le"||a==="be")&&(u=a,a=10),this._init(d||0,a||10,u||"be"))}typeof r=="object"?r.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=B0().Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,u){return a.cmp(u)>0?a:u},i.min=function(a,u){return a.cmp(u)<0?a:u},i.prototype._init=function(a,u,v){if(typeof a=="number")return this._initNumber(a,u,v);if(typeof a=="object")return this._initArray(a,u,v);u==="hex"&&(u=16),t(u===(u|0)&&u>=2&&u<=36),a=a.toString().replace(/\s+/g,"");var E=0;a[0]==="-"&&(E++,this.negative=1),E<a.length&&(u===16?this._parseHex(a,E,v):(this._parseBase(a,u,E),v==="le"&&this._initArray(this.toArray(),u,v)))},i.prototype._initNumber=function(a,u,v){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(t(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),v==="le"&&this._initArray(this.toArray(),u,v)},i.prototype._initArray=function(a,u,v){if(t(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var p,c,F=0;if(v==="be")for(E=a.length-1,p=0;E>=0;E-=3)c=a[E]|a[E-1]<<8|a[E-2]<<16,this.words[p]|=c<<F&67108863,this.words[p+1]=c>>>26-F&67108863,F+=24,F>=26&&(F-=26,p++);else if(v==="le")for(E=0,p=0;E<a.length;E+=3)c=a[E]|a[E+1]<<8|a[E+2]<<16,this.words[p]|=c<<F&67108863,this.words[p+1]=c>>>26-F&67108863,F+=24,F>=26&&(F-=26,p++);return this._strip()};function s(d,a){var u=d.charCodeAt(a);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;t(!1,"Invalid character in "+d)}function f(d,a,u){var v=s(d,u);return u-1>=a&&(v|=s(d,u-1)<<4),v}i.prototype._parseHex=function(a,u,v){this.length=Math.ceil((a.length-u)/6),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var p=0,c=0,F;if(v==="be")for(E=a.length-1;E>=u;E-=2)F=f(a,u,E)<<p,this.words[c]|=F&67108863,p>=18?(p-=18,c+=1,this.words[c]|=F>>>26):p+=8;else{var M=a.length-u;for(E=M%2===0?u+1:u;E<a.length;E+=2)F=f(a,u,E)<<p,this.words[c]|=F&67108863,p>=18?(p-=18,c+=1,this.words[c]|=F>>>26):p+=8}this._strip()};function h(d,a,u,v){for(var E=0,p=0,c=Math.min(d.length,u),F=a;F<c;F++){var M=d.charCodeAt(F)-48;E*=v,M>=49?p=M-49+10:M>=17?p=M-17+10:p=M,t(M>=0&&p<v,"Invalid character"),E+=p}return E}i.prototype._parseBase=function(a,u,v){this.words=[0],this.length=1;for(var E=0,p=1;p<=67108863;p*=u)E++;E--,p=p/u|0;for(var c=a.length-v,F=c%E,M=Math.min(c,c-F)+v,m=0,S=v;S<M;S+=E)m=h(a,S,S+E,u),this.imuln(p),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m);if(F!==0){var ne=1;for(m=h(a,S,a.length,u),S=0;S<F;S++)ne*=u;this.imuln(ne),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m)}this._strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var u=0;u<this.length;u++)a.words[u]=this.words[u];a.length=this.length,a.negative=this.negative,a.red=this.red};function g(d,a){d.words=a.words,d.length=a.length,d.negative=a.negative,d.red=a.red}if(i.prototype._move=function(a){g(a,this)},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=_}catch{i.prototype.inspect=_}else i.prototype.inspect=_;function _(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var T=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],x=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,u){a=a||10,u=u|0||1;var v;if(a===16||a==="hex"){v="";for(var E=0,p=0,c=0;c<this.length;c++){var F=this.words[c],M=((F<<E|p)&16777215).toString(16);p=F>>>24-E&16777215,E+=2,E>=26&&(E-=26,c--),p!==0||c!==this.length-1?v=T[6-M.length]+M+v:v=M+v}for(p!==0&&(v=p.toString(16)+v);v.length%u!==0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}if(a===(a|0)&&a>=2&&a<=36){var m=I[a],S=x[a];v="";var ne=this.clone();for(ne.negative=0;!ne.isZero();){var ie=ne.modrn(S).toString(a);ne=ne.idivn(S),ne.isZero()?v=ie+v:v=T[m-ie.length]+ie+v}for(this.isZero()&&(v="0"+v);v.length%u!==0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}t(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(a,u){return this.toArrayLike(o,a,u)}),i.prototype.toArray=function(a,u){return this.toArrayLike(Array,a,u)};var C=function(a,u){return a.allocUnsafe?a.allocUnsafe(u):new a(u)};i.prototype.toArrayLike=function(a,u,v){this._strip();var E=this.byteLength(),p=v||Math.max(1,E);t(E<=p,"byte array longer than desired length"),t(p>0,"Requested array length <= 0");var c=C(a,p),F=u==="le"?"LE":"BE";return this["_toArrayLike"+F](c,E),c},i.prototype._toArrayLikeLE=function(a,u){for(var v=0,E=0,p=0,c=0;p<this.length;p++){var F=this.words[p]<<c|E;a[v++]=F&255,v<a.length&&(a[v++]=F>>8&255),v<a.length&&(a[v++]=F>>16&255),c===6?(v<a.length&&(a[v++]=F>>24&255),E=0,c=0):(E=F>>>24,c+=2)}if(v<a.length)for(a[v++]=E;v<a.length;)a[v++]=0},i.prototype._toArrayLikeBE=function(a,u){for(var v=a.length-1,E=0,p=0,c=0;p<this.length;p++){var F=this.words[p]<<c|E;a[v--]=F&255,v>=0&&(a[v--]=F>>8&255),v>=0&&(a[v--]=F>>16&255),c===6?(v>=0&&(a[v--]=F>>24&255),E=0,c=0):(E=F>>>24,c+=2)}if(v>=0)for(a[v--]=E;v>=0;)a[v--]=0},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var u=a,v=0;return u>=4096&&(v+=13,u>>>=13),u>=64&&(v+=7,u>>>=7),u>=8&&(v+=4,u>>>=4),u>=2&&(v+=2,u>>>=2),v+u},i.prototype._zeroBits=function(a){if(a===0)return 26;var u=a,v=0;return(u&8191)===0&&(v+=13,u>>>=13),(u&127)===0&&(v+=7,u>>>=7),(u&15)===0&&(v+=4,u>>>=4),(u&3)===0&&(v+=2,u>>>=2),(u&1)===0&&v++,v},i.prototype.bitLength=function(){var a=this.words[this.length-1],u=this._countBits(a);return(this.length-1)*26+u};function j(d){for(var a=new Array(d.bitLength()),u=0;u<a.length;u++){var v=u/26|0,E=u%26;a[u]=d.words[v]>>>E&1}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,u=0;u<this.length;u++){var v=this._zeroBits(this.words[u]);if(a+=v,v!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var u=0;u<a.length;u++)this.words[u]=this.words[u]|a.words[u];return this._strip()},i.prototype.ior=function(a){return t((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var u;this.length>a.length?u=a:u=this;for(var v=0;v<u.length;v++)this.words[v]=this.words[v]&a.words[v];return this.length=u.length,this._strip()},i.prototype.iand=function(a){return t((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var u,v;this.length>a.length?(u=this,v=a):(u=a,v=this);for(var E=0;E<v.length;E++)this.words[E]=u.words[E]^v.words[E];if(this!==u)for(;E<u.length;E++)this.words[E]=u.words[E];return this.length=u.length,this._strip()},i.prototype.ixor=function(a){return t((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){t(typeof a=="number"&&a>=0);var u=Math.ceil(a/26)|0,v=a%26;this._expand(u),v>0&&u--;for(var E=0;E<u;E++)this.words[E]=~this.words[E]&67108863;return v>0&&(this.words[E]=~this.words[E]&67108863>>26-v),this._strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,u){t(typeof a=="number"&&a>=0);var v=a/26|0,E=a%26;return this._expand(v+1),u?this.words[v]=this.words[v]|1<<E:this.words[v]=this.words[v]&~(1<<E),this._strip()},i.prototype.iadd=function(a){var u;if(this.negative!==0&&a.negative===0)return this.negative=0,u=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,u=this.isub(a),a.negative=1,u._normSign();var v,E;this.length>a.length?(v=this,E=a):(v=a,E=this);for(var p=0,c=0;c<E.length;c++)u=(v.words[c]|0)+(E.words[c]|0)+p,this.words[c]=u&67108863,p=u>>>26;for(;p!==0&&c<v.length;c++)u=(v.words[c]|0)+p,this.words[c]=u&67108863,p=u>>>26;if(this.length=v.length,p!==0)this.words[this.length]=p,this.length++;else if(v!==this)for(;c<v.length;c++)this.words[c]=v.words[c];return this},i.prototype.add=function(a){var u;return a.negative!==0&&this.negative===0?(a.negative=0,u=this.sub(a),a.negative^=1,u):a.negative===0&&this.negative!==0?(this.negative=0,u=a.sub(this),this.negative=1,u):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var u=this.iadd(a);return a.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var v=this.cmp(a);if(v===0)return this.negative=0,this.length=1,this.words[0]=0,this;var E,p;v>0?(E=this,p=a):(E=a,p=this);for(var c=0,F=0;F<p.length;F++)u=(E.words[F]|0)-(p.words[F]|0)+c,c=u>>26,this.words[F]=u&67108863;for(;c!==0&&F<E.length;F++)u=(E.words[F]|0)+c,c=u>>26,this.words[F]=u&67108863;if(c===0&&F<E.length&&E!==this)for(;F<E.length;F++)this.words[F]=E.words[F];return this.length=Math.max(this.length,F),E!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function H(d,a,u){u.negative=a.negative^d.negative;var v=d.length+a.length|0;u.length=v,v=v-1|0;var E=d.words[0]|0,p=a.words[0]|0,c=E*p,F=c&67108863,M=c/67108864|0;u.words[0]=F;for(var m=1;m<v;m++){for(var S=M>>>26,ne=M&67108863,ie=Math.min(m,a.length-1),ce=Math.max(0,m-d.length+1);ce<=ie;ce++){var he=m-ce|0;E=d.words[he]|0,p=a.words[ce]|0,c=E*p+ne,S+=c/67108864|0,ne=c&67108863}u.words[m]=ne|0,M=S|0}return M!==0?u.words[m]=M|0:u.length--,u._strip()}var z=function(a,u,v){var E=a.words,p=u.words,c=v.words,F=0,M,m,S,ne=E[0]|0,ie=ne&8191,ce=ne>>>13,he=E[1]|0,re=he&8191,y=he>>>13,w=E[2]|0,A=w&8191,k=w>>>13,P=E[3]|0,N=P&8191,D=P>>>13,B=E[4]|0,O=B&8191,L=B>>>13,U=E[5]|0,$=U&8191,Z=U>>>13,ee=E[6]|0,te=ee&8191,fe=ee>>>13,ge=E[7]|0,ae=ge&8191,ue=ge>>>13,Se=E[8]|0,me=Se&8191,be=Se>>>13,Xe=E[9]|0,pe=Xe&8191,ye=Xe>>>13,Fe=p[0]|0,de=Fe&8191,le=Fe>>>13,ht=p[1]|0,ve=ht&8191,we=ht>>>13,dt=p[2]|0,xe=dt&8191,_e=dt>>>13,pt=p[3]|0,Te=pt&8191,Me=pt>>>13,Ps=p[4]|0,Ie=Ps&8191,Ce=Ps>>>13,Ns=p[5]|0,Be=Ns&8191,Oe=Ns>>>13,ks=p[6]|0,Re=ks&8191,Pe=ks>>>13,Ls=p[7]|0,Ne=Ls&8191,ke=Ls>>>13,Ds=p[8]|0,Le=Ds&8191,De=Ds>>>13,Eo=p[9]|0,st=Eo&8191,at=Eo>>>13;v.negative=a.negative^u.negative,v.length=19,M=Math.imul(ie,de),m=Math.imul(ie,le),m=m+Math.imul(ce,de)|0,S=Math.imul(ce,le);var ai=(F+M|0)+((m&8191)<<13)|0;F=(S+(m>>>13)|0)+(ai>>>26)|0,ai&=67108863,M=Math.imul(re,de),m=Math.imul(re,le),m=m+Math.imul(y,de)|0,S=Math.imul(y,le),M=M+Math.imul(ie,ve)|0,m=m+Math.imul(ie,we)|0,m=m+Math.imul(ce,ve)|0,S=S+Math.imul(ce,we)|0;var fi=(F+M|0)+((m&8191)<<13)|0;F=(S+(m>>>13)|0)+(fi>>>26)|0,fi&=67108863,M=Math.imul(A,de),m=Math.imul(A,le),m=m+Math.imul(k,de)|0,S=Math.imul(k,le),M=M+Math.imul(re,ve)|0,m=m+Math.imul(re,we)|0,m=m+Math.imul(y,ve)|0,S=S+Math.imul(y,we)|0,M=M+Math.imul(ie,xe)|0,m=m+Math.imul(ie,_e)|0,m=m+Math.imul(ce,xe)|0,S=S+Math.imul(ce,_e)|0;var ci=(F+M|0)+((m&8191)<<13)|0;F=(S+(m>>>13)|0)+(ci>>>26)|0,ci&=67108863,M=Math.imul(N,de),m=Math.imul(N,le),m=m+Math.imul(D,de)|0,S=Math.imul(D,le),M=M+Math.imul(A,ve)|0,m=m+Math.imul(A,we)|0,m=m+Math.imul(k,ve)|0,S=S+Math.imul(k,we)|0,M=M+Math.imul(re,xe)|0,m=m+Math.imul(re,_e)|0,m=m+Math.imul(y,xe)|0,S=S+Math.imul(y,_e)|0,M=M+Math.imul(ie,Te)|0,m=m+Math.imul(ie,Me)|0,m=m+Math.imul(ce,Te)|0,S=S+Math.imul(ce,Me)|0;var ui=(F+M|0)+((m&8191)<<13)|0;F=(S+(m>>>13)|0)+(ui>>>26)|0,ui&=67108863,M=Math.imul(O,de),m=Math.imul(O,le),m=m+Math.imul(L,de)|0,S=Math.imul(L,le),M=M+Math.imul(N,ve)|0,m=m+Math.imul(N,we)|0,m=m+Math.imul(D,ve)|0,S=S+Math.imul(D,we)|0,M=M+Math.imul(A,xe)|0,m=m+Math.imul(A,_e)|0,m=m+Math.imul(k,xe)|0,S=S+Math.imul(k,_e)|0,M=M+Math.imul(re,Te)|0,m=m+Math.imul(re,Me)|0,m=m+Math.imul(y,Te)|0,S=S+Math.imul(y,Me)|0,M=M+Math.imul(ie,Ie)|0,m=m+Math.imul(ie,Ce)|0,m=m+Math.imul(ce,Ie)|0,S=S+Math.imul(ce,Ce)|0;var li=(F+M|0)+((m&8191)<<13)|0;F=(S+(m>>>13)|0)+(li>>>26)|0,li&=67108863,M=Math.imul($,de),m=Math.imul($,le),m=m+Math.imul(Z,de)|0,S=Math.imul(Z,le),M=M+Math.imul(O,ve)|0,m=m+Math.imul(O,we)|0,m=m+Math.imul(L,ve)|0,S=S+Math.imul(L,we)|0,M=M+Math.imul(N,xe)|0,m=m+Math.imul(N,_e)|0,m=m+Math.imul(D,xe)|0,S=S+Math.imul(D,_e)|0,M=M+Math.imul(A,Te)|0,m=m+Math.imul(A,Me)|0,m=m+Math.imul(k,Te)|0,S=S+Math.imul(k,Me)|0,M=M+Math.imul(re,Ie)|0,m=m+Math.imul(re,Ce)|0,m=m+Math.imul(y,Ie)|0,S=S+Math.imul(y,Ce)|0,M=M+Math.imul(ie,Be)|0,m=m+Math.imul(ie,Oe)|0,m=m+Math.imul(ce,Be)|0,S=S+Math.imul(ce,Oe)|0;var hi=(F+M|0)+((m&8191)<<13)|0;F=(S+(m>>>13)|0)+(hi>>>26)|0,hi&=67108863,M=Math.imul(te,de),m=Math.imul(te,le),m=m+Math.imul(fe,de)|0,S=Math.imul(fe,le),M=M+Math.imul($,ve)|0,m=m+Math.imul($,we)|0,m=m+Math.imul(Z,ve)|0,S=S+Math.imul(Z,we)|0,M=M+Math.imul(O,xe)|0,m=m+Math.imul(O,_e)|0,m=m+Math.imul(L,xe)|0,S=S+Math.imul(L,_e)|0,M=M+Math.imul(N,Te)|0,m=m+Math.imul(N,Me)|0,m=m+Math.imul(D,Te)|0,S=S+Math.imul(D,Me)|0,M=M+Math.imul(A,Ie)|0,m=m+Math.imul(A,Ce)|0,m=m+Math.imul(k,Ie)|0,S=S+Math.imul(k,Ce)|0,M=M+Math.imul(re,Be)|0,m=m+Math.imul(re,Oe)|0,m=m+Math.imul(y,Be)|0,S=S+Math.imul(y,Oe)|0,M=M+Math.imul(ie,Re)|0,m=m+Math.imul(ie,Pe)|0,m=m+Math.imul(ce,Re)|0,S=S+Math.imul(ce,Pe)|0;var di=(F+M|0)+((m&8191)<<13)|0;F=(S+(m>>>13)|0)+(di>>>26)|0,di&=67108863,M=Math.imul(ae,de),m=Math.imul(ae,le),m=m+Math.imul(ue,de)|0,S=Math.imul(ue,le),M=M+Math.imul(te,ve)|0,m=m+Math.imul(te,we)|0,m=m+Math.imul(fe,ve)|0,S=S+Math.imul(fe,we)|0,M=M+Math.imul($,xe)|0,m=m+Math.imul($,_e)|0,m=m+Math.imul(Z,xe)|0,S=S+Math.imul(Z,_e)|0,M=M+Math.imul(O,Te)|0,m=m+Math.imul(O,Me)|0,m=m+Math.imul(L,Te)|0,S=S+Math.imul(L,Me)|0,M=M+Math.imul(N,Ie)|0,m=m+Math.imul(N,Ce)|0,m=m+Math.imul(D,Ie)|0,S=S+Math.imul(D,Ce)|0,M=M+Math.imul(A,Be)|0,m=m+Math.imul(A,Oe)|0,m=m+Math.imul(k,Be)|0,S=S+Math.imul(k,Oe)|0,M=M+Math.imul(re,Re)|0,m=m+Math.imul(re,Pe)|0,m=m+Math.imul(y,Re)|0,S=S+Math.imul(y,Pe)|0,M=M+Math.imul(ie,Ne)|0,m=m+Math.imul(ie,ke)|0,m=m+Math.imul(ce,Ne)|0,S=S+Math.imul(ce,ke)|0;var pi=(F+M|0)+((m&8191)<<13)|0;F=(S+(m>>>13)|0)+(pi>>>26)|0,pi&=67108863,M=Math.imul(me,de),m=Math.imul(me,le),m=m+Math.imul(be,de)|0,S=Math.imul(be,le),M=M+Math.imul(ae,ve)|0,m=m+Math.imul(ae,we)|0,m=m+Math.imul(ue,ve)|0,S=S+Math.imul(ue,we)|0,M=M+Math.imul(te,xe)|0,m=m+Math.imul(te,_e)|0,m=m+Math.imul(fe,xe)|0,S=S+Math.imul(fe,_e)|0,M=M+Math.imul($,Te)|0,m=m+Math.imul($,Me)|0,m=m+Math.imul(Z,Te)|0,S=S+Math.imul(Z,Me)|0,M=M+Math.imul(O,Ie)|0,m=m+Math.imul(O,Ce)|0,m=m+Math.imul(L,Ie)|0,S=S+Math.imul(L,Ce)|0,M=M+Math.imul(N,Be)|0,m=m+Math.imul(N,Oe)|0,m=m+Math.imul(D,Be)|0,S=S+Math.imul(D,Oe)|0,M=M+Math.imul(A,Re)|0,m=m+Math.imul(A,Pe)|0,m=m+Math.imul(k,Re)|0,S=S+Math.imul(k,Pe)|0,M=M+Math.imul(re,Ne)|0,m=m+Math.imul(re,ke)|0,m=m+Math.imul(y,Ne)|0,S=S+Math.imul(y,ke)|0,M=M+Math.imul(ie,Le)|0,m=m+Math.imul(ie,De)|0,m=m+Math.imul(ce,Le)|0,S=S+Math.imul(ce,De)|0;var gi=(F+M|0)+((m&8191)<<13)|0;F=(S+(m>>>13)|0)+(gi>>>26)|0,gi&=67108863,M=Math.imul(pe,de),m=Math.imul(pe,le),m=m+Math.imul(ye,de)|0,S=Math.imul(ye,le),M=M+Math.imul(me,ve)|0,m=m+Math.imul(me,we)|0,m=m+Math.imul(be,ve)|0,S=S+Math.imul(be,we)|0,M=M+Math.imul(ae,xe)|0,m=m+Math.imul(ae,_e)|0,m=m+Math.imul(ue,xe)|0,S=S+Math.imul(ue,_e)|0,M=M+Math.imul(te,Te)|0,m=m+Math.imul(te,Me)|0,m=m+Math.imul(fe,Te)|0,S=S+Math.imul(fe,Me)|0,M=M+Math.imul($,Ie)|0,m=m+Math.imul($,Ce)|0,m=m+Math.imul(Z,Ie)|0,S=S+Math.imul(Z,Ce)|0,M=M+Math.imul(O,Be)|0,m=m+Math.imul(O,Oe)|0,m=m+Math.imul(L,Be)|0,S=S+Math.imul(L,Oe)|0,M=M+Math.imul(N,Re)|0,m=m+Math.imul(N,Pe)|0,m=m+Math.imul(D,Re)|0,S=S+Math.imul(D,Pe)|0,M=M+Math.imul(A,Ne)|0,m=m+Math.imul(A,ke)|0,m=m+Math.imul(k,Ne)|0,S=S+Math.imul(k,ke)|0,M=M+Math.imul(re,Le)|0,m=m+Math.imul(re,De)|0,m=m+Math.imul(y,Le)|0,S=S+Math.imul(y,De)|0,M=M+Math.imul(ie,st)|0,m=m+Math.imul(ie,at)|0,m=m+Math.imul(ce,st)|0,S=S+Math.imul(ce,at)|0;var yi=(F+M|0)+((m&8191)<<13)|0;F=(S+(m>>>13)|0)+(yi>>>26)|0,yi&=67108863,M=Math.imul(pe,ve),m=Math.imul(pe,we),m=m+Math.imul(ye,ve)|0,S=Math.imul(ye,we),M=M+Math.imul(me,xe)|0,m=m+Math.imul(me,_e)|0,m=m+Math.imul(be,xe)|0,S=S+Math.imul(be,_e)|0,M=M+Math.imul(ae,Te)|0,m=m+Math.imul(ae,Me)|0,m=m+Math.imul(ue,Te)|0,S=S+Math.imul(ue,Me)|0,M=M+Math.imul(te,Ie)|0,m=m+Math.imul(te,Ce)|0,m=m+Math.imul(fe,Ie)|0,S=S+Math.imul(fe,Ce)|0,M=M+Math.imul($,Be)|0,m=m+Math.imul($,Oe)|0,m=m+Math.imul(Z,Be)|0,S=S+Math.imul(Z,Oe)|0,M=M+Math.imul(O,Re)|0,m=m+Math.imul(O,Pe)|0,m=m+Math.imul(L,Re)|0,S=S+Math.imul(L,Pe)|0,M=M+Math.imul(N,Ne)|0,m=m+Math.imul(N,ke)|0,m=m+Math.imul(D,Ne)|0,S=S+Math.imul(D,ke)|0,M=M+Math.imul(A,Le)|0,m=m+Math.imul(A,De)|0,m=m+Math.imul(k,Le)|0,S=S+Math.imul(k,De)|0,M=M+Math.imul(re,st)|0,m=m+Math.imul(re,at)|0,m=m+Math.imul(y,st)|0,S=S+Math.imul(y,at)|0;var mi=(F+M|0)+((m&8191)<<13)|0;F=(S+(m>>>13)|0)+(mi>>>26)|0,mi&=67108863,M=Math.imul(pe,xe),m=Math.imul(pe,_e),m=m+Math.imul(ye,xe)|0,S=Math.imul(ye,_e),M=M+Math.imul(me,Te)|0,m=m+Math.imul(me,Me)|0,m=m+Math.imul(be,Te)|0,S=S+Math.imul(be,Me)|0,M=M+Math.imul(ae,Ie)|0,m=m+Math.imul(ae,Ce)|0,m=m+Math.imul(ue,Ie)|0,S=S+Math.imul(ue,Ce)|0,M=M+Math.imul(te,Be)|0,m=m+Math.imul(te,Oe)|0,m=m+Math.imul(fe,Be)|0,S=S+Math.imul(fe,Oe)|0,M=M+Math.imul($,Re)|0,m=m+Math.imul($,Pe)|0,m=m+Math.imul(Z,Re)|0,S=S+Math.imul(Z,Pe)|0,M=M+Math.imul(O,Ne)|0,m=m+Math.imul(O,ke)|0,m=m+Math.imul(L,Ne)|0,S=S+Math.imul(L,ke)|0,M=M+Math.imul(N,Le)|0,m=m+Math.imul(N,De)|0,m=m+Math.imul(D,Le)|0,S=S+Math.imul(D,De)|0,M=M+Math.imul(A,st)|0,m=m+Math.imul(A,at)|0,m=m+Math.imul(k,st)|0,S=S+Math.imul(k,at)|0;var bi=(F+M|0)+((m&8191)<<13)|0;F=(S+(m>>>13)|0)+(bi>>>26)|0,bi&=67108863,M=Math.imul(pe,Te),m=Math.imul(pe,Me),m=m+Math.imul(ye,Te)|0,S=Math.imul(ye,Me),M=M+Math.imul(me,Ie)|0,m=m+Math.imul(me,Ce)|0,m=m+Math.imul(be,Ie)|0,S=S+Math.imul(be,Ce)|0,M=M+Math.imul(ae,Be)|0,m=m+Math.imul(ae,Oe)|0,m=m+Math.imul(ue,Be)|0,S=S+Math.imul(ue,Oe)|0,M=M+Math.imul(te,Re)|0,m=m+Math.imul(te,Pe)|0,m=m+Math.imul(fe,Re)|0,S=S+Math.imul(fe,Pe)|0,M=M+Math.imul($,Ne)|0,m=m+Math.imul($,ke)|0,m=m+Math.imul(Z,Ne)|0,S=S+Math.imul(Z,ke)|0,M=M+Math.imul(O,Le)|0,m=m+Math.imul(O,De)|0,m=m+Math.imul(L,Le)|0,S=S+Math.imul(L,De)|0,M=M+Math.imul(N,st)|0,m=m+Math.imul(N,at)|0,m=m+Math.imul(D,st)|0,S=S+Math.imul(D,at)|0;var vi=(F+M|0)+((m&8191)<<13)|0;F=(S+(m>>>13)|0)+(vi>>>26)|0,vi&=67108863,M=Math.imul(pe,Ie),m=Math.imul(pe,Ce),m=m+Math.imul(ye,Ie)|0,S=Math.imul(ye,Ce),M=M+Math.imul(me,Be)|0,m=m+Math.imul(me,Oe)|0,m=m+Math.imul(be,Be)|0,S=S+Math.imul(be,Oe)|0,M=M+Math.imul(ae,Re)|0,m=m+Math.imul(ae,Pe)|0,m=m+Math.imul(ue,Re)|0,S=S+Math.imul(ue,Pe)|0,M=M+Math.imul(te,Ne)|0,m=m+Math.imul(te,ke)|0,m=m+Math.imul(fe,Ne)|0,S=S+Math.imul(fe,ke)|0,M=M+Math.imul($,Le)|0,m=m+Math.imul($,De)|0,m=m+Math.imul(Z,Le)|0,S=S+Math.imul(Z,De)|0,M=M+Math.imul(O,st)|0,m=m+Math.imul(O,at)|0,m=m+Math.imul(L,st)|0,S=S+Math.imul(L,at)|0;var wi=(F+M|0)+((m&8191)<<13)|0;F=(S+(m>>>13)|0)+(wi>>>26)|0,wi&=67108863,M=Math.imul(pe,Be),m=Math.imul(pe,Oe),m=m+Math.imul(ye,Be)|0,S=Math.imul(ye,Oe),M=M+Math.imul(me,Re)|0,m=m+Math.imul(me,Pe)|0,m=m+Math.imul(be,Re)|0,S=S+Math.imul(be,Pe)|0,M=M+Math.imul(ae,Ne)|0,m=m+Math.imul(ae,ke)|0,m=m+Math.imul(ue,Ne)|0,S=S+Math.imul(ue,ke)|0,M=M+Math.imul(te,Le)|0,m=m+Math.imul(te,De)|0,m=m+Math.imul(fe,Le)|0,S=S+Math.imul(fe,De)|0,M=M+Math.imul($,st)|0,m=m+Math.imul($,at)|0,m=m+Math.imul(Z,st)|0,S=S+Math.imul(Z,at)|0;var xi=(F+M|0)+((m&8191)<<13)|0;F=(S+(m>>>13)|0)+(xi>>>26)|0,xi&=67108863,M=Math.imul(pe,Re),m=Math.imul(pe,Pe),m=m+Math.imul(ye,Re)|0,S=Math.imul(ye,Pe),M=M+Math.imul(me,Ne)|0,m=m+Math.imul(me,ke)|0,m=m+Math.imul(be,Ne)|0,S=S+Math.imul(be,ke)|0,M=M+Math.imul(ae,Le)|0,m=m+Math.imul(ae,De)|0,m=m+Math.imul(ue,Le)|0,S=S+Math.imul(ue,De)|0,M=M+Math.imul(te,st)|0,m=m+Math.imul(te,at)|0,m=m+Math.imul(fe,st)|0,S=S+Math.imul(fe,at)|0;var _i=(F+M|0)+((m&8191)<<13)|0;F=(S+(m>>>13)|0)+(_i>>>26)|0,_i&=67108863,M=Math.imul(pe,Ne),m=Math.imul(pe,ke),m=m+Math.imul(ye,Ne)|0,S=Math.imul(ye,ke),M=M+Math.imul(me,Le)|0,m=m+Math.imul(me,De)|0,m=m+Math.imul(be,Le)|0,S=S+Math.imul(be,De)|0,M=M+Math.imul(ae,st)|0,m=m+Math.imul(ae,at)|0,m=m+Math.imul(ue,st)|0,S=S+Math.imul(ue,at)|0;var Gu=(F+M|0)+((m&8191)<<13)|0;F=(S+(m>>>13)|0)+(Gu>>>26)|0,Gu&=67108863,M=Math.imul(pe,Le),m=Math.imul(pe,De),m=m+Math.imul(ye,Le)|0,S=Math.imul(ye,De),M=M+Math.imul(me,st)|0,m=m+Math.imul(me,at)|0,m=m+Math.imul(be,st)|0,S=S+Math.imul(be,at)|0;var Vu=(F+M|0)+((m&8191)<<13)|0;F=(S+(m>>>13)|0)+(Vu>>>26)|0,Vu&=67108863,M=Math.imul(pe,st),m=Math.imul(pe,at),m=m+Math.imul(ye,st)|0,S=Math.imul(ye,at);var Ju=(F+M|0)+((m&8191)<<13)|0;return F=(S+(m>>>13)|0)+(Ju>>>26)|0,Ju&=67108863,c[0]=ai,c[1]=fi,c[2]=ci,c[3]=ui,c[4]=li,c[5]=hi,c[6]=di,c[7]=pi,c[8]=gi,c[9]=yi,c[10]=mi,c[11]=bi,c[12]=vi,c[13]=wi,c[14]=xi,c[15]=_i,c[16]=Gu,c[17]=Vu,c[18]=Ju,F!==0&&(c[19]=F,v.length++),v};Math.imul||(z=H);function X(d,a,u){u.negative=a.negative^d.negative,u.length=d.length+a.length;for(var v=0,E=0,p=0;p<u.length-1;p++){var c=E;E=0;for(var F=v&67108863,M=Math.min(p,a.length-1),m=Math.max(0,p-d.length+1);m<=M;m++){var S=p-m,ne=d.words[S]|0,ie=a.words[m]|0,ce=ne*ie,he=ce&67108863;c=c+(ce/67108864|0)|0,he=he+F|0,F=he&67108863,c=c+(he>>>26)|0,E+=c>>>26,c&=67108863}u.words[p]=F,v=c,c=E}return v!==0?u.words[p]=v:u.length--,u._strip()}function Y(d,a,u){return X(d,a,u)}i.prototype.mulTo=function(a,u){var v,E=this.length+a.length;return this.length===10&&a.length===10?v=z(this,a,u):E<63?v=H(this,a,u):E<1024?v=X(this,a,u):v=Y(this,a,u),v};function se(d,a){this.x=d,this.y=a}se.prototype.makeRBT=function(a){for(var u=new Array(a),v=i.prototype._countBits(a)-1,E=0;E<a;E++)u[E]=this.revBin(E,v,a);return u},se.prototype.revBin=function(a,u,v){if(a===0||a===v-1)return a;for(var E=0,p=0;p<u;p++)E|=(a&1)<<u-p-1,a>>=1;return E},se.prototype.permute=function(a,u,v,E,p,c){for(var F=0;F<c;F++)E[F]=u[a[F]],p[F]=v[a[F]]},se.prototype.transform=function(a,u,v,E,p,c){this.permute(c,a,u,v,E,p);for(var F=1;F<p;F<<=1)for(var M=F<<1,m=Math.cos(2*Math.PI/M),S=Math.sin(2*Math.PI/M),ne=0;ne<p;ne+=M)for(var ie=m,ce=S,he=0;he<F;he++){var re=v[ne+he],y=E[ne+he],w=v[ne+he+F],A=E[ne+he+F],k=ie*w-ce*A;A=ie*A+ce*w,w=k,v[ne+he]=re+w,E[ne+he]=y+A,v[ne+he+F]=re-w,E[ne+he+F]=y-A,he!==M&&(k=m*ie-S*ce,ce=m*ce+S*ie,ie=k)}},se.prototype.guessLen13b=function(a,u){var v=Math.max(u,a)|1,E=v&1,p=0;for(v=v/2|0;v;v=v>>>1)p++;return 1<<p+1+E},se.prototype.conjugate=function(a,u,v){if(!(v<=1))for(var E=0;E<v/2;E++){var p=a[E];a[E]=a[v-E-1],a[v-E-1]=p,p=u[E],u[E]=-u[v-E-1],u[v-E-1]=-p}},se.prototype.normalize13b=function(a,u){for(var v=0,E=0;E<u/2;E++){var p=Math.round(a[2*E+1]/u)*8192+Math.round(a[2*E]/u)+v;a[E]=p&67108863,p<67108864?v=0:v=p/67108864|0}return a},se.prototype.convert13b=function(a,u,v,E){for(var p=0,c=0;c<u;c++)p=p+(a[c]|0),v[2*c]=p&8191,p=p>>>13,v[2*c+1]=p&8191,p=p>>>13;for(c=2*u;c<E;++c)v[c]=0;t(p===0),t((p&-8192)===0)},se.prototype.stub=function(a){for(var u=new Array(a),v=0;v<a;v++)u[v]=0;return u},se.prototype.mulp=function(a,u,v){var E=2*this.guessLen13b(a.length,u.length),p=this.makeRBT(E),c=this.stub(E),F=new Array(E),M=new Array(E),m=new Array(E),S=new Array(E),ne=new Array(E),ie=new Array(E),ce=v.words;ce.length=E,this.convert13b(a.words,a.length,F,E),this.convert13b(u.words,u.length,S,E),this.transform(F,c,M,m,E,p),this.transform(S,c,ne,ie,E,p);for(var he=0;he<E;he++){var re=M[he]*ne[he]-m[he]*ie[he];m[he]=M[he]*ie[he]+m[he]*ne[he],M[he]=re}return this.conjugate(M,m,E),this.transform(M,m,ce,c,E,p),this.conjugate(ce,c,E),this.normalize13b(ce,E),v.negative=a.negative^u.negative,v.length=a.length+u.length,v._strip()},i.prototype.mul=function(a){var u=new i(null);return u.words=new Array(this.length+a.length),this.mulTo(a,u)},i.prototype.mulf=function(a){var u=new i(null);return u.words=new Array(this.length+a.length),Y(this,a,u)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){var u=a<0;u&&(a=-a),t(typeof a=="number"),t(a<67108864);for(var v=0,E=0;E<this.length;E++){var p=(this.words[E]|0)*a,c=(p&67108863)+(v&67108863);v>>=26,v+=p/67108864|0,v+=c>>>26,this.words[E]=c&67108863}return v!==0&&(this.words[E]=v,this.length++),u?this.ineg():this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var u=j(a);if(u.length===0)return new i(1);for(var v=this,E=0;E<u.length&&u[E]===0;E++,v=v.sqr());if(++E<u.length)for(var p=v.sqr();E<u.length;E++,p=p.sqr())u[E]!==0&&(v=v.mul(p));return v},i.prototype.iushln=function(a){t(typeof a=="number"&&a>=0);var u=a%26,v=(a-u)/26,E=67108863>>>26-u<<26-u,p;if(u!==0){var c=0;for(p=0;p<this.length;p++){var F=this.words[p]&E,M=(this.words[p]|0)-F<<u;this.words[p]=M|c,c=F>>>26-u}c&&(this.words[p]=c,this.length++)}if(v!==0){for(p=this.length-1;p>=0;p--)this.words[p+v]=this.words[p];for(p=0;p<v;p++)this.words[p]=0;this.length+=v}return this._strip()},i.prototype.ishln=function(a){return t(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,u,v){t(typeof a=="number"&&a>=0);var E;u?E=(u-u%26)/26:E=0;var p=a%26,c=Math.min((a-p)/26,this.length),F=67108863^67108863>>>p<<p,M=v;if(E-=c,E=Math.max(0,E),M){for(var m=0;m<c;m++)M.words[m]=this.words[m];M.length=c}if(c!==0)if(this.length>c)for(this.length-=c,m=0;m<this.length;m++)this.words[m]=this.words[m+c];else this.words[0]=0,this.length=1;var S=0;for(m=this.length-1;m>=0&&(S!==0||m>=E);m--){var ne=this.words[m]|0;this.words[m]=S<<26-p|ne>>>p,S=ne&F}return M&&S!==0&&(M.words[M.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(a,u,v){return t(this.negative===0),this.iushrn(a,u,v)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){t(typeof a=="number"&&a>=0);var u=a%26,v=(a-u)/26,E=1<<u;if(this.length<=v)return!1;var p=this.words[v];return!!(p&E)},i.prototype.imaskn=function(a){t(typeof a=="number"&&a>=0);var u=a%26,v=(a-u)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=v)return this;if(u!==0&&v++,this.length=Math.min(v,this.length),u!==0){var E=67108863^67108863>>>u<<u;this.words[this.length-1]&=E}return this._strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return t(typeof a=="number"),t(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},i.prototype.isubn=function(a){if(t(typeof a=="number"),t(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,u,v){var E=a.length+v,p;this._expand(E);var c,F=0;for(p=0;p<a.length;p++){c=(this.words[p+v]|0)+F;var M=(a.words[p]|0)*u;c-=M&67108863,F=(c>>26)-(M/67108864|0),this.words[p+v]=c&67108863}for(;p<this.length-v;p++)c=(this.words[p+v]|0)+F,F=c>>26,this.words[p+v]=c&67108863;if(F===0)return this._strip();for(t(F===-1),F=0,p=0;p<this.length;p++)c=-(this.words[p]|0)+F,F=c>>26,this.words[p]=c&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(a,u){var v=this.length-a.length,E=this.clone(),p=a,c=p.words[p.length-1]|0,F=this._countBits(c);v=26-F,v!==0&&(p=p.ushln(v),E.iushln(v),c=p.words[p.length-1]|0);var M=E.length-p.length,m;if(u!=="mod"){m=new i(null),m.length=M+1,m.words=new Array(m.length);for(var S=0;S<m.length;S++)m.words[S]=0}var ne=E.clone()._ishlnsubmul(p,1,M);ne.negative===0&&(E=ne,m&&(m.words[M]=1));for(var ie=M-1;ie>=0;ie--){var ce=(E.words[p.length+ie]|0)*67108864+(E.words[p.length+ie-1]|0);for(ce=Math.min(ce/c|0,67108863),E._ishlnsubmul(p,ce,ie);E.negative!==0;)ce--,E.negative=0,E._ishlnsubmul(p,1,ie),E.isZero()||(E.negative^=1);m&&(m.words[ie]=ce)}return m&&m._strip(),E._strip(),u!=="div"&&v!==0&&E.iushrn(v),{div:m||null,mod:E}},i.prototype.divmod=function(a,u,v){if(t(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var E,p,c;return this.negative!==0&&a.negative===0?(c=this.neg().divmod(a,u),u!=="mod"&&(E=c.div.neg()),u!=="div"&&(p=c.mod.neg(),v&&p.negative!==0&&p.iadd(a)),{div:E,mod:p}):this.negative===0&&a.negative!==0?(c=this.divmod(a.neg(),u),u!=="mod"&&(E=c.div.neg()),{div:E,mod:c.mod}):(this.negative&a.negative)!==0?(c=this.neg().divmod(a.neg(),u),u!=="div"&&(p=c.mod.neg(),v&&p.negative!==0&&p.isub(a)),{div:c.div,mod:p}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?u==="div"?{div:this.divn(a.words[0]),mod:null}:u==="mod"?{div:null,mod:new i(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modrn(a.words[0]))}:this._wordDiv(a,u)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var u=this.divmod(a);if(u.mod.isZero())return u.div;var v=u.div.negative!==0?u.mod.isub(a):u.mod,E=a.ushrn(1),p=a.andln(1),c=v.cmp(E);return c<0||p===1&&c===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},i.prototype.modrn=function(a){var u=a<0;u&&(a=-a),t(a<=67108863);for(var v=(1<<26)%a,E=0,p=this.length-1;p>=0;p--)E=(v*E+(this.words[p]|0))%a;return u?-E:E},i.prototype.modn=function(a){return this.modrn(a)},i.prototype.idivn=function(a){var u=a<0;u&&(a=-a),t(a<=67108863);for(var v=0,E=this.length-1;E>=0;E--){var p=(this.words[E]|0)+v*67108864;this.words[E]=p/a|0,v=p%a}return this._strip(),u?this.ineg():this},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){t(a.negative===0),t(!a.isZero());var u=this,v=a.clone();u.negative!==0?u=u.umod(a):u=u.clone();for(var E=new i(1),p=new i(0),c=new i(0),F=new i(1),M=0;u.isEven()&&v.isEven();)u.iushrn(1),v.iushrn(1),++M;for(var m=v.clone(),S=u.clone();!u.isZero();){for(var ne=0,ie=1;(u.words[0]&ie)===0&&ne<26;++ne,ie<<=1);if(ne>0)for(u.iushrn(ne);ne-- >0;)(E.isOdd()||p.isOdd())&&(E.iadd(m),p.isub(S)),E.iushrn(1),p.iushrn(1);for(var ce=0,he=1;(v.words[0]&he)===0&&ce<26;++ce,he<<=1);if(ce>0)for(v.iushrn(ce);ce-- >0;)(c.isOdd()||F.isOdd())&&(c.iadd(m),F.isub(S)),c.iushrn(1),F.iushrn(1);u.cmp(v)>=0?(u.isub(v),E.isub(c),p.isub(F)):(v.isub(u),c.isub(E),F.isub(p))}return{a:c,b:F,gcd:v.iushln(M)}},i.prototype._invmp=function(a){t(a.negative===0),t(!a.isZero());var u=this,v=a.clone();u.negative!==0?u=u.umod(a):u=u.clone();for(var E=new i(1),p=new i(0),c=v.clone();u.cmpn(1)>0&&v.cmpn(1)>0;){for(var F=0,M=1;(u.words[0]&M)===0&&F<26;++F,M<<=1);if(F>0)for(u.iushrn(F);F-- >0;)E.isOdd()&&E.iadd(c),E.iushrn(1);for(var m=0,S=1;(v.words[0]&S)===0&&m<26;++m,S<<=1);if(m>0)for(v.iushrn(m);m-- >0;)p.isOdd()&&p.iadd(c),p.iushrn(1);u.cmp(v)>=0?(u.isub(v),E.isub(p)):(v.isub(u),p.isub(E))}var ne;return u.cmpn(1)===0?ne=E:ne=p,ne.cmpn(0)<0&&ne.iadd(a),ne},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var u=this.clone(),v=a.clone();u.negative=0,v.negative=0;for(var E=0;u.isEven()&&v.isEven();E++)u.iushrn(1),v.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;v.isEven();)v.iushrn(1);var p=u.cmp(v);if(p<0){var c=u;u=v,v=c}else if(p===0||v.cmpn(1)===0)break;u.isub(v)}while(!0);return v.iushln(E)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){t(typeof a=="number");var u=a%26,v=(a-u)/26,E=1<<u;if(this.length<=v)return this._expand(v+1),this.words[v]|=E,this;for(var p=E,c=v;p!==0&&c<this.length;c++){var F=this.words[c]|0;F+=p,p=F>>>26,F&=67108863,this.words[c]=F}return p!==0&&(this.words[c]=p,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var u=a<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var v;if(this.length>1)v=1;else{u&&(a=-a),t(a<=67108863,"Number is too big");var E=this.words[0]|0;v=E===a?0:E<a?-1:1}return this.negative!==0?-v|0:v},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var u=this.ucmp(a);return this.negative!==0?-u|0:u},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var u=0,v=this.length-1;v>=0;v--){var E=this.words[v]|0,p=a.words[v]|0;if(E!==p){E<p?u=-1:E>p&&(u=1);break}}return u},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new l(a)},i.prototype.toRed=function(a){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return t(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return t(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var G={k256:null,p224:null,p192:null,p25519:null};function q(d,a){this.name=d,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}q.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},q.prototype.ireduce=function(a){var u=a,v;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),v=u.bitLength();while(v>this.n);var E=v<this.n?-1:u.ucmp(this.p);return E===0?(u.words[0]=0,u.length=1):E>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},q.prototype.split=function(a,u){a.iushrn(this.n,0,u)},q.prototype.imulK=function(a){return a.imul(this.k)};function J(){q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(J,q),J.prototype.split=function(a,u){for(var v=4194303,E=Math.min(a.length,9),p=0;p<E;p++)u.words[p]=a.words[p];if(u.length=E,a.length<=9){a.words[0]=0,a.length=1;return}var c=a.words[9];for(u.words[u.length++]=c&v,p=10;p<a.length;p++){var F=a.words[p]|0;a.words[p-10]=(F&v)<<4|c>>>22,c=F}c>>>=22,a.words[p-10]=c,c===0&&a.length>10?a.length-=10:a.length-=9},J.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var u=0,v=0;v<a.length;v++){var E=a.words[v]|0;u+=E*977,a.words[v]=u&67108863,u=E*64+(u/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function Q(){q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(Q,q);function W(){q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(W,q);function R(){q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(R,q),R.prototype.imulK=function(a){for(var u=0,v=0;v<a.length;v++){var E=(a.words[v]|0)*19+u,p=E&67108863;E>>>=26,a.words[v]=p,u=E}return u!==0&&(a.words[a.length++]=u),a},i._prime=function(a){if(G[a])return G[a];var u;if(a==="k256")u=new J;else if(a==="p224")u=new Q;else if(a==="p192")u=new W;else if(a==="p25519")u=new R;else throw new Error("Unknown prime "+a);return G[a]=u,u};function l(d){if(typeof d=="string"){var a=i._prime(d);this.m=a.p,this.prime=a}else t(d.gtn(1),"modulus must be greater than 1"),this.m=d,this.prime=null}l.prototype._verify1=function(a){t(a.negative===0,"red works only with positives"),t(a.red,"red works only with red numbers")},l.prototype._verify2=function(a,u){t((a.negative|u.negative)===0,"red works only with positives"),t(a.red&&a.red===u.red,"red works only with red numbers")},l.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(g(a,a.umod(this.m)._forceRed(this)),a)},l.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},l.prototype.add=function(a,u){this._verify2(a,u);var v=a.add(u);return v.cmp(this.m)>=0&&v.isub(this.m),v._forceRed(this)},l.prototype.iadd=function(a,u){this._verify2(a,u);var v=a.iadd(u);return v.cmp(this.m)>=0&&v.isub(this.m),v},l.prototype.sub=function(a,u){this._verify2(a,u);var v=a.sub(u);return v.cmpn(0)<0&&v.iadd(this.m),v._forceRed(this)},l.prototype.isub=function(a,u){this._verify2(a,u);var v=a.isub(u);return v.cmpn(0)<0&&v.iadd(this.m),v},l.prototype.shl=function(a,u){return this._verify1(a),this.imod(a.ushln(u))},l.prototype.imul=function(a,u){return this._verify2(a,u),this.imod(a.imul(u))},l.prototype.mul=function(a,u){return this._verify2(a,u),this.imod(a.mul(u))},l.prototype.isqr=function(a){return this.imul(a,a.clone())},l.prototype.sqr=function(a){return this.mul(a,a)},l.prototype.sqrt=function(a){if(a.isZero())return a.clone();var u=this.m.andln(3);if(t(u%2===1),u===3){var v=this.m.add(new i(1)).iushrn(2);return this.pow(a,v)}for(var E=this.m.subn(1),p=0;!E.isZero()&&E.andln(1)===0;)p++,E.iushrn(1);t(!E.isZero());var c=new i(1).toRed(this),F=c.redNeg(),M=this.m.subn(1).iushrn(1),m=this.m.bitLength();for(m=new i(2*m*m).toRed(this);this.pow(m,M).cmp(F)!==0;)m.redIAdd(F);for(var S=this.pow(m,E),ne=this.pow(a,E.addn(1).iushrn(1)),ie=this.pow(a,E),ce=p;ie.cmp(c)!==0;){for(var he=ie,re=0;he.cmp(c)!==0;re++)he=he.redSqr();t(re<ce);var y=this.pow(S,new i(1).iushln(ce-re-1));ne=ne.redMul(y),S=y.redSqr(),ie=ie.redMul(S),ce=re}return ne},l.prototype.invm=function(a){var u=a._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},l.prototype.pow=function(a,u){if(u.isZero())return new i(1).toRed(this);if(u.cmpn(1)===0)return a.clone();var v=4,E=new Array(1<<v);E[0]=new i(1).toRed(this),E[1]=a;for(var p=2;p<E.length;p++)E[p]=this.mul(E[p-1],a);var c=E[0],F=0,M=0,m=u.bitLength()%26;for(m===0&&(m=26),p=u.length-1;p>=0;p--){for(var S=u.words[p],ne=m-1;ne>=0;ne--){var ie=S>>ne&1;if(c!==E[0]&&(c=this.sqr(c)),ie===0&&F===0){M=0;continue}F<<=1,F|=ie,M++,!(M!==v&&(p!==0||ne!==0))&&(c=this.mul(c,E[F]),M=0,F=0)}m=26}return c},l.prototype.convertTo=function(a){var u=a.umod(this.m);return u===a?u.clone():u},l.prototype.convertFrom=function(a){var u=a.clone();return u.red=null,u},i.mont=function(a){return new b(a)};function b(d){l.call(this,d),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(b,l),b.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},b.prototype.convertFrom=function(a){var u=this.imod(a.mul(this.rinv));return u.red=null,u},b.prototype.imul=function(a,u){if(a.isZero()||u.isZero())return a.words[0]=0,a.length=1,a;var v=a.imul(u),E=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=v.isub(E).iushrn(this.shift),c=p;return p.cmp(this.m)>=0?c=p.isub(this.m):p.cmpn(0)<0&&(c=p.iadd(this.m)),c._forceRed(this)},b.prototype.mul=function(a,u){if(a.isZero()||u.isZero())return new i(0)._forceRed(this);var v=a.mul(u),E=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=v.isub(E).iushrn(this.shift),c=p;return p.cmp(this.m)>=0?c=p.isub(this.m):p.cmpn(0)<0&&(c=p.iadd(this.m)),c._forceRed(this)},b.prototype.invm=function(a){var u=this.imod(a._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(typeof Hd>"u"||Hd,z2)});var V2=V((exports,module)=>{(function(){"use strict";var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&typeof module=="object"&&module.exports,AMD=typeof define=="function"&&define.amd,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(r){return Object.prototype.toString.call(r)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(r){return typeof r=="object"&&r.buffer&&r.buffer.constructor===ArrayBuffer});var createOutputMethod=function(r,e){return function(t){return new Sha256(e,!0).update(t)[r]()}},createMethod=function(r){var e=createOutputMethod("hex",r);NODE_JS&&(e=nodeWrap(e,r)),e.create=function(){return new Sha256(r)},e.update=function(i){return e.create().update(i)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createOutputMethod(n,r)}return e},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(r){if(typeof r=="string")return crypto.createHash(algorithm).update(r,"utf8").digest("hex");if(r==null)throw new Error(ERROR);return r.constructor===ArrayBuffer&&(r=new Uint8Array(r)),Array.isArray(r)||ArrayBuffer.isView(r)||r.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(r)).digest("hex"):method(r)};return nodeMethod},createHmacOutputMethod=function(r,e){return function(t,n){return new HmacSha256(t,e,!0).update(n)[r]()}},createHmacMethod=function(r){var e=createHmacOutputMethod("hex",r);e.create=function(i){return new HmacSha256(i,r)},e.update=function(i,o){return e.create(i).update(o)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createHmacOutputMethod(n,r)}return e};function Sha256(r,e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=r}Sha256.prototype.update=function(r){if(!this.finalized){var e,t=typeof r;if(t!=="string"){if(t==="object"){if(r===null)throw new Error(ERROR);if(ARRAY_BUFFER&&r.constructor===ArrayBuffer)r=new Uint8Array(r);else if(!Array.isArray(r)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(r)))throw new Error(ERROR)}else throw new Error(ERROR);e=!0}for(var n,i=0,o,s=r.length,f=this.blocks;i<s;){if(this.hashed&&(this.hashed=!1,f[0]=this.block,f[16]=f[1]=f[2]=f[3]=f[4]=f[5]=f[6]=f[7]=f[8]=f[9]=f[10]=f[11]=f[12]=f[13]=f[14]=f[15]=0),e)for(o=this.start;i<s&&o<64;++i)f[o>>2]|=r[i]<<SHIFT[o++&3];else for(o=this.start;i<s&&o<64;++i)n=r.charCodeAt(i),n<128?f[o>>2]|=n<<SHIFT[o++&3]:n<2048?(f[o>>2]|=(192|n>>6)<<SHIFT[o++&3],f[o>>2]|=(128|n&63)<<SHIFT[o++&3]):n<55296||n>=57344?(f[o>>2]|=(224|n>>12)<<SHIFT[o++&3],f[o>>2]|=(128|n>>6&63)<<SHIFT[o++&3],f[o>>2]|=(128|n&63)<<SHIFT[o++&3]):(n=65536+((n&1023)<<10|r.charCodeAt(++i)&1023),f[o>>2]|=(240|n>>18)<<SHIFT[o++&3],f[o>>2]|=(128|n>>12&63)<<SHIFT[o++&3],f[o>>2]|=(128|n>>6&63)<<SHIFT[o++&3],f[o>>2]|=(128|n&63)<<SHIFT[o++&3]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=f[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var r=this.blocks,e=this.lastByteIndex;r[16]=this.block,r[e>>2]|=EXTRA[e&3],this.block=r[16],e>=56&&(this.hashed||this.hash(),r[0]=this.block,r[16]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=r[9]=r[10]=r[11]=r[12]=r[13]=r[14]=r[15]=0),r[14]=this.hBytes<<3|this.bytes>>>29,r[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var r=this.h0,e=this.h1,t=this.h2,n=this.h3,i=this.h4,o=this.h5,s=this.h6,f=this.h7,h=this.blocks,g,_,T,I,x,C,j,H,z,X,Y;for(g=16;g<64;++g)x=h[g-15],_=(x>>>7|x<<25)^(x>>>18|x<<14)^x>>>3,x=h[g-2],T=(x>>>17|x<<15)^(x>>>19|x<<13)^x>>>10,h[g]=h[g-16]+_+h[g-7]+T<<0;for(Y=e&t,g=0;g<64;g+=4)this.first?(this.is224?(H=300032,x=h[0]-1413257819,f=x-150054599<<0,n=x+24177077<<0):(H=704751109,x=h[0]-210244248,f=x-1521486534<<0,n=x+143694565<<0),this.first=!1):(_=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),T=(i>>>6|i<<26)^(i>>>11|i<<21)^(i>>>25|i<<7),H=r&e,I=H^r&t^Y,j=i&o^~i&s,x=f+T+j+K[g]+h[g],C=_+I,f=n+x<<0,n=x+C<<0),_=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),T=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7),z=n&r,I=z^n&e^H,j=f&i^~f&o,x=s+T+j+K[g+1]+h[g+1],C=_+I,s=t+x<<0,t=x+C<<0,_=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),T=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),X=t&n,I=X^t&r^z,j=s&f^~s&i,x=o+T+j+K[g+2]+h[g+2],C=_+I,o=e+x<<0,e=x+C<<0,_=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),T=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),Y=e&t,I=Y^e&n^X,j=o&s^~o&f,x=i+T+j+K[g+3]+h[g+3],C=_+I,i=r+x<<0,r=x+C<<0;this.h0=this.h0+r<<0,this.h1=this.h1+e<<0,this.h2=this.h2+t<<0,this.h3=this.h3+n<<0,this.h4=this.h4+i<<0,this.h5=this.h5+o<<0,this.h6=this.h6+s<<0,this.h7=this.h7+f<<0},Sha256.prototype.hex=function(){this.finalize();var r=this.h0,e=this.h1,t=this.h2,n=this.h3,i=this.h4,o=this.h5,s=this.h6,f=this.h7,h=HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[n&15]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[i&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[o&15]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[s&15];return this.is224||(h+=HEX_CHARS[f>>28&15]+HEX_CHARS[f>>24&15]+HEX_CHARS[f>>20&15]+HEX_CHARS[f>>16&15]+HEX_CHARS[f>>12&15]+HEX_CHARS[f>>8&15]+HEX_CHARS[f>>4&15]+HEX_CHARS[f&15]),h},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var r=this.h0,e=this.h1,t=this.h2,n=this.h3,i=this.h4,o=this.h5,s=this.h6,f=this.h7,h=[r>>24&255,r>>16&255,r>>8&255,r&255,e>>24&255,e>>16&255,e>>8&255,e&255,t>>24&255,t>>16&255,t>>8&255,t&255,n>>24&255,n>>16&255,n>>8&255,n&255,i>>24&255,i>>16&255,i>>8&255,i&255,o>>24&255,o>>16&255,o>>8&255,o&255,s>>24&255,s>>16&255,s>>8&255,s&255];return this.is224||h.push(f>>24&255,f>>16&255,f>>8&255,f&255),h},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var r=new ArrayBuffer(this.is224?28:32),e=new DataView(r);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),r};function HmacSha256(r,e,t){var n,i=typeof r;if(i==="string"){var o=[],s=r.length,f=0,h;for(n=0;n<s;++n)h=r.charCodeAt(n),h<128?o[f++]=h:h<2048?(o[f++]=192|h>>6,o[f++]=128|h&63):h<55296||h>=57344?(o[f++]=224|h>>12,o[f++]=128|h>>6&63,o[f++]=128|h&63):(h=65536+((h&1023)<<10|r.charCodeAt(++n)&1023),o[f++]=240|h>>18,o[f++]=128|h>>12&63,o[f++]=128|h>>6&63,o[f++]=128|h&63);r=o}else if(i==="object"){if(r===null)throw new Error(ERROR);if(ARRAY_BUFFER&&r.constructor===ArrayBuffer)r=new Uint8Array(r);else if(!Array.isArray(r)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(r)))throw new Error(ERROR)}else throw new Error(ERROR);r.length>64&&(r=new Sha256(e,!0).update(r).array());var g=[],_=[];for(n=0;n<64;++n){var T=r[n]||0;g[n]=92^T,_[n]=54^T}Sha256.call(this,e,t),this.update(_),this.oKeyPad=g,this.inner=!0,this.sharedMemory=t}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var r=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(r),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&define(function(){return exports}))})()});var J2=V((jC,Au)=>{(function(){"use strict";var r="input is invalid type",e="finalize already called",t=typeof window=="object",n=t?window:{};n.JS_SHA512_NO_WINDOW&&(t=!1);var i=!t&&typeof self=="object",o=!n.JS_SHA512_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?n=global:i&&(n=self);var s=!n.JS_SHA512_NO_COMMON_JS&&typeof Au=="object"&&Au.exports,f=typeof define=="function"&&define.amd,h=!n.JS_SHA512_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",g="0123456789abcdef".split(""),_=[-2147483648,8388608,32768,128],T=[24,16,8,0],I=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],x=["hex","array","digest","arrayBuffer"],C=[];(n.JS_SHA512_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(q){return Object.prototype.toString.call(q)==="[object Array]"}),h&&(n.JS_SHA512_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(q){return typeof q=="object"&&q.buffer&&q.buffer.constructor===ArrayBuffer});var j=function(q,J){return function(Q){return new Y(J,!0).update(Q)[q]()}},H=function(q){var J=j("hex",q);J.create=function(){return new Y(q)},J.update=function(R){return J.create().update(R)};for(var Q=0;Q<x.length;++Q){var W=x[Q];J[W]=j(W,q)}return J},z=function(q,J){return function(Q,W){return new se(Q,J,!0).update(W)[q]()}},X=function(q){var J=z("hex",q);J.create=function(R){return new se(R,q)},J.update=function(R,l){return J.create(R).update(l)};for(var Q=0;Q<x.length;++Q){var W=x[Q];J[W]=z(W,q)}return J};function Y(q,J){J?(C[0]=C[1]=C[2]=C[3]=C[4]=C[5]=C[6]=C[7]=C[8]=C[9]=C[10]=C[11]=C[12]=C[13]=C[14]=C[15]=C[16]=C[17]=C[18]=C[19]=C[20]=C[21]=C[22]=C[23]=C[24]=C[25]=C[26]=C[27]=C[28]=C[29]=C[30]=C[31]=C[32]=0,this.blocks=C):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],q==384?(this.h0h=3418070365,this.h0l=3238371032,this.h1h=1654270250,this.h1l=914150663,this.h2h=2438529370,this.h2l=812702999,this.h3h=355462360,this.h3l=4144912697,this.h4h=1731405415,this.h4l=4290775857,this.h5h=2394180231,this.h5l=1750603025,this.h6h=3675008525,this.h6l=1694076839,this.h7h=1203062813,this.h7l=3204075428):q==256?(this.h0h=573645204,this.h0l=4230739756,this.h1h=2673172387,this.h1l=3360449730,this.h2h=596883563,this.h2l=1867755857,this.h3h=2520282905,this.h3l=1497426621,this.h4h=2519219938,this.h4l=2827943907,this.h5h=3193839141,this.h5l=1401305490,this.h6h=721525244,this.h6l=746961066,this.h7h=246885852,this.h7l=2177182882):q==224?(this.h0h=2352822216,this.h0l=424955298,this.h1h=1944164710,this.h1l=2312950998,this.h2h=502970286,this.h2l=855612546,this.h3h=1738396948,this.h3l=1479516111,this.h4h=258812777,this.h4l=2077511080,this.h5h=2011393907,this.h5l=79989058,this.h6h=1067287976,this.h6l=1780299464,this.h7h=286451373,this.h7l=2446758561):(this.h0h=1779033703,this.h0l=4089235720,this.h1h=3144134277,this.h1l=2227873595,this.h2h=1013904242,this.h2l=4271175723,this.h3h=2773480762,this.h3l=1595750129,this.h4h=1359893119,this.h4l=2917565137,this.h5h=2600822924,this.h5l=725511199,this.h6h=528734635,this.h6l=4215389547,this.h7h=1541459225,this.h7l=327033209),this.bits=q,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1}Y.prototype.update=function(q){if(this.finalized)throw new Error(e);var J,Q=typeof q;if(Q!=="string"){if(Q==="object"){if(q===null)throw new Error(r);if(h&&q.constructor===ArrayBuffer)q=new Uint8Array(q);else if(!Array.isArray(q)&&(!h||!ArrayBuffer.isView(q)))throw new Error(r)}else throw new Error(r);J=!0}for(var W,R=0,l,b=q.length,d=this.blocks;R<b;){if(this.hashed&&(this.hashed=!1,d[0]=this.block,d[1]=d[2]=d[3]=d[4]=d[5]=d[6]=d[7]=d[8]=d[9]=d[10]=d[11]=d[12]=d[13]=d[14]=d[15]=d[16]=d[17]=d[18]=d[19]=d[20]=d[21]=d[22]=d[23]=d[24]=d[25]=d[26]=d[27]=d[28]=d[29]=d[30]=d[31]=d[32]=0),J)for(l=this.start;R<b&&l<128;++R)d[l>>2]|=q[R]<<T[l++&3];else for(l=this.start;R<b&&l<128;++R)W=q.charCodeAt(R),W<128?d[l>>2]|=W<<T[l++&3]:W<2048?(d[l>>2]|=(192|W>>6)<<T[l++&3],d[l>>2]|=(128|W&63)<<T[l++&3]):W<55296||W>=57344?(d[l>>2]|=(224|W>>12)<<T[l++&3],d[l>>2]|=(128|W>>6&63)<<T[l++&3],d[l>>2]|=(128|W&63)<<T[l++&3]):(W=65536+((W&1023)<<10|q.charCodeAt(++R)&1023),d[l>>2]|=(240|W>>18)<<T[l++&3],d[l>>2]|=(128|W>>12&63)<<T[l++&3],d[l>>2]|=(128|W>>6&63)<<T[l++&3],d[l>>2]|=(128|W&63)<<T[l++&3]);this.lastByteIndex=l,this.bytes+=l-this.start,l>=128?(this.block=d[32],this.start=l-128,this.hash(),this.hashed=!0):this.start=l}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this},Y.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var q=this.blocks,J=this.lastByteIndex;q[32]=this.block,q[J>>2]|=_[J&3],this.block=q[32],J>=112&&(this.hashed||this.hash(),q[0]=this.block,q[1]=q[2]=q[3]=q[4]=q[5]=q[6]=q[7]=q[8]=q[9]=q[10]=q[11]=q[12]=q[13]=q[14]=q[15]=q[16]=q[17]=q[18]=q[19]=q[20]=q[21]=q[22]=q[23]=q[24]=q[25]=q[26]=q[27]=q[28]=q[29]=q[30]=q[31]=q[32]=0),q[30]=this.hBytes<<3|this.bytes>>>29,q[31]=this.bytes<<3,this.hash()}},Y.prototype.hash=function(){var q=this.h0h,J=this.h0l,Q=this.h1h,W=this.h1l,R=this.h2h,l=this.h2l,b=this.h3h,d=this.h3l,a=this.h4h,u=this.h4l,v=this.h5h,E=this.h5l,p=this.h6h,c=this.h6l,F=this.h7h,M=this.h7l,m=this.blocks,S,ne,ie,ce,he,re,y,w,A,k,P,N,D,B,O,L,U,$,Z,ee,te,fe,ge,ae,ue;for(S=32;S<160;S+=2)ee=m[S-30],te=m[S-29],ne=(ee>>>1|te<<31)^(ee>>>8|te<<24)^ee>>>7,ie=(te>>>1|ee<<31)^(te>>>8|ee<<24)^(te>>>7|ee<<25),ee=m[S-4],te=m[S-3],ce=(ee>>>19|te<<13)^(te>>>29|ee<<3)^ee>>>6,he=(te>>>19|ee<<13)^(ee>>>29|te<<3)^(te>>>6|ee<<26),ee=m[S-32],te=m[S-31],fe=m[S-14],ge=m[S-13],re=(ge&65535)+(te&65535)+(ie&65535)+(he&65535),y=(ge>>>16)+(te>>>16)+(ie>>>16)+(he>>>16)+(re>>>16),w=(fe&65535)+(ee&65535)+(ne&65535)+(ce&65535)+(y>>>16),A=(fe>>>16)+(ee>>>16)+(ne>>>16)+(ce>>>16)+(w>>>16),m[S]=A<<16|w&65535,m[S+1]=y<<16|re&65535;var Se=q,me=J,be=Q,Xe=W,pe=R,ye=l,Fe=b,de=d,le=a,ht=u,ve=v,we=E,dt=p,xe=c,_e=F,pt=M;for(L=be&pe,U=Xe&ye,S=0;S<160;S+=8)ne=(Se>>>28|me<<4)^(me>>>2|Se<<30)^(me>>>7|Se<<25),ie=(me>>>28|Se<<4)^(Se>>>2|me<<30)^(Se>>>7|me<<25),ce=(le>>>14|ht<<18)^(le>>>18|ht<<14)^(ht>>>9|le<<23),he=(ht>>>14|le<<18)^(ht>>>18|le<<14)^(le>>>9|ht<<23),k=Se&be,P=me&Xe,$=k^Se&pe^L,Z=P^me&ye^U,ae=le&ve^~le&dt,ue=ht&we^~ht&xe,ee=m[S],te=m[S+1],fe=I[S],ge=I[S+1],re=(ge&65535)+(te&65535)+(ue&65535)+(he&65535)+(pt&65535),y=(ge>>>16)+(te>>>16)+(ue>>>16)+(he>>>16)+(pt>>>16)+(re>>>16),w=(fe&65535)+(ee&65535)+(ae&65535)+(ce&65535)+(_e&65535)+(y>>>16),A=(fe>>>16)+(ee>>>16)+(ae>>>16)+(ce>>>16)+(_e>>>16)+(w>>>16),ee=A<<16|w&65535,te=y<<16|re&65535,re=(Z&65535)+(ie&65535),y=(Z>>>16)+(ie>>>16)+(re>>>16),w=($&65535)+(ne&65535)+(y>>>16),A=($>>>16)+(ne>>>16)+(w>>>16),fe=A<<16|w&65535,ge=y<<16|re&65535,re=(de&65535)+(te&65535),y=(de>>>16)+(te>>>16)+(re>>>16),w=(Fe&65535)+(ee&65535)+(y>>>16),A=(Fe>>>16)+(ee>>>16)+(w>>>16),_e=A<<16|w&65535,pt=y<<16|re&65535,re=(ge&65535)+(te&65535),y=(ge>>>16)+(te>>>16)+(re>>>16),w=(fe&65535)+(ee&65535)+(y>>>16),A=(fe>>>16)+(ee>>>16)+(w>>>16),Fe=A<<16|w&65535,de=y<<16|re&65535,ne=(Fe>>>28|de<<4)^(de>>>2|Fe<<30)^(de>>>7|Fe<<25),ie=(de>>>28|Fe<<4)^(Fe>>>2|de<<30)^(Fe>>>7|de<<25),ce=(_e>>>14|pt<<18)^(_e>>>18|pt<<14)^(pt>>>9|_e<<23),he=(pt>>>14|_e<<18)^(pt>>>18|_e<<14)^(_e>>>9|pt<<23),N=Fe&Se,D=de&me,$=N^Fe&be^k,Z=D^de&Xe^P,ae=_e&le^~_e&ve,ue=pt&ht^~pt&we,ee=m[S+2],te=m[S+3],fe=I[S+2],ge=I[S+3],re=(ge&65535)+(te&65535)+(ue&65535)+(he&65535)+(xe&65535),y=(ge>>>16)+(te>>>16)+(ue>>>16)+(he>>>16)+(xe>>>16)+(re>>>16),w=(fe&65535)+(ee&65535)+(ae&65535)+(ce&65535)+(dt&65535)+(y>>>16),A=(fe>>>16)+(ee>>>16)+(ae>>>16)+(ce>>>16)+(dt>>>16)+(w>>>16),ee=A<<16|w&65535,te=y<<16|re&65535,re=(Z&65535)+(ie&65535),y=(Z>>>16)+(ie>>>16)+(re>>>16),w=($&65535)+(ne&65535)+(y>>>16),A=($>>>16)+(ne>>>16)+(w>>>16),fe=A<<16|w&65535,ge=y<<16|re&65535,re=(ye&65535)+(te&65535),y=(ye>>>16)+(te>>>16)+(re>>>16),w=(pe&65535)+(ee&65535)+(y>>>16),A=(pe>>>16)+(ee>>>16)+(w>>>16),dt=A<<16|w&65535,xe=y<<16|re&65535,re=(ge&65535)+(te&65535),y=(ge>>>16)+(te>>>16)+(re>>>16),w=(fe&65535)+(ee&65535)+(y>>>16),A=(fe>>>16)+(ee>>>16)+(w>>>16),pe=A<<16|w&65535,ye=y<<16|re&65535,ne=(pe>>>28|ye<<4)^(ye>>>2|pe<<30)^(ye>>>7|pe<<25),ie=(ye>>>28|pe<<4)^(pe>>>2|ye<<30)^(pe>>>7|ye<<25),ce=(dt>>>14|xe<<18)^(dt>>>18|xe<<14)^(xe>>>9|dt<<23),he=(xe>>>14|dt<<18)^(xe>>>18|dt<<14)^(dt>>>9|xe<<23),B=pe&Fe,O=ye&de,$=B^pe&Se^N,Z=O^ye&me^D,ae=dt&_e^~dt&le,ue=xe&pt^~xe&ht,ee=m[S+4],te=m[S+5],fe=I[S+4],ge=I[S+5],re=(ge&65535)+(te&65535)+(ue&65535)+(he&65535)+(we&65535),y=(ge>>>16)+(te>>>16)+(ue>>>16)+(he>>>16)+(we>>>16)+(re>>>16),w=(fe&65535)+(ee&65535)+(ae&65535)+(ce&65535)+(ve&65535)+(y>>>16),A=(fe>>>16)+(ee>>>16)+(ae>>>16)+(ce>>>16)+(ve>>>16)+(w>>>16),ee=A<<16|w&65535,te=y<<16|re&65535,re=(Z&65535)+(ie&65535),y=(Z>>>16)+(ie>>>16)+(re>>>16),w=($&65535)+(ne&65535)+(y>>>16),A=($>>>16)+(ne>>>16)+(w>>>16),fe=A<<16|w&65535,ge=y<<16|re&65535,re=(Xe&65535)+(te&65535),y=(Xe>>>16)+(te>>>16)+(re>>>16),w=(be&65535)+(ee&65535)+(y>>>16),A=(be>>>16)+(ee>>>16)+(w>>>16),ve=A<<16|w&65535,we=y<<16|re&65535,re=(ge&65535)+(te&65535),y=(ge>>>16)+(te>>>16)+(re>>>16),w=(fe&65535)+(ee&65535)+(y>>>16),A=(fe>>>16)+(ee>>>16)+(w>>>16),be=A<<16|w&65535,Xe=y<<16|re&65535,ne=(be>>>28|Xe<<4)^(Xe>>>2|be<<30)^(Xe>>>7|be<<25),ie=(Xe>>>28|be<<4)^(be>>>2|Xe<<30)^(be>>>7|Xe<<25),ce=(ve>>>14|we<<18)^(ve>>>18|we<<14)^(we>>>9|ve<<23),he=(we>>>14|ve<<18)^(we>>>18|ve<<14)^(ve>>>9|we<<23),L=be&pe,U=Xe&ye,$=L^be&Fe^B,Z=U^Xe&de^O,ae=ve&dt^~ve&_e,ue=we&xe^~we&pt,ee=m[S+6],te=m[S+7],fe=I[S+6],ge=I[S+7],re=(ge&65535)+(te&65535)+(ue&65535)+(he&65535)+(ht&65535),y=(ge>>>16)+(te>>>16)+(ue>>>16)+(he>>>16)+(ht>>>16)+(re>>>16),w=(fe&65535)+(ee&65535)+(ae&65535)+(ce&65535)+(le&65535)+(y>>>16),A=(fe>>>16)+(ee>>>16)+(ae>>>16)+(ce>>>16)+(le>>>16)+(w>>>16),ee=A<<16|w&65535,te=y<<16|re&65535,re=(Z&65535)+(ie&65535),y=(Z>>>16)+(ie>>>16)+(re>>>16),w=($&65535)+(ne&65535)+(y>>>16),A=($>>>16)+(ne>>>16)+(w>>>16),fe=A<<16|w&65535,ge=y<<16|re&65535,re=(me&65535)+(te&65535),y=(me>>>16)+(te>>>16)+(re>>>16),w=(Se&65535)+(ee&65535)+(y>>>16),A=(Se>>>16)+(ee>>>16)+(w>>>16),le=A<<16|w&65535,ht=y<<16|re&65535,re=(ge&65535)+(te&65535),y=(ge>>>16)+(te>>>16)+(re>>>16),w=(fe&65535)+(ee&65535)+(y>>>16),A=(fe>>>16)+(ee>>>16)+(w>>>16),Se=A<<16|w&65535,me=y<<16|re&65535;re=(J&65535)+(me&65535),y=(J>>>16)+(me>>>16)+(re>>>16),w=(q&65535)+(Se&65535)+(y>>>16),A=(q>>>16)+(Se>>>16)+(w>>>16),this.h0h=A<<16|w&65535,this.h0l=y<<16|re&65535,re=(W&65535)+(Xe&65535),y=(W>>>16)+(Xe>>>16)+(re>>>16),w=(Q&65535)+(be&65535)+(y>>>16),A=(Q>>>16)+(be>>>16)+(w>>>16),this.h1h=A<<16|w&65535,this.h1l=y<<16|re&65535,re=(l&65535)+(ye&65535),y=(l>>>16)+(ye>>>16)+(re>>>16),w=(R&65535)+(pe&65535)+(y>>>16),A=(R>>>16)+(pe>>>16)+(w>>>16),this.h2h=A<<16|w&65535,this.h2l=y<<16|re&65535,re=(d&65535)+(de&65535),y=(d>>>16)+(de>>>16)+(re>>>16),w=(b&65535)+(Fe&65535)+(y>>>16),A=(b>>>16)+(Fe>>>16)+(w>>>16),this.h3h=A<<16|w&65535,this.h3l=y<<16|re&65535,re=(u&65535)+(ht&65535),y=(u>>>16)+(ht>>>16)+(re>>>16),w=(a&65535)+(le&65535)+(y>>>16),A=(a>>>16)+(le>>>16)+(w>>>16),this.h4h=A<<16|w&65535,this.h4l=y<<16|re&65535,re=(E&65535)+(we&65535),y=(E>>>16)+(we>>>16)+(re>>>16),w=(v&65535)+(ve&65535)+(y>>>16),A=(v>>>16)+(ve>>>16)+(w>>>16),this.h5h=A<<16|w&65535,this.h5l=y<<16|re&65535,re=(c&65535)+(xe&65535),y=(c>>>16)+(xe>>>16)+(re>>>16),w=(p&65535)+(dt&65535)+(y>>>16),A=(p>>>16)+(dt>>>16)+(w>>>16),this.h6h=A<<16|w&65535,this.h6l=y<<16|re&65535,re=(M&65535)+(pt&65535),y=(M>>>16)+(pt>>>16)+(re>>>16),w=(F&65535)+(_e&65535)+(y>>>16),A=(F>>>16)+(_e>>>16)+(w>>>16),this.h7h=A<<16|w&65535,this.h7l=y<<16|re&65535},Y.prototype.hex=function(){this.finalize();var q=this.h0h,J=this.h0l,Q=this.h1h,W=this.h1l,R=this.h2h,l=this.h2l,b=this.h3h,d=this.h3l,a=this.h4h,u=this.h4l,v=this.h5h,E=this.h5l,p=this.h6h,c=this.h6l,F=this.h7h,M=this.h7l,m=this.bits,S=g[q>>28&15]+g[q>>24&15]+g[q>>20&15]+g[q>>16&15]+g[q>>12&15]+g[q>>8&15]+g[q>>4&15]+g[q&15]+g[J>>28&15]+g[J>>24&15]+g[J>>20&15]+g[J>>16&15]+g[J>>12&15]+g[J>>8&15]+g[J>>4&15]+g[J&15]+g[Q>>28&15]+g[Q>>24&15]+g[Q>>20&15]+g[Q>>16&15]+g[Q>>12&15]+g[Q>>8&15]+g[Q>>4&15]+g[Q&15]+g[W>>28&15]+g[W>>24&15]+g[W>>20&15]+g[W>>16&15]+g[W>>12&15]+g[W>>8&15]+g[W>>4&15]+g[W&15]+g[R>>28&15]+g[R>>24&15]+g[R>>20&15]+g[R>>16&15]+g[R>>12&15]+g[R>>8&15]+g[R>>4&15]+g[R&15]+g[l>>28&15]+g[l>>24&15]+g[l>>20&15]+g[l>>16&15]+g[l>>12&15]+g[l>>8&15]+g[l>>4&15]+g[l&15]+g[b>>28&15]+g[b>>24&15]+g[b>>20&15]+g[b>>16&15]+g[b>>12&15]+g[b>>8&15]+g[b>>4&15]+g[b&15];return m>=256&&(S+=g[d>>28&15]+g[d>>24&15]+g[d>>20&15]+g[d>>16&15]+g[d>>12&15]+g[d>>8&15]+g[d>>4&15]+g[d&15]),m>=384&&(S+=g[a>>28&15]+g[a>>24&15]+g[a>>20&15]+g[a>>16&15]+g[a>>12&15]+g[a>>8&15]+g[a>>4&15]+g[a&15]+g[u>>28&15]+g[u>>24&15]+g[u>>20&15]+g[u>>16&15]+g[u>>12&15]+g[u>>8&15]+g[u>>4&15]+g[u&15]+g[v>>28&15]+g[v>>24&15]+g[v>>20&15]+g[v>>16&15]+g[v>>12&15]+g[v>>8&15]+g[v>>4&15]+g[v&15]+g[E>>28&15]+g[E>>24&15]+g[E>>20&15]+g[E>>16&15]+g[E>>12&15]+g[E>>8&15]+g[E>>4&15]+g[E&15]),m==512&&(S+=g[p>>28&15]+g[p>>24&15]+g[p>>20&15]+g[p>>16&15]+g[p>>12&15]+g[p>>8&15]+g[p>>4&15]+g[p&15]+g[c>>28&15]+g[c>>24&15]+g[c>>20&15]+g[c>>16&15]+g[c>>12&15]+g[c>>8&15]+g[c>>4&15]+g[c&15]+g[F>>28&15]+g[F>>24&15]+g[F>>20&15]+g[F>>16&15]+g[F>>12&15]+g[F>>8&15]+g[F>>4&15]+g[F&15]+g[M>>28&15]+g[M>>24&15]+g[M>>20&15]+g[M>>16&15]+g[M>>12&15]+g[M>>8&15]+g[M>>4&15]+g[M&15]),S},Y.prototype.toString=Y.prototype.hex,Y.prototype.digest=function(){this.finalize();var q=this.h0h,J=this.h0l,Q=this.h1h,W=this.h1l,R=this.h2h,l=this.h2l,b=this.h3h,d=this.h3l,a=this.h4h,u=this.h4l,v=this.h5h,E=this.h5l,p=this.h6h,c=this.h6l,F=this.h7h,M=this.h7l,m=this.bits,S=[q>>24&255,q>>16&255,q>>8&255,q&255,J>>24&255,J>>16&255,J>>8&255,J&255,Q>>24&255,Q>>16&255,Q>>8&255,Q&255,W>>24&255,W>>16&255,W>>8&255,W&255,R>>24&255,R>>16&255,R>>8&255,R&255,l>>24&255,l>>16&255,l>>8&255,l&255,b>>24&255,b>>16&255,b>>8&255,b&255];return m>=256&&S.push(d>>24&255,d>>16&255,d>>8&255,d&255),m>=384&&S.push(a>>24&255,a>>16&255,a>>8&255,a&255,u>>24&255,u>>16&255,u>>8&255,u&255,v>>24&255,v>>16&255,v>>8&255,v&255,E>>24&255,E>>16&255,E>>8&255,E&255),m==512&&S.push(p>>24&255,p>>16&255,p>>8&255,p&255,c>>24&255,c>>16&255,c>>8&255,c&255,F>>24&255,F>>16&255,F>>8&255,F&255,M>>24&255,M>>16&255,M>>8&255,M&255),S},Y.prototype.array=Y.prototype.digest,Y.prototype.arrayBuffer=function(){this.finalize();var q=this.bits,J=new ArrayBuffer(q/8),Q=new DataView(J);return Q.setUint32(0,this.h0h),Q.setUint32(4,this.h0l),Q.setUint32(8,this.h1h),Q.setUint32(12,this.h1l),Q.setUint32(16,this.h2h),Q.setUint32(20,this.h2l),Q.setUint32(24,this.h3h),q>=256&&Q.setUint32(28,this.h3l),q>=384&&(Q.setUint32(32,this.h4h),Q.setUint32(36,this.h4l),Q.setUint32(40,this.h5h),Q.setUint32(44,this.h5l)),q==512&&(Q.setUint32(48,this.h6h),Q.setUint32(52,this.h6l),Q.setUint32(56,this.h7h),Q.setUint32(60,this.h7l)),J},Y.prototype.clone=function(){var q=new Y(this.bits,!1);return this.copyTo(q),q},Y.prototype.copyTo=function(q){var J=0,Q=["h0h","h0l","h1h","h1l","h2h","h2l","h3h","h3l","h4h","h4l","h5h","h5l","h6h","h6l","h7h","h7l","start","bytes","hBytes","finalized","hashed","lastByteIndex"];for(J=0;J<Q.length;++J)q[Q[J]]=this[Q[J]];for(J=0;J<this.blocks.length;++J)q.blocks[J]=this.blocks[J]};function se(q,J,Q){var W,R=typeof q;if(R!=="string"){if(R==="object"){if(q===null)throw new Error(r);if(h&&q.constructor===ArrayBuffer)q=new Uint8Array(q);else if(!Array.isArray(q)&&(!h||!ArrayBuffer.isView(q)))throw new Error(r)}else throw new Error(r);W=!0}var l=q.length;if(!W){for(var b=[],l=q.length,d=0,a,u=0;u<l;++u)a=q.charCodeAt(u),a<128?b[d++]=a:a<2048?(b[d++]=192|a>>6,b[d++]=128|a&63):a<55296||a>=57344?(b[d++]=224|a>>12,b[d++]=128|a>>6&63,b[d++]=128|a&63):(a=65536+((a&1023)<<10|q.charCodeAt(++u)&1023),b[d++]=240|a>>18,b[d++]=128|a>>12&63,b[d++]=128|a>>6&63,b[d++]=128|a&63);q=b}q.length>128&&(q=new Y(J,!0).update(q).array());for(var v=[],E=[],u=0;u<128;++u){var p=q[u]||0;v[u]=92^p,E[u]=54^p}Y.call(this,J,Q),this.update(E),this.oKeyPad=v,this.inner=!0,this.sharedMemory=Q}se.prototype=new Y,se.prototype.finalize=function(){if(Y.prototype.finalize.call(this),this.inner){this.inner=!1;var q=this.array();Y.call(this,this.bits,this.sharedMemory),this.update(this.oKeyPad),this.update(q),Y.prototype.finalize.call(this)}},se.prototype.clone=function(){var q=new se([],this.bits,!1);this.copyTo(q),q.inner=this.inner;for(var J=0;J<this.oKeyPad.length;++J)q.oKeyPad[J]=this.oKeyPad[J];return q};var G=H(512);G.sha512=G,G.sha384=H(384),G.sha512_256=H(256),G.sha512_224=H(224),G.sha512.hmac=X(512),G.sha384.hmac=X(384),G.sha512_256.hmac=X(256),G.sha512_224.hmac=X(224),s?Au.exports=G:(n.sha512=G.sha512,n.sha384=G.sha384,n.sha512_256=G.sha512_256,n.sha512_224=G.sha512_224,f&&define(function(){return G}))})()});var zd=V(($C,rx)=>{var BA=Eu(),Kd=G2(),{sha256:Y2}=V2(),{sha512:Q2}=J2(),Ot=new BA.ec("secp256k1");function Z2(r){return new Uint8Array([(r&4278190080)>>24,(r&16711680)>>16,(r&65280)>>8,r&255])}var X2=new Kd(1);function OA(r){let e=Ot.n.bitLength()+7>>3;if(Ot.g.mul(10),(r[0]&-2)!=2)return[null,null];if(r.length!=1+e)return[null,null];let t=new Kd(r.slice(1,1+e));try{let n=Ot.curve.pointFromX(t);return[n.x,n.y]}catch{return[null,null]}}function ex(r){let e=null,t=null,n=Ot.n.bitLength()+7>>3,i=0;for(;e==null&&i<100;){let s=[2,...Q2.array(new Uint8Array([...Z2(i),...r]))];[e,t]=OA(s.slice(0,n+1)),i++}return Ot.curve.point(e,t)}function tx(r){let e=Ot.n.bitLength()+7>>3,t=0;for(;;){let n=Q2.array(new Uint8Array([...Z2(t),...r])),i=new Kd(n.slice(0,e));if(i.cmp(Ot.curve.n.sub(X2))==-1)return i.add(X2);t++}}function RA(r,e){let t=Ot.keyFromPrivate(r),i=Ot.genKeyPair().getPrivate(),o=ex(e),f=o.mul(r).encode(),h=Ot.curve.g.mul(i),g=o.mul(i),_=[...Ot.curve.g.encode(),...o.encode(),...t.getPublic().encode(),...f,...h.encode(),...g.encode()],T=tx(_),I=i.sub(T.mul(t.getPrivate())).umod(Ot.curve.n),x=Y2.array(new Uint8Array(f)),C=[...new Array(32-T.byteLength()).fill(0),...T.toArray(),...new Array(32-I.byteLength()).fill(0),...I.toArray(),...f];return[x,C]}function PA(r,e,t){let n=Ot.keyFromPublic(r);if(t.length!==64+65)throw new Error("invalid vrf");let i=t.slice(0,32),o=t.slice(32,64),s=t.slice(64,64+65),f=NA(s);if(!f)throw new Error("invalid vrf");let h=Ot.curve.g.mul(o),g=n.getPublic().mul(i),_=h.add(g),T=ex(e),I=T.mul(o),x=f.mul(i),C=I.add(x),j=[...Ot.curve.g.encode(),...T.encode(),...n.getPublic().encode(),...s,..._.encode(),...C.encode()],H=tx(j),z=[...new Array(32-H.byteLength()).fill(0),...H.toArray()],X=!0;for(let Y=0;Y<z.length;Y++)i[Y]!==z[Y]&&(X=!1);if(!X)throw new Error("invalid vrf");return Y2.array(new Uint8Array(s))}function NA(r){try{return Ot.curve.decodePoint(r)}catch{return null}}rx.exports={Evaluate:RA,ProofHoHash:PA}});var bx=V(()=>{});var Sx=V((ap,_x)=>{"use strict";var{hasOwnProperty:Fu}=Object.prototype,lo=sp();lo.configure=sp;lo.stringify=lo;lo.default=lo;ap.stringify=lo;ap.configure=sp;_x.exports=lo;var xx=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/,GA=new RegExp(xx,"g"),op=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000b","\\f","\\r","\\u000e","\\u000f","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001a","\\u001b","\\u001c","\\u001d","\\u001e","\\u001f","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\"];function VA(r){if(r.length===2){let t=r.charCodeAt(1);return`${r[0]}\\u${t.toString(16)}`}let e=r.charCodeAt(0);return op.length>e?op[e]:`\\u${e.toString(16)}`}function ii(r){if(r.length<5e3&&!xx.test(r))return r;if(r.length>100)return r.replace(GA,VA);let e="",t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);if(i===34||i===92||i<32)e+=`${r.slice(t,n)}${op[i]}`,t=n+1;else if(i>=55296&&i<=57343){if(i<=56319&&n+1<r.length){let o=r.charCodeAt(n+1);if(o>=56320&&o<=57343){n++;continue}}e+=`${r.slice(t,n)}\\u${i.toString(16)}`,t=n+1}}return e+=r.slice(t),e}function rp(r){if(r.length>200)return r.sort();for(let e=1;e<r.length;e++){let t=r[e],n=e;for(;n!==0&&r[n-1]>t;)r[n]=r[n-1],n--;r[n]=t}return r}var JA=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function np(r){return JA.call(r)!==void 0&&r.length!==0}function ip(r,e,t){r.length<t&&(t=r.length);let n=e===","?"":" ",i=`"0":${n}${r[0]}`;for(let o=1;o<t;o++)i+=`${e}"${o}":${n}${r[o]}`;return i}function XA(r){if(Fu.call(r,"circularValue")){let e=r.circularValue;if(typeof e=="string")return`"${e}"`;if(e==null)return e;if(e===Error||e===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function vx(r,e){let t;if(Fu.call(r,e)&&(t=r[e],typeof t!="boolean"))throw new TypeError(`The "${e}" argument must be of type boolean`);return t===void 0?!0:t}function wx(r,e){let t;if(Fu.call(r,e)){if(t=r[e],typeof t!="number")throw new TypeError(`The "${e}" argument must be of type number`);if(!Number.isInteger(t))throw new TypeError(`The "${e}" argument must be an integer`);if(t<1)throw new RangeError(`The "${e}" argument must be >= 1`)}return t===void 0?1/0:t}function uo(r){return r===1?"1 item":`${r} items`}function YA(r){let e=new Set;for(let t of r)(typeof t=="string"||typeof t=="number")&&e.add(String(t));return e}function QA(r){if(Fu.call(r,"strict")){let e=r.strict;if(typeof e!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(e)return t=>{let n=`Object can not safely be stringified. Received type ${typeof t}`;throw typeof t!="function"&&(n+=` (${t.toString()})`),new Error(n)}}}function sp(r){r={...r};let e=QA(r);e&&(r.bigint===void 0&&(r.bigint=!1),"circularValue"in r||(r.circularValue=Error));let t=XA(r),n=vx(r,"bigint"),i=vx(r,"deterministic"),o=wx(r,"maximumDepth"),s=wx(r,"maximumBreadth");function f(I,x,C,j,H,z){let X=x[I];switch(typeof X=="object"&&X!==null&&typeof X.toJSON=="function"&&(X=X.toJSON(I)),X=j.call(x,I,X),typeof X){case"string":return`"${ii(X)}"`;case"object":{if(X===null)return"null";if(C.indexOf(X)!==-1)return t;let Y="",se=",",G=z;if(Array.isArray(X)){if(X.length===0)return"[]";if(o<C.length+1)return'"[Array]"';C.push(X),H!==""&&(z+=H,Y+=`
${z}`,se=`,
${z}`);let l=Math.min(X.length,s),b=0;for(;b<l-1;b++){let a=f(b,X,C,j,H,z);Y+=a!==void 0?a:"null",Y+=se}let d=f(b,X,C,j,H,z);if(Y+=d!==void 0?d:"null",X.length-1>s){let a=X.length-s-1;Y+=`${se}"... ${uo(a)} not stringified"`}return H!==""&&(Y+=`
${G}`),C.pop(),`[${Y}]`}let q=Object.keys(X),J=q.length;if(J===0)return"{}";if(o<C.length+1)return'"[Object]"';let Q="",W="";H!==""&&(z+=H,se=`,
${z}`,Q=" ");let R=Math.min(J,s);np(X)&&(Y+=ip(X,se,s),q=q.slice(X.length),R-=X.length,W=se),i&&(q=rp(q)),C.push(X);for(let l=0;l<R;l++){let b=q[l],d=f(b,X,C,j,H,z);d!==void 0&&(Y+=`${W}"${ii(b)}":${Q}${d}`,W=se)}if(J>s){let l=J-s;Y+=`${W}"...":${Q}"${uo(l)} not stringified"`,W=se}return H!==""&&W.length>1&&(Y=`
${z}${Y}
${G}`),C.pop(),`{${Y}}`}case"number":return isFinite(X)?String(X):e?e(X):"null";case"boolean":return X===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(X);default:return e?e(X):void 0}}function h(I,x,C,j,H,z){switch(typeof x=="object"&&x!==null&&typeof x.toJSON=="function"&&(x=x.toJSON(I)),typeof x){case"string":return`"${ii(x)}"`;case"object":{if(x===null)return"null";if(C.indexOf(x)!==-1)return t;let X=z,Y="",se=",";if(Array.isArray(x)){if(x.length===0)return"[]";if(o<C.length+1)return'"[Array]"';C.push(x),H!==""&&(z+=H,Y+=`
${z}`,se=`,
${z}`);let J=Math.min(x.length,s),Q=0;for(;Q<J-1;Q++){let R=h(Q,x[Q],C,j,H,z);Y+=R!==void 0?R:"null",Y+=se}let W=h(Q,x[Q],C,j,H,z);if(Y+=W!==void 0?W:"null",x.length-1>s){let R=x.length-s-1;Y+=`${se}"... ${uo(R)} not stringified"`}return H!==""&&(Y+=`
${X}`),C.pop(),`[${Y}]`}if(j.size===0)return"{}";C.push(x);let G="";H!==""&&(z+=H,se=`,
${z}`,G=" ");let q="";for(let J of j){let Q=h(J,x[J],C,j,H,z);Q!==void 0&&(Y+=`${q}"${ii(J)}":${G}${Q}`,q=se)}return H!==""&&q.length>1&&(Y=`
${z}${Y}
${X}`),C.pop(),`{${Y}}`}case"number":return isFinite(x)?String(x):e?e(x):"null";case"boolean":return x===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(x);default:return e?e(x):void 0}}function g(I,x,C,j,H){switch(typeof x){case"string":return`"${ii(x)}"`;case"object":{if(x===null)return"null";if(typeof x.toJSON=="function"){if(x=x.toJSON(I),typeof x!="object")return g(I,x,C,j,H);if(x===null)return"null"}if(C.indexOf(x)!==-1)return t;let z=H;if(Array.isArray(x)){if(x.length===0)return"[]";if(o<C.length+1)return'"[Array]"';C.push(x),H+=j;let Q=`
${H}`,W=`,
${H}`,R=Math.min(x.length,s),l=0;for(;l<R-1;l++){let d=g(l,x[l],C,j,H);Q+=d!==void 0?d:"null",Q+=W}let b=g(l,x[l],C,j,H);if(Q+=b!==void 0?b:"null",x.length-1>s){let d=x.length-s-1;Q+=`${W}"... ${uo(d)} not stringified"`}return Q+=`
${z}`,C.pop(),`[${Q}]`}let X=Object.keys(x),Y=X.length;if(Y===0)return"{}";if(o<C.length+1)return'"[Object]"';H+=j;let se=`,
${H}`,G="",q="",J=Math.min(Y,s);np(x)&&(G+=ip(x,se,s),X=X.slice(x.length),J-=x.length,q=se),i&&(X=rp(X)),C.push(x);for(let Q=0;Q<J;Q++){let W=X[Q],R=g(W,x[W],C,j,H);R!==void 0&&(G+=`${q}"${ii(W)}": ${R}`,q=se)}if(Y>s){let Q=Y-s;G+=`${q}"...": "${uo(Q)} not stringified"`,q=se}return q!==""&&(G=`
${H}${G}
${z}`),C.pop(),`{${G}}`}case"number":return isFinite(x)?String(x):e?e(x):"null";case"boolean":return x===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(x);default:return e?e(x):void 0}}function _(I,x,C){switch(typeof x){case"string":return`"${ii(x)}"`;case"object":{if(x===null)return"null";if(typeof x.toJSON=="function"){if(x=x.toJSON(I),typeof x!="object")return _(I,x,C);if(x===null)return"null"}if(C.indexOf(x)!==-1)return t;let j="";if(Array.isArray(x)){if(x.length===0)return"[]";if(o<C.length+1)return'"[Array]"';C.push(x);let se=Math.min(x.length,s),G=0;for(;G<se-1;G++){let J=_(G,x[G],C);j+=J!==void 0?J:"null",j+=","}let q=_(G,x[G],C);if(j+=q!==void 0?q:"null",x.length-1>s){let J=x.length-s-1;j+=`,"... ${uo(J)} not stringified"`}return C.pop(),`[${j}]`}let H=Object.keys(x),z=H.length;if(z===0)return"{}";if(o<C.length+1)return'"[Object]"';let X="",Y=Math.min(z,s);np(x)&&(j+=ip(x,",",s),H=H.slice(x.length),Y-=x.length,X=","),i&&(H=rp(H)),C.push(x);for(let se=0;se<Y;se++){let G=H[se],q=_(G,x[G],C);q!==void 0&&(j+=`${X}"${ii(G)}":${q}`,X=",")}if(z>s){let se=z-s;j+=`${X}"...":"${uo(se)} not stringified"`}return C.pop(),`{${j}}`}case"number":return isFinite(x)?String(x):e?e(x):"null";case"boolean":return x===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(x);default:return e?e(x):void 0}}function T(I,x,C){if(arguments.length>1){let j="";if(typeof C=="number"?j=" ".repeat(Math.min(C,10)):typeof C=="string"&&(j=C.slice(0,10)),x!=null){if(typeof x=="function")return f("",{"":I},[],x,j,"");if(Array.isArray(x))return h("",I,[],YA(x),j,"")}if(j.length!==0)return g("",I,[],j,"")}return _("",I,[])}return T}});var Ax=V((Ex,Tu)=>{(function(r){"use strict";var e,t=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,i=Math.floor,o="[BigNumber Error] ",s=o+"Number primitive has more than 15 significant digits: ",f=1e14,h=14,g=9007199254740991,_=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],T=1e7,I=1e9;function x(G){var q,J,Q,W=S.prototype={constructor:S,toString:null,valueOf:null},R=new S(1),l=20,b=4,d=-7,a=21,u=-1e7,v=1e7,E=!1,p=1,c=0,F={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},M="0123456789abcdefghijklmnopqrstuvwxyz",m=!0;function S(y,w){var A,k,P,N,D,B,O,L,U=this;if(!(U instanceof S))return new S(y,w);if(w==null){if(y&&y._isBigNumber===!0){U.s=y.s,!y.c||y.e>v?U.c=U.e=null:y.e<u?U.c=[U.e=0]:(U.e=y.e,U.c=y.c.slice());return}if((B=typeof y=="number")&&y*0==0){if(U.s=1/y<0?(y=-y,-1):1,y===~~y){for(N=0,D=y;D>=10;D/=10,N++);N>v?U.c=U.e=null:(U.e=N,U.c=[y]);return}L=String(y)}else{if(!t.test(L=String(y)))return Q(U,L,B);U.s=L.charCodeAt(0)==45?(L=L.slice(1),-1):1}(N=L.indexOf("."))>-1&&(L=L.replace(".","")),(D=L.search(/e/i))>0?(N<0&&(N=D),N+=+L.slice(D+1),L=L.substring(0,D)):N<0&&(N=L.length)}else{if(z(w,2,M.length,"Base"),w==10&&m)return U=new S(y),he(U,l+U.e+1,b);if(L=String(y),B=typeof y=="number"){if(y*0!=0)return Q(U,L,B,w);if(U.s=1/y<0?(L=L.slice(1),-1):1,S.DEBUG&&L.replace(/^0\.0*|\./,"").length>15)throw Error(s+y)}else U.s=L.charCodeAt(0)===45?(L=L.slice(1),-1):1;for(A=M.slice(0,w),N=D=0,O=L.length;D<O;D++)if(A.indexOf(k=L.charAt(D))<0){if(k=="."){if(D>N){N=O;continue}}else if(!P&&(L==L.toUpperCase()&&(L=L.toLowerCase())||L==L.toLowerCase()&&(L=L.toUpperCase()))){P=!0,D=-1,N=0;continue}return Q(U,String(y),B,w)}B=!1,L=J(L,w,10,U.s),(N=L.indexOf("."))>-1?L=L.replace(".",""):N=L.length}for(D=0;L.charCodeAt(D)===48;D++);for(O=L.length;L.charCodeAt(--O)===48;);if(L=L.slice(D,++O)){if(O-=D,B&&S.DEBUG&&O>15&&(y>g||y!==i(y)))throw Error(s+U.s*y);if((N=N-D-1)>v)U.c=U.e=null;else if(N<u)U.c=[U.e=0];else{if(U.e=N,U.c=[],D=(N+1)%h,N<0&&(D+=h),D<O){for(D&&U.c.push(+L.slice(0,D)),O-=h;D<O;)U.c.push(+L.slice(D,D+=h));D=h-(L=L.slice(D)).length}else D-=O;for(;D--;L+="0");U.c.push(+L)}}else U.c=[U.e=0]}S.clone=x,S.ROUND_UP=0,S.ROUND_DOWN=1,S.ROUND_CEIL=2,S.ROUND_FLOOR=3,S.ROUND_HALF_UP=4,S.ROUND_HALF_DOWN=5,S.ROUND_HALF_EVEN=6,S.ROUND_HALF_CEIL=7,S.ROUND_HALF_FLOOR=8,S.EUCLID=9,S.config=S.set=function(y){var w,A;if(y!=null)if(typeof y=="object"){if(y.hasOwnProperty(w="DECIMAL_PLACES")&&(A=y[w],z(A,0,I,w),l=A),y.hasOwnProperty(w="ROUNDING_MODE")&&(A=y[w],z(A,0,8,w),b=A),y.hasOwnProperty(w="EXPONENTIAL_AT")&&(A=y[w],A&&A.pop?(z(A[0],-I,0,w),z(A[1],0,I,w),d=A[0],a=A[1]):(z(A,-I,I,w),d=-(a=A<0?-A:A))),y.hasOwnProperty(w="RANGE"))if(A=y[w],A&&A.pop)z(A[0],-I,-1,w),z(A[1],1,I,w),u=A[0],v=A[1];else if(z(A,-I,I,w),A)u=-(v=A<0?-A:A);else throw Error(o+w+" cannot be zero: "+A);if(y.hasOwnProperty(w="CRYPTO"))if(A=y[w],A===!!A)if(A)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))E=A;else throw E=!A,Error(o+"crypto unavailable");else E=A;else throw Error(o+w+" not true or false: "+A);if(y.hasOwnProperty(w="MODULO_MODE")&&(A=y[w],z(A,0,9,w),p=A),y.hasOwnProperty(w="POW_PRECISION")&&(A=y[w],z(A,0,I,w),c=A),y.hasOwnProperty(w="FORMAT"))if(A=y[w],typeof A=="object")F=A;else throw Error(o+w+" not an object: "+A);if(y.hasOwnProperty(w="ALPHABET"))if(A=y[w],typeof A=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(A))m=A.slice(0,10)=="0123456789",M=A;else throw Error(o+w+" invalid: "+A)}else throw Error(o+"Object expected: "+y);return{DECIMAL_PLACES:l,ROUNDING_MODE:b,EXPONENTIAL_AT:[d,a],RANGE:[u,v],CRYPTO:E,MODULO_MODE:p,POW_PRECISION:c,FORMAT:F,ALPHABET:M}},S.isBigNumber=function(y){if(!y||y._isBigNumber!==!0)return!1;if(!S.DEBUG)return!0;var w,A,k=y.c,P=y.e,N=y.s;e:if({}.toString.call(k)=="[object Array]"){if((N===1||N===-1)&&P>=-I&&P<=I&&P===i(P)){if(k[0]===0){if(P===0&&k.length===1)return!0;break e}if(w=(P+1)%h,w<1&&(w+=h),String(k[0]).length==w){for(w=0;w<k.length;w++)if(A=k[w],A<0||A>=f||A!==i(A))break e;if(A!==0)return!0}}}else if(k===null&&P===null&&(N===null||N===1||N===-1))return!0;throw Error(o+"Invalid BigNumber: "+y)},S.maximum=S.max=function(){return ie(arguments,W.lt)},S.minimum=S.min=function(){return ie(arguments,W.gt)},S.random=function(){var y=9007199254740992,w=Math.random()*y&2097151?function(){return i(Math.random()*y)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(A){var k,P,N,D,B,O=0,L=[],U=new S(R);if(A==null?A=l:z(A,0,I),D=n(A/h),E)if(crypto.getRandomValues){for(k=crypto.getRandomValues(new Uint32Array(D*=2));O<D;)B=k[O]*131072+(k[O+1]>>>11),B>=9e15?(P=crypto.getRandomValues(new Uint32Array(2)),k[O]=P[0],k[O+1]=P[1]):(L.push(B%1e14),O+=2);O=D/2}else if(crypto.randomBytes){for(k=crypto.randomBytes(D*=7);O<D;)B=(k[O]&31)*281474976710656+k[O+1]*1099511627776+k[O+2]*4294967296+k[O+3]*16777216+(k[O+4]<<16)+(k[O+5]<<8)+k[O+6],B>=9e15?crypto.randomBytes(7).copy(k,O):(L.push(B%1e14),O+=7);O=D/7}else throw E=!1,Error(o+"crypto unavailable");if(!E)for(;O<D;)B=w(),B<9e15&&(L[O++]=B%1e14);for(D=L[--O],A%=h,D&&A&&(B=_[h-A],L[O]=i(D/B)*B);L[O]===0;L.pop(),O--);if(O<0)L=[N=0];else{for(N=-1;L[0]===0;L.splice(0,1),N-=h);for(O=1,B=L[0];B>=10;B/=10,O++);O<h&&(N-=h-O)}return U.e=N,U.c=L,U}}(),S.sum=function(){for(var y=1,w=arguments,A=new S(w[0]);y<w.length;)A=A.plus(w[y++]);return A},J=function(){var y="0123456789";function w(A,k,P,N){for(var D,B=[0],O,L=0,U=A.length;L<U;){for(O=B.length;O--;B[O]*=k);for(B[0]+=N.indexOf(A.charAt(L++)),D=0;D<B.length;D++)B[D]>P-1&&(B[D+1]==null&&(B[D+1]=0),B[D+1]+=B[D]/P|0,B[D]%=P)}return B.reverse()}return function(A,k,P,N,D){var B,O,L,U,$,Z,ee,te,fe=A.indexOf("."),ge=l,ae=b;for(fe>=0&&(U=c,c=0,A=A.replace(".",""),te=new S(k),Z=te.pow(A.length-fe),c=U,te.c=w(se(j(Z.c),Z.e,"0"),10,P,y),te.e=te.c.length),ee=w(A,k,P,D?(B=M,y):(B=y,M)),L=U=ee.length;ee[--U]==0;ee.pop());if(!ee[0])return B.charAt(0);if(fe<0?--L:(Z.c=ee,Z.e=L,Z.s=N,Z=q(Z,te,ge,ae,P),ee=Z.c,$=Z.r,L=Z.e),O=L+ge+1,fe=ee[O],U=P/2,$=$||O<0||ee[O+1]!=null,$=ae<4?(fe!=null||$)&&(ae==0||ae==(Z.s<0?3:2)):fe>U||fe==U&&(ae==4||$||ae==6&&ee[O-1]&1||ae==(Z.s<0?8:7)),O<1||!ee[0])A=$?se(B.charAt(1),-ge,B.charAt(0)):B.charAt(0);else{if(ee.length=O,$)for(--P;++ee[--O]>P;)ee[O]=0,O||(++L,ee=[1].concat(ee));for(U=ee.length;!ee[--U];);for(fe=0,A="";fe<=U;A+=B.charAt(ee[fe++]));A=se(A,L,B.charAt(0))}return A}}(),q=function(){function y(k,P,N){var D,B,O,L,U=0,$=k.length,Z=P%T,ee=P/T|0;for(k=k.slice();$--;)O=k[$]%T,L=k[$]/T|0,D=ee*O+L*Z,B=Z*O+D%T*T+U,U=(B/N|0)+(D/T|0)+ee*L,k[$]=B%N;return U&&(k=[U].concat(k)),k}function w(k,P,N,D){var B,O;if(N!=D)O=N>D?1:-1;else for(B=O=0;B<N;B++)if(k[B]!=P[B]){O=k[B]>P[B]?1:-1;break}return O}function A(k,P,N,D){for(var B=0;N--;)k[N]-=B,B=k[N]<P[N]?1:0,k[N]=B*D+k[N]-P[N];for(;!k[0]&&k.length>1;k.splice(0,1));}return function(k,P,N,D,B){var O,L,U,$,Z,ee,te,fe,ge,ae,ue,Se,me,be,Xe,pe,ye,Fe=k.s==P.s?1:-1,de=k.c,le=P.c;if(!de||!de[0]||!le||!le[0])return new S(!k.s||!P.s||(de?le&&de[0]==le[0]:!le)?NaN:de&&de[0]==0||!le?Fe*0:Fe/0);for(fe=new S(Fe),ge=fe.c=[],L=k.e-P.e,Fe=N+L+1,B||(B=f,L=C(k.e/h)-C(P.e/h),Fe=Fe/h|0),U=0;le[U]==(de[U]||0);U++);if(le[U]>(de[U]||0)&&L--,Fe<0)ge.push(1),$=!0;else{for(be=de.length,pe=le.length,U=0,Fe+=2,Z=i(B/(le[0]+1)),Z>1&&(le=y(le,Z,B),de=y(de,Z,B),pe=le.length,be=de.length),me=pe,ae=de.slice(0,pe),ue=ae.length;ue<pe;ae[ue++]=0);ye=le.slice(),ye=[0].concat(ye),Xe=le[0],le[1]>=B/2&&Xe++;do{if(Z=0,O=w(le,ae,pe,ue),O<0){if(Se=ae[0],pe!=ue&&(Se=Se*B+(ae[1]||0)),Z=i(Se/Xe),Z>1)for(Z>=B&&(Z=B-1),ee=y(le,Z,B),te=ee.length,ue=ae.length;w(ee,ae,te,ue)==1;)Z--,A(ee,pe<te?ye:le,te,B),te=ee.length,O=1;else Z==0&&(O=Z=1),ee=le.slice(),te=ee.length;if(te<ue&&(ee=[0].concat(ee)),A(ae,ee,ue,B),ue=ae.length,O==-1)for(;w(le,ae,pe,ue)<1;)Z++,A(ae,pe<ue?ye:le,ue,B),ue=ae.length}else O===0&&(Z++,ae=[0]);ge[U++]=Z,ae[0]?ae[ue++]=de[me]||0:(ae=[de[me]],ue=1)}while((me++<be||ae[0]!=null)&&Fe--);$=ae[0]!=null,ge[0]||ge.splice(0,1)}if(B==f){for(U=1,Fe=ge[0];Fe>=10;Fe/=10,U++);he(fe,N+(fe.e=U+L*h-1)+1,D,$)}else fe.e=L,fe.r=+$;return fe}}();function ne(y,w,A,k){var P,N,D,B,O;if(A==null?A=b:z(A,0,8),!y.c)return y.toString();if(P=y.c[0],D=y.e,w==null)O=j(y.c),O=k==1||k==2&&(D<=d||D>=a)?Y(O,D):se(O,D,"0");else if(y=he(new S(y),w,A),N=y.e,O=j(y.c),B=O.length,k==1||k==2&&(w<=N||N<=d)){for(;B<w;O+="0",B++);O=Y(O,N)}else if(w-=D,O=se(O,N,"0"),N+1>B){if(--w>0)for(O+=".";w--;O+="0");}else if(w+=N-B,w>0)for(N+1==B&&(O+=".");w--;O+="0");return y.s<0&&P?"-"+O:O}function ie(y,w){for(var A,k=1,P=new S(y[0]);k<y.length;k++)if(A=new S(y[k]),A.s)w.call(P,A)&&(P=A);else{P=A;break}return P}function ce(y,w,A){for(var k=1,P=w.length;!w[--P];w.pop());for(P=w[0];P>=10;P/=10,k++);return(A=k+A*h-1)>v?y.c=y.e=null:A<u?y.c=[y.e=0]:(y.e=A,y.c=w),y}Q=function(){var y=/^(-?)0([xbo])(?=\w[\w.]*$)/i,w=/^([^.]+)\.$/,A=/^\.([^.]+)$/,k=/^-?(Infinity|NaN)$/,P=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(N,D,B,O){var L,U=B?D:D.replace(P,"");if(k.test(U))N.s=isNaN(U)?null:U<0?-1:1;else{if(!B&&(U=U.replace(y,function($,Z,ee){return L=(ee=ee.toLowerCase())=="x"?16:ee=="b"?2:8,!O||O==L?Z:$}),O&&(L=O,U=U.replace(w,"$1").replace(A,"0.$1")),D!=U))return new S(U,L);if(S.DEBUG)throw Error(o+"Not a"+(O?" base "+O:"")+" number: "+D);N.s=null}N.c=N.e=null}}();function he(y,w,A,k){var P,N,D,B,O,L,U,$=y.c,Z=_;if($){e:{for(P=1,B=$[0];B>=10;B/=10,P++);if(N=w-P,N<0)N+=h,D=w,O=$[L=0],U=O/Z[P-D-1]%10|0;else if(L=n((N+1)/h),L>=$.length)if(k){for(;$.length<=L;$.push(0));O=U=0,P=1,N%=h,D=N-h+1}else break e;else{for(O=B=$[L],P=1;B>=10;B/=10,P++);N%=h,D=N-h+P,U=D<0?0:O/Z[P-D-1]%10|0}if(k=k||w<0||$[L+1]!=null||(D<0?O:O%Z[P-D-1]),k=A<4?(U||k)&&(A==0||A==(y.s<0?3:2)):U>5||U==5&&(A==4||k||A==6&&(N>0?D>0?O/Z[P-D]:0:$[L-1])%10&1||A==(y.s<0?8:7)),w<1||!$[0])return $.length=0,k?(w-=y.e+1,$[0]=Z[(h-w%h)%h],y.e=-w||0):$[0]=y.e=0,y;if(N==0?($.length=L,B=1,L--):($.length=L+1,B=Z[h-N],$[L]=D>0?i(O/Z[P-D]%Z[D])*B:0),k)for(;;)if(L==0){for(N=1,D=$[0];D>=10;D/=10,N++);for(D=$[0]+=B,B=1;D>=10;D/=10,B++);N!=B&&(y.e++,$[0]==f&&($[0]=1));break}else{if($[L]+=B,$[L]!=f)break;$[L--]=0,B=1}for(N=$.length;$[--N]===0;$.pop());}y.e>v?y.c=y.e=null:y.e<u&&(y.c=[y.e=0])}return y}function re(y){var w,A=y.e;return A===null?y.toString():(w=j(y.c),w=A<=d||A>=a?Y(w,A):se(w,A,"0"),y.s<0?"-"+w:w)}return W.absoluteValue=W.abs=function(){var y=new S(this);return y.s<0&&(y.s=1),y},W.comparedTo=function(y,w){return H(this,new S(y,w))},W.decimalPlaces=W.dp=function(y,w){var A,k,P,N=this;if(y!=null)return z(y,0,I),w==null?w=b:z(w,0,8),he(new S(N),y+N.e+1,w);if(!(A=N.c))return null;if(k=((P=A.length-1)-C(this.e/h))*h,P=A[P])for(;P%10==0;P/=10,k--);return k<0&&(k=0),k},W.dividedBy=W.div=function(y,w){return q(this,new S(y,w),l,b)},W.dividedToIntegerBy=W.idiv=function(y,w){return q(this,new S(y,w),0,1)},W.exponentiatedBy=W.pow=function(y,w){var A,k,P,N,D,B,O,L,U,$=this;if(y=new S(y),y.c&&!y.isInteger())throw Error(o+"Exponent not an integer: "+re(y));if(w!=null&&(w=new S(w)),B=y.e>14,!$.c||!$.c[0]||$.c[0]==1&&!$.e&&$.c.length==1||!y.c||!y.c[0])return U=new S(Math.pow(+re($),B?2-X(y):+re(y))),w?U.mod(w):U;if(O=y.s<0,w){if(w.c?!w.c[0]:!w.s)return new S(NaN);k=!O&&$.isInteger()&&w.isInteger(),k&&($=$.mod(w))}else{if(y.e>9&&($.e>0||$.e<-1||($.e==0?$.c[0]>1||B&&$.c[1]>=24e7:$.c[0]<8e13||B&&$.c[0]<=9999975e7)))return N=$.s<0&&X(y)?-0:0,$.e>-1&&(N=1/N),new S(O?1/N:N);c&&(N=n(c/h+2))}for(B?(A=new S(.5),O&&(y.s=1),L=X(y)):(P=Math.abs(+re(y)),L=P%2),U=new S(R);;){if(L){if(U=U.times($),!U.c)break;N?U.c.length>N&&(U.c.length=N):k&&(U=U.mod(w))}if(P){if(P=i(P/2),P===0)break;L=P%2}else if(y=y.times(A),he(y,y.e+1,1),y.e>14)L=X(y);else{if(P=+re(y),P===0)break;L=P%2}$=$.times($),N?$.c&&$.c.length>N&&($.c.length=N):k&&($=$.mod(w))}return k?U:(O&&(U=R.div(U)),w?U.mod(w):N?he(U,c,b,D):U)},W.integerValue=function(y){var w=new S(this);return y==null?y=b:z(y,0,8),he(w,w.e+1,y)},W.isEqualTo=W.eq=function(y,w){return H(this,new S(y,w))===0},W.isFinite=function(){return!!this.c},W.isGreaterThan=W.gt=function(y,w){return H(this,new S(y,w))>0},W.isGreaterThanOrEqualTo=W.gte=function(y,w){return(w=H(this,new S(y,w)))===1||w===0},W.isInteger=function(){return!!this.c&&C(this.e/h)>this.c.length-2},W.isLessThan=W.lt=function(y,w){return H(this,new S(y,w))<0},W.isLessThanOrEqualTo=W.lte=function(y,w){return(w=H(this,new S(y,w)))===-1||w===0},W.isNaN=function(){return!this.s},W.isNegative=function(){return this.s<0},W.isPositive=function(){return this.s>0},W.isZero=function(){return!!this.c&&this.c[0]==0},W.minus=function(y,w){var A,k,P,N,D=this,B=D.s;if(y=new S(y,w),w=y.s,!B||!w)return new S(NaN);if(B!=w)return y.s=-w,D.plus(y);var O=D.e/h,L=y.e/h,U=D.c,$=y.c;if(!O||!L){if(!U||!$)return U?(y.s=-w,y):new S($?D:NaN);if(!U[0]||!$[0])return $[0]?(y.s=-w,y):new S(U[0]?D:b==3?-0:0)}if(O=C(O),L=C(L),U=U.slice(),B=O-L){for((N=B<0)?(B=-B,P=U):(L=O,P=$),P.reverse(),w=B;w--;P.push(0));P.reverse()}else for(k=(N=(B=U.length)<(w=$.length))?B:w,B=w=0;w<k;w++)if(U[w]!=$[w]){N=U[w]<$[w];break}if(N&&(P=U,U=$,$=P,y.s=-y.s),w=(k=$.length)-(A=U.length),w>0)for(;w--;U[A++]=0);for(w=f-1;k>B;){if(U[--k]<$[k]){for(A=k;A&&!U[--A];U[A]=w);--U[A],U[k]+=f}U[k]-=$[k]}for(;U[0]==0;U.splice(0,1),--L);return U[0]?ce(y,U,L):(y.s=b==3?-1:1,y.c=[y.e=0],y)},W.modulo=W.mod=function(y,w){var A,k,P=this;return y=new S(y,w),!P.c||!y.s||y.c&&!y.c[0]?new S(NaN):!y.c||P.c&&!P.c[0]?new S(P):(p==9?(k=y.s,y.s=1,A=q(P,y,0,3),y.s=k,A.s*=k):A=q(P,y,0,p),y=P.minus(A.times(y)),!y.c[0]&&p==1&&(y.s=P.s),y)},W.multipliedBy=W.times=function(y,w){var A,k,P,N,D,B,O,L,U,$,Z,ee,te,fe,ge,ae=this,ue=ae.c,Se=(y=new S(y,w)).c;if(!ue||!Se||!ue[0]||!Se[0])return!ae.s||!y.s||ue&&!ue[0]&&!Se||Se&&!Se[0]&&!ue?y.c=y.e=y.s=null:(y.s*=ae.s,!ue||!Se?y.c=y.e=null:(y.c=[0],y.e=0)),y;for(k=C(ae.e/h)+C(y.e/h),y.s*=ae.s,O=ue.length,$=Se.length,O<$&&(te=ue,ue=Se,Se=te,P=O,O=$,$=P),P=O+$,te=[];P--;te.push(0));for(fe=f,ge=T,P=$;--P>=0;){for(A=0,Z=Se[P]%ge,ee=Se[P]/ge|0,D=O,N=P+D;N>P;)L=ue[--D]%ge,U=ue[D]/ge|0,B=ee*L+U*Z,L=Z*L+B%ge*ge+te[N]+A,A=(L/fe|0)+(B/ge|0)+ee*U,te[N--]=L%fe;te[N]=A}return A?++k:te.splice(0,1),ce(y,te,k)},W.negated=function(){var y=new S(this);return y.s=-y.s||null,y},W.plus=function(y,w){var A,k=this,P=k.s;if(y=new S(y,w),w=y.s,!P||!w)return new S(NaN);if(P!=w)return y.s=-w,k.minus(y);var N=k.e/h,D=y.e/h,B=k.c,O=y.c;if(!N||!D){if(!B||!O)return new S(P/0);if(!B[0]||!O[0])return O[0]?y:new S(B[0]?k:P*0)}if(N=C(N),D=C(D),B=B.slice(),P=N-D){for(P>0?(D=N,A=O):(P=-P,A=B),A.reverse();P--;A.push(0));A.reverse()}for(P=B.length,w=O.length,P-w<0&&(A=O,O=B,B=A,w=P),P=0;w;)P=(B[--w]=B[w]+O[w]+P)/f|0,B[w]=f===B[w]?0:B[w]%f;return P&&(B=[P].concat(B),++D),ce(y,B,D)},W.precision=W.sd=function(y,w){var A,k,P,N=this;if(y!=null&&y!==!!y)return z(y,1,I),w==null?w=b:z(w,0,8),he(new S(N),y,w);if(!(A=N.c))return null;if(P=A.length-1,k=P*h+1,P=A[P]){for(;P%10==0;P/=10,k--);for(P=A[0];P>=10;P/=10,k++);}return y&&N.e+1>k&&(k=N.e+1),k},W.shiftedBy=function(y){return z(y,-g,g),this.times("1e"+y)},W.squareRoot=W.sqrt=function(){var y,w,A,k,P,N=this,D=N.c,B=N.s,O=N.e,L=l+4,U=new S("0.5");if(B!==1||!D||!D[0])return new S(!B||B<0&&(!D||D[0])?NaN:D?N:1/0);if(B=Math.sqrt(+re(N)),B==0||B==1/0?(w=j(D),(w.length+O)%2==0&&(w+="0"),B=Math.sqrt(+w),O=C((O+1)/2)-(O<0||O%2),B==1/0?w="5e"+O:(w=B.toExponential(),w=w.slice(0,w.indexOf("e")+1)+O),A=new S(w)):A=new S(B+""),A.c[0]){for(O=A.e,B=O+L,B<3&&(B=0);;)if(P=A,A=U.times(P.plus(q(N,P,L,1))),j(P.c).slice(0,B)===(w=j(A.c)).slice(0,B))if(A.e<O&&--B,w=w.slice(B-3,B+1),w=="9999"||!k&&w=="4999"){if(!k&&(he(P,P.e+l+2,0),P.times(P).eq(N))){A=P;break}L+=4,B+=4,k=1}else{(!+w||!+w.slice(1)&&w.charAt(0)=="5")&&(he(A,A.e+l+2,1),y=!A.times(A).eq(N));break}}return he(A,A.e+l+1,b,y)},W.toExponential=function(y,w){return y!=null&&(z(y,0,I),y++),ne(this,y,w,1)},W.toFixed=function(y,w){return y!=null&&(z(y,0,I),y=y+this.e+1),ne(this,y,w)},W.toFormat=function(y,w,A){var k,P=this;if(A==null)y!=null&&w&&typeof w=="object"?(A=w,w=null):y&&typeof y=="object"?(A=y,y=w=null):A=F;else if(typeof A!="object")throw Error(o+"Argument not an object: "+A);if(k=P.toFixed(y,w),P.c){var N,D=k.split("."),B=+A.groupSize,O=+A.secondaryGroupSize,L=A.groupSeparator||"",U=D[0],$=D[1],Z=P.s<0,ee=Z?U.slice(1):U,te=ee.length;if(O&&(N=B,B=O,O=N,te-=N),B>0&&te>0){for(N=te%B||B,U=ee.substr(0,N);N<te;N+=B)U+=L+ee.substr(N,B);O>0&&(U+=L+ee.slice(N)),Z&&(U="-"+U)}k=$?U+(A.decimalSeparator||"")+((O=+A.fractionGroupSize)?$.replace(new RegExp("\\d{"+O+"}\\B","g"),"$&"+(A.fractionGroupSeparator||"")):$):U}return(A.prefix||"")+k+(A.suffix||"")},W.toFraction=function(y){var w,A,k,P,N,D,B,O,L,U,$,Z,ee=this,te=ee.c;if(y!=null&&(B=new S(y),!B.isInteger()&&(B.c||B.s!==1)||B.lt(R)))throw Error(o+"Argument "+(B.isInteger()?"out of range: ":"not an integer: ")+re(B));if(!te)return new S(ee);for(w=new S(R),L=A=new S(R),k=O=new S(R),Z=j(te),N=w.e=Z.length-ee.e-1,w.c[0]=_[(D=N%h)<0?h+D:D],y=!y||B.comparedTo(w)>0?N>0?w:L:B,D=v,v=1/0,B=new S(Z),O.c[0]=0;U=q(B,w,0,1),P=A.plus(U.times(k)),P.comparedTo(y)!=1;)A=k,k=P,L=O.plus(U.times(P=L)),O=P,w=B.minus(U.times(P=w)),B=P;return P=q(y.minus(A),k,0,1),O=O.plus(P.times(L)),A=A.plus(P.times(k)),O.s=L.s=ee.s,N=N*2,$=q(L,k,N,b).minus(ee).abs().comparedTo(q(O,A,N,b).minus(ee).abs())<1?[L,k]:[O,A],v=D,$},W.toNumber=function(){return+re(this)},W.toPrecision=function(y,w){return y!=null&&z(y,1,I),ne(this,y,w,2)},W.toString=function(y){var w,A=this,k=A.s,P=A.e;return P===null?k?(w="Infinity",k<0&&(w="-"+w)):w="NaN":(y==null?w=P<=d||P>=a?Y(j(A.c),P):se(j(A.c),P,"0"):y===10&&m?(A=he(new S(A),l+P+1,b),w=se(j(A.c),A.e,"0")):(z(y,2,M.length,"Base"),w=J(se(j(A.c),P,"0"),10,y,k,!0)),k<0&&A.c[0]&&(w="-"+w)),w},W.valueOf=W.toJSON=function(){return re(this)},W._isBigNumber=!0,G!=null&&S.set(G),S}function C(G){var q=G|0;return G>0||G===q?q:q-1}function j(G){for(var q,J,Q=1,W=G.length,R=G[0]+"";Q<W;){for(q=G[Q++]+"",J=h-q.length;J--;q="0"+q);R+=q}for(W=R.length;R.charCodeAt(--W)===48;);return R.slice(0,W+1||1)}function H(G,q){var J,Q,W=G.c,R=q.c,l=G.s,b=q.s,d=G.e,a=q.e;if(!l||!b)return null;if(J=W&&!W[0],Q=R&&!R[0],J||Q)return J?Q?0:-b:l;if(l!=b)return l;if(J=l<0,Q=d==a,!W||!R)return Q?0:!W^J?1:-1;if(!Q)return d>a^J?1:-1;for(b=(d=W.length)<(a=R.length)?d:a,l=0;l<b;l++)if(W[l]!=R[l])return W[l]>R[l]^J?1:-1;return d==a?0:d>a^J?1:-1}function z(G,q,J,Q){if(G<q||G>J||G!==i(G))throw Error(o+(Q||"Argument")+(typeof G=="number"?G<q||G>J?" out of range: ":" not an integer: ":" not a primitive number: ")+String(G))}function X(G){var q=G.c.length-1;return C(G.e/h)==q&&G.c[q]%2!=0}function Y(G,q){return(G.length>1?G.charAt(0)+"."+G.slice(1):G)+(q<0?"e":"e+")+q}function se(G,q,J){var Q,W;if(q<0){for(W=J+".";++q;W+=J);G=W+G}else if(Q=G.length,++q>Q){for(W=J,q-=Q;--q;W+=J);G+=W}else q<Q&&(G=G.slice(0,q)+"."+G.slice(q));return G}e=x(),e.default=e.BigNumber=e,typeof define=="function"&&define.amd?define(function(){return e}):typeof Tu<"u"&&Tu.exports?Tu.exports=e:(r||(r=typeof self<"u"&&self?self:window),r.BigNumber=e)})(Ex)});var lp=V((up,Ix)=>{var Cu=Cn(),tn=Cu.Buffer;function Mx(r,e){for(var t in r)e[t]=r[t]}tn.from&&tn.alloc&&tn.allocUnsafe&&tn.allocUnsafeSlow?Ix.exports=Cu:(Mx(Cu,up),up.Buffer=po);function po(r,e,t){return tn(r,e,t)}po.prototype=Object.create(tn.prototype);Mx(tn,po);po.from=function(r,e,t){if(typeof r=="number")throw new TypeError("Argument must not be a number");return tn(r,e,t)};po.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError("Argument must be a number");var n=tn(r);return e!==void 0?typeof t=="string"?n.fill(e,t):n.fill(e):n.fill(0),n};po.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return tn(r)};po.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return Cu.SlowBuffer(r)}});var dp=V((aO,Cx)=>{var hp=lp().Buffer;Cx.exports=class{constructor(e=hp.from([])){this.buffer=e}read(e){let t=this.buffer.subarray(0,e);return this.buffer=this.buffer.subarray(e),t}write(e){e=hp.from(e),this.buffer=hp.concat([this.buffer,e])}}});var kx=V((fO,Nx)=>{var pp=$t(),Bx=dp();Nx.exports={encode:eF,decode:tF,read:Ox,readBn:Rx,write:Px};function Ox(r){return Rx(r).toString()}function Rx(r){let e=new pp(0),t=0,n;for(;n=r.read(1)[0],e.ior(new pp(n&127).shln(t)),n>>7!==0;)t+=7;return e}function Px(r,e){let t=new pp(r);for(;;){let n=t.maskn(7).toNumber();if(t.ishrn(7),t.isZero()){e.write([n]);break}else e.write([n|128])}}function eF(r){let e=new Bx;return Px(r,e),e.buffer}function tF(r){let e=new Bx(r);return Ox(e)}});var $x=V((cO,jx)=>{var gp=$t(),Lx=dp();jx.exports={encode:rF,decode:nF,write:qx,read:Dx,readBn:Ux};function Dx(r){return Ux(r).toString()}function Ux(r){let e=new gp(0),t=0,n;for(;n=r.read(1)[0],e.ior(new gp(n&127).shln(t)),t+=7,n>>7!==0;);return n&64&&e.setn(t),e.fromTwos(t)}function qx(r,e){let t=new gp(r),n=t.isNeg();for(n&&(t=t.toTwos(t.bitLength()+8));;){let o=t.maskn(7).toNumber();if(t.ishrn(7),i(t)&&(o&64)!==0||t.isZero()&&(o&64)===0){e.write([o]);break}else e.write([o|128])}function i(o){return n&&o.toString(2).indexOf("0")<0}}function rF(r){let e=new Lx;return qx(r,e),e.buffer}function nF(r){let e=new Lx(r);return Dx(e)}});var Bu=V(yp=>{yp.unsigned=kx();yp.signed=$x()});var Ou=V((hO,Wx)=>{var mp=lp().Buffer;Wx.exports=class{constructor(e=mp.from([])){this.buffer=e,this._bytesRead=0,this._bytesWrote=0}read(e){this._bytesRead+=e;let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}write(e){e=mp.from(e),this._bytesWrote+=e.length,this.buffer=mp.concat([this.buffer,e])}get end(){return!this.buffer.length}get bytesRead(){return this._bytesRead}get bytesWrote(){return this._bytesWrote}}});var Ru=V((dO,iF)=>{iF.exports={block:"block_type",loop:"block_type",if:"block_type",br:"varuint32",br_if:"varuint32",br_table:"br_table",call:"varuint32",call_indirect:"call_indirect",get_local:"varuint32",set_local:"varuint32",tee_local:"varuint32",get_global:"varuint32",set_global:"varuint32",load:"memory_immediate",load8_s:"memory_immediate",load8_u:"memory_immediate",load16_s:"memory_immediate",load16_u:"memory_immediate",load32_s:"memory_immediate",load32_u:"memory_immediate",store:"memory_immediate",store8:"memory_immediate",store16:"memory_immediate",store32:"memory_immediate",current_memory:"varuint1",grow_memory:"varuint1",i32:"varint32",i64:"varint64",f32:"uint32",f64:"uint64"}});var bp=V((pO,zx)=>{var Ue=Bu(),Kx=Ou(),oF=Ru(),ot=zx.exports=(r,e)=>{let t=new Kx(r);return ot.parse(t,e)},go=ot.LANGUAGE_TYPES={127:"i32",126:"i64",125:"f32",124:"f64",112:"anyFunc",96:"func",64:"block_type"},Hx=ot.EXTERNAL_KIND={0:"function",1:"table",2:"memory",3:"global"};ot.parsePreramble=r=>{let e={};return e.name="preramble",e.magic=[...r.read(4)],e.version=[...r.read(4)],e};ot.parseSectionHeader=r=>{let e=r.read(1)[0],t=Ue.unsigned.readBn(r).toNumber();return{id:e,name:aF[e],size:t}};var sF=ot.OPCODES={0:"unreachable",1:"nop",2:"block",3:"loop",4:"if",5:"else",11:"end",12:"br",13:"br_if",14:"br_table",15:"return",16:"call",17:"call_indirect",26:"drop",27:"select",32:"get_local",33:"set_local",34:"tee_local",35:"get_global",36:"set_global",40:"i32.load",41:"i64.load",42:"f32.load",43:"f64.load",44:"i32.load8_s",45:"i32.load8_u",46:"i32.load16_s",47:"i32.load16_u",48:"i64.load8_s",49:"i64.load8_u",50:"i64.load16_s",51:"i64.load16_u",52:"i64.load32_s",53:"i64.load32_u",54:"i32.store",55:"i64.store",56:"f32.store",57:"f64.store",58:"i32.store8",59:"i32.store16",60:"i64.store8",61:"i64.store16",62:"i64.store32",63:"current_memory",64:"grow_memory",65:"i32.const",66:"i64.const",67:"f32.const",68:"f64.const",69:"i32.eqz",70:"i32.eq",71:"i32.ne",72:"i32.lt_s",73:"i32.lt_u",74:"i32.gt_s",75:"i32.gt_u",76:"i32.le_s",77:"i32.le_u",78:"i32.ge_s",79:"i32.ge_u",80:"i64.eqz",81:"i64.eq",82:"i64.ne",83:"i64.lt_s",84:"i64.lt_u",85:"i64.gt_s",86:"i64.gt_u",87:"i64.le_s",88:"i64.le_u",89:"i64.ge_s",90:"i64.ge_u",91:"f32.eq",92:"f32.ne",93:"f32.lt",94:"f32.gt",95:"f32.le",96:"f32.ge",97:"f64.eq",98:"f64.ne",99:"f64.lt",100:"f64.gt",101:"f64.le",102:"f64.ge",103:"i32.clz",104:"i32.ctz",105:"i32.popcnt",106:"i32.add",107:"i32.sub",108:"i32.mul",109:"i32.div_s",110:"i32.div_u",111:"i32.rem_s",112:"i32.rem_u",113:"i32.and",114:"i32.or",115:"i32.xor",116:"i32.shl",117:"i32.shr_s",118:"i32.shr_u",119:"i32.rotl",120:"i32.rotr",121:"i64.clz",122:"i64.ctz",123:"i64.popcnt",124:"i64.add",125:"i64.sub",126:"i64.mul",127:"i64.div_s",128:"i64.div_u",129:"i64.rem_s",130:"i64.rem_u",131:"i64.and",132:"i64.or",133:"i64.xor",134:"i64.shl",135:"i64.shr_s",136:"i64.shr_u",137:"i64.rotl",138:"i64.rotr",139:"f32.abs",140:"f32.neg",141:"f32.ceil",142:"f32.floor",143:"f32.trunc",144:"f32.nearest",145:"f32.sqrt",146:"f32.add",147:"f32.sub",148:"f32.mul",149:"f32.div",150:"f32.min",151:"f32.max",152:"f32.copysign",153:"f64.abs",154:"f64.neg",155:"f64.ceil",156:"f64.floor",157:"f64.trunc",158:"f64.nearest",159:"f64.sqrt",160:"f64.add",161:"f64.sub",162:"f64.mul",163:"f64.div",164:"f64.min",165:"f64.max",166:"f64.copysign",167:"i32.wrap/i64",168:"i32.trunc_s/f32",169:"i32.trunc_u/f32",170:"i32.trunc_s/f64",171:"i32.trunc_u/f64",172:"i64.extend_s/i32",173:"i64.extend_u/i32",174:"i64.trunc_s/f32",175:"i64.trunc_u/f32",176:"i64.trunc_s/f64",177:"i64.trunc_u/f64",178:"f32.convert_s/i32",179:"f32.convert_u/i32",180:"f32.convert_s/i64",181:"f32.convert_u/i64",182:"f32.demote/f64",183:"f64.convert_s/i32",184:"f64.convert_u/i32",185:"f64.convert_s/i64",186:"f64.convert_u/i64",187:"f64.promote/f32",188:"i32.reinterpret/f32",189:"i64.reinterpret/f64",190:"f32.reinterpret/i32",191:"f64.reinterpret/i64"},aF=ot.SECTION_IDS={0:"custom",1:"type",2:"import",3:"function",4:"table",5:"memory",6:"global",7:"export",8:"start",9:"element",10:"code",11:"data"};ot.immediataryParsers={varuint1:r=>r.read(1)[0],varuint32:r=>Ue.unsigned.read(r),varint32:r=>Ue.signed.read(r),varint64:r=>Ue.signed.read(r),uint32:r=>[...r.read(4)],uint64:r=>[...r.read(8)],block_type:r=>{let e=r.read(1)[0];return go[e]},br_table:r=>{let e={targets:[]},t=Ue.unsigned.readBn(r).toNumber();for(let n=0;n<t;n++){let i=Ue.unsigned.readBn(r).toNumber();e.targets.push(i)}return e.defaultTarget=Ue.unsigned.readBn(r).toNumber(),e},call_indirect:r=>{let e={};return e.index=Ue.unsigned.readBn(r).toNumber(),e.reserved=r.read(1)[0],e},memory_immediate:r=>{let e={};return e.flags=Ue.unsigned.readBn(r).toNumber(),e.offset=Ue.unsigned.readBn(r).toNumber(),e}};ot.typeParsers={function:r=>Ue.unsigned.readBn(r).toNumber(),table:r=>{let e={},t=r.read(1)[0];return e.elementType=go[t],e.limits=ot.typeParsers.memory(r),e},global:r=>{let e={},t=r.read(1)[0];return e.contentType=go[t],e.mutability=r.read(1)[0],e},memory:r=>{let e={};return e.flags=Ue.unsigned.readBn(r).toNumber(),e.intial=Ue.unsigned.readBn(r).toNumber(),e.flags===1&&(e.maximum=Ue.unsigned.readBn(r).toNumber()),e},initExpr:r=>{let e=ot.parseOp(r);return r.read(1),e}};var fF=ot.sectionParsers={custom:(r,e)=>{let t={name:"custom"},n=new Kx(r.read(e.size)),i=Ue.unsigned.readBn(n).toNumber(),o=n.read(i);return t.sectionName=Buffer.from(o).toString(),t.payload=[...n.buffer],t},type:r=>{let e=Ue.unsigned.readBn(r).toNumber(),t={name:"type",entries:[]};for(let n=0;n<e;n++){let i=r.read(1)[0],o={form:go[i],params:[]},s=Ue.unsigned.readBn(r).toNumber();for(let h=0;h<s;h++){let g=r.read(1)[0];o.params.push(go[g])}Ue.unsigned.readBn(r).toNumber()&&(i=r.read(1)[0],o.return_type=go[i]),t.entries.push(o)}return t},import:r=>{let e=Ue.unsigned.readBn(r).toNumber(),t={name:"import",entries:[]};for(let n=0;n<e;n++){let i={},o=Ue.unsigned.readBn(r).toNumber();i.moduleStr=Buffer.from(r.read(o)).toString();let s=Ue.unsigned.readBn(r).toNumber();i.fieldStr=Buffer.from(r.read(s)).toString();let f=r.read(1)[0];i.kind=Hx[f],i.type=ot.typeParsers[i.kind](r),t.entries.push(i)}return t},function:r=>{let e=Ue.unsigned.readBn(r).toNumber(),t={name:"function",entries:[]};for(let n=0;n<e;n++){let i=Ue.unsigned.readBn(r).toNumber();t.entries.push(i)}return t},table:r=>{let e=Ue.unsigned.readBn(r).toNumber(),t={name:"table",entries:[]};for(let n=0;n<e;n++){let i=ot.typeParsers.table(r);t.entries.push(i)}return t},memory:r=>{let e=Ue.unsigned.readBn(r).toNumber(),t={name:"memory",entries:[]};for(let n=0;n<e;n++){let i=ot.typeParsers.memory(r);t.entries.push(i)}return t},global:r=>{let e=Ue.unsigned.readBn(r).toNumber(),t={name:"global",entries:[]};for(let n=0;n<e;n++){let i={};i.type=ot.typeParsers.global(r),i.init=ot.typeParsers.initExpr(r),t.entries.push(i)}return t},export:r=>{let e=Ue.unsigned.readBn(r).toNumber(),t={name:"export",entries:[]};for(let n=0;n<e;n++){let i=Ue.unsigned.readBn(r).toNumber(),o={};o.field_str=Buffer.from(r.read(i)).toString();let s=r.read(1)[0];o.kind=Hx[s],o.index=Ue.unsigned.readBn(r).toNumber(),t.entries.push(o)}return t},start:r=>{let e={name:"start"};return e.index=Ue.unsigned.readBn(r).toNumber(),e},element:r=>{let e=Ue.unsigned.readBn(r).toNumber(),t={name:"element",entries:[]};for(let n=0;n<e;n++){let i={elements:[]};i.index=Ue.unsigned.readBn(r).toNumber(),i.offset=ot.typeParsers.initExpr(r);let o=Ue.unsigned.readBn(r).toNumber();for(let s=0;s<o;s++){let f=Ue.unsigned.readBn(r).toNumber();i.elements.push(f)}t.entries.push(i)}return t},code:r=>{let e=Ue.unsigned.readBn(r).toNumber(),t={name:"code",entries:[]};for(let n=0;n<e;n++){let i={locals:[],code:[]},o=Ue.unsigned.readBn(r).toNumber(),s=r.bytesRead+o,f=Ue.unsigned.readBn(r).toNumber();for(let h=0;h<f;h++){let g={};g.count=Ue.unsigned.readBn(r).toNumber();let _=r.read(1)[0];g.type=go[_],i.locals.push(g)}for(;r.bytesRead<s;){let h=ot.parseOp(r);i.code.push(h)}t.entries.push(i)}return t},data:r=>{let e=Ue.unsigned.readBn(r).toNumber(),t={name:"data",entries:[]};for(let n=0;n<e;n++){let i={};i.index=Ue.unsigned.readBn(r).toNumber(),i.offset=ot.typeParsers.initExpr(r);let o=Ue.unsigned.readBn(r).toNumber();i.data=[...r.read(o)],t.entries.push(i)}return t}};ot.parseOp=r=>{let e={},t=r.read(1)[0],n=sF[t],[i,o]=n.split(".");o===void 0?o=i:e.return_type=i,e.name=o;let s=oF[o==="const"?i:o];return s&&(e.immediates=ot.immediataryParsers[s](r)),e};ot.parse=(r,e)=>{let n=[ot.parsePreramble(r)];for(;!r.end;){let i=ot.parseSectionHeader(r);n.push(fF[i.name](r,i))}return n}});var vp=V((gO,Gx)=>{global.fetch=window.fetch;Gx.exports.buffer=Cn().Buffer});var wp=V((yO,Xx)=>{var cF=vp().Buffer,Je=Bu(),Kt=Ou(),uF=Ru(),it=Xx.exports=r=>it.generate(r).buffer,yo=it.LANGUAGE_TYPES={i32:127,i64:126,f32:125,f64:124,anyFunc:112,func:96,block_type:64},Vx=it.EXTERNAL_KIND={function:0,table:1,memory:2,global:3},lF=it.SECTION_IDS={custom:0,type:1,import:2,function:3,table:4,memory:5,global:6,export:7,start:8,element:9,code:10,data:11},hF=it.OPCODES={unreachable:0,nop:1,block:2,loop:3,if:4,else:5,end:11,br:12,br_if:13,br_table:14,return:15,call:16,call_indirect:17,drop:26,select:27,get_local:32,set_local:33,tee_local:34,get_global:35,set_global:36,"i32.load":40,"i64.load":41,"f32.load":42,"f64.load":43,"i32.load8_s":44,"i32.load8_u":45,"i32.load16_s":46,"i32.load16_u":47,"i64.load8_s":48,"i64.load8_u":49,"i64.load16_s":50,"i64.load16_u":51,"i64.load32_s":52,"i64.load32_u":53,"i32.store":54,"i64.store":55,"f32.store":56,"f64.store":57,"i32.store8":58,"i32.store16":59,"i64.store8":60,"i64.store16":61,"i64.store32":62,current_memory:63,grow_memory:64,"i32.const":65,"i64.const":66,"f32.const":67,"f64.const":68,"i32.eqz":69,"i32.eq":70,"i32.ne":71,"i32.lt_s":72,"i32.lt_u":73,"i32.gt_s":74,"i32.gt_u":75,"i32.le_s":76,"i32.le_u":77,"i32.ge_s":78,"i32.ge_u":79,"i64.eqz":80,"i64.eq":81,"i64.ne":82,"i64.lt_s":83,"i64.lt_u":84,"i64.gt_s":85,"i64.gt_u":86,"i64.le_s":87,"i64.le_u":88,"i64.ge_s":89,"i64.ge_u":90,"f32.eq":91,"f32.ne":92,"f32.lt":93,"f32.gt":94,"f32.le":95,"f32.ge":96,"f64.eq":97,"f64.ne":98,"f64.lt":99,"f64.gt":100,"f64.le":101,"f64.ge":102,"i32.clz":103,"i32.ctz":104,"i32.popcnt":105,"i32.add":106,"i32.sub":107,"i32.mul":108,"i32.div_s":109,"i32.div_u":110,"i32.rem_s":111,"i32.rem_u":112,"i32.and":113,"i32.or":114,"i32.xor":115,"i32.shl":116,"i32.shr_s":117,"i32.shr_u":118,"i32.rotl":119,"i32.rotr":120,"i64.clz":121,"i64.ctz":122,"i64.popcnt":123,"i64.add":124,"i64.sub":125,"i64.mul":126,"i64.div_s":127,"i64.div_u":128,"i64.rem_s":129,"i64.rem_u":130,"i64.and":131,"i64.or":132,"i64.xor":133,"i64.shl":134,"i64.shr_s":135,"i64.shr_u":136,"i64.rotl":137,"i64.rotr":138,"f32.abs":139,"f32.neg":140,"f32.ceil":141,"f32.floor":142,"f32.trunc":143,"f32.nearest":144,"f32.sqrt":145,"f32.add":146,"f32.sub":147,"f32.mul":148,"f32.div":149,"f32.min":150,"f32.max":151,"f32.copysign":152,"f64.abs":153,"f64.neg":154,"f64.ceil":155,"f64.floor":156,"f64.trunc":157,"f64.nearest":158,"f64.sqrt":159,"f64.add":160,"f64.sub":161,"f64.mul":162,"f64.div":163,"f64.min":164,"f64.max":165,"f64.copysign":166,"i32.wrap/i64":167,"i32.trunc_s/f32":168,"i32.trunc_u/f32":169,"i32.trunc_s/f64":170,"i32.trunc_u/f64":171,"i64.extend_s/i32":172,"i64.extend_u/i32":173,"i64.trunc_s/f32":174,"i64.trunc_u/f32":175,"i64.trunc_s/f64":176,"i64.trunc_u/f64":177,"f32.convert_s/i32":178,"f32.convert_u/i32":179,"f32.convert_s/i64":180,"f32.convert_u/i64":181,"f32.demote/f64":182,"f64.convert_s/i32":183,"f64.convert_u/i32":184,"f64.convert_s/i64":185,"f64.convert_u/i64":186,"f64.promote/f32":187,"i32.reinterpret/f32":188,"i64.reinterpret/f64":189,"f32.reinterpret/i32":190,"f64.reinterpret/i64":191};it.typeGenerators={function:(r,e)=>{Je.unsigned.write(r,e)},table:(r,e)=>{e.write([yo[r.elementType]]),it.typeGenerators.memory(r.limits,e)},global:(r,e)=>{e.write([yo[r.contentType]]),e.write([r.mutability])},memory:(r,e)=>{Je.unsigned.write(Number(r.maximum!==void 0),e),Je.unsigned.write(r.intial,e),r.maximum!==void 0&&Je.unsigned.write(r.maximum,e)},initExpr:(r,e)=>{it.generateOp(r,e),it.generateOp({name:"end",type:"void"},e)}};it.immediataryGenerators={varuint1:(r,e)=>(e.write([r]),e),varuint32:(r,e)=>(Je.unsigned.write(r,e),e),varint32:(r,e)=>(Je.signed.write(r,e),e),varint64:(r,e)=>(Je.signed.write(r,e),e),uint32:(r,e)=>(e.write(r),e),uint64:(r,e)=>(e.write(r),e),block_type:(r,e)=>(e.write([yo[r]]),e),br_table:(r,e)=>{Je.unsigned.write(r.targets.length,e);for(let t of r.targets)Je.unsigned.write(t,e);return Je.unsigned.write(r.defaultTarget,e),e},call_indirect:(r,e)=>(Je.unsigned.write(r.index,e),e.write([r.reserved]),e),memory_immediate:(r,e)=>(Je.unsigned.write(r.flags,e),Je.unsigned.write(r.offset,e),e)};var Jx={type:(r,e=new Kt)=>{e.write([yo[r.form]]);let t=r.params.length;return Je.unsigned.write(t,e),t!==0&&e.write(r.params.map(n=>yo[n])),e.write([r.return_type?1:0]),r.return_type&&e.write([yo[r.return_type]]),e.buffer},import:(r,e=new Kt)=>{Je.unsigned.write(r.moduleStr.length,e),e.write(r.moduleStr),Je.unsigned.write(r.fieldStr.length,e),e.write(r.fieldStr),e.write([Vx[r.kind]]),it.typeGenerators[r.kind](r.type,e)},function:(r,e=new Kt)=>(Je.unsigned.write(r,e),e.buffer),table:it.typeGenerators.table,global:(r,e=new Kt)=>(it.typeGenerators.global(r.type,e),it.typeGenerators.initExpr(r.init,e),e),memory:it.typeGenerators.memory,export:(r,e=new Kt)=>{let t=cF.from(r.field_str),n=t.length;return Je.unsigned.write(n,e),e.write(t),e.write([Vx[r.kind]]),Je.unsigned.write(r.index,e),e},element:(r,e=new Kt)=>{Je.unsigned.write(r.index,e),it.typeGenerators.initExpr(r.offset,e),Je.unsigned.write(r.elements.length,e);for(let t of r.elements)Je.unsigned.write(t,e);return e},code:(r,e=new Kt)=>{let t=new Kt;Je.unsigned.write(r.locals.length,t);for(let n of r.locals)Je.unsigned.write(n.count,t),t.write([yo[n.type]]);for(let n of r.code)it.generateOp(n,t);return Je.unsigned.write(t.bytesWrote,e),e.write(t.buffer),e},data:(r,e=new Kt)=>(Je.unsigned.write(r.index,e),it.typeGenerators.initExpr(r.offset,e),Je.unsigned.write(r.data.length,e),e.write(r.data),e)};it.entryGenerators=Jx;it.generateSection=function(r,e=new Kt){let t=r.name,n=new Kt;if(e.write([lF[t]]),t==="custom")Je.unsigned.write(r.sectionName.length,n),n.write(r.sectionName),n.write(r.payload);else if(t==="start")Je.unsigned.write(r.index,n);else{Je.unsigned.write(r.entries.length,n);for(let i of r.entries)Jx[t](i,n)}return Je.unsigned.write(n.bytesWrote,e),e.write(n.buffer),e};it.generate=(r,e=new Kt)=>{let[t,...n]=r;it.generatePreramble(t,e);for(let i of n)it.generateSection(i,e);return e};it.generatePreramble=(r,e=new Kt)=>(e.write(r.magic),e.write(r.version),e);it.generateOp=(r,e=new Kt)=>{let t=r.name;r.return_type!==void 0&&(t=r.return_type+"."+t),e.write([hF[t]]);let n=uF[r.name==="const"?r.return_type:r.name];return n&&it.immediataryGenerators[n](r.immediates,e),e}});var Qx=V((mO,Yx)=>{var dF=Ru();Yx.exports=r=>{let e=[],t=r.split(/\s|\n/);for(;t.length;){let n=t.shift(),i={},[o,s]=n.split(".");s===void 0?s=o:i.return_type=o,i.name=s;let f=dF[i.name==="const"?i.return_type:i.name];f&&(i.immediates=pF(f,t)),e.push(i)}return e};function pF(r,e){let t={};switch(r){case"br_table":let n=[];for(;;){let i=e[0];if(isNaN(i))break;e.shift(),n.push(i)}return n;case"call_indirect":return t.index=e.shift(),t.reserved=0,t;case"memory_immediate":return t.flags=e.shift(),t.offset=e.shift(),t;default:return e.shift()}}});var e6=V((vO,Zx)=>{var lf=vp().Buffer,Pu=Bu().unsigned,gF=bp(),xp=Ou(),yF=["custom","type","import","function","table","memory","global","export","start","element","code","data"];Zx.exports=class{constructor(e){this._wasm=e,this._sections=[],this._modified=!1}get wasm(){return this._modified&&(this._wasm=lf.concat(this._sections.concat(this._pipe.buffer)),this._modified=!1),this._wasm}*[Symbol.iterator](){for(this._pipe=new xp(this._wasm),this._sections=[this._pipe.read(8)];!this._pipe.end;){let e=this._pipe.bytesRead,t=this._pipe.read(1)[0],n=Number(Pu.read(this._pipe)),i=this._pipe.read(n),o=this._pipe.bytesRead,s=this._wasm.slice(e,o),f=this._sections.push(s)-1;yield new _p(t,i,this,f)}}_update(e,t){this._modified=!0,this._sections[e]=t}};var _p=class{constructor(e,t,n,i){this._it=n,this._index=i,this.type=yF[e],this._type=e,this._section=t;let o=new xp(t);this.type!=="custom"&&(this.count=Number(Pu.read(o))),this._body=o.buffer}toJSON(){return gF.sectionParsers[this.type](new xp(this._section))}appendEntries(e){this.count+=e.length,this._body=lf.concat([this._body].concat(e));let t=lf.concat([Pu.encode(this.count),this._body]);this._it._update(this._index,lf.concat([lf.from([this._type]),Pu.encode(t.length),t]))}}});var t6=V(hf=>{hf.wasm2json=bp();hf.json2wasm=wp();hf.text2json=Qx();hf.Iterator=e6()});var r6=V((xO,mF)=>{mF.exports={start:0,type:{params:{DEFAULT:0},return_type:{DEFAULT:0}},import:0,code:{locals:{DEFAULT:1},code:{get_local:120,set_local:120,tee_local:120,get_global:120,set_global:120,load8_s:120,load8_u:120,load16_s:120,load16_u:120,load32_s:120,load32_u:120,load:120,store8:120,store16:120,store32:120,store:120,grow_memory:1e4,current_memory:100,nop:1,block:1,loop:1,if:1,then:90,else:90,br:90,br_if:90,br_table:120,return:90,call:90,call_indirect:1e4,const:1,add:45,sub:45,mul:45,div_s:36e3,div_u:36e3,rem_s:36e3,rem_u:36e3,and:45,or:45,xor:45,shl:67,shr_u:67,shr_s:67,rotl:90,rotr:90,eq:45,eqz:45,ne:45,lt_s:45,lt_u:45,le_s:45,le_u:45,gt_s:45,gt_u:45,ge_s:45,ge_u:45,clz:45,ctz:45,popcnt:45,drop:120,select:120,unreachable:1}},data:0}});var i6=V(Nu=>{var Sp=t6(),bF=Sp.text2json,n6=wp().SECTION_IDS,vF=r6();function Ts(r,e={},t=0){let n=0;if(t=e.DEFAULT!==void 0?e.DEFAULT:0,Array.isArray(r))r.forEach(i=>{n+=Ts(i,e)});else if(typeof r=="object")for(let i in r){let o=e[i];o&&(n+=Ts(r[i],o,t))}else e[r]===void 0?n=t:n=e[r];return n}function wF(r,e,t,n,i){function o(I,x){return bF(`${n}.const ${I} call ${x}`)}function s(I,x){I.name==="call"&&I.immediates>=x&&(I.immediates=(++I.immediates).toString())}function f(){return o(0,0).reduce((x,C)=>x+Ts(C.name,e.code),0)}let h=new Set(["grow_memory","end","br","br_table","br_if","if","else","return","loop"]),g=f(),_=r.code.slice(),T=[];for(i+=Ts(r.locals,e.local);_.length;){let I=0;for(;;){let x=_[I++];if(s(x,t),i+=Ts(x.name,e.code),h.has(x.name))break}i!==0&&(i+=g,T=T.concat(o(i,t))),T=T.concat(_.slice(0,I)),_=_.slice(I),i=0}return r.code=T,r}Nu.meterJSON=(r,e)=>{function t(x,C){return x.find(j=>j.name===C)}function n(x,C){let j=n6[C];for(let H in x){let z=x[H],X=n6[z.name];if(X&&j<X){x.splice(H,0,{name:C,entries:[]});return}}}let i=0,o,s,{costTable:f,moduleStr:h,fieldStr:g,meterType:_}=e;f||(f=vF),h||(h="metering"),g||(g="usegas"),_||(_="i32"),t(r,"type")||n(r,"type"),t(r,"import")||n(r,"import");let T={moduleStr:h,fieldStr:g,kind:"function"},I={form:"func",params:[_]};r=r.slice(0);for(let x of r)switch(x=Object.assign(x),x.name){case"type":T.type=x.entries.push(I)-1,s=x;break;case"function":o=x;break;case"import":for(let C of x.entries){if(C.moduleStr===h&&C.fieldStr===g)throw new Error("importing metering function is not allowed");C.kind==="function"&&i++}x.entries.push(T);break;case"export":for(let C of x.entries)C.kind==="function"&&C.index>=i&&C.index++;break;case"element":for(let C of x.entries)C.elements=C.elements.map(j=>j>=i?++j:j);break;case"start":x.index>=i&&x.index++;break;case"code":for(let C in x.entries){let j=x.entries[C],H=o.entries[C],z=s.entries[H],X=Ts(z,f.type);wF(j,f.code,i,_,X)}break}return r};Nu.meterWASM=(r,e={})=>{let t=Sp.wasm2json(r);return t=Nu.meterJSON(t,e),Sp.json2wasm(t)}});var o6=V(()=>{});var a6=V(()=>{});var f6=V(()=>{});var YF={};$6(YF,{AbstractContractHandler:()=>co,ArweaveGatewayInteractionsLoader:()=>vo,ArweaveWrapper:()=>kr,Benchmark:()=>et,CacheKey:()=>Ei,CacheableInteractionsLoader:()=>Cs,CacheableStateEvaluator:()=>of,ConsoleLogger:()=>js,ConsoleLoggerFactory:()=>$s,ContractCallRecord:()=>mo,ContractDefinitionLoader:()=>_o,ContractError:()=>Nr,ContractMetadata:()=>Dp,DEFAULT_LEVEL_DB_LOCATION:()=>R6,DefaultCreateContract:()=>pf,DefaultEvaluationOptions:()=>ua,DefaultStateEvaluator:()=>tf,EvalStateResult:()=>Ft,EvaluationOptionsEvaluator:()=>yf,HandlerBasedContract:()=>bo,HandlerExecutorFactory:()=>uf,InnerWritesEvaluator:()=>gf,InteractionCall:()=>Ms,InteractionInput:()=>ku,InteractionOutput:()=>Ep,JsHandlerApi:()=>Fs,LevelDbCache:()=>ji,LexicographicalInteractionsSorter:()=>ao,LogLevelOrder:()=>qp,LoggerFactory:()=>Ee,MemCache:()=>$i,PstContractImpl:()=>mf,Signature:()=>Tn,SmartWeaveError:()=>za,SmartWeaveErrorType:()=>ld,SmartWeaveGlobal:()=>ff,SmartWeaveTags:()=>C1,SortKeyCacheResult:()=>Mn,SourceImpl:()=>df,SourceType:()=>ox,TagsParser:()=>kt,WARP_GW_URL:()=>rn,Warp:()=>So,WarpBuilder:()=>Ef,WarpFactory:()=>kp,WarpGatewayContractDefinitionLoader:()=>Sf,WarpGatewayInteractionsLoader:()=>rf,WasmHandlerApi:()=>cf,WasmSrc:()=>xo,arrayToHex:()=>Gd,asc:()=>C7,ascS:()=>B7,bufToBn:()=>bd,bundledTxsFilter:()=>Tp,canBeCached:()=>ef,createDummyTx:()=>Ap,createInteractionTx:()=>Lu,deepCopy:()=>Yn,defaultCacheOptions:()=>Rs,defaultWarpGwOptions:()=>zu,desc:()=>O7,descS:()=>R7,emptyTransfer:()=>si,genesisSortKey:()=>nf,indent:()=>Cr,isBrowser:()=>ds,isomorphicRandomUUID:()=>vd,knownWarpPlugins:()=>Np,lastPossibleKey:()=>UA,lvlToOrder:()=>Af,mapReplacer:()=>M7,mapReviver:()=>I7,normalizeContractSource:()=>cp,sleep:()=>Ga,sortingFirst:()=>sx,sortingLast:()=>Jd,stripTrailingSlash:()=>Va,timeout:()=>md});var qp={silly:0,trace:1,debug:2,info:3,warn:4,error:5,fatal:6,none:7};function Af(r){return qp[r]}var js=class{constructor(e,t){this.moduleName=e;this.settings=t}trace(e,...t){this.shouldLog("trace")&&console.debug(this.message("trace",e),t)}error(e,...t){this.shouldLog("error")&&console.error(this.message("error",e),t)}info(e,...t){this.shouldLog("info")&&console.info(this.message("info",e),t)}silly(e,...t){this.shouldLog("silly")&&console.debug(this.message("silly",e),t)}debug(e,...t){this.shouldLog("debug")&&console.debug(this.message("debug",e),t)}warn(e,...t){this.shouldLog("warn")&&console.warn(this.message("warn",e),t)}log(e,...t){this.shouldLog("info")&&console.info(this.message("info",e),t)}fatal(e,...t){this.shouldLog("fatal")&&console.error(this.message("fatal",e),t)}shouldLog(e){return Af(e)>=Af(this.settings.minLevel)}setSettings(e){this.settings=e}message(e,t){return`${new Date().toISOString()} ${e.toUpperCase()} [${this.moduleName}] ${t}`}};var $s=class{registeredLoggers={};registeredOptions={};defOptions={minLevel:"info"};constructor(){this.setOptions=this.setOptions.bind(this),this.getOptions=this.getOptions.bind(this),this.create=this.create.bind(this),this.logLevel=this.logLevel.bind(this)}setOptions(e,t){t?this.registeredLoggers[t]?this.registeredLoggers[t].setSettings({...this.registeredLoggers[t].settings,...e}):this.registeredOptions[t]={...this.defOptions,...e}:(this.defOptions=e,Object.keys(this.registeredLoggers).forEach(n=>{this.registeredLoggers[n].setSettings({...this.registeredLoggers[n].settings,...e})}))}getOptions(e){return e?this.registeredLoggers[e]?this.registeredLoggers[e].settings:this.registeredOptions[e]?this.registeredOptions[e]:this.defOptions:this.defOptions}logLevel(e,t){this.setOptions({minLevel:e},t)}create(e="SWC"){return Object.prototype.hasOwnProperty.call(this.registeredLoggers,e)||(this.registeredLoggers[e]=new js(e,this.getOptions(e))),this.registeredLoggers[e]}};var Si=class{constructor(){}setOptions(e,t){Si.INST.setOptions(e,t)}getOptions(e){return Si.INST.getOptions(e)}logLevel(e,t){Si.INST.logLevel(e,t)}create(e){return Si.INST.create(e)}static use(e){Si.INST=e}},Ee=Si;qs(Ee,"INST",new $s);var et=class{static measure(){return new et}constructor(){}start=Date.now();end=null;reset(){this.start=Date.now(),this.end=null}stop(){this.end=Date.now()}elapsed(e=!1){this.end===null&&(this.end=Date.now());let t=this.end-this.start;return e?t:`${(this.end-this.start).toFixed(0)}ms`}};var Ei=class{constructor(e,t){this.contractTxId=e;this.sortKey=t}},Mn=class{constructor(e,t){this.sortKey=e;this.cachedValue=t}};var M1=ct(v1()),I1=ct(T1());var ji=class{constructor(e){this.cacheOptions=e}logger=Ee.INST.create("LevelDbCache");_db;get db(){if(!this._db)if(this.cacheOptions.inMemory)this._db=new I1.MemoryLevel({valueEncoding:"json"});else{if(!this.cacheOptions.dbLocation)throw new Error("LevelDb cache configuration error - no db location specified");let e=this.cacheOptions.dbLocation;this.logger.info(`Using location ${e}`),this._db=new M1.Level(e,{valueEncoding:"json"})}return this._db}async get(e,t,n){let i=this.db.sublevel(e,{valueEncoding:"json"});await i.open();try{let o=await i.get(t);return{sortKey:t,cachedValue:o}}catch(o){if(o.code=="LEVEL_NOT_FOUND")return null;throw o}}async getLast(e){let t=this.db.sublevel(e,{valueEncoding:"json"});await t.open();let n=await t.keys({reverse:!0,limit:1}).all();return n.length?{sortKey:n[0],cachedValue:await t.get(n[0])}:null}async getLessOrEqual(e,t){let n=this.db.sublevel(e,{valueEncoding:"json"});await n.open();let i=await n.keys({reverse:!0,lte:t,limit:1}).all();return i.length?{sortKey:i[0],cachedValue:await n.get(i[0])}:null}async put(e,t){let n=this.db.sublevel(e.contractTxId,{valueEncoding:"json"});await n.open(),await n.put(e.sortKey,t)}async delete(e){let t=this.db.sublevel(e,{valueEncoding:"json"});await t.open(),await t.clear()}close(){return this.db.close()}async dump(){return await this.db.iterator().all()}async getLastSortKey(){let e="";await this.db.open();let t=await this.db.keys().all();for(let n of t){let i=n.substring(45);i.localeCompare(e)>0&&(e=i)}return e==""?null:e}async allContracts(){await this.db.open();let e=await this.db.keys().all(),t=new Set;return e.forEach(n=>t.add(n.substring(1,44))),Array.from(t)}storage(){return this.db}async getNumEntries(){return(await this.db.keys().all()).length}async prune(e=5){(!e||e<=0)&&(e=1);let t=await this.allContracts();for(let n=0;n<t.length;n++){let i=this.db.sublevel(t[n],{valueEncoding:"json"});await i.open();let o=await i.keys({reverse:!0,limit:e}).all();!o||o.length<e||(await i.clear({lt:o[o.length-1]}),await i.close())}return null}};var $i=class{storage={};clearAll(){Object.keys(this.storage).forEach(e=>{delete this.storage[e]})}contains(e){return Object.prototype.hasOwnProperty.call(this.storage,e)}get(e){return this.storage[e]}put(e,t){this.storage[e]=t}remove(e){delete this.storage[e]}};var Ft=class{constructor(e,t,n){this.state=e;this.validity=t;this.errorMessages=n}},ua=class{ignoreExceptions=!0;waitForConfirmation=!1;updateCacheForEachInteraction=!1;internalWrites=!1;maxCallDepth=7;maxInteractionEvaluationTimeSeconds=60;stackTrace={saveState:!1};sequencerUrl="https://d1o5nlqr4okus2.cloudfront.net/";gasLimit=Number.MAX_SAFE_INTEGER;useVM2=!1;unsafeClient="throw";allowBigInt=!1;walletBalanceUrl="http://nyc-1.dev.arweave.net:1984/";mineArLocalBlocks=!0;throwOnInternalWriteError=!0;cacheEveryNInteractions=-1};var C1=(X=>(X.APP_NAME="App-Name",X.APP_VERSION="App-Version",X.CONTRACT_TX_ID="Contract",X.INPUT="Input",X.CONTENT_TYPE="Content-Type",X.CONTRACT_SRC_TX_ID="Contract-Src",X.SDK="SDK",X.MIN_FEE="Min-Fee",X.INIT_STATE="Init-State",X.INIT_STATE_TX="Init-State-TX",X.INTERACT_WRITE="Interact-Write",X.WASM_LANG="Wasm-Lang",X.WASM_LANG_VERSION="Wasm-Lang-Version",X.WASM_META="Wasm-Meta",X.REQUEST_VRF="Request-Vrf",X.SIGNATURE_TYPE="Signature-Type",X.WARP_TESTNET="Warp-Testnet",X.MANIFEST="Contract-Manifest",X))(C1||{});var P6=ct(T0()),N6=ct(ls()),Lp=ct(eo());var Ku=ct(T0());var ou=class{constructor(e,t,n){this.arweave=e;this.baseImplementation=t;this.cache=n}logger=Ee.INST.create("CacheableExecutorFactory");async create(e,t,n){return await this.baseImplementation.create(e,t,n)}};var ld=(e=>(e.CONTRACT_NOT_FOUND="CONTRACT_NOT_FOUND",e))(ld||{}),za=class extends Error{type;otherInfo;constructor(e,t={}){t.message?super(t.message):super(),this.type=e,this.otherInfo=t}getType(){return this.type}};function zE(r){if(!r)return!1;let e=uw(r);return r.evolve!==void 0||e.has("evolve")}var Xn=class{logger=Ee.INST.create("Evolve");constructor(){this.modify=this.modify.bind(this)}async modify(e,t){let{definitionLoader:n,executorFactory:i}=t.warp,o=t.contractDefinition.txId,s=Xn.evolvedSrcTxId(e),f=t.contractDefinition.srcTxId;if(s&&f!==s)try{this.logger.info("Evolving to: ",s);let h=await n.load(o,s),g=await i.create(h,t.evaluationOptions,t.warp);return t.contractDefinition=h,t.handler=g,t.handler.initState(e),this.logger.debug("evolved to:",{evolve:s,newSrcTxId:t.contractDefinition.srcTxId,currentSrcTxId:f,contract:t.contractDefinition.txId}),t}catch(h){throw h.name==="ContractError"&&h.subtype==="unsafeClientSkip"?h:new za("CONTRACT_NOT_FOUND",{message:`Error while evolving ${o} from ${f} to ${s}: ${h}`,requestedTxId:o})}return t}static evolvedSrcTxId(e){if(!zE(e))return;let t=uw(e),n=e.evolve||t.get("evolve"),i=e.canEvolve||t.get("canEvolve");if(i==null&&(i=!0),n&&/[a-z0-9_-]{43}/i.test(n)&&i)return n}};function uw(r){let e=new Map;return r.settings&&(GE(r.settings)?e=new Map(r.settings):VE(r.settings)&&(e=new Map(Object.entries(r.settings)))),e}function GE(r){return r==null?!1:typeof r[Symbol.iterator]=="function"}function VE(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}var JE=Function.prototype.toString,hd=Object.create,XE=Object.prototype.toString,YE=function(){function r(){this._keys=[],this._values=[]}return r.prototype.has=function(e){return!!~this._keys.indexOf(e)},r.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},r.prototype.set=function(e,t){this._keys.push(e),this._values.push(t)},r}();function QE(){return new YE}function ZE(){return new WeakMap}var e7=typeof WeakMap<"u"?ZE:QE;function pd(r){if(!r)return hd(null);var e=r.constructor;if(e===Object)return r===Object.prototype?{}:hd(r);if(~JE.call(e).indexOf("[native code]"))try{return new e}catch{}return hd(r)}function t7(r){var e="";return r.global&&(e+="g"),r.ignoreCase&&(e+="i"),r.multiline&&(e+="m"),r.unicode&&(e+="u"),r.sticky&&(e+="y"),e}function r7(r){return r.flags}var n7=/test/g.flags==="g"?r7:t7;function lw(r){var e=XE.call(r);return e.substring(8,e.length-1)}function i7(r){return r[Symbol.toStringTag]||lw(r)}var o7=typeof Symbol<"u"?i7:lw,s7=Object.defineProperty,a7=Object.getOwnPropertyDescriptor,hw=Object.getOwnPropertyNames,gd=Object.getOwnPropertySymbols,dw=Object.prototype,pw=dw.hasOwnProperty,f7=dw.propertyIsEnumerable,gw=typeof gd=="function";function c7(r){return hw(r).concat(gd(r))}var u7=gw?c7:hw;function au(r,e,t){for(var n=u7(r),i=0,o=n.length,s=void 0,f=void 0;i<o;++i)if(s=n[i],!(s==="callee"||s==="caller")){if(f=a7(r,s),!f){e[s]=t.copier(r[s],t);continue}!f.get&&!f.set&&(f.value=t.copier(f.value,t));try{s7(e,s,f)}catch{e[s]=f.value}}return e}function l7(r,e){var t=new e.Constructor;e.cache.set(r,t);for(var n=0,i=r.length;n<i;++n)t[n]=e.copier(r[n],e);return t}function h7(r,e){var t=new e.Constructor;return e.cache.set(r,t),au(r,t,e)}function yw(r,e){return r.slice(0)}function d7(r,e){return r.slice(0,r.size,r.type)}function p7(r,e){return new e.Constructor(yw(r.buffer))}function g7(r,e){return new e.Constructor(r.getTime())}function mw(r,e){var t=new e.Constructor;return e.cache.set(r,t),r.forEach(function(n,i){t.set(i,e.copier(n,e))}),t}function y7(r,e){return au(r,mw(r,e),e)}function m7(r,e){var t=pd(e.prototype);e.cache.set(r,t);for(var n in r)pw.call(r,n)&&(t[n]=e.copier(r[n],e));return t}function b7(r,e){var t=pd(e.prototype);e.cache.set(r,t);for(var n in r)pw.call(r,n)&&(t[n]=e.copier(r[n],e));for(var i=gd(r),o=0,s=i.length,f=void 0;o<s;++o)f=i[o],f7.call(r,f)&&(t[f]=e.copier(r[f],e));return t}var v7=gw?b7:m7;function w7(r,e){var t=pd(e.prototype);return e.cache.set(r,t),au(r,t,e)}function dd(r,e){return new e.Constructor(r.valueOf())}function x7(r,e){var t=new e.Constructor(r.source,n7(r));return t.lastIndex=r.lastIndex,t}function su(r,e){return r}function bw(r,e){var t=new e.Constructor;return e.cache.set(r,t),r.forEach(function(n){t.add(e.copier(n,e))}),t}function _7(r,e){return au(r,bw(r,e),e)}var S7=Array.isArray,yd=Object.assign,E7=Object.getPrototypeOf,vw={array:l7,arrayBuffer:yw,blob:d7,dataView:p7,date:g7,error:su,map:mw,object:v7,regExp:x7,set:bw},A7=yd({},vw,{array:h7,map:y7,object:w7,set:_7});function F7(r){return{Arguments:r.object,Array:r.array,ArrayBuffer:r.arrayBuffer,Blob:r.blob,Boolean:dd,DataView:r.dataView,Date:r.date,Error:r.error,Float32Array:r.arrayBuffer,Float64Array:r.arrayBuffer,Int8Array:r.arrayBuffer,Int16Array:r.arrayBuffer,Int32Array:r.arrayBuffer,Map:r.map,Number:dd,Object:r.object,Promise:su,RegExp:r.regExp,Set:r.set,String:dd,WeakMap:su,WeakSet:su,Uint8Array:r.arrayBuffer,Uint8ClampedArray:r.arrayBuffer,Uint16Array:r.arrayBuffer,Uint32Array:r.arrayBuffer,Uint64Array:r.arrayBuffer}}function ww(r){var e=yd({},vw,r),t=F7(e),n=t.Array,i=t.Object;function o(s,f){if(f.prototype=f.Constructor=void 0,!s||typeof s!="object")return s;if(f.cache.has(s))return f.cache.get(s);if(f.prototype=s.__proto__||E7(s),f.Constructor=f.prototype&&f.prototype.constructor,!f.Constructor||f.Constructor===Object)return i(s,f);if(S7(s))return n(s,f);var h=t[o7(s)];return h?h(s,f):typeof s.then=="function"?s:i(s,f)}return function(f){return o(f,{Constructor:void 0,cache:e7(),copier:o,prototype:void 0})}}function T7(r){return ww(yd({},A7,r))}var sC=T7({}),xw=ww({});var _w=ct(Pa()),Ga=r=>new Promise(e=>setTimeout(e,r)),Yn=r=>xw(r),M7=(r,e)=>e instanceof Map?{dataType:"Map",value:Array.from(e.entries())}:e,I7=(r,e)=>typeof e=="object"&&e!==null&&e.dataType==="Map"?new Map(e.value):e,C7=(r,e)=>r-e,B7=(r,e)=>+r-+e,O7=(r,e)=>e-r,R7=(r,e)=>+e-+r;function md(r){let e=null,t=new Promise((n,i)=>{e=setTimeout(()=>{clearTimeout(e),i("timeout")},r*1e3)});return{timeoutId:e,timeoutPromise:t}}function Va(r){return r.endsWith("/")?r.slice(0,-1):r}function Cr(r){return`[d:${r}]`.padEnd(r*2,"-").concat("> ")}function bd(r){let e=[];return Uint8Array.from(r).forEach(function(n){let i=n.toString(16);i.length%2&&(i="0"+i),e.push(i)}),BigInt("0x"+e.join(""))}function vd(){return ds()&&self.crypto?self.crypto.randomUUID():(0,_w.randomUUID)()}var ds=new Function("try {return this===window;}catch(e){ return false;}");var nx=ct(zd()),ix=ct(Eu());function ef(r){return r.confirmationStatus===void 0?!0:r.confirmationStatus==="confirmed"}var kt=class{logger=Ee.INST.create("TagsParser");getInputTag(e,t){if(kt.hasMultipleInteractions(e)){this.logger.debug("Interaction transaction is using multiple input tx tag format.");let n=e.tags.findIndex(o=>o.name==="Contract"&&o.value===t);if(e.tags.length-1===n){this.logger.warn("Wrong tags format: 'Contract' is the last tag");return}let i=e.tags[n+1];if(i.name!=="Input"){this.logger.warn(`No 'Input' tag found after 'Contract' tag. Instead ${i.name} was found`);return}return i}else return e.tags.find(n=>n.name==="Input")}isInteractWrite(e,t){return e.tags.some(n=>n.name==="Interact-Write"&&n.value===t)}getInteractWritesContracts(e){return e.tags.filter(t=>t.name==="Interact-Write").map(t=>t.value)}getContractTag(e){return e.tags.find(t=>t.name==="Contract")?.value}getContractsWithInputs(e){let t=new Map;return e.tags.filter(i=>i.name==="Contract").forEach(i=>{t.set(i.value,this.getInputTag(e,i.value))}),t}isEvmSigned(e){return e.tags.some(t=>t.name==="Signature-Type"&&t.value==="ethereum")}static hasMultipleInteractions(e){return e.tags.filter(t=>t.name==="Contract").length>1}decodeTags(e){let t=e.get("tags"),n=[];for(let i of t)try{let o=i.get("name",{decode:!0,string:!0}),s=i.get("value",{decode:!0,string:!0});n.push({name:o,value:s})}catch{}return n}getTag(e,t){let n=e.get("tags");for(let i of n)try{if(i.get("name",{decode:!0,string:!0})===t)return i.get("value",{decode:!0,string:!0})}catch{}return!1}};var kA=new ix.default.ec("secp256k1"),tf=class{constructor(e,t=[]){this.arweave=e;this.executionContextModifiers=t}logger=Ee.INST.create("DefaultStateEvaluator");tagsParser=new kt;async eval(e,t){return this.doReadState(e.sortedInteractions,new Ft(e.contractDefinition.initState,{},{}),e,t)}async doReadState(e,t,n,i){let{ignoreExceptions:o,stackTrace:s,internalWrites:f,cacheEveryNInteractions:h}=n.evaluationOptions,{contract:g,contractDefinition:_,sortedInteractions:T,warp:I}=n,x=t.state,C=null,j=t.validity,H=t.errorMessages;n?.handler.initState(x);let z=n.contract.callDepth();this.logger.debug(`${Cr(z)}Evaluating state for ${_.txId} [${e.length} non-cached of ${T.length} all]`);let X=null,Y=null,se=e.length;n.handler.initState(x);let G=I.hasPlugin("evm-signature-verification")?I.loadPlugin("evm-signature-verification"):null,q=I.hasPlugin("evaluation-progress")?I.loadPlugin("evaluation-progress"):null,J=!1;for(let W=0;W<se&&!J;W++){let R=e[W],l=et.measure();if(C=R.sortKey,R.vrf&&!this.verifyVrf(R.vrf,R.sortKey,this.arweave))throw new Error("Vrf verification failed.");if(G&&this.tagsParser.isEvmSigned(R))try{if(!await G.process(R)){this.logger.warn(`Interaction ${R.id} was not verified, skipping.`);continue}}catch(d){this.logger.error(d);continue}if(this.logger.debug(`${Cr(z)}[${_.txId}][${R.id}][${R.block.height}]: ${e.indexOf(R)+1}/${e.length} [of all:${T.length}]`),this.tagsParser.isInteractWrite(R,_.txId)&&f){let d=this.tagsParser.getContractTag(R);this.logger.debug(`${Cr(z)}Internal Write - Loading writing contract`,d);let a=g.getCallStack().addInteractionData({interaction:null,interactionTx:R,currentTx:i}),u=n.warp.contract(d,n.contract,{callingInteraction:R,callType:"read"});await this.onContractCall(R,n,new Ft(x,j,H)),this.logger.debug(`${Cr(z)}Reading state of the calling contract at`,R.sortKey);let v=null;try{await u.readState(R.sortKey,[...i||[],{contractTxId:_.txId,interactionTxId:R.id}]),v=await this.internalWriteState(_.txId,R.sortKey)}catch(E){if(E.name=="ContractError"&&E.subtype=="unsafeClientSkip"){if(this.logger.warn("Skipping unsafe contract in internal write"),H[R.id]=E,ef(R)){let p=new Ft(x,j,H);Y={tx:R,state:p}}}else throw E}if(v!==null){x=v.cachedValue.state,n?.handler.initState(x),j[R.id]=v.cachedValue.validity[R.id],v.cachedValue.errorMessages?.[R.id]&&(H[R.id]=v.cachedValue.errorMessages[R.id]);let E=new Ft(x,j,H);await this.onStateUpdate(R,n,E),ef(R)&&(Y={tx:R,state:E})}else j[R.id]=!1;a.update({cacheHit:!1,outputState:s.saveState?x:void 0,executionTime:l.elapsed(!0),valid:j[R.id],errorMessage:X,gasUsed:0})}else{let d=this.tagsParser.getInputTag(R,n.contractDefinition.txId);if(!d){this.logger.error(`${Cr(z)}Skipping tx - Input tag not found for ${R.id}`);continue}let a=this.parseInput(d);if(!a){this.logger.error(`${Cr(z)}Skipping tx - invalid Input tag - ${R.id}`);continue}let u={input:a,caller:R.owner.address},v={interaction:u,interactionTx:R,currentTx:i},E=g.getCallStack().addInteractionData(v),p=await n.handler.handle(n,new Ft(x,j,H),v);if(X=p.errorMessage,p.type!=="ok"&&(H[R.id]=X),this.logResult(p,R,n),this.logger.debug(`${Cr(z)}Interaction evaluation`,l.elapsed()),E.update({cacheHit:!1,outputState:s.saveState?x:void 0,executionTime:l.elapsed(!0),valid:j[R.id],errorMessage:X,gasUsed:p.gasUsed}),p.type==="exception"&&o!==!0)throw new Error(`Exception while processing ${JSON.stringify(u)}:
${p.errorMessage}`);j[R.id]=p.type==="ok",x=p.state;let c=new Ft(x,j,H);ef(R)&&(Y={tx:R,state:c}),await this.onStateUpdate(R,n,c,h%W==0)}q&&q.process({contractTxId:_.txId,allInteractions:se,currentInteraction:W,lastInteractionProcessingTime:l.elapsed()});try{for(let{modify:d}of this.executionContextModifiers)n=await d(x,n)}catch(d){if(d.name=="ContractError"&&d.subtype=="unsafeClientSkip")j[R.id]=!1,H[R.id]=d.message,J=!0;else throw d}}let Q=new Ft(x,j,H);return Y!==null&&await this.onStateEvaluated(Y.tx,n,Y.state),new Mn(C,Q)}verifyVrf(e,t,n){let i=kA.keyFromPublic(e.pubkey,"hex"),o;try{o=(0,nx.ProofHoHash)(i.getPublic(),n.utils.stringToBuffer(t),n.utils.b64UrlToBuffer(e.proof))}catch{return!1}return n.utils.bufferTob64Url(o)==e.index}logResult(e,t,n){e.type==="exception"&&this.logger.error(`Executing of interaction: [${n.contractDefinition.txId} -> ${t.id}] threw exception:`,`${e.errorMessage}`),e.type==="error"&&this.logger.warn(`Executing of interaction: [${n.contractDefinition.txId} -> ${t.id}] returned error:`,e.errorMessage)}parseInput(e){try{return JSON.parse(e.value)}catch(t){return this.logger.error(t),null}}};function Gd(r){let e="";for(let t of r)e+=("0"+t.toString(16)).slice(-2);return e}var oB=ct(eo());var ox=(t=>(t.ARWEAVE="arweave",t.WARP_SEQUENCER="redstone-sequencer",t))(ox||{}),rf=class{constructor(e,t=null,n=null){this.baseUrl=e;this.confirmationStatus=t;this.source=n;this.baseUrl=Va(e),Object.assign(this,t),this.source=n}logger=Ee.INST.create("WarpGatewayInteractionsLoader");async load(e,t,n,i){this.logger.debug("Loading interactions: for ",{contractId:e,fromSortKey:t,toSortKey:n});let o=[],s=0,f=0,h=0,g=et.measure();do{let _=et.measure(),T=`${this.baseUrl}/gateway/v2/interactions-sort-key`,I=await fetch(`${T}?${new URLSearchParams({contractId:e,...t?{from:t}:"",...n?{to:n}:"",page:(++s).toString(),fromSdk:"true",...this.confirmationStatus&&this.confirmationStatus.confirmed?{confirmationStatus:"confirmed"}:"",...this.confirmationStatus&&this.confirmationStatus.notCorrupted?{confirmationStatus:"not_corrupted"}:"",...this.source?{source:this.source}:""})}`).then(x=>x.ok?x.json():Promise.reject(x)).catch(x=>{throw x.body?.message&&this.logger.error(x.body.message),new Error(`Unable to retrieve transactions. Warp gateway responded with status ${x.status}.`)});this.logger.debug(`Loading interactions: page ${s} loaded in ${_.elapsed()}`),o.push(...I.interactions),f=I.paging.limit,h=I.paging.items,this.logger.debug(`Loaded interactions length: ${o.length}, from: ${t}, to: ${n}`)}while(h==f);return this.logger.debug("All loaded interactions:",{from:t,to:n,loaded:o.length,time:g.elapsed()}),o}type(){return"warp"}clearCache(){}};var LA="".padEnd(13,"0"),Vd="".padEnd(13,"9"),DA="".padEnd(13,"0"),sx="".padEnd(64,"0"),Jd="".padEnd(64,"z"),nf=`${"".padStart(12,"0")},${LA},${sx}`,UA=`${"".padStart(12,"9")},${Vd},${Jd}`,ao=class{constructor(e){this.arweave=e}logger=Ee.INST.create("LexicographicalInteractionsSorter");async sort(e){let t=[...e],n=t.map(i=>this.addSortKey(i));return await Promise.all(n),t.sort((i,o)=>i.node.sortKey.localeCompare(o.node.sortKey))}async createSortKey(e,t,n,i=!1){let o=this.arweave.utils.b64UrlToBuffer(e),s=this.arweave.utils.b64UrlToBuffer(t),f=this.arweave.utils.concatBuffers([o,s]),h=Gd(await this.arweave.crypto.hash(f));return`${`${n}`.padStart(12,"0")},${i?Vd:DA},${h}`}extractBlockHeight(e){return e?parseInt(e.split(",")[0]):null}async addSortKey(e){let{node:t}=e;e.node.sortKey!==void 0&&e.node.source=="redstone-sequencer"?this.logger.debug("Using sortKey from sequencer",e.node.sortKey):e.node.sortKey=await this.createSortKey(t.block.id,t.id,t.block.height)}generateLastSortKey(e){return`${`${e}`.padStart(12,"0")},${Vd},${Jd}`}};var of=class extends tf{constructor(t,n,i=[]){super(t,i);this.cache=n}cLogger=Ee.INST.create("CacheableStateEvaluator");async eval(t,n){let i=t.cachedState;if(i&&i.sortKey==t.requestedSortKey)return this.cLogger.info(`Exact cache hit for sortKey ${t?.contractDefinition?.txId}:${i.sortKey}`),t.handler?.initState(i.cachedValue.state),i;let o=t.sortedInteractions,s=t.contractDefinition.txId;if(!s)throw new Error("Contract tx id not set in the execution context");for(let _ of n||[])if(_.contractTxId===t.contractDefinition.txId){let T=o.findIndex(I=>I.id===_.interactionTxId);T!==-1&&(this.cLogger.debug("Inf. Loop fix - removing interaction",{height:o[T].block.height,contractTxId:_.contractTxId,interactionTxId:_.interactionTxId,sortKey:o[T].sortKey}),o.splice(T))}if(o.length==0){if(this.cLogger.info(`No missing interactions ${s}`),i)return t.handler?.initState(i.cachedValue.state),i;{t.handler?.initState(t.contractDefinition.initState),this.cLogger.debug("Inserting initial state into cache");let _=new Ft(t.contractDefinition.initState,{},{});return await this.cache.put(new Ei(s,nf),_),new Mn(nf,_)}}let f=i==null?t.contractDefinition.initState:i.cachedValue.state,h=i==null?{}:i.cachedValue.validity,g=i==null?{}:i.cachedValue.errorMessages;return this.cLogger.debug("Base state",f),t.handler==null?new Mn(i==null?nf:i.sortKey,new Ft(f,h,g||{})):await this.doReadState(o,new Ft(f,h,g||{}),t,n)}async onStateEvaluated(t,n,i){let o=n.contractDefinition.txId;this.cLogger.debug(`${Cr(n.contract.callDepth())}onStateEvaluated: cache update for contract ${o} [${t.sortKey}]`),await this.putInCache(o,t,i)}async onStateUpdate(t,n,i,o=!1){(n.evaluationOptions.updateCacheForEachInteraction||o)&&(this.cLogger.debug(`onStateUpdate: cache update for contract ${n.contractDefinition.txId} [${t.sortKey}]`,{contract:n.contractDefinition.txId,state:i.state,sortKey:t.sortKey}),await this.putInCache(n.contractDefinition.txId,t,i))}async latestAvailableState(t,n){if(this.cLogger.debug("Searching for",{contractTxId:t,sortKey:n}),n){let i=await this.cache.getLessOrEqual(t,n);return i&&this.cLogger.debug(`Latest available state at ${t}: ${i.sortKey}`),i}else return await this.cache.getLast(t)}async onInternalWriteStateUpdate(t,n,i){this.cLogger.debug("Internal write state update:",{sortKey:t.sortKey,dry:t.dry,contractTxId:n,state:i.state}),await this.putInCache(n,t,i)}async onContractCall(t,n,i){if(n.sortedInteractions?.length==0)return;let o=n.sortedInteractions.indexOf(t);o<1||await this.putInCache(n.contractDefinition.txId,n.sortedInteractions[o-1],i)}async putInCache(t,n,i){if(n.dry||n.confirmationStatus!==void 0&&n.confirmationStatus!=="confirmed")return;let o=new Ft(i.state,i.validity,i.errorMessages||{});this.cLogger.debug("Putting into cache",{contractTxId:t,transaction:n.id,sortKey:n.sortKey,dry:n.dry}),await this.cache.put(new Ei(t,n.sortKey),o)}async syncState(t,n,i,o){let s=new Ft(i,o,{});await this.cache.put(new Ei(t,n),s)}async dumpCache(){return await this.cache.dump()}async internalWriteState(t,n){return await this.cache.get(t,n)}async hasContractCached(t){return await this.cache.getLast(t)!=null}async lastCachedSortKey(){return await this.cache.getLastSortKey()}async allCachedContracts(){return await this.cache.allContracts()}setCache(t){this.cache=t}getCache(){return this.cache}};var qA="Operation requires compiling with --exportTable",jA="Operation requires compiling with --exportRuntime",sf=()=>{throw Error(jA)},$A=typeof BigUint64Array<"u",af=Symbol(),WA=192,ax=1024,HA=new TextDecoder("utf-16le",{fatal:!0});Object.hasOwn=Object.hasOwn||function(r,e){return Object.prototype.hasOwnProperty.call(r,e)};function fx(r,e){let t=new Uint32Array(r)[e+-4>>>2]>>>1,n=new Uint16Array(r,e,t);if(t<=WA)return String.fromCharCode(...n);try{return HA.decode(n)}catch{let i="",o=0;for(;t-o>ax;)i+=String.fromCharCode(...n.subarray(o,o+=ax));return i+String.fromCharCode(...n.subarray(o))}}function Xd(r){let e={};function t(i,o){return i?fx(i.buffer,o):"<yet unknown>"}let n=r.env=r.env||{};return n.abort=n.abort||function(o,s,f,h){let g=e.memory||n.memory;throw Error(`abort: ${t(g,o)} at ${t(g,s)}:${f}:${h}`)},n.trace=n.trace||function(o,s,...f){let h=e.memory||n.memory;console.log(`trace: ${t(h,o)}${s?" ":""}${f.slice(0,s).join(", ")}`)},n.seed=n.seed||Date.now,r.Math=r.Math||Math,r.Date=r.Date||Date,e}function Yd(r,e){let t=e.exports,n=t.memory,i=t.table,o=t.__new||sf,s=t.__pin||sf,f=t.__unpin||sf,h=t.__collect||sf,g=t.__rtti_base,_=g?b=>b[g>>>2]:sf;r.__new=o,r.__pin=s,r.__unpin=f,r.__collect=h;function T(b){let d=new Uint32Array(n.buffer);if((b>>>=0)>=_(d))throw Error(`invalid id: ${b}`);return d[(g+4>>>2)+(b<<1)]}function I(b){let d=new Uint32Array(n.buffer);if((b>>>=0)>=_(d))throw Error(`invalid id: ${b}`);return d[(g+4>>>2)+(b<<1)+1]}function x(b){let d=T(b);if(!(d&7))throw Error(`not an array: ${b}, flags=${d}`);return d}function C(b){return 31-Math.clz32(b>>>6&31)}function j(b){if(b==null)return 0;let d=b.length,a=o(d<<1,1),u=new Uint16Array(n.buffer);for(var v=0,E=a>>>1;v<d;++v)u[E+v]=b.charCodeAt(v);return a}r.__newString=j;function H(b){if(b==null)return 0;let d=new Uint8Array(b),a=o(d.length,0);return new Uint8Array(n.buffer).set(d,a),a}r.__newArrayBuffer=H;function z(b){if(!b)return null;let d=n.buffer;if(new Uint32Array(d)[b+-8>>>2]!==1)throw Error(`not a string: ${b}`);return fx(d,b)}r.__getString=z;function X(b,d,a){let u=n.buffer;if(a)switch(b){case 2:return new Float32Array(u);case 3:return new Float64Array(u)}else switch(b){case 0:return new(d?Int8Array:Uint8Array)(u);case 1:return new(d?Int16Array:Uint16Array)(u);case 2:return new(d?Int32Array:Uint32Array)(u);case 3:return new(d?BigInt64Array:BigUint64Array)(u)}throw Error(`unsupported align: ${b}`)}function Y(b,d=0){let a=d,u=x(b),v=C(u),E=typeof a!="number",p=E?a.length:a,c=o(p<<v,u&4?b:0),F;if(u&4)F=c;else{s(c);let M=o(u&2?16:12,b);f(c);let m=new Uint32Array(n.buffer);m[M+0>>>2]=c,m[M+4>>>2]=c,m[M+8>>>2]=p<<v,u&2&&(m[M+12>>>2]=p),F=M}if(E){let M=X(v,u&2048,u&4096),m=c>>>v;if(u&16384)for(let S=0;S<p;++S)M[m+S]=a[S];else M.set(a,m)}return F}r.__newArray=Y;function se(b){let d=new Uint32Array(n.buffer),a=d[b+-8>>>2],u=x(a),v=C(u),E=u&4?b:d[b+4>>>2],p=u&2?d[b+12>>>2]:d[E+-4>>>2]>>>v;return X(v,u&2048,u&4096).subarray(E>>>=v,E+p)}r.__getArrayView=se;function G(b){let d=se(b),a=d.length,u=new Array(a);for(let v=0;v<a;v++)u[v]=d[v];return u}r.__getArray=G;function q(b){let d=n.buffer,a=new Uint32Array(d)[b+-4>>>2];return d.slice(b,b+a)}r.__getArrayBuffer=q;function J(b){if(!i)throw Error(qA);let d=new Uint32Array(n.buffer)[b>>>2];return i.get(d)}r.__getFunction=J;function Q(b,d,a){return new b(W(b,d,a))}function W(b,d,a){let u=n.buffer,v=new Uint32Array(u);return new b(u,v[a+4>>>2],v[a+8>>>2]>>>d)}function R(b,d,a){r[`__get${d}`]=Q.bind(null,b,a),r[`__get${d}View`]=W.bind(null,b,a)}[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array].forEach(b=>{R(b,b.name,31-Math.clz32(b.BYTES_PER_ELEMENT))}),$A&&[BigUint64Array,BigInt64Array].forEach(b=>{R(b,b.name.slice(3),3)});function l(b,d){let a=new Uint32Array(n.buffer),u=a[b+-8>>>2];if(u<=_(a))do{if(u==d)return!0;u=I(u)}while(u);return!1}return r.__instanceof=l,r.memory=r.memory||n,r.table=r.table||i,dx(t,r)}function cx(r){return typeof Response<"u"&&r instanceof Response}function ux(r){return r instanceof WebAssembly.Module}async function lx(r,e={}){if(cx(r=await r))return hx(r,e);let t=ux(r)?r:await WebAssembly.compile(r),n=Xd(e),i=await WebAssembly.instantiate(t,e),o=Yd(n,i);return{module:t,instance:i,exports:o}}function KA(r,e={}){let t=ux(r)?r:new WebAssembly.Module(r),n=Xd(e),i=new WebAssembly.Instance(t,e),o=Yd(n,i);return{module:t,instance:i,exports:o}}async function hx(r,e={}){if(!WebAssembly.instantiateStreaming)return lx(cx(r=await r)?r.arrayBuffer():r,e);let t=Xd(e),n=await WebAssembly.instantiateStreaming(r,e),i=Yd(t,n.instance);return{...n,exports:i}}function dx(r,e={}){let t=r.__argumentsLength?n=>{r.__argumentsLength.value=n}:r.__setArgumentsLength||r.__setargc||(()=>{});for(let n of Object.keys(r)){let i=r[n],o=n.split("."),s=e;for(;o.length>1;){let g=o.shift();Object.hasOwn(s,g)||(s[g]={}),s=s[g]}let f=o[0],h=f.indexOf("#");if(h>=0){let g=f.substring(0,h),_=s[g];if(typeof _>"u"||!_.prototype){let T=function(...I){return T.wrap(T.prototype.constructor(0,...I))};T.prototype={valueOf(){return this[af]}},T.wrap=function(I){return Object.create(T.prototype,{[af]:{value:I,writable:!1}})},_&&Object.getOwnPropertyNames(_).forEach(I=>Object.defineProperty(T,I,Object.getOwnPropertyDescriptor(_,I))),s[g]=T}if(f=f.substring(h+1),s=s[g].prototype,/^(get|set):/.test(f)){if(!Object.hasOwn(s,f=f.substring(4))){let T=r[n.replace("set:","get:")],I=r[n.replace("get:","set:")];Object.defineProperty(s,f,{get(){return T(this[af])},set(x){I(this[af],x)},enumerable:!0})}}else f==="constructor"?(s[f]=function(...T){return t(T.length),i(...T)}).original=i:(s[f]=function(...T){return t(T.length),i(this[af],...T)}).original=i}else/^(get|set):/.test(f)?Object.hasOwn(s,f=f.substring(4))||Object.defineProperty(s,f,{get:r[n.replace("set:","get:")],set:r[n.replace("get:","set:")],enumerable:!0}):typeof i=="function"&&i!==t?(s[f]=(...g)=>(t(g.length),i(...g))).original=i:s[f]=i}return e}var px={instantiate:lx,instantiateSync:KA,instantiateStreaming:hx,demangle:dx};var gx=(r,e)=>{let t=Ee.INST.create("WASM:AS");return{metering:{usegas:r.useGas},console:{"console.log":function(i){t.debug(`${r.contract.id}: ${e.exports.__getString(i)}`)},"console.logO":function(i,o){t.debug(`${r.contract.id}: ${e.exports.__getString(i)}`,JSON.parse(e.exports.__getString(o)))}},block:{"Block.height":function(){return r.block.height},"Block.indep_hash":function(){return e.exports.__newString(r.block.indep_hash)},"Block.timestamp":function(){return r.block.timestamp}},transaction:{"Transaction.id":function(){return e.exports.__newString(r.transaction.id)},"Transaction.owner":function(){return e.exports.__newString(r.transaction.owner)},"Transaction.target":function(){return e.exports.__newString(r.transaction.target)}},contract:{"Contract.id":function(){return e.exports.__newString(r.contract.id)},"Contract.owner":function(){return e.exports.__newString(r.contract.owner)}},api:{_readContractState:(i,o)=>{let s=e.exports.__getString(o),f=n(i);return console.log("Simulating read state of",s),setTimeout(()=>{console.log("calling callback"),f(e.exports.__newString(JSON.stringify({contractTxId:s})))},1e3)},clearTimeout},env:{abort(i,o,s,f){let h=e.exports.__getString(i);throw t.error(`--------------------- Error message from AssemblyScript ----------------------
`),t.error("  "+h),t.error('    In file "'+e.exports.__getString(o)+'"'),t.error(`    on line ${s}, column ${f}.`),t.error(`------------------------------------------------------------------------------
`),new Error(h)}}};function n(i){return e.exports.table.get(i)}};var yx=(r,e,t,n)=>{let i=Ee.INST.create("WASM:Rust"),o={metering:{usegas:r.useGas},console:{log:function(p){i.debug(`${r.contract.id}: ${p}`)}},Block:{height:function(){return r.block.height},indep_hash:function(){return r.block.indep_hash},timestamp:function(){return r.block.timestamp}},Transaction:{id:function(){return r.transaction.id},owner:function(){return r.transaction.owner},target:function(){return r.transaction.target}},Contract:{id:function(){return r.contract.id},owner:function(){return r.contract.owner}},SmartWeave:{caller:function(){return r.caller},readContractState:async function(p){return await r.contracts.readContractState(p)},write:async function(p,c){return await r.contracts.write(p,c)}},Vrf:{value:function(){return r.vrf.value},randomInt:function(p){return r.vrf.randomInt(p)}}},s={__wbg_log_:function(p,c){o.console.log(x(p,c))},__wbindgen_json_parse:function(p,c){var F=JSON.parse(x(p,c));return H(F)},__wbindgen_json_serialize:function(p,c){let F=z(c);var M=JSON.stringify(F===void 0?null:F),m=G(M,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),S=X;J()[p/4+1]=S,J()[p/4+0]=m},__wbindgen_object_drop_ref:function(p){W(p)},__wbindgen_cb_drop:function(p){let c=W(p).original;if(c.cnt--==1)return c.a=0,!0;var F=!1;return F},__wbg_readContractState:function(p,c){var F=o.SmartWeave.readContractState(x(p,c));return H(F)},__wbg_viewContractState:function(p,c){},__wbg_caller:function(p){var c=o.SmartWeave.caller(),F=G(c,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),M=X;J()[p/4+1]=M,J()[p/4+0]=F},__wbg_write:function(p,c,F){var M=o.SmartWeave.write(x(p,c),W(F));return H(M)},__wbg_refreshState:function(p,c){},__wbg_indephash:function(p){var c=o.Block.indep_hash(),F=G(c,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),M=X;J()[p/4+1]=M,J()[p/4+0]=F},__wbg_height:function(){var p=o.Block.height();return p},__wbg_timestamp:function(){var p=o.Block.timestamp();return p},__wbg_id:function(p){var c=o.Transaction.id(),F=G(c,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),M=X;J()[p/4+1]=M,J()[p/4+0]=F},__wbg_contractOwner:function(p){var c=o.Contract.owner(),F=G(c,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),M=X;J()[p/4+1]=M,J()[p/4+0]=F},__wbg_contractId:function(p){var c=o.Contract.id(),F=G(c,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),M=X;J()[p/4+1]=M,J()[p/4+0]=F},__wbg_owner:function(p){var c=o.Transaction.owner(),F=G(c,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),M=X;J()[p/4+1]=M,J()[p/4+0]=F},__wbg_target:function(p){var c=o.Transaction.target(),F=G(c,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),M=X;J()[p/4+1]=M,J()[p/4+0]=F},__wbg_call:function(){return u(function(p,c,F){var M=z(p).call(z(c),z(F));return H(M)},arguments)},__wbg_new:function(p,c){try{var F={a:p,b:c},M=(S,ne)=>{let ie=F.a;F.a=0;try{return v(ie,F.b,S,ne)}finally{F.a=ie}},m=new Promise(M);return H(m)}finally{F.a=F.b=0}},__wbg_resolve:function(p){var c=Promise.resolve(z(p));return H(c)},__wbg_then_a:function(p,c){var F=z(p).then(z(c));return H(F)},__wbg_then_5:function(p,c,F){var M=z(p).then(z(c),z(F));return H(M)},__wbindgen_debug_string:function(p,c){var F=R(z(c)),M=G(F,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),m=X;J()[p/4+1]=m,J()[p/4+0]=M},__wbindgen_throw:function(p,c){throw new Error(x(p,c))},__wbindgen_closure_wrapper:function(p,c,F){var M=l(p,c,n,b);return H(M)},__wbindgen_string_new:function(p,c){var F=x(p,c);return H(F)},__wbg_value:function(p){var c=o.Vrf.value(),F=G(c,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),M=X;J()[p/4+1]=M,J()[p/4+0]=F},__wbg_randomInt:function(p){var c=o.Vrf.randomInt(p);return c}},f=Object.keys(s),h=e.reduce((p,c)=>{let F=f.find(M=>c.startsWith(M));if(F===void 0)throw new Error(`Cannot find import mapping for ${c}`);return p[c]=s[F],p},{}),g={};g.__wbindgen_placeholder__=h;let _=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});_.decode();let T=null;function I(){return(T===null||T.buffer!==t.exports.memory.buffer)&&(T=new Uint8Array(t.exports.memory.buffer)),T}function x(p,c){return _.decode(I().subarray(p,p+c))}let C=new Array(32).fill(void 0);C.push(void 0,null,!0,!1);let j=C.length;function H(p){j===C.length&&C.push(C.length+1);let c=j;return j=C[c],C[c]=p,c}function z(p){return C[p]}let X=0,Y=new TextEncoder("utf-8"),se=typeof Y.encodeInto=="function"?function(p,c){return Y.encodeInto(p,c)}:function(p,c){let F=Y.encode(p);return c.set(F),{read:p.length,written:F.length}};function G(p,c,F){if(F===void 0){let ie=Y.encode(p),ce=c(ie.length);return I().subarray(ce,ce+ie.length).set(ie),X=ie.length,ce}let M=p.length,m=c(M),S=I(),ne=0;for(;ne<M;ne++){let ie=p.charCodeAt(ne);if(ie>127)break;S[m+ne]=ie}if(ne!==M){ne!==0&&(p=p.slice(ne)),m=F(m,M,M=ne+p.length*3);let ie=I().subarray(m+ne,m+M),ce=se(p,ie);ne+=ce.written}return X=ne,m}let q=null;function J(){return(q===null||q.buffer!==t.exports.memory.buffer)&&(q=new Int32Array(t.exports.memory.buffer)),q}function Q(p){p<36||(C[p]=j,j=p)}function W(p){let c=z(p);return Q(p),c}function R(p){let c=typeof p;if(c=="number"||c=="boolean"||p==null)return`${p}`;if(c=="string")return`"${p}"`;if(c=="symbol"){let m=p.description;return m==null?"Symbol":`Symbol(${m})`}if(c=="function"){let m=p.name;return typeof m=="string"&&m.length>0?`Function(${m})`:"Function"}if(Array.isArray(p)){let m=p.length,S="[";m>0&&(S+=R(p[0]));for(let ne=1;ne<m;ne++)S+=", "+R(p[ne]);return S+="]",S}let F=/\[object ([^\]]+)\]/.exec(toString.call(p)),M;if(F.length>1)M=F[1];else return toString.call(p);if(M=="Object")try{return"Object("+JSON.stringify(p)+")"}catch{return"Object"}return p instanceof Error?`${p.name}: ${p.message}
${p.stack}`:M}function l(p,c,F,M){let m={a:p,b:c,cnt:1,dtor:F},S=(...ne)=>{m.cnt++;let ie=m.a;m.a=0;try{return M(ie,m.b,...ne)}finally{--m.cnt===0?t.exports.__wbindgen_export_2.get(m.dtor)(ie,m.b):m.a=ie}};return S.original=m,S}function b(p,c,F){t.modifiedExports._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__(p,c,H(F))}h.handle=function(p){var c=t.exports.handle(H(p));return W(c)};let d=32;function a(p){if(d==1)throw new Error("out of js stack");return C[--d]=p,d}h.initState=function(p){try{t.exports.initState(a(p))}finally{C[d++]=void 0}},h.currentState=function(){var p=t.exports.currentState();return W(p)},h.lang=function(){try{let F=t.exports.__wbindgen_add_to_stack_pointer(-16);t.exports.lang(F);var p=J()[F/4+0],c=J()[F/4+1];return x(p,c)}finally{t.exports.__wbindgen_add_to_stack_pointer(16),t.exports.__wbindgen_free(p,c)}},h.type=function(){var p=t.exports.type();return p};function u(p,c){try{return p.apply(this,c)}catch(F){t.exports.__wbindgen_exn_store(H(F))}}function v(p,c,F,M){t.modifiedExports.wasm_bindgen__convert__closures__invoke2_mut__(p,c,H(F),H(M))}class E{__destroy_into_raw(){let c=this.ptr;return this.ptr=0,c}free(){let c=this.__destroy_into_raw();t.exports.__wbg_statewrapper_free(c)}}return h.StateWrapper=E,g.metering=o.metering,{imports:g,exports:h}};var zA=new TextEncoder,mx=new TextDecoder("utf-8"),Qd=[],fo;(function(r){fo=r,fo.redstone={go:{}}}).call(void 0,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{});var As=class{_callbackTimeouts;_nextCallbackTimeoutID;_inst;_values;_ids;_idPool;_goRefCounts;importObject;exited;_resolveCallbackPromise;_pendingEvent;_id;exports;constructor(e){this._callbackTimeouts=new Map,this._nextCallbackTimeoutID=1;let t=Ee.INST.create("WASM:Go"),n=this;fo.redstone.go={WasmModule:{registerWasmModule:function(x){n._id=x,n.exports=fo[x],delete fo[x],fo.redstone.go[x]={},fo.redstone.go[x].imports={console:{log:function(...C){t.debug(C[0],...C.slice(1))}},Transaction:{id:function(){return e.transaction.id},owner:function(){return e.transaction.owner},target:function(){return e.transaction.target}},Block:{indep_hash:function(){return e.block.indep_hash},height:function(){return e.block.height},timestamp:function(){return e.block.timestamp}},Contract:{id:function(){return e.contract.id},owner:function(){return e.contract.owner}},SmartWeave:{readContractState:async function(C){return await e.contracts.readContractState(C)}}}}}};let i=()=>new DataView(this._inst.exports.memory.buffer),o=(x,C)=>{i().setUint32(x+0,C,!0),i().setUint32(x+4,Math.floor(C/4294967296),!0)},s=x=>{let C=i().getUint32(x+0,!0),j=i().getInt32(x+4,!0);return C+j*4294967296},f=x=>{let C=i().getFloat64(x,!0);if(C===0)return;if(!isNaN(C))return C;let j=i().getUint32(x,!0);return this._values[j]},h=(x,C)=>{if(typeof C=="number"){if(isNaN(C)){i().setUint32(x+4,2146959360,!0),i().setUint32(x,0,!0);return}if(C===0){i().setUint32(x+4,2146959360,!0),i().setUint32(x,1,!0);return}i().setFloat64(x,C,!0);return}switch(C){case void 0:i().setFloat64(x,0,!0);return;case null:i().setUint32(x+4,2146959360,!0),i().setUint32(x,2,!0);return;case!0:i().setUint32(x+4,2146959360,!0),i().setUint32(x,3,!0);return;case!1:i().setUint32(x+4,2146959360,!0),i().setUint32(x,4,!0);return}let H=this._ids.get(C);H===void 0&&(H=this._idPool.pop(),H===void 0&&(H=this._values.length),this._values[H]=C,this._goRefCounts[H]=0,this._ids.set(C,H)),this._goRefCounts[H]++;let z=1;switch(typeof C){case"string":z=2;break;case"symbol":z=3;break;case"function":z=4;break}i().setUint32(x+4,2146959360|z,!0),i().setUint32(x,H,!0)},g=(x,C,j=null)=>new Uint8Array(this._inst.exports.memory.buffer,x,C),_=(x,C,j)=>{let H=new Array(C);for(let z=0;z<C;z++)H[z]=f(x+z*8);return H},T=(x,C)=>mx.decode(new DataView(this._inst.exports.memory.buffer,x,C)),I=Date.now()-performance.now();this.importObject={wasi_snapshot_preview1:{fd_write:function(x,C,j,H){let z=0;if(x==1)for(let X=0;X<j;X++){let Y=C+X*8,se=i().getUint32(Y+0,!0),G=i().getUint32(Y+4,!0);z+=G;for(let q=0;q<G;q++){let J=i().getUint8(se+q);if(J!=13)if(J==10){let Q=mx.decode(new Uint8Array(Qd));Qd=[],console.log(Q)}else Qd.push(J)}}else console.error("invalid file descriptor:",x);return i().setUint32(H,z,!0),0},fd_close:()=>0,fd_fdstat_get:()=>0,fd_seek:()=>0,proc_exit:x=>{if(global.process)process.exit(x);else throw"trying to exit with code "+x},random_get:(x,C)=>(crypto.getRandomValues(g(x,C,null)),0)},env:{"runtime.ticks":()=>I+performance.now(),"runtime.sleepTicks":x=>{setTimeout(this._inst.exports.go_scheduler,x)},"syscall/js.finalizeRef":x=>{let C=i().getUint32(x,!0);if(this._goRefCounts[C]--,this._goRefCounts[C]===0){let j=this._values[C];this._values[C]=null,this._ids.delete(j),this._idPool.push(C)}},"syscall/js.stringVal":(x,C,j)=>{let H=T(C,j);h(x,H)},"syscall/js.valueGet":(x,C,j,H)=>{let z=T(j,H),X=f(C),Y=Reflect.get(X,z);h(x,Y)},"syscall/js.valueSet":(x,C,j,H)=>{let z=f(x),X=T(C,j),Y=f(H);Reflect.set(z,X,Y)},"syscall/js.valueDelete":(x,C,j)=>{let H=f(x),z=T(C,j);Reflect.deleteProperty(H,z)},"syscall/js.valueIndex":(x,C,j)=>{h(x,Reflect.get(f(C),j))},"syscall/js.valueSetIndex":(x,C,j)=>{Reflect.set(f(x),C,f(j))},"syscall/js.valueCall":(x,C,j,H,z,X,Y)=>{let se=f(C),G=T(j,H),q=_(z,X,Y);try{let J=Reflect.get(se,G);h(x,Reflect.apply(J,se,q)),i().setUint8(x+8,1)}catch(J){h(x,J),i().setUint8(x+8,0)}},"syscall/js.valueInvoke":(x,C,j,H,z)=>{try{let X=f(C),Y=_(j,H,z);h(x,Reflect.apply(X,void 0,Y)),i().setUint8(x+8,1)}catch(X){h(x,X),i().setUint8(x+8,0)}},"syscall/js.valueNew":(x,C,j,H,z)=>{let X=f(C),Y=_(j,H,z);try{h(x,Reflect.construct(X,Y)),i().setUint8(x+8,1)}catch(se){h(x,se),i().setUint8(x+8,0)}},"syscall/js.valueLength":x=>f(x).length,"syscall/js.valuePrepareString":(x,C)=>{let j=String(f(C)),H=zA.encode(j);h(x,H),o(x+8,H.length)},"syscall/js.valueLoadString":(x,C,j,H)=>{let z=f(x);g(C,j,H).set(z)},"syscall/js.valueInstanceOf":(x,C)=>f(x)instanceof f(C),"syscall/js.copyBytesToGo":(x,C,j,H,z)=>{let X=x,Y=x+4,se=g(C,j),G=f(z);if(!(G instanceof Uint8Array)){i().setUint8(Y,0);return}let q=G.subarray(0,se.length);se.set(q),o(X,q.length),i().setUint8(Y,1)},"syscall/js.copyBytesToJS":(x,C,j,H,z)=>{let X=x,Y=x+4,se=f(C),G=g(j,H);if(!(se instanceof Uint8Array)){i().setUint8(Y,0);return}let q=G.subarray(0,se.length);se.set(q),o(X,q.length),i().setUint8(Y,1)}}}}async run(e){this._inst=e,this._values=[NaN,0,null,!0,!1,global,this],this._goRefCounts=[],this._ids=new Map,this._idPool=[],this.exited=!1;let t=new DataView(this._inst.exports.memory.buffer);for(;;){let n=new Promise(i=>{this._resolveCallbackPromise=()=>{if(this.exited)throw new Error("bad callback: Go program has already exited");setTimeout(i,0)}});if(this._inst.exports._start(),this.exited)break;await n}}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(e){let t=this;return function(){let n={id:e,this:this,args:arguments};return t._pendingEvent=n,t._resume(),n.result}}_resolveExitPromise(){}};var Iu=ct(bx());var ff=class{gasUsed;gasLimit;transaction;block;vrf;evaluationOptions;arweave;contract;unsafeClient;contracts;extensions;_activeTx;caller;constructor(e,t,n){this.gasUsed=0,this.gasLimit=Number.MAX_SAFE_INTEGER,this.unsafeClient=e,this.arweave={ar:e.ar,utils:e.utils,wallets:e.wallets,crypto:e.crypto},this.evaluationOptions=n,this.contract=t,this.transaction=new Zd(this),this.block=new ep(this),this.contracts={readContractState:(i,o,s)=>{throw new Error("Not implemented - should be set by HandlerApi implementor")},viewContractState:(i,o)=>{throw new Error("Not implemented - should be set by HandlerApi implementor")},write:(i,o,s)=>{throw new Error("Not implemented - should be set by HandlerApi implementor")},refreshState:()=>{throw new Error("Not implemented - should be set by HandlerApi implementor")}},this.vrf=new tp(this),this.useGas=this.useGas.bind(this),this.getBalance=this.getBalance.bind(this),this.extensions={}}useGas(e){if(e<0)throw new Error("[RE:GNE] Gas number exception - gas < 0.");if(this.gasUsed+=e,this.gasUsed>this.gasLimit)throw new Error(`[RE:OOG] Out of gas! Used: ${this.gasUsed}, limit: ${this.gasLimit}`)}async getBalance(e,t){if(!this._activeTx)throw new Error("Cannot read balance - active tx is not set.");if(!this.block.height)throw new Error("Cannot read balance - block height not set.");let n=t||this.block.height;return await fetch(`${this.evaluationOptions.walletBalanceUrl}block/height/${n}/wallet/${e}/balance`).then(i=>i.ok?i.text():Promise.reject(i)).catch(i=>{throw new Error(`Unable to read wallet balance. ${i.status}. ${i.body?.message}`)})}},Zd=class{constructor(e){this.smartWeaveGlobal=e}get id(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current Tx");return this.smartWeaveGlobal._activeTx.id}get owner(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current Tx");return this.smartWeaveGlobal._activeTx.owner.address}get target(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current Tx");return this.smartWeaveGlobal._activeTx.recipient}get tags(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current Tx");return this.smartWeaveGlobal._activeTx.tags}get quantity(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current Tx");return this.smartWeaveGlobal._activeTx.quantity.winston}get reward(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current Tx");return this.smartWeaveGlobal._activeTx.fee.winston}},ep=class{constructor(e){this.smartWeaveGlobal=e}get height(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current Tx");return this.smartWeaveGlobal._activeTx.block.height}get indep_hash(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current Tx");return this.smartWeaveGlobal._activeTx.block.id}get timestamp(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current tx");return this.smartWeaveGlobal._activeTx.block.timestamp}},tp=class{constructor(e){this.smartWeaveGlobal=e}get data(){return this.smartWeaveGlobal._activeTx.vrf}get value(){return this.smartWeaveGlobal._activeTx.vrf.bigint}randomInt(e){if(!Number.isInteger(e))throw new Error("Integer max value required for random integer generation");let t=BigInt(this.smartWeaveGlobal._activeTx.vrf.bigint)%BigInt(e)+BigInt(1);if(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)throw new Error("Random int cannot be cast to number");return Number(t)}};var co=class{constructor(e,t){this.swGlobal=e;this.contractDefinition=t;this.assignReadContractState=this.assignReadContractState.bind(this),this.assignViewContractState=this.assignViewContractState.bind(this),this.assignWrite=this.assignWrite.bind(this),this.assignRefreshState=this.assignRefreshState.bind(this)}logger=Ee.INST.create("ContractHandler");async dispose(){}assignWrite(e,t){this.swGlobal.contracts.write=async(n,i,o)=>{if(!e.evaluationOptions.internalWrites)throw new Error("Internal writes feature switched off. Change EvaluationOptions.internalWrites flag to 'true'");let s=o??e.evaluationOptions.throwOnInternalWriteError,f={from:this.contractDefinition.txId,to:n,input:i};this.logger.debug("swGlobal.write call:",f);let g=await e.warp.contract(n,e.contract,{callingInteraction:this.swGlobal._activeTx,callType:"write"}).dryWriteFromTx(i,this.swGlobal._activeTx,[...t||[],{contractTxId:this.contractDefinition.txId,interactionTxId:this.swGlobal.transaction.id}]);this.logger.debug("Cache result?:",!this.swGlobal._activeTx.dry);let _=g.type!=="ok"&&s&&(!this.swGlobal._activeTx.dry||this.swGlobal._activeTx.dry&&this.swGlobal._activeTx.strict),T=_?`Internal write auto error for call [${JSON.stringify(f)}]: ${g.errorMessage}`:g.errorMessage;if(await e.warp.stateEvaluator.onInternalWriteStateUpdate(this.swGlobal._activeTx,n,{state:g.state,validity:{...g.originalValidity,[this.swGlobal._activeTx.id]:g.type=="ok"},errorMessages:{...g.originalErrorMessages,[this.swGlobal._activeTx.id]:T}}),_)throw new Nr(T);return g}}assignViewContractState(e){this.swGlobal.contracts.viewContractState=async(t,n)=>(this.logger.debug("swGlobal.viewContractState call:",{from:this.contractDefinition.txId,to:t,input:n}),await e.warp.contract(t,e.contract,{callingInteraction:this.swGlobal._activeTx,callType:"view"}).viewStateForTx(n,this.swGlobal._activeTx))}assignReadContractState(e,t,n,i){this.swGlobal.contracts.readContractState=async(o,s)=>{this.logger.debug("swGlobal.readContractState call:",{from:this.contractDefinition.txId,to:o,sortKey:i.sortKey,transaction:this.swGlobal.transaction.id});let{stateEvaluator:f}=e.warp,h=e.warp.contract(o,e.contract,{callingInteraction:i,callType:"read"});await f.onContractCall(i,e,n);let g=await h.readState(i.sortKey,[...t||[],{contractTxId:this.contractDefinition.txId,interactionTxId:this.swGlobal.transaction.id}]);if(g?.cachedValue?.errorMessages){let _=Reflect.ownKeys(g?.cachedValue?.errorMessages);if(_.length){let T=_[_.length-1],I=g?.cachedValue?.errorMessages[T];if(I.startsWith("[SkipUnsafeError]"))throw new Nr(I)}}return s?{state:Yn(g.cachedValue.state),validity:g.cachedValue.validity,errorMessages:g.cachedValue.errorMessages}:Yn(g.cachedValue.state)}}assignRefreshState(e){this.swGlobal.contracts.refreshState=async()=>(await e.warp.stateEvaluator.latestAvailableState(this.swGlobal.contract.id,this.swGlobal._activeTx.sortKey))?.cachedValue.state}};var Fs=class extends co{constructor(t,n,i){super(t,n);this.contractFunction=i}async handle(t,n,i){let{timeoutId:o,timeoutPromise:s}=md(t.evaluationOptions.maxInteractionEvaluationTimeSeconds);try{let{interaction:f,interactionTx:h,currentTx:g}=i,_=Yn(n.state);this.swGlobal._activeTx=h,this.swGlobal.caller=f.caller,this.assignReadContractState(t,g,n,h),this.assignViewContractState(t),this.assignWrite(t,g),this.assignRefreshState(t);let{warp:T}=t;["smartweave-extension-nlp","smartweave-extension-ethers"].forEach(C=>{T.hasPlugin(C)&&T.loadPlugin(C).process(this.swGlobal.extensions)});let x=await Promise.race([s,this.contractFunction(_,f)]);if(x&&(x.state!==void 0||x.result!==void 0))return{type:"ok",result:x.result,state:x.state||n.state};throw new Error(`Unexpected result from contract: ${JSON.stringify(x)}`)}catch(f){switch(f.name){case"ContractError":return{type:"error",errorMessage:f.message,state:n.state,result:null};default:return{type:"exception",errorMessage:`${f&&f.stack||f&&f.message||f}`,state:n.state,result:null}}}finally{o!==null&&clearTimeout(o)}}initState(t){}};var fp=ct(Sx(),1),UB=fp.default.configure;var ho=fp.default;var cf=class extends co{constructor(t,n,i){super(t,n);this.wasmExports=i}async handle(t,n,i){try{let{interaction:o,interactionTx:s,currentTx:f}=i;return this.swGlobal._activeTx=s,this.swGlobal.caller=o.caller,this.swGlobal.gasLimit=t.evaluationOptions.gasLimit,this.swGlobal.gasUsed=0,this.assignReadContractState(t,f,n,s),this.assignWrite(t,f),{type:"ok",result:await this.doHandle(o),state:this.doGetCurrentState(),gasUsed:this.swGlobal.gasUsed}}catch(o){let s={errorMessage:o.message,state:n.state,result:null};return o.message.startsWith("[RE:")?(this.logger.fatal(o),{...s,type:"exception"}):{...s,type:"error"}}}initState(t){switch(this.contractDefinition.srcWasmLang){case"assemblyscript":{let n=this.wasmExports.__newString(ho(t));this.wasmExports.initState(n);break}case"rust":{this.wasmExports.initState(t);break}case"go":{this.wasmExports.initState(ho(t));break}default:throw new Error(`Support for ${this.contractDefinition.srcWasmLang} not implemented yet.`)}}async doHandle(t){switch(this.contractDefinition.srcWasmLang){case"assemblyscript":{let n=this.wasmExports.__newString(ho(t.input)),i=this.wasmExports.handle(n),o=this.wasmExports.__getString(i);return JSON.parse(o)}case"rust":{let n=await this.wasmExports.handle(t.input);if(!n)return;if(Object.prototype.hasOwnProperty.call(n,"Ok"))return n.Ok;{this.logger.debug("Error from rust",n.Err);let i,o="";throw typeof n.Err=="string"||n.Err instanceof String?i=n.Err:(i=Object.keys(n.Err)[0],o=" "+n.Err[i]),i=="RuntimeError"?new Error(`[RE:RE]${o}`):new Error(`[CE:${i}${o}]`)}}case"go":{let n=await this.wasmExports.handle(ho(t.input));return JSON.parse(n)}default:throw new Error(`Support for ${this.contractDefinition.srcWasmLang} not implemented yet.`)}}doGetCurrentState(){switch(this.contractDefinition.srcWasmLang){case"assemblyscript":{let t=this.wasmExports.currentState();return JSON.parse(this.wasmExports.__getString(t))}case"rust":return this.wasmExports.currentState();case"go":{let t=this.wasmExports.currentState();return JSON.parse(t)}default:throw new Error(`Support for ${this.contractDefinition.srcWasmLang} not implemented yet.`)}}};function cp(r,e){let t=r.trim().split(`
`),n=t[0],i=t[t.length-1];return(/\(\s*\(\)\s*=>\s*{/g.test(n)||/\s*\(\s*function\s*\(\)\s*{/g.test(n))&&/}\s*\)\s*\(\)\s*;/g.test(i)&&(t.shift(),t.pop(),r=t.join(`
`)),r=r.replace(/export\s+async\s+function\s+handle/gmu,"async function handle").replace(/export\s+function\s+handle/gmu,"function handle"),e?`
    ${r}
    module.exports = handle;`:`
    const window=void 0,document=void 0,Function=void 0,eval=void 0,globalThis=void 0;
    const [SmartWeave, BigNumber, logger${ds()?", Buffer, atob, btoa":""}] = arguments;
    class ContractError extends Error { constructor(message) { super(message); this.name = 'ContractError' } };
    function ContractAssert(cond, message) { if (!cond) throw new ContractError(message) };
    ${r};
    return handle;
  `}var Mu=ct(Ax());var Tx=ct(eo()),Nr=class extends Error{constructor(t,n){super(t);this.subtype=n;this.name="ContractError"}},uf=class{constructor(e){this.arweave=e}logger=Ee.INST.create("HandlerExecutorFactory");cache=new $i;async create(e,t,n){let i=new ff(this.arweave,{id:e.txId,owner:e.owner},t);if(e.contractType=="wasm"){this.logger.info("Creating handler for wasm contract",e.txId);let o=et.measure(),s,f=null,h=ZA(e.srcBinary);switch(e.srcWasmLang){case"assemblyscript":{let g={exports:null};s=await px.instantiateStreaming(h,gx(i,g)),g.exports=s.exports;break}case"rust":{let g={exports:null,modifiedExports:{wasm_bindgen__convert__closures__invoke2_mut__:null,_dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__:null}},_=await Fx(h,e.srcBinary),I=WebAssembly.Module.imports(_).filter(H=>H.module==="__wbindgen_placeholder__").map(H=>H.name),{imports:x,exports:C}=yx(i,I,g,e.metadata.dtor);f=C,s=await WebAssembly.instantiate(_,x),g.exports=s.exports,Object.keys(s.exports).forEach(H=>{H.startsWith("wasm_bindgen__convert__closures__invoke2_mut__")&&(g.modifiedExports.wasm_bindgen__convert__closures__invoke2_mut__=s.exports[H]),H.startsWith("_dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__")&&(g.modifiedExports._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__=s.exports[H])});break}case"go":{let g=new As(i);g.importObject.metering={usegas:function(T){i.useGas(T)}};let _=await Fx(h,e.srcBinary);s=await WebAssembly.instantiate(_,g.importObject),g.run(s),f=g.exports;break}default:throw new Error(`Support for ${e.srcWasmLang} not implemented yet.`)}return this.logger.info(`WASM ${e.srcWasmLang} handler created in ${o.elapsed()}`),new cf(i,e,f||s.exports)}else{let o=cp(e.src,t.useVM2);if(o.includes("unsafeClient"))switch(t.unsafeClient){case"allow":{this.logger.warn(`Reading unsafe contract ${e.txId}, evaluation is non-deterministic!`);break}case"throw":throw new Error(`[SkipUnsafeError] Using unsafeClient is not allowed by default. Use EvaluationOptions.allowUnsafeClient flag to evaluate ${e.txId}.`);case"skip":throw new Nr(`[SkipUnsafeError] Skipping evaluation of the unsafe contract ${e.txId}.`,"unsafeClientSkip");default:throw new Error(`Unknown unsafeClient setting ${t.unsafeClient}`)}if(!t.allowBigInt&&o.includes("BigInt"))throw new Error("Using BigInt is not allowed by default. Use EvaluationOptions.allowBigInt flag.");if(t.useVM2){let s=new Iu.VMScript(o),f={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array},h=new Iu.NodeVM({console:"off",sandbox:{SmartWeave:i,BigNumber:Mu.default,logger:this.logger,ContractError:Nr,ContractAssert:function(g,_){if(!g)throw new Nr(_)},...f},compiler:"javascript",eval:!1,wasm:!1,allowAsync:!0,wrapper:"commonjs"});return new Fs(i,e,h.run(s))}else{if(n.hasPlugin("ivm-handler-api"))return n.loadPlugin("ivm-handler-api").process({contractSource:e.src,evaluationOptions:t,arweave:this.arweave,swGlobal:i,contractDefinition:e});{let s=new Function(o),f=ds()?s(i,Mu.default,Ee.INST.create(i.contract.id),Tx.Buffer,atob,btoa):s(i,Mu.default,Ee.INST.create(i.contract.id));return new Fs(i,e,f)}}}}};function ZA(r){let e={status:200,statusText:"OK",headers:{"Content-Type":"application/wasm"}};return new Response(r,e)}async function Fx(r,e){return WebAssembly.compileStreaming?await WebAssembly.compileStreaming(r):await WebAssembly.compile(e)}var Tn=class{signer;type;warp;constructor(e,t){if(this.warp=e,this.isSignatureType(t)){if(t.type!=="arweave"&&(this.warp.environment!="mainnet"||this.warp.interactionsLoader.type()!="warp"))throw new Error(`Unable to use signing function of type: ${t.type} when not in mainnet environment or bundling is disabled.`);this.signer=t.signer,this.type=t.type}else this.signer=async n=>{await this.warp.arweave.transactions.sign(n,t)},this.type="arweave"}checkNonArweaveSigningAvailability(e){if(this.type!=="arweave"&&!e)throw new Error(`Unable to use signing function of type: ${this.type} when bundling is disabled.`)}isSignatureType(e){return e.signer!==void 0}};var u6=ct(i6());var l6=ct(o6());function s6(r){let e=/(const|var) ret = makeMutClosure\(arg0, arg1, (\d+?), __wbg_adapter/;return r.match(e)[2]}var oi=ct(eo());var c6=new Map([[1,"assemblyscript"],[2,"rust"],[3,"go"]]),df=class{constructor(e){this.warp=e}logger=Ee.INST.create("Source");signature;async createSourceTx(e,t){this.logger.debug("Creating new contract source");let{src:n,wasmSrcCodeDir:i,wasmGlueCode:o}=e;this.signature=new Tn(this.warp,t);let s=this.signature.signer,f=n instanceof oi.Buffer?"wasm":"js",h,g=null,_=null,T={},I=[];if(f=="wasm"){let C=u6.default.meterWASM(n,{meterType:"i32"});I.push(C);let j=await WebAssembly.compile(n),H=WebAssembly.Module.imports(j),z;if(this.isGoModule(H)){let Y=new As(null),se=new WebAssembly.Instance(j,Y.importObject);Y.run(se),z=Y.exports.lang(),_=Y.exports.version()}else{let Y=await WebAssembly.instantiate(n,xF(H));if(!Y.instance.exports.lang)throw new Error('No info about source type in wasm binary. Did you forget to export "lang" function?');if(z=Y.instance.exports.lang(),_=Y.instance.exports.version(),!c6.has(z))throw new Error(`Unknown wasm source type ${z}`)}if(g=c6.get(z),i==null)throw new Error("No path to original wasm contract source code");let X=await this.zipContents(i);if(I.push(X),g=="rust"){if(!o)throw new Error("No path to generated wasm-bindgen js code");let Y=l6.default.readFileSync(o,"utf-8"),se=s6(Y);T.dtor=parseInt(se),I.push(oi.Buffer.from(Y))}}let x=f=="wasm"?this.joinBuffers(I):n;return h=await this.warp.arweave.createTransaction({data:x}),h.addTag("App-Name","SmartWeaveContractSource"),h.addTag("App-Version","0.3.0"),h.addTag("SDK","Warp"),h.addTag("Content-Type",f=="js"?"application/javascript":"application/wasm"),f=="wasm"&&(h.addTag("Wasm-Lang",g),h.addTag("Wasm-Lang-Version",_),h.addTag("Wasm-Meta",JSON.stringify(T))),this.warp.environment==="testnet"&&h.addTag("Warp-Testnet","1.0.0"),await s(h),this.logger.debug("Posting transaction with source"),h}async saveSourceTx(e,t=!1){this.logger.debug("Saving contract source",e.id),this.warp.environment=="local"&&(t=!0);let n=t==null?this.warp.definitionLoader.type()=="warp":!t,o=new kt().getTag(e,"Signature-Type");if(o&&o!="arweave"&&!n)throw new Error(`Unable to save source with signature type: ${o} when bundling is disabled.`);let s,f;if(t)f=await this.warp.arweave.transactions.post(e),s=f.status===200||f.status===208;else{let h=await this.postSource(e);this.logger.debug(h),s=!0}if(s)return e.id;throw new Error(`Unable to write Contract Source. Arweave responded with status ${f.status}: ${f.statusText}`)}isGoModule(e){return e.some(t=>t.module=="env"&&t.name.startsWith("syscall/js"))}joinBuffers(e){let t=e.length,n=[];return n.push(oi.Buffer.from(t.toString())),n.push(oi.Buffer.from("|")),e.forEach(i=>{n.push(oi.Buffer.from(i.length.toString())),n.push(oi.Buffer.from("|"))}),n.push(...e),n.reduce((i,o)=>oi.Buffer.concat([i,o]))}async zipContents(e){let t=a6(),n=f6(),i=new n.WritableStreamBuffer({initialSize:1e3*1024,incrementAmount:1e3*1024}),o=t("zip",{zlib:{level:9}});return o.on("error",function(s){throw s}),o.pipe(i),o.directory(e.toString(),e.toString()),await o.finalize(),i.end(),i.getContents()}async postSource(e=null){let t=await fetch(`${rn}/gateway/sources/deploy`,{method:"POST",body:JSON.stringify({srcTx:e}),headers:{"Accept-Encoding":"gzip, deflate, br","Content-Type":"application/json",Accept:"application/json"}});if(t.ok)return t.json();throw new Error(`Error while posting contract source. Sequencer responded with status ${t.status} ${t.statusText}`)}};function xF(r){let e={};return r.forEach(t=>{Object.prototype.hasOwnProperty.call(e,t.module)||(e[t.module]={}),e[t.module][t.name]=function(){}}),e}var pf=class{constructor(e,t){this.arweave=e;this.warp=t;this.deployFromSourceTx=this.deployFromSourceTx.bind(this),this.source=new df(this.warp)}logger=Ee.INST.create("DefaultCreateContract");source;signature;async deploy(e,t){let{wallet:n,initState:i,tags:o,transfer:s,data:f,evaluationManifest:h}=e,g=t==null?this.warp.definitionLoader.type()=="warp":!t,_=await this.source.createSourceTx(e,n);return g||await this.source.saveSourceTx(_,!0),this.logger.debug("Creating new contract"),await this.deployFromSourceTx({srcTxId:_.id,wallet:n,initState:i,tags:o,transfer:s,data:f,evaluationManifest:h},!g,_)}async deployFromSourceTx(e,t,n=null){this.logger.debug("Creating new contract from src tx");let{wallet:i,srcTxId:o,initState:s,tags:f,transfer:h,data:g,evaluationManifest:_}=e;this.signature=new Tn(this.warp,i);let T=this.signature.signer,I=t==null?this.warp.definitionLoader.type()=="warp":!t;this.signature.checkNonArweaveSigningAvailability(I);let x=await this.arweave.createTransaction({data:g?.body||s});if(+h?.winstonQty>0&&h.target.length&&(this.logger.debug("Creating additional transaction with AR transfer",h),x=await this.arweave.createTransaction({data:g?.body||s,target:h.target,quantity:h.winstonQty})),f?.length)for(let H of f)x.addTag(H.name.toString(),H.value.toString());x.addTag("App-Name","SmartWeaveContract"),x.addTag("App-Version","0.3.0"),x.addTag("Contract-Src",o),x.addTag("SDK","RedStone"),g?(x.addTag("Content-Type",g["Content-Type"]),x.addTag("Init-State",s)):x.addTag("Content-Type","application/json"),this.warp.environment==="testnet"&&x.addTag("Warp-Testnet","1.0.0"),e.evaluationManifest&&x.addTag("Contract-Manifest",JSON.stringify(e.evaluationManifest)),await T(x);let C,j;if(I){let H=await this.postContract(x,n);this.logger.debug(H),C=!0}else j=await this.arweave.transactions.post(x),C=j.status===200||j.status===208;if(C)return{contractTxId:x.id,srcTxId:o};throw new Error(`Unable to write Contract. Arweave responded with status ${j.status}: ${j.statusText}`)}async deployBundled(e){let t=await fetch(`${rn}/gateway/contracts/deploy-bundled`,{method:"POST",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"},body:e});if(t.ok)return t.json();throw typeof t.json=="function"&&t.json().then(n=>{n.message&&this.logger.error(n.message)}),new Error(`Error while deploying data item. Warp Gateway responded with status ${t.status} ${t.statusText}`)}async createSourceTx(e,t){return this.source.createSourceTx(e,t)}async saveSourceTx(e,t){return this.source.saveSourceTx(e,t)}async postContract(e,t=null){let n={contractTx:e};t&&(n={...n,srcTx:t});let i=await fetch(`${rn}/gateway/contracts/deploy`,{method:"POST",body:JSON.stringify(n),headers:{"Accept-Encoding":"gzip, deflate, br","Content-Type":"application/json",Accept:"application/json"}});if(i.ok)return i.json();throw new Error(`Error while posting contract. Sequencer responded with status ${i.status} ${i.statusText}`)}};var g6=ct(Pa());var mo=class{constructor(e,t,n=null){this.contractTxId=e;this.depth=t;this.innerCallType=n;this.id=vd()}interactions={};id;addInteractionData(e){let{interaction:t,interactionTx:n}=e,i=Ms.create(new ku(n.id,n.sortKey,n.block.height,n.block.timestamp,t?.caller,t?.input.function,t?.input,n.dry,{}));return this.interactions[n.id]=i,i}getInteraction(e){return this.interactions[e]}print(){return JSON.stringify(this,null,2)}},Ms=class{constructor(e){this.interactionInput=e}interactionOutput;static create(e){return new Ms(e)}update(e){this.interactionOutput=e}},ku=class{constructor(e,t,n,i,o,s,f,h,g={}){this.txId=e;this.sortKey=t;this.blockHeight=n;this.blockTimestamp=i;this.caller=o;this.functionName=s;this.functionArguments=f;this.dryWrite=h;this.foreignContractCalls=g}},Ep=class{constructor(e,t,n,i,o="",s){this.cacheHit=e;this.outputState=t;this.executionTime=n;this.valid=i;this.errorMessage=o;this.gasUsed=s}};async function Lu(r,e,t,n,i,o="",s="0",f=!1,h,g){let _={data:Math.random().toString().slice(-4)};o&&o.length&&(_.target=o.toString(),s&&+s>0&&(_.quantity=s.toString())),f&&(_.reward="72600854",_.last_tx="p7vc1iSP6bvH_fCeUFa9LqoV5qiyW-jdEKouAT0XMoSwrNraB9mgpi29Q10waEpO"),g&&g.length&&(_.reward=g);let T=await r.createTransaction(_);if(!n)throw new Error(`Input should be a truthy value: ${JSON.stringify(n)}`);if(i&&i.length)for(let I of i)T.addTag(I.name.toString(),I.value.toString());return T.addTag("App-Name","SmartWeaveAction"),T.addTag("App-Version","0.3.0"),T.addTag("SDK","Warp"),T.addTag("Contract",t),T.addTag("Input",JSON.stringify(n)),h&&T.addTag("Warp-Testnet","1.0.0"),e&&await e(T),T}function Ap(r,e,t){let i=new kt().decodeTags(r);return{id:r.id,owner:{address:e,key:""},recipient:r.target,tags:i,fee:{winston:r.reward,ar:""},quantity:{winston:r.quantity,ar:""},block:{id:t.indep_hash,height:t.height,timestamp:t.timestamp,previous:null},dry:!0,anchor:null,signature:null,data:null,parent:null,bundledIn:null}}var si={target:"",winstonQty:"0"};var gf=class{eval(e){let t=[];return Object.keys(e.interactions).forEach(n=>{let i=e.interactions[n];this.evalForeignCalls(e.contractTxId,i,t)}),t}evalForeignCalls(e,t,n){Object.keys(t.interactionInput.foreignContractCalls).forEach(i=>{let o=t.interactionInput.foreignContractCalls[i];Object.keys(o.interactions).forEach(s=>{let f=o.interactions[s];f.interactionInput.dryWrite&&!n.includes(o.contractTxId)&&e!==o.contractTxId&&n.push(o.contractTxId),this.evalForeignCalls(e,f,n)})})}};var h6=ct(Eu()),d6=ct(zd());var _F=new h6.default.ec("secp256k1"),p6=_F.genKeyPair(),SF=p6.getPublic(!0,"hex");function Du(r,e){let t=e.utils.stringToBuffer(r),[n,i]=(0,d6.Evaluate)(p6.getPrivate().toArray(),t);return{index:e.utils.bufferTob64Url(n),proof:e.utils.bufferTob64Url(i),bigint:bd(n).toString(),pubkey:SF}}var yf=class{rootOptions;saferEvaluationOptions={internalWrites:e=>{if(e.internalWrites===void 0||this.rootOptions.internalWrites==e.internalWrites)return this.rootOptions.internalWrites;if(this.rootOptions.internalWrites&&!e.internalWrites||!this.rootOptions.internalWrites&&e.internalWrites)return e.internalWrites;throw new Error('Could not determine "internalWrites" value ')},throwOnInternalWriteError:e=>e.throwOnInternalWriteError===void 0?this.rootOptions.throwOnInternalWriteError:e.throwOnInternalWriteError,unsafeClient:e=>{if(e.unsafeClient===void 0||this.rootOptions.unsafeClient==e.unsafeClient)return this.rootOptions.unsafeClient;if(this.rootOptions.unsafeClient==="throw"||this.rootOptions.unsafeClient==="skip")return this.rootOptions.unsafeClient;if(this.rootOptions.unsafeClient==="allow")return e.unsafeClient==="throw"?"skip":e.unsafeClient;throw new Error('Could not determine "unsafeClient" value')},ignoreExceptions:e=>{if(e.ignoreExceptions===void 0||this.rootOptions.ignoreExceptions==e.ignoreExceptions)return this.rootOptions.ignoreExceptions;if(this.rootOptions.ignoreExceptions&&!e.ignoreExceptions)return this.rootOptions.ignoreExceptions;if(!this.rootOptions.ignoreExceptions&&e.ignoreExceptions)return this.rootOptions.ignoreExceptions;throw new Error('Could not determine "ignoreExceptions" value')},waitForConfirmation:()=>this.rootOptions.waitForConfirmation,updateCacheForEachInteraction:()=>this.rootOptions.updateCacheForEachInteraction,maxCallDepth:()=>this.rootOptions.maxCallDepth,maxInteractionEvaluationTimeSeconds:()=>this.rootOptions.maxInteractionEvaluationTimeSeconds,stackTrace:()=>this.rootOptions.stackTrace,sequencerUrl:()=>this.rootOptions.sequencerUrl,gasLimit:()=>this.rootOptions.gasLimit,useVM2:()=>this.rootOptions.useVM2,allowBigInt:()=>this.rootOptions.allowBigInt,walletBalanceUrl:()=>this.rootOptions.walletBalanceUrl,mineArLocalBlocks:()=>this.rootOptions.mineArLocalBlocks,cacheEveryNInteractions:()=>this.rootOptions.cacheEveryNInteractions};constructor(e,t){if(t){let n=[];for(let i in t)e[i]!==t[i]&&n.push(`Option {${i}} differs. EvaluationOptions: [${e[i]}], manifest: [${t[i]}]. Use contract.setEvaluationOptions({${i}: ${t[i]}) to evaluate contract state.`);if(n.length)throw new Error(n.join(`
`))}this.rootOptions=Object.freeze(Object.assign({},e,t||{}))}forForeignContract(e){let t=Yn(this.rootOptions);if(e)for(let n in e)t[n]=this.saferEvaluationOptions[n](e);return Object.freeze(t)}};var bo=class{constructor(e,t,n=null,i=null){this._contractTxId=e;this.warp=t;this._parentContract=n;this._innerCallData=i;if(this.waitForConfirmation=this.waitForConfirmation.bind(this),this._arweaveWrapper=new kr(t.arweave),this._sorter=new ao(t.arweave),n!=null){this._evaluationOptions=this.getRoot().evaluationOptions(),this._callDepth=n.callDepth()+1;let o=n.getCallStack().getInteraction(i.callingInteraction.id);if(this._callDepth>this._evaluationOptions.maxCallDepth)throw Error(`Max call depth of ${this._evaluationOptions.maxCallDepth} has been exceeded for interaction ${JSON.stringify(o.interactionInput)}`);if(this.logger.debug("Calling interaction",{id:i.callingInteraction.id,sortKey:i.callingInteraction.sortKey,type:i.callType}),o.interactionInput?.foreignContractCalls[e]?.innerCallType==="write"&&i.callType==="read")throw new Error("Calling a readContractState after performing an inner write is wrong - instead use a state from the result of an internal write.");let s=new mo(e,this._callDepth,i?.callType);o.interactionInput.foreignContractCalls[e]=s,this._callStack=s,this._rootSortKey=n.rootSortKey}else this._callDepth=0,this._callStack=new mo(e,0),this._rootSortKey=null,this._evaluationOptions=new ua;this.getCallStack=this.getCallStack.bind(this)}logger=Ee.INST.create("HandlerBasedContract");ecLogger=Ee.INST.create("ExecutionContext");_callStack;_evaluationOptions;_eoEvaluator;_innerWritesEvaluator=new gf;_callDepth;_benchmarkStats=null;_arweaveWrapper;_sorter;_rootSortKey;signature;async readState(e,t,n){this.logger.info("Read state for",{contractTxId:this._contractTxId,currentTx:t,sortKeyOrBlockHeight:e});let i=et.measure();if(this.maybeResetRootContract(),!this.isRoot()&&e==null)throw new Error("SortKey MUST be always set for non-root contract calls");let{stateEvaluator:o}=this.warp,s=typeof e=="number"?this._sorter.generateLastSortKey(e):e,f=await this.createExecutionContext(this._contractTxId,s,!1,n);this.logger.info("Execution Context",{srcTxId:f.contractDefinition?.srcTxId,missingInteractions:f.sortedInteractions?.length,cachedSortKey:f.cachedState?.sortKey}),i.stop();let h=et.measure(),g=await o.eval(f,t||[]);h.stop();let _=i.elapsed(!0)+h.elapsed(!0);return this._benchmarkStats={gatewayCommunication:i.elapsed(!0),stateEvaluation:h.elapsed(!0),total:_},this.logger.info("Benchmark",{"Gateway communication  ":i.elapsed(),"Contract evaluation    ":h.elapsed(),"Total:                 ":`${_.toFixed(0)}ms`}),g}async readStateFor(e){return this.readState(void 0,void 0,e)}async viewState(e,t=[],n=si){return this.logger.info("View state for",this._contractTxId),await this.callContract(e,void 0,void 0,t,n)}async viewStateForTx(e,t){return this.logger.info(`View state for ${this._contractTxId}`,t),await this.callContractForTx(e,t)}async dryWrite(e,t,n,i){return this.logger.info("Dry-write for",this._contractTxId),await this.callContract(e,t,void 0,n,i)}async dryWriteFromTx(e,t,n){return this.logger.info(`Dry-write from transaction ${t.id} for ${this._contractTxId}`),await this.callContractForTx(e,t,n||[])}async writeInteraction(e,t){if(this.logger.info("Write interaction",{input:e,options:t}),!this.signature)throw new Error("Wallet not connected. Use 'connect' method first.");let{arweave:n,interactionsLoader:i,environment:o}=this.warp;await this.warp.definitionLoader.load(this._contractTxId);let s=t?.tags||[],f=t?.transfer||si,h=t?.strict===!0,g=t?.vrf===!0,_=t?.disableBundling===!0,T=t?.reward,I=i.type()=="warp"&&!_;if(this.signature.checkNonArweaveSigningAvailability(I),I&&f.target!=si.target&&f.winstonQty!=si.winstonQty)throw new Error("Ar Transfers are not allowed for bundled interactions");if(g&&!I&&o==="mainnet")throw new Error("Vrf generation is only available for bundle interaction");if(I)return await this.bundleInteraction(e,{tags:s,strict:h,vrf:g});{let x=await this.createInteraction(e,s,f,h,!1,g&&o!=="mainnet",T),C=await n.transactions.post(x);if(C.status!==200)return this.logger.error("Error while posting transaction",C),null;if(this._evaluationOptions.waitForConfirmation){this.logger.info("Waiting for confirmation of",x.id);let j=et.measure();await this.waitForConfirmation(x.id),this.logger.info("Transaction confirmed after",j.elapsed())}return this.warp.environment=="local"&&this._evaluationOptions.mineArLocalBlocks&&await this.warp.testing.mineBlock(),{originalTxId:x.id}}}async bundleInteraction(e,t){this.logger.info("Bundle interaction input",e);let n=await this.createInteraction(e,t.tags,si,t.strict,!0,t.vrf);return{bundlrResponse:await fetch(`${this._evaluationOptions.sequencerUrl}gateway/sequencer/register`,{method:"POST",body:JSON.stringify(n),headers:{"Accept-Encoding":"gzip, deflate, br","Content-Type":"application/json",Accept:"application/json"}}).then(o=>(this.logger.debug(o),o.ok?o.json():Promise.reject(o))).catch(o=>{throw this.logger.error(o),o.body?.message&&this.logger.error(o.body.message),new Error(`Unable to bundle interaction: ${JSON.stringify(o)}`)}),originalTxId:n.id}}async createInteraction(e,t,n,i,o=!1,s=!1,f){if(this._evaluationOptions.internalWrites){let g=await this.callContract(e,void 0,void 0,t,n,i,s);if(i&&g.type!=="ok")throw Error(`Cannot create interaction: ${g.errorMessage}`);let _=this.getCallStack(),T=this._innerWritesEvaluator.eval(_);this.logger.debug("Input",e),this.logger.debug("Callstack",_.print()),T.forEach(I=>{t.push({name:"Interact-Write",value:I})}),this.logger.debug("Tags with inner calls",t)}else if(i){let g=await this.callContract(e,void 0,void 0,t,n,i,s);if(g.type!=="ok")throw Error(`Cannot create interaction: ${g.errorMessage}`)}return s&&t.push({name:"Request-Vrf",value:"true"}),await Lu(this.warp.arweave,this.signature.signer,this._contractTxId,e,t,n.target,n.winstonQty,o,this.warp.environment==="testnet",f)}txId(){return this._contractTxId}getCallStack(){return this._callStack}connect(e){return this.signature=new Tn(this.warp,e),this}setEvaluationOptions(e){if(!this.isRoot())throw new Error("Evaluation options can be set only for the root contract");return this._evaluationOptions={...this._evaluationOptions,...e},this}async waitForConfirmation(e){let{arweave:t}=this.warp,n=await t.transactions.getStatus(e);if(n.confirmed===null)this.logger.info(`Transaction ${e} not yet confirmed. Waiting another 20 seconds before next check.`),await Ga(2e4),await this.waitForConfirmation(e);else return this.logger.info(`Transaction ${e} confirmed`,n),n}async createExecutionContext(e,t,n=!1,i){let{definitionLoader:o,interactionsLoader:s,stateEvaluator:f}=this.warp,h=et.measure(),g=await f.latestAvailableState(e,t);this.logger.debug("cache lookup",h.elapsed()),h.reset();let _=Xn.evolvedSrcTxId(g?.cachedValue?.state),T,I,x;this.logger.debug("Cached state",g,t),g&&g.sortKey==t?(this.logger.debug("State fully cached, not loading interactions."),(n||_)&&(I=await o.load(e,_),T=await this.safeGetHandler(I))):([I,x]=await Promise.all([o.load(e,_),i?Promise.resolve(i):await s.load(e,g?.sortKey,this.getToSortKey(t),this._evaluationOptions)]),g?.sortKey&&(x=x.filter(j=>j.sortKey.localeCompare(g?.sortKey)>0)),t&&(x=x.filter(j=>j.sortKey.localeCompare(t)<=0)),this.logger.debug("contract and interactions load",h.elapsed()),this.isRoot()&&x.length&&(this._rootSortKey=x[x.length-1].sortKey),T=await this.safeGetHandler(I)),this.isRoot()&&(this._eoEvaluator=new yf(this.evaluationOptions(),I.manifest?.evaluationOptions));let C=this.isRoot()?this._eoEvaluator.rootOptions:this.getEoEvaluator().forForeignContract(I.manifest?.evaluationOptions);return this.ecLogger.debug(`Evaluation options ${e}:`,C),{warp:this.warp,contract:this,contractDefinition:I,sortedInteractions:x,evaluationOptions:C,handler:T,cachedState:g,requestedSortKey:t}}async safeGetHandler(e){let{executorFactory:t}=this.warp;try{return await t.create(e,this._evaluationOptions,this.warp)}catch(n){if(n.name=="ContractError"&&n.subtype=="unsafeClientSkip"){if(this.isRoot())return null;throw new Nr(n.message,n.subtype)}else throw n}}getToSortKey(e){return this._parentContract?.rootSortKey?e?this._parentContract.rootSortKey.localeCompare(e)>0?this._parentContract.rootSortKey:e:this._parentContract.rootSortKey:e}async createExecutionContextFromTx(e,t){let n=t.owner.address,i=t.sortKey;return{...await this.createExecutionContext(e,i,!0),caller:n}}maybeResetRootContract(){this.isRoot()&&(this.logger.debug("Clearing call stack for the root contract"),this._callStack=new mo(this.txId(),0),this._rootSortKey=null,this.warp.interactionsLoader.clearCache())}async callContract(e,t,n,i=[],o=si,s=!1,f=!1){this.logger.info("Call contract input",e),this.maybeResetRootContract(),this.signature||this.logger.warn("Wallet not set.");let{arweave:h,stateEvaluator:g}=this.warp,_=await this.createExecutionContext(this._contractTxId,n,!0),T=this.warp.environment=="mainnet"?await this._arweaveWrapper.warpGwBlock():await h.blocks.getCurrent(),I;if(t)I=t;else if(this.signature){let X=await h.createTransaction({data:Math.random().toString().slice(-4),reward:"72600854",last_tx:"p7vc1iSP6bvH_fCeUFa9LqoV5qiyW-jdEKouAT0XMoSwrNraB9mgpi29Q10waEpO"});await this.signature.signer(X),I=await h.wallets.ownerToAddress(X.owner)}else I="";this.logger.info("effectiveCaller",I),_={..._,caller:I};let x=await g.eval(_,[]);this.logger.info("Current state",x.cachedValue.state);let C={input:e,caller:_.caller};this.logger.debug("interaction",C);let j=await Lu(h,this.signature?.signer,this._contractTxId,e,i,o.target,o.winstonQty,!0,this.warp.environment==="testnet"),H=Ap(j,_.caller,T);this.logger.debug("Creating sortKey for",{blockId:H.block.id,id:H.id,height:H.block.height}),H.sortKey=await this._sorter.createSortKey(H.block.id,H.id,H.block.height,!0),H.strict=s,f&&(H.vrf=Du(H.sortKey,h));let z=await this.evalInteraction({interaction:C,interactionTx:H,currentTx:[]},_,x.cachedValue);return z.type!=="ok"&&this.logger.fatal("Error while interacting with contract",{type:z.type,error:z.errorMessage}),z}async callContractForTx(e,t,n){this.maybeResetRootContract();let i=await this.createExecutionContextFromTx(this._contractTxId,t),o=await this.warp.stateEvaluator.eval(i,n);this.logger.debug("callContractForTx - evalStateResult",{result:o.cachedValue.state,txId:this._contractTxId});let f={interaction:{input:e,caller:this._parentContract.txId()},interactionTx:t,currentTx:n},h=await this.evalInteraction(f,i,o.cachedValue);return h.originalValidity=o.cachedValue.validity,h.originalErrorMessages=o.cachedValue.errorMessages,h}async evalInteraction(e,t,n){let i=this.getCallStack().addInteractionData(e),o=et.measure(),s=await t.handler.handle(t,n,e);return i.update({cacheHit:!1,outputState:this._evaluationOptions.stackTrace.saveState?s.state:void 0,executionTime:o.elapsed(!0),valid:s.type==="ok",errorMessage:s.errorMessage,gasUsed:s.gasUsed}),s}parent(){return this._parentContract}callDepth(){return this._callDepth}evaluationOptions(){return this._evaluationOptions}lastReadStateStats(){return this._benchmarkStats}stateHash(e){let t=ho(e),n=g6.createHash("sha256");return n.update(t),n.digest("hex")}async syncState(e,t){let{stateEvaluator:n}=this.warp,i=await fetch(`${e}?${new URLSearchParams({id:this._contractTxId,...t})}`).then(o=>o.ok?o.json():Promise.reject(o)).catch(o=>{throw o.body?.message&&this.logger.error(o.body.message),new Error(`Unable to retrieve state. ${o.status}: ${o.body?.message}`)});return await n.syncState(this._contractTxId,i.sortKey,i.state,i.validity),this}async evolve(e,t){return await this.writeInteraction({function:"evolve",value:e},t)}get rootSortKey(){return this._rootSortKey}getRoot(){let e=this;for(;!e.isRoot();)e=e.parent();return e}getEoEvaluator(){return this.getRoot()._eoEvaluator}isRoot(){return this._parentContract==null}};var mf=class extends bo{async currentBalance(e){let t=await this.viewState({function:"balance",target:e});if(t.type!=="ok")throw Error(t.errorMessage);return t.result}async currentState(){return(await super.readState()).cachedValue.state}async transfer(e,t){return await this.writeInteraction({function:"transfer",...e},t)}};var Uu=class{constructor(e){this.arweave=e}async mineBlock(){this.validateEnv(),await this.arweave.api.get("mine")}async addFunds(e){let t=await this.arweave.wallets.getAddress(e);await this.arweave.api.get(`/mint/${t}/1000000000000000`)}async isArlocal(){return(await fetch(`${this.arweave.api.config.protocol}://${this.arweave.api.config.host}:${this.arweave.api.config.port}/info`).then(t=>t.ok?t.json():Promise.reject()).catch(t=>{throw new Error(`Unable to get network info: ${t.message}`)})).network.includes("arlocal")}async validateEnv(){if(!await this.isArlocal())throw new Error("Testing features are not available in a non testing environment")}};var qu=class{constructor(e,t){this.baseImplementation=e;this.sourceCode=t}async create(e,t,n){return Object.prototype.hasOwnProperty.call(this.sourceCode,e.txId)&&(e={...e,src:this.sourceCode[e.txId]}),await this.baseImplementation.create(e,t,n)}};var Fp=100;function Tp(r){return!r.node.parent?.id&&!r.node.bundledIn?.id}var Is=class{constructor(e,t){this.arweave=e;this.environment=t;this.arweaveWrapper=new kr(e),this.sorter=new ao(e)}logger=Ee.INST.create("ArweaveGatewayInteractionsLoader");arweaveWrapper;sorter;async load(e,t,n,i){this.logger.debug("Loading interactions for",{contractId:e,fromSortKey:t,toSortKey:n});let o=this.sorter.extractBlockHeight(t),s=this.sorter.extractBlockHeight(n),f={tags:[{name:"App-Name",values:["SmartWeaveAction"]},{name:"Contract",values:[e]}],blockFilter:{min:o,max:s},first:Fp},h=et.measure(),g=await this.loadPages(f);if(h.stop(),i.internalWrites){let I={tags:[{name:"Interact-Write",values:[e]}],blockFilter:{min:o,max:s},first:Fp},x=await this.loadPages(I);this.logger.debug("Inner writes interactions length:",x.length),g=g.concat(x)}g=g.filter(I=>I.node.block&&I.node.block.id&&I.node.block.height);let _=await this.sorter.sort(g);t&&n?_=_.filter(I=>I.node.sortKey.localeCompare(t)>0&&I.node.sortKey.localeCompare(n)<=0):t&&!n?_=_.filter(I=>I.node.sortKey.localeCompare(t)>0):!t&&n&&(_=_.filter(I=>I.node.sortKey.localeCompare(n)<=0)),this.logger.debug("All loaded interactions:",{from:t,to:n,loaded:_.length,time:h.elapsed()});let T=this.environment==="local"||this.environment==="testnet";return _.map(I=>{let x=I.node;return T&&x.tags.some(C=>C.name=="Request-Vrf"&&C.value==="true")&&(x.vrf=Du(x.sortKey,this.arweave)),x})}async loadPages(e){let t=await this.getNextPage(e),n=t.edges.filter(i=>Tp(i));for(;t.pageInfo.hasNextPage;){let i=t.edges[Fp-1].cursor;e={...e,after:i},t=await this.getNextPage(e),n.push(...t.edges.filter(o=>Tp(o)))}return n}async getNextPage(e){let t=et.measure(),n=await this.arweaveWrapper.gql(Is.query,e);for(this.logger.debug("GQL page load:",t.elapsed());n.status===403;)this.logger.warn(`GQL rate limiting, waiting ${Is._30seconds}ms before next try.`),await Ga(Is._30seconds),n=await this.arweaveWrapper.gql(Is.query,e);if(n.status!==200)throw new Error(`Unable to retrieve transactions. Arweave gateway responded with status ${n.status}.`);if(n.data.errors)throw this.logger.error(n.data.errors),new Error("Error while loading interaction transactions");return n.data.data.transactions}type(){return"arweave"}clearCache(){}},vo=Is;qs(vo,"query",`query Transactions($tags: [TagFilter!]!, $blockFilter: BlockFilter!, $first: Int!, $after: String) {
    transactions(tags: $tags, block: $blockFilter, first: $first, sort: HEIGHT_ASC, after: $after) {
      pageInfo {
        hasNextPage
      }
      edges {
        node {
          id
          owner { address }
          recipient
          tags {
            name
            value
          }
          block {
            height
            id
            timestamp
          }
          fee { winston }
          quantity { winston }
          parent { id }
          bundledIn { id }
        }
        cursor
      }
    }
  }`),qs(vo,"_30seconds",30*1e3);var Cs=class{constructor(e){this.delegate=e}logger=Ee.INST.create("CacheableInteractionsLoader");interactionsCache=new Map;async load(e,t,n,i){if(this.logger.debug("Loading interactions for",{contractTxId:e,fromSortKey:t,toSortKey:n}),this.interactionsCache.has(e)){let o=this.interactionsCache.get(e);if(o?.length){let s=o[o.length-1].sortKey;if(s.localeCompare(n)<0){let f=await this.delegate.load(e,s,n,i),h=o.concat(f);return this.interactionsCache.set(e,h),h}}return o}else{let o=await this.delegate.load(e,t,n,i);return o.length&&this.interactionsCache.set(e,o),o}}type(){return this.delegate.type()}clearCache(){this.interactionsCache.clear()}};var Hu=ct(eo()),O6=ct(ls());function x6(r){return r.arrayBuffer?r.arrayBuffer():new Promise((e,t)=>{let n=new FileReader;n.addEventListener("loadend",()=>{e(n.result)}),n.addEventListener("error",t),n.readAsArrayBuffer(r)})}async function EF(r){let e=await x6(r);return new Uint8Array(e)}function _6(r){return typeof Blob<"u"&&r instanceof Blob}function xf(r){return typeof SharedArrayBuffer<"u"&&r instanceof SharedArrayBuffer}var AF=typeof process<"u"&&process.versions&&typeof process.versions.node<"u"&&typeof process.versions.electron>"u";function FF(r){return r.byteOffset===0&&r.byteLength===r.buffer.byteLength}var $u=class{constructor(e){this.typedArray=e instanceof ArrayBuffer||xf(e)?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}async getLength(){return this.typedArray.byteLength}async read(e,t){return new Uint8Array(this.typedArray.buffer,this.typedArray.byteOffset+e,t)}},Wu=class{constructor(e){this.blob=e}async getLength(){return this.blob.size}async read(e,t){let n=this.blob.slice(e,e+t),i=await x6(n);return new Uint8Array(i)}async sliceAsBlob(e,t,n=""){return this.blob.slice(e,e+t,n)}};function TF(r,e){var t=Uint8Array;if(r[0]==3&&r[1]==0)return e||new t(0);var n=IF,i=S6,o=MF,s=E6,f=e==null;f&&(e=new t(r.length>>>2<<3));for(var h=0,g=0,_=0,T=0,I=0,x=0,C=0,j=0,H=0,z,X;h==0;){if(h=n(r,H,1),g=n(r,H+1,2),H+=3,g==0){(H&7)!=0&&(H+=8-(H&7));var Y=(H>>>3)+4,se=r[Y-4]|r[Y-3]<<8;f&&(e=Mp(e,j+se)),e.set(new t(r.buffer,r.byteOffset+Y,se),j),H=Y+se<<3,j+=se;continue}if(f&&(e=Mp(e,j+(1<<17))),g==1&&(z=Ae.flmap,X=Ae.fdmap,x=(1<<9)-1,C=(1<<5)-1),g==2){_=i(r,H,5)+257,T=i(r,H+5,5)+1,I=i(r,H+10,4)+4,H+=14;for(var G=0;G<38;G+=2)Ae.itree[G]=0,Ae.itree[G+1]=0;for(var q=1,G=0;G<I;G++){var J=i(r,H+G*3,3);Ae.itree[(Ae.ordr[G]<<1)+1]=J,J>q&&(q=J)}H+=3*I,bf(Ae.itree,q),vf(Ae.itree,q,Ae.imap),z=Ae.lmap,X=Ae.dmap,H=o(Ae.imap,(1<<q)-1,_+T,r,H,Ae.ttree);var Q=y6(Ae.ttree,0,_,Ae.ltree);x=(1<<Q)-1;var W=y6(Ae.ttree,_,T,Ae.dtree);C=(1<<W)-1,bf(Ae.ltree,Q),vf(Ae.ltree,Q,z),bf(Ae.dtree,W),vf(Ae.dtree,W,X)}for(;;){var R=z[s(r,H)&x];H+=R&15;var l=R>>>4;if(l>>>8==0)e[j++]=l;else{if(l==256)break;var b=j+l-254;if(l>264){var d=Ae.ldef[l-257];b=j+(d>>>3)+i(r,H,d&7),H+=d&7}var a=X[s(r,H)&C];H+=a&15;var u=a>>>4,v=Ae.ddef[u],E=(v>>>4)+n(r,H,v&15);for(H+=v&15,f&&(e=Mp(e,j+(1<<17)));j<b;)e[j]=e[j++-E],e[j]=e[j++-E],e[j]=e[j++-E],e[j]=e[j++-E];j=b}}}return e.length==j?e:e.slice(0,j)}function Mp(r,e){var t=r.length;if(e<=t)return r;var n=new Uint8Array(Math.max(t<<1,e));return n.set(r,0),n}function MF(r,e,t,n,i,o){for(var s=S6,f=E6,h=0;h<t;){var g=r[f(n,i)&e];i+=g&15;var _=g>>>4;if(_<=15)o[h]=_,h++;else{var T=0,I=0;_==16?(I=3+s(n,i,2),i+=2,T=o[h-1]):_==17?(I=3+s(n,i,3),i+=3):_==18&&(I=11+s(n,i,7),i+=7);for(var x=h+I;h<x;)o[h]=T,h++}}return i}function y6(r,e,t,n){for(var i=0,o=0,s=n.length>>>1;o<t;){var f=r[o+e];n[o<<1]=0,n[(o<<1)+1]=f,f>i&&(i=f),o++}for(;o<s;)n[o<<1]=0,n[(o<<1)+1]=0,o++;return i}function bf(r,e){for(var t=r.length,n,i,o,s,f,h=Ae.bl_count,s=0;s<=e;s++)h[s]=0;for(s=1;s<t;s+=2)h[r[s]]++;var g=Ae.next_code;for(n=0,h[0]=0,i=1;i<=e;i++)n=n+h[i-1]<<1,g[i]=n;for(o=0;o<t;o+=2)f=r[o+1],f!=0&&(r[o]=g[f],g[f]++)}function vf(r,e,t){for(var n=r.length,i=Ae.rev15,o=0;o<n;o+=2)if(r[o+1]!=0)for(var s=o>>1,f=r[o+1],h=s<<4|f,g=e-f,_=r[o]<<g,T=_+(1<<g);_!=T;){var I=i[_]>>>15-e;t[I]=h,_++}}function m6(r,e){for(var t=Ae.rev15,n=15-e,i=0;i<r.length;i+=2){var o=r[i]<<e-r[i+1];r[i]=t[o]>>>n}}function S6(r,e,t){return(r[e>>>3]|r[(e>>>3)+1]<<8)>>>(e&7)&(1<<t)-1}function IF(r,e,t){return(r[e>>>3]|r[(e>>>3)+1]<<8|r[(e>>>3)+2]<<16)>>>(e&7)&(1<<t)-1}function E6(r,e){return(r[e>>>3]|r[(e>>>3)+1]<<8|r[(e>>>3)+2]<<16)>>>(e&7)}var Ae=function(){var r=Uint16Array,e=Uint32Array;return{next_code:new r(16),bl_count:new r(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new r(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new e(32),flmap:new r(512),fltree:[],fdmap:new r(32),fdtree:[],lmap:new r(32768),ltree:[],ttree:[],dmap:new r(32768),dtree:[],imap:new r(512),itree:[],rev15:new r(1<<15),lhst:new e(286),dhst:new e(30),ihst:new e(19),lits:new e(15e3),strt:new r(1<<16),prev:new r(1<<15)}}();(function(){for(var r=32768,e=0;e<r;e++){var t=e;t=(t&2863311530)>>>1|(t&1431655765)<<1,t=(t&3435973836)>>>2|(t&858993459)<<2,t=(t&4042322160)>>>4|(t&252645135)<<4,t=(t&4278255360)>>>8|(t&16711935)<<8,Ae.rev15[e]=(t>>>16|t<<16)>>>17}function n(i,o,s){for(;o--!=0;)i.push(0,s)}for(var e=0;e<32;e++)Ae.ldef[e]=Ae.of0[e]<<3|Ae.exb[e],Ae.ddef[e]=Ae.df0[e]<<4|Ae.dxb[e];n(Ae.fltree,144,8),n(Ae.fltree,255-143,9),n(Ae.fltree,279-255,7),n(Ae.fltree,287-279,8),bf(Ae.fltree,9),vf(Ae.fltree,9,Ae.flmap),m6(Ae.fltree,9),n(Ae.fdtree,32,5),bf(Ae.fdtree,5),vf(Ae.fdtree,5,Ae.fdmap),m6(Ae.fdtree,5),n(Ae.itree,19,0),n(Ae.ltree,286,0),n(Ae.dtree,30,0),n(Ae.ttree,320,0)})();var b6={table:function(){for(var r=new Uint32Array(256),e=0;e<256;e++){for(var t=e,n=0;n<8;n++)t&1?t=3988292384^t>>>1:t=t>>>1;r[e]=t}return r}(),update:function(r,e,t,n){for(var i=0;i<n;i++)r=b6.table[(r^e[t+i])&255]^r>>>8;return r},crc:function(r,e,t){return b6.update(4294967295,r,e,t)^4294967295}};function CF(r,e){return TF(r,e)}var _f={numWorkers:1,workerURL:"",useWorkers:!1},BF=0,v6=0,Bp=!0,OF=[],ju=[],Bs=[],Op=new Map;function RF(r){A6(r.target);let{id:e,error:t,data:n}=r.data,i=Op.get(e);Op.delete(e),t?i.reject(t):i.resolve(n)}function Ip(r){return new Promise((e,t)=>{let n=new Worker(r);n.onmessage=i=>{i.data==="start"?(n.onerror=void 0,n.onmessage=void 0,e(n)):t(new Error(`unexpected message: ${i.data}`))},n.onerror=t})}function PF(r,e){return r.require(e)}var w6=function(){if(AF){let{Worker:r}=PF(module,"worker_threads");return{async createWorker(e){return new r(e)},addEventListener(e,t){e.on("message",n=>{t({target:e,data:n})})},async terminate(e){await e.terminate()}}}else return{async createWorker(r){try{return await Ip(r)}catch{console.warn("could not load worker:",r)}let e;try{let t=await fetch(r,{mode:"cors"});if(!t.ok)throw new Error(`could not load: ${r}`);e=await t.text(),r=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));let n=await Ip(r);return _f.workerURL=r,n}catch{console.warn("could not load worker via fetch:",r)}if(e!==void 0)try{r=`data:application/javascript;base64,${btoa(e)}`;let t=await Ip(r);return _f.workerURL=r,t}catch{console.warn("could not load worker via dataURI")}throw console.warn("workers will not be used"),new Error("can not start workers")},addEventListener(r,e){r.addEventListener("message",e)},async terminate(r){r.terminate()}}}();function A6(r){ju.push(r),F6()}async function NF(){if(ju.length===0&&v6<_f.numWorkers){++v6;try{let r=await w6.createWorker(_f.workerURL);OF.push(r),ju.push(r),w6.addEventListener(r,RF)}catch{Bp=!1}}return ju.pop()}function kF(r,e,t,n){let i=new Uint8Array(e);CF(r,i),n(t?new Blob([i],{type:t}):i.buffer)}async function F6(){if(Bs.length!==0){if(_f.useWorkers&&Bp){let r=await NF();if(Bp){if(r){if(Bs.length===0){A6(r);return}let{id:e,src:t,uncompressedSize:n,type:i,resolve:o,reject:s}=Bs.shift();Op.set(e,{id:e,resolve:o,reject:s});let f=[];r.postMessage({type:"inflate",data:{id:e,type:i,src:t,uncompressedSize:n}},f)}return}}for(;Bs.length;){let{src:r,uncompressedSize:e,type:t,resolve:n}=Bs.shift(),i=r;_6(r)&&(i=await EF(r)),kF(i,e,t,n)}}}function T6(r,e,t){return new Promise((n,i)=>{Bs.push({src:r,uncompressedSize:e,type:t,resolve:n,reject:i,id:BF++}),F6()})}function LF(r,e){let t=r&31,n=(r>>5&15)-1,i=(r>>9&127)+1980,o=0,s=(e&31)*2,f=e>>5&63,h=e>>11&31;return new Date(i,n,t,h,f,s,o)}var Rp=class{constructor(e,t){this._reader=e,this._rawEntry=t,this.name=t.name,this.nameBytes=t.nameBytes,this.size=t.uncompressedSize,this.compressedSize=t.compressedSize,this.comment=t.comment,this.commentBytes=t.commentBytes,this.compressionMethod=t.compressionMethod,this.lastModDate=LF(t.lastModFileDate,t.lastModFileTime),this.isDirectory=t.uncompressedSize===0&&t.name.endsWith("/"),this.encrypted=!!(t.generalPurposeBitFlag&1),this.externalFileAttributes=t.externalFileAttributes,this.versionMadeBy=t.versionMadeBy}async blob(e="application/octet-stream"){return await VF(this._reader,this._rawEntry,e)}async arrayBuffer(){return await GF(this._reader,this._rawEntry)}async text(){let e=await this.arrayBuffer();return wf(new Uint8Array(e))}async json(){let e=await this.text();return JSON.parse(e)}},Cp=22,DF=65535,UF=101010256,qF=101075792;async function Os(r,e,t){return await r.read(e,t)}async function Pp(r,e,t,n){return r.sliceAsBlob?await r.sliceAsBlob(e,t,n):await r.read(e,t)}var jF={unsigned(){return 0}};function It(r,e){return r[e]+r[e+1]*256}function Lt(r,e){return r[e]+r[e+1]*256+r[e+2]*65536+r[e+3]*16777216}function wo(r,e){return Lt(r,e)+Lt(r,e+4)*4294967296}var $F=new TextDecoder;function wf(r,e){return xf(r.buffer)&&(r=new Uint8Array(r)),$F.decode(r)}async function WF(r,e){let t=Math.min(Cp+DF,e),n=e-t,i=await Os(r,n,t);for(let o=t-Cp;o>=0;--o){if(Lt(i,o)!==UF)continue;let s=new Uint8Array(i.buffer,i.byteOffset+o,i.byteLength-o),f=It(s,4);if(f!==0)throw new Error(`multi-volume zip files are not supported. This is volume: ${f}`);let h=It(s,10),g=Lt(s,12),_=Lt(s,16),T=It(s,20),I=s.length-Cp;if(T!==I)throw new Error(`invalid comment length. expected: ${I}, actual: ${T}`);let x=new Uint8Array(s.buffer,s.byteOffset+22,T),C=wf(x);return h===65535||_===4294967295?await KF(r,n+o,C,x):await M6(r,_,g,h,C,x)}throw new Error("could not find end of central directory. maybe not zip file")}var HF=117853008;async function KF(r,e,t,n){let i=e-20,o=await Os(r,i,20);if(Lt(o,0)!==HF)throw new Error("invalid zip64 end of central directory locator signature");let s=wo(o,8),f=await Os(r,s,56);if(Lt(f,0)!==qF)throw new Error("invalid zip64 end of central directory record signature");let h=wo(f,32),g=wo(f,40),_=wo(f,48);return M6(r,_,g,h,t,n)}var zF=33639248;async function M6(r,e,t,n,i,o){let s=0,f=await Os(r,e,t),h=[];for(let _=0;_<n;++_){let T=f.subarray(s,s+46),I=Lt(T,0);if(I!==zF)throw new Error(`invalid central directory file header signature: 0x${I.toString(16)}`);let x={versionMadeBy:It(T,4),versionNeededToExtract:It(T,6),generalPurposeBitFlag:It(T,8),compressionMethod:It(T,10),lastModFileTime:It(T,12),lastModFileDate:It(T,14),crc32:Lt(T,16),compressedSize:Lt(T,20),uncompressedSize:Lt(T,24),fileNameLength:It(T,28),extraFieldLength:It(T,30),fileCommentLength:It(T,32),internalFileAttributes:It(T,36),externalFileAttributes:Lt(T,38),relativeOffsetOfLocalHeader:Lt(T,42)};if(x.generalPurposeBitFlag&64)throw new Error("strong encryption is not supported");s+=46;let C=f.subarray(s,s+x.fileNameLength+x.extraFieldLength+x.fileCommentLength);x.nameBytes=C.slice(0,x.fileNameLength),x.name=wf(x.nameBytes);let j=x.fileNameLength+x.extraFieldLength,H=C.slice(x.fileNameLength,j);x.extraFields=[];let z=0;for(;z<H.length-3;){let Y=It(H,z+0),se=It(H,z+2),G=z+4,q=G+se;if(q>H.length)throw new Error("extra field length exceeds extra field buffer size");x.extraFields.push({id:Y,data:H.slice(G,q)}),z=q}if(x.commentBytes=C.slice(j,j+x.fileCommentLength),x.comment=wf(x.commentBytes),s+=C.length,x.uncompressedSize===4294967295||x.compressedSize===4294967295||x.relativeOffsetOfLocalHeader===4294967295){let Y=x.extraFields.find(q=>q.id===1);if(!Y)throw new Error("expected zip64 extended information extra field");let se=Y.data,G=0;if(x.uncompressedSize===4294967295){if(G+8>se.length)throw new Error("zip64 extended information extra field does not include uncompressed size");x.uncompressedSize=wo(se,G),G+=8}if(x.compressedSize===4294967295){if(G+8>se.length)throw new Error("zip64 extended information extra field does not include compressed size");x.compressedSize=wo(se,G),G+=8}if(x.relativeOffsetOfLocalHeader===4294967295){if(G+8>se.length)throw new Error("zip64 extended information extra field does not include relative header offset");x.relativeOffsetOfLocalHeader=wo(se,G),G+=8}}let X=x.extraFields.find(Y=>Y.id===28789&&Y.data.length>=6&&Y.data[0]===1&&Lt(Y.data,1),jF.unsigned(x.nameBytes));if(X&&(x.fileName=wf(X.data.slice(5))),x.compressionMethod===0){let Y=x.uncompressedSize;if((x.generalPurposeBitFlag&1)!==0&&(Y+=12),x.compressedSize!==Y)throw new Error(`compressed size mismatch for stored file: ${x.compressedSize} != ${Y}`)}h.push(x)}return{zip:{comment:i,commentBytes:o},entries:h.map(_=>new Rp(r,_))}}async function I6(r,e){if(e.generalPurposeBitFlag&1)throw new Error("encrypted entries not supported");let t=await Os(r,e.relativeOffsetOfLocalHeader,30),n=await r.getLength(),i=Lt(t,0);if(i!==67324752)throw new Error(`invalid local file header signature: 0x${i.toString(16)}`);let o=It(t,26),s=It(t,28),f=e.relativeOffsetOfLocalHeader+t.length+o+s,h;if(e.compressionMethod===0)h=!1;else if(e.compressionMethod===8)h=!0;else throw new Error(`unsupported compression method: ${e.compressionMethod}`);let g=f,_=g+e.compressedSize;if(e.compressedSize!==0&&_>n)throw new Error(`file data overflows file bounds: ${g} +  ${e.compressedSize}  > ${n}`);return{decompress:h,fileDataStart:g}}async function GF(r,e){let{decompress:t,fileDataStart:n}=await I6(r,e);if(!t){let s=await Os(r,n,e.compressedSize);return FF(s)?s.buffer:s.slice().buffer}let i=await Pp(r,n,e.compressedSize);return await T6(i,e.uncompressedSize)}async function VF(r,e,t){let{decompress:n,fileDataStart:i}=await I6(r,e);if(!n){let f=await Pp(r,i,e.compressedSize,t);return _6(f)?f:new Blob([xf(f.buffer)?new Uint8Array(f):f],{type:t})}let o=await Pp(r,i,e.compressedSize);return await T6(o,e.uncompressedSize,t)}async function JF(r){let e;if(typeof Blob<"u"&&r instanceof Blob)e=new Wu(r);else if(r instanceof ArrayBuffer||r&&r.buffer&&r.buffer instanceof ArrayBuffer)e=new $u(r);else if(xf(r)||xf(r.buffer))e=new $u(r);else if(typeof r=="string"){let n=await fetch(r);if(!n.ok)throw new Error(`failed http request ${r}, status: ${n.status}: ${n.statusText}`);let i=await n.blob();e=new Wu(i)}else if(typeof r.getLength=="function"&&typeof r.read=="function")e=r;else throw new Error("unsupported source type");let t=await e.getLength();if(t>Number.MAX_SAFE_INTEGER)throw new Error(`file too large. size: ${t}. Only file sizes up 4503599627370496 bytes are supported`);return await WF(e,t)}async function C6(r){let{zip:e,entries:t}=await JF(r);return{zip:e,entries:Object.fromEntries(t.map(n=>[n.name,n]))}}var B6=ct(eo());var xo=class{constructor(e){this.src=e;this.splitted=this.splitBuffer(e),this.logger.debug(`Buffer splitted into ${this.splitted.length} parts`)}logger=Ee.INST.create("WasmSrc");splitted;wasmBinary(){return this.splitted[0]}async sourceCode(){let{entries:e}=await C6(this.splitted[1]),t=new Map;for(let[n,i]of Object.entries(e)){if(i.isDirectory)continue;let o=await i.text();t.set(n,o)}return t}additionalCode(){return this.splitted.length==2?null:this.splitted[2].toString()}splitBuffer(e){let t="",n=parseInt(e.toString("utf8",0,1));this.logger.debug(`Number of elements: ${n}`);let i=e.length,o=0,s=0;for(let g=2;g<i;g++){let _=e.toString("utf8",g,g+1);if(_=="|"&&o++,o==n){s=g+1;break}t+=_}this.logger.debug("Parsed:",{header:t,dataStart:s});let f=t.split("|").map(g=>parseInt(g));this.logger.debug("Lengths",f);let h=[];for(let g of f){let _=B6.Buffer.alloc(g),T=s+g;e.copy(_,0,s,T),s=T,h.push(_)}return h}};var Sf=class{constructor(e,t,n,i){this.baseUrl=e;this.cache=n;this.env=i;this.baseUrl=Va(e),this.contractDefinitionLoader=new _o(t,i),this.arweaveWrapper=new kr(t),this.tagsParser=new kt}rLogger=Ee.INST.create("WarpGatewayContractDefinitionLoader");contractDefinitionLoader;arweaveWrapper;tagsParser;async load(e,t){let n=e;t&&(n+=`_${t}`);let i=await this.cache.get(n,"cd");if(i){this.rLogger.debug("WarpGatewayContractDefinitionLoader: Hit from cache!");let f=i.cachedValue;return f.contractType=="wasm"&&f.srcBinary.data&&(f.srcBinary=Hu.Buffer.from(f.srcBinary.data)),this.verifyEnv(f),f}let o=et.measure(),s=await this.doLoad(e,t);return this.rLogger.info(`Contract definition loaded in: ${o.elapsed()}`),this.verifyEnv(s),await this.cache.put({contractTxId:n,sortKey:"cd"},s),s}async doLoad(e,t){try{let n=await fetch(`${this.baseUrl}/gateway/contract?txId=${e}${t?`&srcTxId=${t}`:""}`).then(i=>i.ok?i.json():Promise.reject(i)).catch(i=>{throw i.body?.message&&this.rLogger.error(i.body.message),new Error(`Unable to retrieve contract data. Warp gateway responded with status ${i.status}:${i.body?.message}`)});if(n.srcBinary!=null&&!(n.srcBinary instanceof Hu.Buffer)&&(n.srcBinary=Hu.Buffer.from(n.srcBinary.data)),n.srcBinary){let i=new xo(n.srcBinary);n.srcBinary=i.wasmBinary();let o;n.srcTx?o=new O6.default({...n.srcTx}):o=await this.arweaveWrapper.tx(n.srcTxId);let s=JSON.parse(this.tagsParser.getTag(o,"Wasm-Meta"));n.metadata=s}return n.contractType=n.src?"js":"wasm",n}catch(n){return this.rLogger.warn("Falling back to default contracts loader",n),await this.contractDefinitionLoader.doLoad(e,t)}}async loadContractSource(e){return await this.contractDefinitionLoader.loadContractSource(e)}type(){return"warp"}setCache(e){this.cache=e}getCache(){return this.cache}verifyEnv(e){if(e.testnet&&this.env!=="testnet")throw new Error('Trying to use testnet contract in a non-testnet env. Use the "forTestnet" factory method.');if(!e.testnet&&this.env==="testnet")throw new Error("Trying to use non-testnet contract in a testnet env.")}};var Ef=class{constructor(e,t,n="custom"){this._arweave=e;this._stateCache=t;this._environment=n}_definitionLoader;_interactionsLoader;_executorFactory;_stateEvaluator;setDefinitionLoader(e){return this._definitionLoader=e,this}setInteractionsLoader(e){return this._interactionsLoader=e,this}setExecutorFactory(e){return this._executorFactory=e,this}setStateEvaluator(e){return this._stateEvaluator=e,this}overwriteSource(e){if(this._executorFactory==null)throw new Error("Set base ExecutorFactory first");return this._executorFactory=new qu(this._executorFactory,e),this.build()}useWarpGateway(e,t){this._interactionsLoader=new Cs(new rf(e.address,e.confirmationStatus,e.source));let n=new ji({...t,dbLocation:`${t.dbLocation}/contracts`});return this._definitionLoader=new Sf(e.address,this._arweave,n,this._environment),this}useArweaveGateway(){return this._definitionLoader=new _o(this._arweave,this._environment),this._interactionsLoader=new Cs(new vo(this._arweave,this._environment)),this}build(){return new So(this._arweave,this._definitionLoader,this._interactionsLoader,this._executorFactory,this._stateEvaluator,this._environment)}};var Np=["evm-signature-verification","smartweave-extension-nlp","smartweave-extension-ethers","subscription","ivm-handler-api","evaluation-progress"];var So=class{constructor(e,t,n,i,o,s="custom"){this.arweave=e;this.definitionLoader=t;this.interactionsLoader=n;this.executorFactory=i;this.stateEvaluator=o;this.environment=s;this.createContract=new pf(e,this),this.testing=new Uu(e)}createContract;testing;plugins=new Map;static builder(e,t,n){return new Ef(e,t,n)}contract(e,t,n){return new bo(e,this,t,n)}async deploy(e,t){return await this.createContract.deploy(e,t)}async deployFromSourceTx(e,t){return await this.createContract.deployFromSourceTx(e,t)}async deployBundled(e){return await this.createContract.deployBundled(e)}async createSourceTx(e,t){return await this.createContract.createSourceTx(e,t)}async saveSourceTx(e,t){return await this.createContract.saveSourceTx(e,t)}pst(e){return new mf(e,this)}useStateCache(e){return this.stateEvaluator.setCache(e),this}useContractCache(e){return this.definitionLoader.setCache(e),this}use(e){let t=e.type();if(!Np.some(n=>n==t))throw new Error(`Unknown plugin type ${t}.`);return this.plugins.set(t,e),this}hasPlugin(e){return this.plugins.has(e)}loadPlugin(e){if(!this.hasPlugin(e))throw new Error(`Plugin ${e} not registered.`);return this.plugins.get(e)}async generateWallet(){let e=await this.arweave.wallets.generate();return await this.testing.isArlocal()&&await this.testing.addFunds(e),{jwk:e,address:await this.arweave.wallets.jwkToAddress(e)}}};var rn="https://d1o5nlqr4okus2.cloudfront.net",zu={confirmationStatus:{notCorrupted:!0},source:null,address:rn},R6="./cache/warp",Rs={inMemory:!1,dbLocation:R6},kp=class{stateCache;static forLocal(e=1984,t=Ku.default.init({host:"localhost",port:e,protocol:"http"}),n={...Rs,inMemory:!0}){return this.customArweaveGw(t,n,"local")}static forTestnet(e=Rs,t=!1,n=Ku.default.init({host:"arweave.net",port:443,protocol:"https"})){return t?this.customArweaveGw(n,e,"testnet"):this.customWarpGw(n,zu,e,"testnet")}static forMainnet(e=Rs,t=!1,n=Ku.default.init({host:"arweave.net",port:443,protocol:"https"})){return t?this.customArweaveGw(n,e,"mainnet"):this.customWarpGw(n,zu,e,"mainnet")}static custom(e,t,n){let i=new ji({...t,dbLocation:`${t.dbLocation}/state`}),o=new ou(e,new uf(e),new $i),s=new of(e,i,[new Xn]);return So.builder(e,i,n).setExecutorFactory(o).setStateEvaluator(s)}static customArweaveGw(e,t=Rs,n){return this.custom(e,t,n).useArweaveGateway().build()}static customWarpGw(e,t=zu,n=Rs,i){return this.custom(e,n,i).useWarpGateway(t,n).build()}};var kr=class{constructor(e){this.arweave=e;this.baseUrl=`${e.api.config.protocol}://${e.api.config.host}:${e.api.config.port}`,this.logger.debug("baseurl",this.baseUrl)}logger=Ee.INST.create("ArweaveWrapper");baseUrl;async warpGwInfo(){return await this.doFetchInfo(`${rn}/gateway/arweave/info`)}async warpGwBlock(){return this.logger.debug("Calling warp gw block info"),await this.doFetchInfo(`${rn}/gateway/arweave/block`)}async info(){return await this.doFetchInfo(`${this.baseUrl}/info`)}async gql(e,t){try{let n=JSON.stringify({query:e,variables:t});return{data:await fetch(`${this.baseUrl}/graphql`,{method:"POST",body:n,headers:{"Accept-Encoding":"gzip, deflate, br","Content-Type":"application/json",Accept:"application/json"}}).then(o=>o.ok?o.json():Promise.reject(o)).catch(o=>{throw o.body?.message&&this.logger.error(o.body.message),new Error(`Unable to retrieve gql page. ${o.status}: ${o.body?.message}`)}),status:200}}catch(n){throw this.logger.error("Error while loading gql",n),n}}async tx(e){let t=await fetch(`${this.baseUrl}/tx/${e}`).then(n=>n.ok?n.json():Promise.reject(n)).catch(n=>{throw n.body?.message&&this.logger.error(n.body.message),new Error(`Unable to retrieve tx ${e}. ${n.status}. ${n.body?.message}`)});return new N6.default({...t})}async txData(e){let t=await fetch(`${this.baseUrl}/${e}`);if(t.ok){let n=await t.arrayBuffer();return Lp.Buffer.from(n)}else{this.logger.warn(`Unable to load data from arweave.net/${e} endpoint, falling back to arweave.js`);let n=await this.arweave.transactions.getData(e,{decode:!0});return Lp.Buffer.from(n)}}async txDataString(e){let t=await this.txData(e);return P6.default.utils.bufferToString(t)}async doFetchInfo(e){try{return await fetch(e).then(n=>n.ok?n.json():Promise.reject(n)).catch(n=>{throw n.body?.message&&this.logger.error(n.body.message),new Error(`Unable to retrieve info. ${n.status}: ${n.body?.message}`)})}catch(t){throw this.logger.error("Error while loading info",t),t}}};var XF=["application/javascript","application/wasm"],_o=class{constructor(e,t){this.arweave=e;this.env=t;this.arweaveWrapper=new kr(e),this.tagsParser=new kt}logger=Ee.INST.create("ContractDefinitionLoader");arweaveWrapper;tagsParser;async load(e,t){let n=et.measure(),i=await this.doLoad(e,t);return this.logger.info(`Contract definition loaded in: ${n.elapsed()}`),i}async doLoad(e,t){let n=et.measure(),i=await this.arweaveWrapper.tx(e),o=await this.arweave.wallets.ownerToAddress(i.owner);this.logger.debug("Contract tx and owner",n.elapsed()),n.reset();let s=t||this.tagsParser.getTag(i,"Contract-Src"),f=this.tagsParser.getTag(i,"Warp-Testnet")||null;if(f&&this.env!=="testnet")throw new Error('Trying to use testnet contract in a non-testnet env. Use the "forTestnet" factory method.');if(!f&&this.env==="testnet")throw new Error("Trying to use non-testnet contract in a testnet env.");let h=this.tagsParser.getTag(i,"Min-Fee"),g=null,_=this.tagsParser.getTag(i,"Contract-Manifest");_&&(g=JSON.parse(_)),this.logger.debug("Tags decoding",n.elapsed()),n.reset();let T=await this.evalInitialState(i);this.logger.debug("init state",T);let I=JSON.parse(await this.evalInitialState(i));this.logger.debug("Parsing src and init state",n.elapsed());let{src:x,srcBinary:C,srcWasmLang:j,contractType:H,metadata:z,srcTx:X}=await this.loadContractSource(s);return{txId:e,srcTxId:s,src:x,srcBinary:C,srcWasmLang:j,initState:I,minFee:h,owner:o,contractType:H,metadata:z,manifest:g,contractTx:i.toJSON(),srcTx:X,testnet:f}}async loadContractSource(e){let t=et.measure(),n=await this.arweaveWrapper.tx(e),i=this.tagsParser.getTag(n,"Content-Type");if(!XF.includes(i))throw new Error(`Contract source content type ${i} not supported`);let o=i=="application/javascript"?"js":"wasm",s=o=="js"?await this.arweaveWrapper.txDataString(e):await this.arweaveWrapper.txData(e),f,h,g;if(o=="wasm"){if(h=new xo(s),f=this.tagsParser.getTag(n,"Wasm-Lang"),!f)throw new Error(`Wasm lang not set for wasm contract src ${e}`);g=JSON.parse(this.tagsParser.getTag(n,"Wasm-Meta"))}return this.logger.debug("Contract src tx load",t.elapsed()),t.reset(),{src:o=="js"?s:null,srcBinary:o=="wasm"?h.wasmBinary():null,srcWasmLang:f,contractType:o,metadata:g,srcTx:n.toJSON()}}async evalInitialState(e){if(this.tagsParser.getTag(e,"Init-State"))return this.tagsParser.getTag(e,"Init-State");if(this.tagsParser.getTag(e,"Init-State-TX")){let t=this.tagsParser.getTag(e,"Init-State-TX");return this.arweaveWrapper.txDataString(t)}else return this.arweaveWrapper.txDataString(e.id)}type(){return"arweave"}setCache(e){throw new Error("No cache implemented for this loader")}getCache(){throw new Error("No cache implemented for this loader")}};var Dp=class{dtor};return W6(YF);})();
/*
 * [js-sha512]{@link https://github.com/emn178/js-sha512}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2018
 * @license MIT
 */
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */
